{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HostCapabilities = void 0;\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nvar serialization_1 = require(\"./serialization\");\nvar HostCapabilities = /** @class */function (_super) {\n  __extends(HostCapabilities, _super);\n  function HostCapabilities() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._capabilities = {};\n    return _this;\n  }\n  HostCapabilities.prototype.getSchemaKey = function () {\n    return \"HostCapabilities\";\n  };\n  HostCapabilities.prototype.internalParse = function (source, context) {\n    _super.prototype.internalParse.call(this, source, context);\n    if (source) {\n      // eslint-disable-next-line guard-for-in\n      for (var name_1 in source) {\n        var jsonVersion = source[name_1];\n        if (typeof jsonVersion === \"string\") {\n          if (jsonVersion === \"*\") {\n            this.addCapability(name_1, \"*\");\n          } else {\n            var version = serialization_1.Version.parse(jsonVersion, context);\n            if (version === null || version === void 0 ? void 0 : version.isValid) {\n              this.addCapability(name_1, version);\n            }\n          }\n        }\n      }\n    }\n  };\n  HostCapabilities.prototype.internalToJSON = function (target, context) {\n    _super.prototype.internalToJSON.call(this, target, context);\n    // eslint-disable-next-line guard-for-in\n    for (var key in this._capabilities) {\n      target[key] = this._capabilities[key];\n    }\n  };\n  HostCapabilities.prototype.addCapability = function (name, version) {\n    this._capabilities[name] = version;\n  };\n  HostCapabilities.prototype.removeCapability = function (name) {\n    delete this._capabilities[name];\n  };\n  HostCapabilities.prototype.clear = function () {\n    this._capabilities = {};\n  };\n  HostCapabilities.prototype.hasCapability = function (name, version) {\n    if (this._capabilities.hasOwnProperty(name)) {\n      if (version === \"*\" || this._capabilities[name] === \"*\") {\n        return true;\n      }\n      return version.compareTo(this._capabilities[name]) <= 0;\n    }\n    return false;\n  };\n  HostCapabilities.prototype.areAllMet = function (hostCapabilities) {\n    for (var capabilityName in this._capabilities) {\n      if (!hostCapabilities.hasCapability(capabilityName, this._capabilities[capabilityName])) {\n        return false;\n      }\n    }\n    return true;\n  };\n  return HostCapabilities;\n}(serialization_1.SerializableObject);\nexports.HostCapabilities = HostCapabilities;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAQA;EAAsCA;EAAtC;IAAA;IACYC,mBAAa,GAAqC,EAAE;;EAyEhE;EAvEcC,uCAAY,GAAtB;IACI,OAAO,kBAAkB;EAC7B,CAAC;EAESA,wCAAa,GAAvB,UAAwBC,MAAW,EAAEC,OAAiC;IAClEC,iBAAMC,aAAa,YAACH,MAAM,EAAEC,OAAO,CAAC;IAEpC,IAAID,MAAM,EAAE;MACR;MACA,KAAK,IAAMI,MAAI,IAAIJ,MAAM,EAAE;QACvB,IAAMK,WAAW,GAAGL,MAAM,CAACI,MAAI,CAAC;QAEhC,IAAI,OAAOC,WAAW,KAAK,QAAQ,EAAE;UACjC,IAAIA,WAAW,KAAK,GAAG,EAAE;YACrB,IAAI,CAACC,aAAa,CAACF,MAAI,EAAE,GAAG,CAAC;WAChC,MAAM;YACH,IAAMG,OAAO,GAAGC,uBAAO,CAACC,KAAK,CAACJ,WAAW,EAAEJ,OAAO,CAAC;YAEnD,IAAIM,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEG,OAAO,EAAE;cAClB,IAAI,CAACJ,aAAa,CAACF,MAAI,EAAEG,OAAO,CAAC;;;;;;EAMzD,CAAC;EAESR,yCAAc,GAAxB,UAAyBY,MAAmB,EAAEV,OAAiC;IAC3EC,iBAAMU,cAAc,YAACD,MAAM,EAAEV,OAAO,CAAC;IAErC;IACA,KAAK,IAAMY,GAAG,IAAI,IAAI,CAACC,aAAa,EAAE;MAClCH,MAAM,CAACE,GAAG,CAAC,GAAG,IAAI,CAACC,aAAa,CAACD,GAAG,CAAC;;EAE7C,CAAC;EAEDd,wCAAa,GAAb,UAAcgB,IAAY,EAAER,OAAsB;IAC9C,IAAI,CAACO,aAAa,CAACC,IAAI,CAAC,GAAGR,OAAO;EACtC,CAAC;EAEDR,2CAAgB,GAAhB,UAAiBgB,IAAY;IACzB,OAAO,IAAI,CAACD,aAAa,CAACC,IAAI,CAAC;EACnC,CAAC;EAEDhB,gCAAK,GAAL;IACI,IAAI,CAACe,aAAa,GAAG,EAAE;EAC3B,CAAC;EAEDf,wCAAa,GAAb,UAAcgB,IAAY,EAAER,OAAsB;IAC9C,IAAI,IAAI,CAACO,aAAa,CAACE,cAAc,CAACD,IAAI,CAAC,EAAE;MACzC,IAAIR,OAAO,KAAK,GAAG,IAAI,IAAI,CAACO,aAAa,CAACC,IAAI,CAAC,KAAK,GAAG,EAAE;QACrD,OAAO,IAAI;;MAGf,OAAOR,OAAO,CAACU,SAAS,CAAU,IAAI,CAACH,aAAa,CAACC,IAAI,CAAC,CAAC,IAAI,CAAC;;IAGpE,OAAO,KAAK;EAChB,CAAC;EAEDhB,oCAAS,GAAT,UAAUmB,gBAAkC;IACxC,KAAK,IAAMC,cAAc,IAAI,IAAI,CAACL,aAAa,EAAE;MAC7C,IACI,CAACI,gBAAgB,CAACE,aAAa,CAACD,cAAc,EAAE,IAAI,CAACL,aAAa,CAACK,cAAc,CAAC,CAAC,EACrF;QACE,OAAO,KAAK;;;IAIpB,OAAO,IAAI;EACf,CAAC;EACL,uBAAC;AAAD,CAAC,CA1EqCX,kCAAkB;AAA3Ca","names":["__extends","_this","HostCapabilities","source","context","_super","internalParse","name_1","jsonVersion","addCapability","version","serialization_1","parse","isValid","target","internalToJSON","key","_capabilities","name","hasOwnProperty","compareTo","hostCapabilities","capabilityName","hasCapability","exports"],"sourceRoot":"","sources":["../src/host-capabilities.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}