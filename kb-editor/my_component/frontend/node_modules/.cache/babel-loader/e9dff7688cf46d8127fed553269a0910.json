{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PopupMenu = void 0;\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nvar constants_1 = require(\"./constants\");\nvar collection_1 = require(\"./collection\");\nvar popup_control_1 = require(\"./popup-control\");\nvar PopupMenu = /** @class */function (_super) {\n  __extends(PopupMenu, _super);\n  function PopupMenu() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._items = new collection_1.Collection();\n    _this._renderedItems = [];\n    _this._selectedIndex = -1;\n    return _this;\n  }\n  PopupMenu.prototype.renderContent = function () {\n    var element = document.createElement(\"div\");\n    element.className = this.hostConfig.makeCssClassName(\"ac-ctrl ac-popup\");\n    element.setAttribute(\"role\", \"listbox\");\n    for (var i = 0; i < this._items.length; i++) {\n      var renderedItem = this._items.get(i).render(this.hostConfig);\n      renderedItem.tabIndex = 0;\n      element.appendChild(renderedItem);\n      if (i === this.selectedIndex) {\n        renderedItem.focus();\n      }\n      this._renderedItems.push(renderedItem);\n    }\n    return element;\n  };\n  PopupMenu.prototype.keyDown = function (e) {\n    _super.prototype.keyDown.call(this, e);\n    var selectedItemIndex = this._selectedIndex;\n    switch (e.key) {\n      case constants_1.Constants.keys.tab:\n        this.closePopup(true);\n        break;\n      /*\r\n      case Constants.keys.enter:\r\n          if (this.selectedIndex >= 0) {\r\n              this.selectedIndex = this.selectedIndex;\r\n                this.close();\r\n          }\r\n            break;\r\n      */\n      case constants_1.Constants.keys.up:\n        if (selectedItemIndex <= 0) {\n          selectedItemIndex = this._renderedItems.length - 1;\n        } else {\n          selectedItemIndex--;\n          if (selectedItemIndex < 0) {\n            selectedItemIndex = this._renderedItems.length - 1;\n          }\n        }\n        this.selectedIndex = selectedItemIndex;\n        e.cancelBubble = true;\n        break;\n      case constants_1.Constants.keys.down:\n        if (selectedItemIndex < 0) {\n          selectedItemIndex = 0;\n        } else {\n          selectedItemIndex++;\n          if (selectedItemIndex >= this._renderedItems.length) {\n            selectedItemIndex = 0;\n          }\n        }\n        this.selectedIndex = selectedItemIndex;\n        e.cancelBubble = true;\n        break;\n    }\n  };\n  Object.defineProperty(PopupMenu.prototype, \"items\", {\n    get: function () {\n      return this._items;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(PopupMenu.prototype, \"selectedIndex\", {\n    get: function () {\n      return this._selectedIndex;\n    },\n    set: function (index) {\n      if (index >= 0 && index < this._renderedItems.length) {\n        this._renderedItems[index].focus();\n        this._selectedIndex = index;\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return PopupMenu;\n}(popup_control_1.PopupControl);\nexports.PopupMenu = PopupMenu;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAGA;EAA+BA;EAA/B;IAAA;IACYC,YAAM,GAAyB,IAAIC,uBAAU,EAAY;IACzDD,oBAAc,GAAuB,EAAE;IACvCA,oBAAc,GAAW,CAAC,CAAC;;EA6FvC;EA3FcE,iCAAa,GAAvB;IACI,IAAMC,OAAO,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IAC7CF,OAAO,CAACG,SAAS,GAAG,IAAI,CAACC,UAAU,CAACC,gBAAgB,CAAC,kBAAkB,CAAC;IACxEL,OAAO,CAACM,YAAY,CAAC,MAAM,EAAE,SAAS,CAAC;IAEvC,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACC,MAAM,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;MACzC,IAAMG,YAAY,GAAG,IAAI,CAACF,MAAM,CAACG,GAAG,CAACJ,CAAC,CAAC,CAACK,MAAM,CAAC,IAAI,CAACR,UAAU,CAAC;MAC/DM,YAAY,CAACG,QAAQ,GAAG,CAAC;MAEzBb,OAAO,CAACc,WAAW,CAACJ,YAAY,CAAC;MAEjC,IAAIH,CAAC,KAAK,IAAI,CAACQ,aAAa,EAAE;QAC1BL,YAAY,CAACM,KAAK,EAAE;;MAGxB,IAAI,CAACC,cAAc,CAACC,IAAI,CAACR,YAAY,CAAC;;IAG1C,OAAOV,OAAO;EAClB,CAAC;EAEDD,2BAAO,GAAP,UAAQoB,CAAgB;IACpBC,iBAAMC,OAAO,YAACF,CAAC,CAAC;IAEhB,IAAIG,iBAAiB,GAAG,IAAI,CAACC,cAAc;IAE3C,QAAQJ,CAAC,CAACK,GAAG;MACT,KAAKC,qBAAS,CAACC,IAAI,CAACC,GAAG;QACnB,IAAI,CAACC,UAAU,CAAC,IAAI,CAAC;QAErB;MACJ;;;;;;;;MAUA,KAAKH,qBAAS,CAACC,IAAI,CAACG,EAAE;QAClB,IAAIP,iBAAiB,IAAI,CAAC,EAAE;UACxBA,iBAAiB,GAAG,IAAI,CAACL,cAAc,CAACR,MAAM,GAAG,CAAC;SACrD,MAAM;UACHa,iBAAiB,EAAE;UAEnB,IAAIA,iBAAiB,GAAG,CAAC,EAAE;YACvBA,iBAAiB,GAAG,IAAI,CAACL,cAAc,CAACR,MAAM,GAAG,CAAC;;;QAI1D,IAAI,CAACM,aAAa,GAAGO,iBAAiB;QAEtCH,CAAC,CAACW,YAAY,GAAG,IAAI;QAErB;MACJ,KAAKL,qBAAS,CAACC,IAAI,CAACK,IAAI;QACpB,IAAIT,iBAAiB,GAAG,CAAC,EAAE;UACvBA,iBAAiB,GAAG,CAAC;SACxB,MAAM;UACHA,iBAAiB,EAAE;UAEnB,IAAIA,iBAAiB,IAAI,IAAI,CAACL,cAAc,CAACR,MAAM,EAAE;YACjDa,iBAAiB,GAAG,CAAC;;;QAI7B,IAAI,CAACP,aAAa,GAAGO,iBAAiB;QAEtCH,CAAC,CAACW,YAAY,GAAG,IAAI;QAErB;IAAM;EAElB,CAAC;EAEDE,sBAAIjC,4BAAK;SAAT;MACI,OAAO,IAAI,CAACS,MAAM;IACtB,CAAC;;;;EAEDwB,sBAAIjC,oCAAa;SAAjB;MACI,OAAO,IAAI,CAACwB,cAAc;IAC9B,CAAC;SAED,UAAkBU,KAAa;MAC3B,IAAIA,KAAK,IAAI,CAAC,IAAIA,KAAK,GAAG,IAAI,CAAChB,cAAc,CAACR,MAAM,EAAE;QAClD,IAAI,CAACQ,cAAc,CAACgB,KAAK,CAAC,CAACjB,KAAK,EAAE;QAElC,IAAI,CAACO,cAAc,GAAGU,KAAK;;IAEnC,CAAC;;;;EACL,gBAAC;AAAD,CAAC,CAhG8BC,4BAAY;AAA9BC","names":["__extends","_this","collection_1","PopupMenu","element","document","createElement","className","hostConfig","makeCssClassName","setAttribute","i","_items","length","renderedItem","get","render","tabIndex","appendChild","selectedIndex","focus","_renderedItems","push","e","_super","keyDown","selectedItemIndex","_selectedIndex","key","constants_1","keys","tab","closePopup","up","cancelBubble","down","Object","index","popup_control_1","exports"],"sourceRoot":"","sources":["../../src/controls/popup-menu.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}