{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SerializableObject = exports.property = exports.SerializableObjectSchema = exports.CustomProperty = exports.SerializableObjectCollectionProperty = exports.SerializableObjectProperty = exports.EnumProperty = exports.ValueSetProperty = exports.StringArrayProperty = exports.PixelSizeProperty = exports.NumProperty = exports.BoolProperty = exports.StringProperty = exports.PropertyDefinition = exports.BaseSerializationContext = exports.isVersionLessOrEqual = exports.Versions = exports.Version = void 0;\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT License.\nvar shared_1 = require(\"./shared\");\nvar Utils = require(\"./utils\");\nvar Enums = require(\"./enums\");\nvar strings_1 = require(\"./strings\");\nvar Version = /** @class */function () {\n  function Version(major, minor, label) {\n    if (major === void 0) {\n      major = 1;\n    }\n    if (minor === void 0) {\n      minor = 1;\n    }\n    this._isValid = true;\n    this._major = major;\n    this._minor = minor;\n    this._label = label;\n  }\n  Version.parse = function (versionString, context) {\n    if (!versionString) {\n      return undefined;\n    }\n    var result = new Version();\n    result._versionString = versionString;\n    var regEx = /(\\d+).(\\d+)/gi;\n    var matches = regEx.exec(versionString);\n    if (matches != null && matches.length === 3) {\n      result._major = parseInt(matches[1]);\n      result._minor = parseInt(matches[2]);\n    } else {\n      result._isValid = false;\n    }\n    if (!result._isValid) {\n      context.logParseEvent(undefined, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidVersionString(result._versionString));\n    }\n    return result;\n  };\n  Version.prototype.toString = function () {\n    return !this._isValid ? this._versionString : this._major + \".\" + this._minor;\n  };\n  Version.prototype.toJSON = function () {\n    return this.toString();\n  };\n  Version.prototype.compareTo = function (otherVersion) {\n    if (!this.isValid || !otherVersion.isValid) {\n      throw new Error(\"Cannot compare invalid version.\");\n    }\n    if (this.major > otherVersion.major) {\n      return 1;\n    } else if (this.major < otherVersion.major) {\n      return -1;\n    } else if (this.minor > otherVersion.minor) {\n      return 1;\n    } else if (this.minor < otherVersion.minor) {\n      return -1;\n    }\n    return 0;\n  };\n  Object.defineProperty(Version.prototype, \"label\", {\n    get: function () {\n      return this._label ? this._label : this.toString();\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Version.prototype, \"major\", {\n    get: function () {\n      return this._major;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Version.prototype, \"minor\", {\n    get: function () {\n      return this._minor;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Version.prototype, \"isValid\", {\n    get: function () {\n      return this._isValid;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return Version;\n}();\nexports.Version = Version;\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class\nvar Versions = /** @class */function () {\n  function Versions() {}\n  /* eslint-enable @typescript-eslint/naming-convention */\n  Versions.getAllDeclaredVersions = function () {\n    var ctor = Versions;\n    var properties = [];\n    for (var propertyName in ctor) {\n      if (propertyName.match(/^v[0-9_]*$/)) {\n        // filter latest\n        try {\n          var propertyValue = ctor[propertyName];\n          if (propertyValue instanceof Version) {\n            properties.push(propertyValue);\n          }\n        } catch (_a) {\n          // If a property happens to have a getter function and\n          // it throws an exception, we need to catch it here\n        }\n      }\n    }\n    return properties.sort(function (v1, v2) {\n      return v1.compareTo(v2);\n    });\n  };\n  /* eslint-disable @typescript-eslint/naming-convention */\n  Versions.v1_0 = new Version(1, 0);\n  Versions.v1_1 = new Version(1, 1);\n  Versions.v1_2 = new Version(1, 2);\n  Versions.v1_3 = new Version(1, 3);\n  Versions.v1_4 = new Version(1, 4);\n  Versions.v1_5 = new Version(1, 5);\n  // If preview tag is added/removed from any version,\n  // don't forget to update .ac-schema-version-1-?::after too in adaptivecards-site\\themes\\adaptivecards\\source\\css\\style.css\n  Versions.v1_6 = new Version(1, 6, \"1.6 Preview\");\n  Versions.latest = Versions.v1_5;\n  return Versions;\n}();\nexports.Versions = Versions;\nfunction isVersionLessOrEqual(version, targetVersion) {\n  if (version instanceof Version) {\n    if (targetVersion instanceof Version) {\n      return targetVersion.compareTo(version) >= 0;\n    } else {\n      // Target version is *\n      return true;\n    }\n  } else {\n    // Version is *\n    return true;\n  }\n}\nexports.isVersionLessOrEqual = isVersionLessOrEqual;\nvar BaseSerializationContext = /** @class */function () {\n  function BaseSerializationContext(targetVersion) {\n    if (targetVersion === void 0) {\n      targetVersion = Versions.latest;\n    }\n    this._validationEvents = [];\n    this.targetVersion = targetVersion;\n  }\n  BaseSerializationContext.prototype.serializeValue = function (target, propertyName, propertyValue, defaultValue, forceDeleteIfNullOrDefault) {\n    if (defaultValue === void 0) {\n      defaultValue = undefined;\n    }\n    if (forceDeleteIfNullOrDefault === void 0) {\n      forceDeleteIfNullOrDefault = false;\n    }\n    if (propertyValue === null || propertyValue === undefined || propertyValue === defaultValue) {\n      if (!shared_1.GlobalSettings.enableFullJsonRoundTrip || forceDeleteIfNullOrDefault) {\n        delete target[propertyName];\n      }\n    } else if (propertyValue === defaultValue) {\n      delete target[propertyName];\n    } else {\n      target[propertyName] = propertyValue;\n    }\n  };\n  BaseSerializationContext.prototype.serializeString = function (target, propertyName, propertyValue, defaultValue) {\n    if (propertyValue === null || propertyValue === undefined || propertyValue === defaultValue) {\n      if (!shared_1.GlobalSettings.enableFullJsonRoundTrip) {\n        delete target[propertyName];\n      }\n    } else {\n      target[propertyName] = propertyValue;\n    }\n  };\n  BaseSerializationContext.prototype.serializeBool = function (target, propertyName, propertyValue, defaultValue) {\n    if (propertyValue === null || propertyValue === undefined || propertyValue === defaultValue) {\n      if (!shared_1.GlobalSettings.enableFullJsonRoundTrip) {\n        delete target[propertyName];\n      }\n    } else {\n      target[propertyName] = propertyValue;\n    }\n  };\n  BaseSerializationContext.prototype.serializeNumber = function (target, propertyName, propertyValue, defaultValue) {\n    if (propertyValue === null || propertyValue === undefined || propertyValue === defaultValue || isNaN(propertyValue)) {\n      if (!shared_1.GlobalSettings.enableFullJsonRoundTrip) {\n        delete target[propertyName];\n      }\n    } else {\n      target[propertyName] = propertyValue;\n    }\n  };\n  BaseSerializationContext.prototype.serializeEnum = function (enumType, target, propertyName, propertyValue, defaultValue) {\n    if (defaultValue === void 0) {\n      defaultValue = undefined;\n    }\n    if (propertyValue === null || propertyValue === undefined || propertyValue === defaultValue) {\n      if (!shared_1.GlobalSettings.enableFullJsonRoundTrip) {\n        delete target[propertyName];\n      }\n    } else {\n      target[propertyName] = enumType[propertyValue];\n    }\n  };\n  BaseSerializationContext.prototype.serializeArray = function (target, propertyName, propertyValue) {\n    var items = [];\n    if (propertyValue) {\n      for (var _i = 0, propertyValue_1 = propertyValue; _i < propertyValue_1.length; _i++) {\n        var item = propertyValue_1[_i];\n        var serializedItem = undefined;\n        if (item instanceof SerializableObject) {\n          serializedItem = item.toJSON(this);\n        } else if (item.toJSON) {\n          serializedItem = item.toJSON();\n        } else {\n          serializedItem = item;\n        }\n        if (serializedItem !== undefined) {\n          items.push(serializedItem);\n        }\n      }\n    }\n    if (items.length === 0) {\n      if (target.hasOwnProperty(propertyName) && Array.isArray(target[propertyName])) {\n        delete target[propertyName];\n      }\n    } else {\n      this.serializeValue(target, propertyName, items);\n    }\n  };\n  BaseSerializationContext.prototype.clearEvents = function () {\n    this._validationEvents = [];\n  };\n  BaseSerializationContext.prototype.logEvent = function (source, phase, event, message) {\n    this._validationEvents.push({\n      source: source,\n      phase: phase,\n      event: event,\n      message: message\n    });\n  };\n  BaseSerializationContext.prototype.logParseEvent = function (source, event, message) {\n    this.logEvent(source, Enums.ValidationPhase.Parse, event, message);\n  };\n  BaseSerializationContext.prototype.getEventAt = function (index) {\n    return this._validationEvents[index];\n  };\n  Object.defineProperty(BaseSerializationContext.prototype, \"eventCount\", {\n    get: function () {\n      return this._validationEvents.length;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return BaseSerializationContext;\n}();\nexports.BaseSerializationContext = BaseSerializationContext;\nvar SimpleSerializationContext = /** @class */function (_super) {\n  __extends(SimpleSerializationContext, _super);\n  function SimpleSerializationContext() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return SimpleSerializationContext;\n}(BaseSerializationContext);\nvar PropertyDefinition = /** @class */function () {\n  function PropertyDefinition(targetVersion, name, defaultValue, onGetInitialValue) {\n    this.targetVersion = targetVersion;\n    this.name = name;\n    this.defaultValue = defaultValue;\n    this.onGetInitialValue = onGetInitialValue;\n    this.isSerializationEnabled = true;\n    this.sequentialNumber = PropertyDefinition._sequentialNumber;\n    PropertyDefinition._sequentialNumber++;\n  }\n  PropertyDefinition.prototype.getInternalName = function () {\n    return this.name;\n  };\n  PropertyDefinition.prototype.parse = function (sender, source, context) {\n    return source[this.name];\n  };\n  PropertyDefinition.prototype.toJSON = function (sender, target, value, context) {\n    context.serializeValue(target, this.name, value, this.defaultValue);\n  };\n  PropertyDefinition._sequentialNumber = 0;\n  return PropertyDefinition;\n}();\nexports.PropertyDefinition = PropertyDefinition;\nvar StringProperty = /** @class */function (_super) {\n  __extends(StringProperty, _super);\n  function StringProperty(targetVersion, name, treatEmptyAsUndefined, regEx, defaultValue, onGetInitialValue) {\n    if (treatEmptyAsUndefined === void 0) {\n      treatEmptyAsUndefined = true;\n    }\n    var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;\n    _this.targetVersion = targetVersion;\n    _this.name = name;\n    _this.treatEmptyAsUndefined = treatEmptyAsUndefined;\n    _this.regEx = regEx;\n    _this.defaultValue = defaultValue;\n    _this.onGetInitialValue = onGetInitialValue;\n    return _this;\n  }\n  StringProperty.prototype.parse = function (sender, source, context) {\n    var parsedValue = Utils.parseString(source[this.name], this.defaultValue);\n    var isUndefined = parsedValue === undefined || parsedValue === \"\" && this.treatEmptyAsUndefined;\n    if (!isUndefined && this.regEx !== undefined) {\n      var matches = this.regEx.exec(parsedValue);\n      if (!matches) {\n        context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(parsedValue, this.name));\n        return undefined;\n      }\n    }\n    return parsedValue;\n  };\n  StringProperty.prototype.toJSON = function (sender, target, value, context) {\n    context.serializeString(target, this.name, value === \"\" && this.treatEmptyAsUndefined ? undefined : value, this.defaultValue);\n  };\n  return StringProperty;\n}(PropertyDefinition);\nexports.StringProperty = StringProperty;\nvar BoolProperty = /** @class */function (_super) {\n  __extends(BoolProperty, _super);\n  function BoolProperty(targetVersion, name, defaultValue, onGetInitialValue) {\n    var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;\n    _this.targetVersion = targetVersion;\n    _this.name = name;\n    _this.defaultValue = defaultValue;\n    _this.onGetInitialValue = onGetInitialValue;\n    return _this;\n  }\n  BoolProperty.prototype.parse = function (sender, source, context) {\n    return Utils.parseBool(source[this.name], this.defaultValue);\n  };\n  BoolProperty.prototype.toJSON = function (sender, target, value, context) {\n    context.serializeBool(target, this.name, value, this.defaultValue);\n  };\n  return BoolProperty;\n}(PropertyDefinition);\nexports.BoolProperty = BoolProperty;\nvar NumProperty = /** @class */function (_super) {\n  __extends(NumProperty, _super);\n  function NumProperty(targetVersion, name, defaultValue, onGetInitialValue) {\n    var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;\n    _this.targetVersion = targetVersion;\n    _this.name = name;\n    _this.defaultValue = defaultValue;\n    _this.onGetInitialValue = onGetInitialValue;\n    return _this;\n  }\n  NumProperty.prototype.parse = function (sender, source, context) {\n    return Utils.parseNumber(source[this.name], this.defaultValue);\n  };\n  NumProperty.prototype.toJSON = function (sender, target, value, context) {\n    context.serializeNumber(target, this.name, value, this.defaultValue);\n  };\n  return NumProperty;\n}(PropertyDefinition);\nexports.NumProperty = NumProperty;\nvar PixelSizeProperty = /** @class */function (_super) {\n  __extends(PixelSizeProperty, _super);\n  function PixelSizeProperty() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  PixelSizeProperty.prototype.parse = function (sender, source, context) {\n    var result = undefined;\n    var value = source[this.name];\n    if (typeof value === \"string\") {\n      var isValid = false;\n      try {\n        var size = shared_1.SizeAndUnit.parse(value, true);\n        if (size.unit === Enums.SizeUnit.Pixel) {\n          result = size.physicalSize;\n          isValid = true;\n        }\n      } catch (_a) {\n        // Do nothing. A parse error is emitted below\n      }\n      if (!isValid) {\n        context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(source[this.name], \"minHeight\"));\n      }\n    }\n    return result;\n  };\n  PixelSizeProperty.prototype.toJSON = function (sender, target, value, context) {\n    context.serializeValue(target, this.name, typeof value === \"number\" && !isNaN(value) ? value + \"px\" : undefined);\n  };\n  return PixelSizeProperty;\n}(PropertyDefinition);\nexports.PixelSizeProperty = PixelSizeProperty;\nvar StringArrayProperty = /** @class */function (_super) {\n  __extends(StringArrayProperty, _super);\n  function StringArrayProperty(targetVersion, name, defaultValue, onGetInitialValue) {\n    var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;\n    _this.targetVersion = targetVersion;\n    _this.name = name;\n    _this.defaultValue = defaultValue;\n    _this.onGetInitialValue = onGetInitialValue;\n    return _this;\n  }\n  StringArrayProperty.prototype.parse = function (sender, source, context) {\n    var sourceValue = source[this.name];\n    if (sourceValue === undefined || !Array.isArray(sourceValue)) {\n      return this.defaultValue;\n    }\n    var result = [];\n    for (var _i = 0, sourceValue_1 = sourceValue; _i < sourceValue_1.length; _i++) {\n      var value = sourceValue_1[_i];\n      if (typeof value === \"string\") {\n        result.push(value);\n      } else {\n        context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, \"Invalid array value \\\"\".concat(JSON.stringify(value), \"\\\" of type \\\"\").concat(typeof value, \"\\\" ignored for \\\"\").concat(this.name, \"\\\".\"));\n      }\n    }\n    return result;\n  };\n  StringArrayProperty.prototype.toJSON = function (sender, target, value, context) {\n    context.serializeArray(target, this.name, value);\n  };\n  return StringArrayProperty;\n}(PropertyDefinition);\nexports.StringArrayProperty = StringArrayProperty;\nvar ValueSetProperty = /** @class */function (_super) {\n  __extends(ValueSetProperty, _super);\n  function ValueSetProperty(targetVersion, name, values, defaultValue, onGetInitialValue) {\n    var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;\n    _this.targetVersion = targetVersion;\n    _this.name = name;\n    _this.values = values;\n    _this.defaultValue = defaultValue;\n    _this.onGetInitialValue = onGetInitialValue;\n    return _this;\n  }\n  ValueSetProperty.prototype.isValidValue = function (value, context) {\n    for (var _i = 0, _a = this.values; _i < _a.length; _i++) {\n      var versionedValue = _a[_i];\n      if (value.toLowerCase() === versionedValue.value.toLowerCase()) {\n        var targetVersion = versionedValue.targetVersion ? versionedValue.targetVersion : this.targetVersion;\n        return targetVersion.compareTo(context.targetVersion) <= 0;\n      }\n    }\n    return false;\n  };\n  ValueSetProperty.prototype.parse = function (sender, source, context) {\n    var sourceValue = source[this.name];\n    if (sourceValue === undefined) {\n      return this.defaultValue;\n    }\n    if (typeof sourceValue === \"string\") {\n      for (var _i = 0, _a = this.values; _i < _a.length; _i++) {\n        var versionedValue = _a[_i];\n        if (sourceValue.toLowerCase() === versionedValue.value.toLowerCase()) {\n          var targetVersion = versionedValue.targetVersion ? versionedValue.targetVersion : this.targetVersion;\n          if (targetVersion.compareTo(context.targetVersion) <= 0) {\n            return versionedValue.value;\n          } else {\n            context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.propertyValueNotSupported(sourceValue, this.name, targetVersion.toString(), context.targetVersion.toString()));\n            return this.defaultValue;\n          }\n        }\n      }\n    }\n    context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(sourceValue, this.name));\n    return this.defaultValue;\n  };\n  ValueSetProperty.prototype.toJSON = function (sender, target, value, context) {\n    var invalidValue = false;\n    if (value !== undefined) {\n      invalidValue = true;\n      for (var _i = 0, _a = this.values; _i < _a.length; _i++) {\n        var versionedValue = _a[_i];\n        if (versionedValue.value === value) {\n          var targetVersion = versionedValue.targetVersion ? versionedValue.targetVersion : this.targetVersion;\n          if (targetVersion.compareTo(context.targetVersion) <= 0) {\n            invalidValue = false;\n            break;\n          } else {\n            context.logEvent(sender, Enums.ValidationPhase.ToJSON, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.propertyValueNotSupported(value, this.name, targetVersion.toString(), context.targetVersion.toString()));\n          }\n        }\n      }\n    }\n    if (!invalidValue) {\n      context.serializeValue(target, this.name, value, this.defaultValue, true);\n    }\n  };\n  return ValueSetProperty;\n}(PropertyDefinition);\nexports.ValueSetProperty = ValueSetProperty;\nvar EnumProperty = /** @class */function (_super) {\n  __extends(EnumProperty, _super);\n  function EnumProperty(targetVersion, name, enumType, defaultValue, values, onGetInitialValue) {\n    var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;\n    _this.targetVersion = targetVersion;\n    _this.name = name;\n    _this.enumType = enumType;\n    _this.defaultValue = defaultValue;\n    _this.onGetInitialValue = onGetInitialValue;\n    _this._values = [];\n    if (!values) {\n      // eslint-disable-next-line guard-for-in\n      for (var key in enumType) {\n        var keyAsNumber = parseInt(key, 10);\n        if (keyAsNumber >= 0) {\n          _this._values.push({\n            value: keyAsNumber\n          });\n        }\n      }\n    } else {\n      _this._values = values;\n    }\n    return _this;\n  }\n  EnumProperty.prototype.parse = function (sender, source, context) {\n    var sourceValue = source[this.name];\n    if (typeof sourceValue !== \"string\") {\n      return this.defaultValue;\n    }\n    var enumValue = Utils.getEnumValueByName(this.enumType, sourceValue);\n    if (enumValue !== undefined) {\n      for (var _i = 0, _a = this.values; _i < _a.length; _i++) {\n        var versionedValue = _a[_i];\n        if (versionedValue.value === enumValue) {\n          var targetVersion = versionedValue.targetVersion ? versionedValue.targetVersion : this.targetVersion;\n          if (targetVersion.compareTo(context.targetVersion) <= 0) {\n            return enumValue;\n          } else {\n            context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.propertyValueNotSupported(sourceValue, this.name, targetVersion.toString(), context.targetVersion.toString()));\n            return this.defaultValue;\n          }\n        }\n      }\n    }\n    context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(sourceValue, this.name));\n    return this.defaultValue;\n  };\n  EnumProperty.prototype.toJSON = function (sender, target, value, context) {\n    var invalidValue = false;\n    if (value !== undefined) {\n      invalidValue = true;\n      for (var _i = 0, _a = this.values; _i < _a.length; _i++) {\n        var versionedValue = _a[_i];\n        if (versionedValue.value === value) {\n          var targetVersion = versionedValue.targetVersion ? versionedValue.targetVersion : this.targetVersion;\n          if (targetVersion.compareTo(context.targetVersion) <= 0) {\n            invalidValue = false;\n            break;\n          } else {\n            context.logEvent(sender, Enums.ValidationPhase.ToJSON, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(value, this.name));\n          }\n        }\n      }\n    }\n    if (!invalidValue) {\n      context.serializeEnum(this.enumType, target, this.name, value, this.defaultValue);\n    }\n  };\n  Object.defineProperty(EnumProperty.prototype, \"values\", {\n    get: function () {\n      return this._values;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return EnumProperty;\n}(PropertyDefinition);\nexports.EnumProperty = EnumProperty;\nvar SerializableObjectProperty = /** @class */function (_super) {\n  __extends(SerializableObjectProperty, _super);\n  function SerializableObjectProperty(targetVersion, name, objectType, nullable, defaultValue) {\n    if (nullable === void 0) {\n      nullable = false;\n    }\n    var _this = _super.call(this, targetVersion, name, defaultValue, function (sender) {\n      return _this.nullable ? undefined : new _this.objectType();\n    }) || this;\n    _this.targetVersion = targetVersion;\n    _this.name = name;\n    _this.objectType = objectType;\n    _this.nullable = nullable;\n    return _this;\n  }\n  SerializableObjectProperty.prototype.parse = function (sender, source, context) {\n    var sourceValue = source[this.name];\n    if (sourceValue === undefined) {\n      return this.onGetInitialValue ? this.onGetInitialValue(sender) : this.defaultValue;\n    }\n    var result = new this.objectType();\n    result.parse(sourceValue, context);\n    return result;\n  };\n  SerializableObjectProperty.prototype.toJSON = function (sender, target, value, context) {\n    var serializedValue = undefined;\n    if (value !== undefined && !value.hasAllDefaultValues()) {\n      serializedValue = value.toJSON(context);\n    }\n    if (typeof serializedValue === \"object\" && Object.keys(serializedValue).length === 0) {\n      serializedValue = undefined;\n    }\n    context.serializeValue(target, this.name, serializedValue, this.defaultValue, true);\n  };\n  return SerializableObjectProperty;\n}(PropertyDefinition);\nexports.SerializableObjectProperty = SerializableObjectProperty;\nvar SerializableObjectCollectionProperty = /** @class */function (_super) {\n  __extends(SerializableObjectCollectionProperty, _super);\n  function SerializableObjectCollectionProperty(targetVersion, name, objectType, onItemAdded) {\n    var _this = _super.call(this, targetVersion, name, undefined, function (sender) {\n      return [];\n    }) || this;\n    _this.targetVersion = targetVersion;\n    _this.name = name;\n    _this.objectType = objectType;\n    _this.onItemAdded = onItemAdded;\n    return _this;\n  }\n  SerializableObjectCollectionProperty.prototype.parse = function (sender, source, context) {\n    var result = [];\n    var sourceCollection = source[this.name];\n    if (Array.isArray(sourceCollection)) {\n      for (var _i = 0, sourceCollection_1 = sourceCollection; _i < sourceCollection_1.length; _i++) {\n        var sourceItem = sourceCollection_1[_i];\n        var item = new this.objectType();\n        item.parse(sourceItem, context);\n        result.push(item);\n        if (this.onItemAdded) {\n          this.onItemAdded(sender, item);\n        }\n      }\n    }\n    return result.length > 0 ? result : this.onGetInitialValue ? this.onGetInitialValue(sender) : undefined;\n  };\n  SerializableObjectCollectionProperty.prototype.toJSON = function (sender, target, value, context) {\n    context.serializeArray(target, this.name, value);\n  };\n  return SerializableObjectCollectionProperty;\n}(PropertyDefinition);\nexports.SerializableObjectCollectionProperty = SerializableObjectCollectionProperty;\nvar CustomProperty = /** @class */function (_super) {\n  __extends(CustomProperty, _super);\n  function CustomProperty(targetVersion, name, onParse, onToJSON, defaultValue, onGetInitialValue) {\n    var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;\n    _this.targetVersion = targetVersion;\n    _this.name = name;\n    _this.onParse = onParse;\n    _this.onToJSON = onToJSON;\n    _this.defaultValue = defaultValue;\n    _this.onGetInitialValue = onGetInitialValue;\n    if (!_this.onParse) {\n      throw new Error(\"CustomPropertyDefinition instances must have an onParse handler.\");\n    }\n    if (!_this.onToJSON) {\n      throw new Error(\"CustomPropertyDefinition instances must have an onToJSON handler.\");\n    }\n    return _this;\n  }\n  CustomProperty.prototype.parse = function (sender, source, context) {\n    return this.onParse(sender, this, source, context);\n  };\n  CustomProperty.prototype.toJSON = function (sender, target, value, context) {\n    this.onToJSON(sender, this, target, value, context);\n  };\n  return CustomProperty;\n}(PropertyDefinition);\nexports.CustomProperty = CustomProperty;\nvar SerializableObjectSchema = /** @class */function () {\n  function SerializableObjectSchema() {\n    this._properties = [];\n  }\n  SerializableObjectSchema.prototype.indexOf = function (prop) {\n    for (var i = 0; i < this._properties.length; i++) {\n      if (this._properties[i] === prop) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  SerializableObjectSchema.prototype.add = function () {\n    var properties = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      properties[_i] = arguments[_i];\n    }\n    for (var _a = 0, properties_1 = properties; _a < properties_1.length; _a++) {\n      var prop = properties_1[_a];\n      if (this.indexOf(prop) === -1) {\n        this._properties.push(prop);\n      }\n    }\n  };\n  SerializableObjectSchema.prototype.remove = function () {\n    var properties = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      properties[_i] = arguments[_i];\n    }\n    for (var _a = 0, properties_2 = properties; _a < properties_2.length; _a++) {\n      var prop = properties_2[_a];\n      while (true) {\n        var index = this.indexOf(prop);\n        if (index >= 0) {\n          this._properties.splice(index, 1);\n        } else {\n          break;\n        }\n      }\n    }\n  };\n  SerializableObjectSchema.prototype.getItemAt = function (index) {\n    return this._properties[index];\n  };\n  SerializableObjectSchema.prototype.getCount = function () {\n    return this._properties.length;\n  };\n  return SerializableObjectSchema;\n}();\nexports.SerializableObjectSchema = SerializableObjectSchema;\n// This is a decorator function, used to map SerializableObject descendant class members to\n// schema properties\nfunction property(prop) {\n  return function (target, propertyKey) {\n    var descriptor = Object.getOwnPropertyDescriptor(target, propertyKey) || {};\n    if (!descriptor.get && !descriptor.set) {\n      descriptor.get = function () {\n        return this.getValue(prop);\n      };\n      descriptor.set = function (value) {\n        this.setValue(prop, value);\n      };\n      Object.defineProperty(target, propertyKey, descriptor);\n    }\n  };\n}\nexports.property = property;\nvar SerializableObject = /** @class */function () {\n  function SerializableObject() {\n    this._propertyBag = {};\n    this._rawProperties = {};\n    this.maxVersion = SerializableObject.defaultMaxVersion;\n    var s = this.getSchema();\n    for (var i = 0; i < s.getCount(); i++) {\n      var prop = s.getItemAt(i);\n      if (prop.onGetInitialValue) {\n        this.setValue(prop, prop.onGetInitialValue(this));\n      }\n    }\n  }\n  SerializableObject.prototype.getDefaultSerializationContext = function () {\n    return new SimpleSerializationContext();\n  };\n  SerializableObject.prototype.populateSchema = function (schema) {\n    var ctor = this.constructor;\n    var properties = [];\n    // eslint-disable-next-line guard-for-in\n    for (var propertyName in ctor) {\n      try {\n        var propertyValue = ctor[propertyName];\n        if (propertyValue instanceof PropertyDefinition) {\n          properties.push(propertyValue);\n        }\n      } catch (_a) {\n        // If a property happens to have a getter function and\n        // it throws an exception, we need to catch it here\n      }\n    }\n    if (properties.length > 0) {\n      var sortedProperties = properties.sort(function (p1, p2) {\n        if (p1.sequentialNumber > p2.sequentialNumber) {\n          return 1;\n        } else if (p1.sequentialNumber < p2.sequentialNumber) {\n          return -1;\n        }\n        return 0;\n      });\n      schema.add.apply(schema, sortedProperties);\n    }\n    if (SerializableObject.onRegisterCustomProperties) {\n      SerializableObject.onRegisterCustomProperties(this, schema);\n    }\n  };\n  SerializableObject.prototype.getValue = function (prop) {\n    return this._propertyBag.hasOwnProperty(prop.getInternalName()) ? this._propertyBag[prop.getInternalName()] : prop.defaultValue;\n  };\n  SerializableObject.prototype.setValue = function (prop, value) {\n    if (value === undefined || value === null) {\n      delete this._propertyBag[prop.getInternalName()];\n    } else {\n      this._propertyBag[prop.getInternalName()] = value;\n    }\n  };\n  SerializableObject.prototype.internalParse = function (source, context) {\n    this._propertyBag = {};\n    this._rawProperties = shared_1.GlobalSettings.enableFullJsonRoundTrip ? source ? source : {} : {};\n    if (source) {\n      var s = this.getSchema();\n      for (var i = 0; i < s.getCount(); i++) {\n        var prop = s.getItemAt(i);\n        if (prop.isSerializationEnabled) {\n          var propertyValue = prop.onGetInitialValue ? prop.onGetInitialValue(this) : undefined;\n          if (source.hasOwnProperty(prop.name)) {\n            if (prop.targetVersion.compareTo(context.targetVersion) <= 0) {\n              propertyValue = prop.parse(this, source, context);\n            } else {\n              context.logParseEvent(this, Enums.ValidationEvent.UnsupportedProperty, strings_1.Strings.errors.propertyNotSupported(prop.name, prop.targetVersion.toString(), context.targetVersion.toString()));\n            }\n          }\n          this.setValue(prop, propertyValue);\n        }\n      }\n    } else {\n      this.resetDefaultValues();\n    }\n  };\n  SerializableObject.prototype.internalToJSON = function (target, context) {\n    var s = this.getSchema();\n    var serializedProperties = [];\n    for (var i = 0; i < s.getCount(); i++) {\n      var prop = s.getItemAt(i);\n      // Avoid serializing the same property multiple times. This is necessary\n      // because some property definitions map to the same underlying schema\n      // property\n      if (prop.isSerializationEnabled && prop.targetVersion.compareTo(context.targetVersion) <= 0 && serializedProperties.indexOf(prop.name) === -1) {\n        prop.toJSON(this, target, this.getValue(prop), context);\n        serializedProperties.push(prop.name);\n      }\n    }\n  };\n  SerializableObject.prototype.shouldSerialize = function (_context) {\n    return true;\n  };\n  SerializableObject.prototype.parse = function (source, context) {\n    this.internalParse(source, context ? context : new SimpleSerializationContext());\n  };\n  SerializableObject.prototype.toJSON = function (context) {\n    var effectiveContext;\n    if (context && context instanceof BaseSerializationContext) {\n      effectiveContext = context;\n    } else {\n      effectiveContext = this.getDefaultSerializationContext();\n      effectiveContext.toJSONOriginalParam = context;\n    }\n    if (this.shouldSerialize(effectiveContext)) {\n      var result = void 0;\n      if (shared_1.GlobalSettings.enableFullJsonRoundTrip && this._rawProperties && typeof this._rawProperties === \"object\") {\n        result = this._rawProperties;\n      } else {\n        result = {};\n      }\n      this.internalToJSON(result, effectiveContext);\n      return result;\n    } else {\n      return undefined;\n    }\n  };\n  SerializableObject.prototype.hasDefaultValue = function (prop) {\n    return this.getValue(prop) === prop.defaultValue;\n  };\n  SerializableObject.prototype.hasAllDefaultValues = function () {\n    var s = this.getSchema();\n    for (var i = 0; i < s.getCount(); i++) {\n      var prop = s.getItemAt(i);\n      if (!this.hasDefaultValue(prop)) {\n        return false;\n      }\n    }\n    return true;\n  };\n  SerializableObject.prototype.resetDefaultValues = function () {\n    var s = this.getSchema();\n    for (var i = 0; i < s.getCount(); i++) {\n      var prop = s.getItemAt(i);\n      this.setValue(prop, prop.defaultValue);\n    }\n  };\n  SerializableObject.prototype.setCustomProperty = function (name, value) {\n    var shouldDeleteProperty = typeof value === \"string\" && !value || value === undefined || value === null;\n    if (shouldDeleteProperty) {\n      delete this._rawProperties[name];\n    } else {\n      this._rawProperties[name] = value;\n    }\n  };\n  SerializableObject.prototype.getCustomProperty = function (name) {\n    return this._rawProperties[name];\n  };\n  SerializableObject.prototype.getSchema = function () {\n    var schema = SerializableObject._schemaCache[this.getSchemaKey()];\n    if (!schema) {\n      schema = new SerializableObjectSchema();\n      this.populateSchema(schema);\n      SerializableObject._schemaCache[this.getSchemaKey()] = schema;\n    }\n    return schema;\n  };\n  SerializableObject.defaultMaxVersion = Versions.latest;\n  SerializableObject._schemaCache = {};\n  return SerializableObject;\n}();\nexports.SerializableObject = SerializableObject;","map":{"version":3,"mappings":"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","names":["major","minor","label","_major","_minor","_label","Version","versionString","context","undefined","result","_versionString","regEx","matches","exec","length","parseInt","_isValid","logParseEvent","Enums","ValidationEvent","InvalidPropertyValue","strings_1","errors","invalidVersionString","toString","otherVersion","isValid","Error","Object","exports","Versions","ctor","properties","propertyName","match","propertyValue","push","sort","v1","v2","compareTo","v1_5","isVersionLessOrEqual","version","targetVersion","latest","BaseSerializationContext","target","defaultValue","forceDeleteIfNullOrDefault","shared_1","enableFullJsonRoundTrip","isNaN","enumType","items","propertyValue_1","_i","item","serializedItem","SerializableObject","toJSON","hasOwnProperty","Array","isArray","serializeValue","_validationEvents","source","phase","event","message","logEvent","ValidationPhase","Parse","index","__extends","name","onGetInitialValue","sequentialNumber","PropertyDefinition","_sequentialNumber","sender","value","treatEmptyAsUndefined","_super","_this","StringProperty","parsedValue","Utils","parseString","isUndefined","invalidPropertyValue","serializeString","BoolProperty","parseBool","serializeBool","NumProperty","parseNumber","serializeNumber","PixelSizeProperty","size","parse","unit","SizeUnit","Pixel","physicalSize","StringArrayProperty","sourceValue","sourceValue_1","JSON","stringify","serializeArray","values","ValueSetProperty","_a","versionedValue","toLowerCase","propertyValueNotSupported","invalidValue","ToJSON","key","keyAsNumber","_values","EnumProperty","enumValue","getEnumValueByName","serializeEnum","objectType","nullable","SerializableObjectProperty","serializedValue","hasAllDefaultValues","keys","onItemAdded","SerializableObjectCollectionProperty","sourceCollection","sourceCollection_1","sourceItem","onParse","onToJSON","CustomProperty","SerializableObjectSchema","prop","i","_properties","properties_1","indexOf","properties_2","splice","property","propertyKey","descriptor","getOwnPropertyDescriptor","get","set","getValue","setValue","defineProperty","defaultMaxVersion","s","getSchema","getCount","getItemAt","SimpleSerializationContext","schema","constructor","sortedProperties","p1","p2","add","onRegisterCustomProperties","_propertyBag","getInternalName","_rawProperties","isSerializationEnabled","UnsupportedProperty","propertyNotSupported","resetDefaultValues","serializedProperties","_context","internalParse","effectiveContext","getDefaultSerializationContext","toJSONOriginalParam","shouldSerialize","internalToJSON","hasDefaultValue","shouldDeleteProperty","_schemaCache","getSchemaKey","populateSchema"],"sourceRoot":"","sources":["../src/serialization.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}