{"version":3,"file":"adaptivecards-react.min.js","mappings":"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","sources":["webpack://AdaptiveCards/webpack/universalModuleDefinition","webpack://AdaptiveCards/./node_modules/linkify-it/index.js","webpack://AdaptiveCards/./node_modules/linkify-it/lib/re.js","webpack://AdaptiveCards/./node_modules/markdown-it/index.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/common/entities.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/common/html_blocks.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/common/html_re.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/common/utils.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/helpers/index.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/helpers/parse_link_destination.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/helpers/parse_link_label.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/helpers/parse_link_title.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/index.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/parser_block.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/parser_core.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/parser_inline.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/presets/commonmark.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/presets/default.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/presets/zero.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/renderer.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/ruler.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_block/blockquote.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_block/code.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_block/fence.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_block/heading.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_block/hr.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_block/html_block.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_block/lheading.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_block/list.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_block/paragraph.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_block/reference.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_block/state_block.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_block/table.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_core/block.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_core/inline.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_core/linkify.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_core/normalize.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_core/replacements.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_core/smartquotes.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_core/state_core.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_inline/autolink.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_inline/backticks.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_inline/balance_pairs.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_inline/emphasis.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_inline/entity.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_inline/escape.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_inline/html_inline.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_inline/image.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_inline/link.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_inline/newline.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_inline/state_inline.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_inline/strikethrough.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_inline/text.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/rules_inline/text_collapse.js","webpack://AdaptiveCards/./node_modules/markdown-it/lib/token.js","webpack://AdaptiveCards/./node_modules/mdurl/decode.js","webpack://AdaptiveCards/./node_modules/mdurl/encode.js","webpack://AdaptiveCards/./node_modules/mdurl/format.js","webpack://AdaptiveCards/./node_modules/mdurl/index.js","webpack://AdaptiveCards/./node_modules/mdurl/parse.js","webpack://AdaptiveCards/./node_modules/uc.micro/categories/Cc/regex.js","webpack://AdaptiveCards/./node_modules/uc.micro/categories/Cf/regex.js","webpack://AdaptiveCards/./node_modules/uc.micro/categories/P/regex.js","webpack://AdaptiveCards/./node_modules/uc.micro/categories/Z/regex.js","webpack://AdaptiveCards/./node_modules/uc.micro/index.js","webpack://AdaptiveCards/./node_modules/uc.micro/properties/Any/regex.js","webpack://AdaptiveCards/../adaptivecards/lib/activity-request.js","webpack://AdaptiveCards/../adaptivecards/lib/adaptive-applet.js","webpack://AdaptiveCards/../adaptivecards/lib/adaptivecards.js","webpack://AdaptiveCards/../adaptivecards/lib/card-elements.js","webpack://AdaptiveCards/../adaptivecards/lib/card-object.js","webpack://AdaptiveCards/../adaptivecards/lib/channel-adapter.js","webpack://AdaptiveCards/../adaptivecards/lib/controls/collection.js","webpack://AdaptiveCards/../adaptivecards/lib/controls/constants.js","webpack://AdaptiveCards/../adaptivecards/lib/controls/index.js","webpack://AdaptiveCards/../adaptivecards/lib/controls/menu-item.js","webpack://AdaptiveCards/../adaptivecards/lib/controls/popup-control.js","webpack://AdaptiveCards/../adaptivecards/lib/controls/popup-menu.js","webpack://AdaptiveCards/../adaptivecards/lib/enums.js","webpack://AdaptiveCards/../adaptivecards/lib/host-capabilities.js","webpack://AdaptiveCards/../adaptivecards/lib/host-config.js","webpack://AdaptiveCards/../adaptivecards/lib/registry.js","webpack://AdaptiveCards/../adaptivecards/lib/serialization.js","webpack://AdaptiveCards/../adaptivecards/lib/shared.js","webpack://AdaptiveCards/../adaptivecards/lib/strings.js","webpack://AdaptiveCards/../adaptivecards/lib/table.js","webpack://AdaptiveCards/../adaptivecards/lib/text-formatters.js","webpack://AdaptiveCards/../adaptivecards/lib/utils.js","webpack://AdaptiveCards/../node_modules/prop-types/factoryWithThrowingShims.js","webpack://AdaptiveCards/../node_modules/prop-types/index.js","webpack://AdaptiveCards/../node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack://AdaptiveCards/../node_modules/punycode/punycode.es6.js","webpack://AdaptiveCards/./src/adaptive-card.tsx","webpack://AdaptiveCards/./src/adaptivecards-react.ts","webpack://AdaptiveCards/./src/host-config-context.tsx","webpack://AdaptiveCards/external umd \"React\"","webpack://AdaptiveCards/webpack/bootstrap","webpack://AdaptiveCards/webpack/runtime/define property getters","webpack://AdaptiveCards/webpack/runtime/hasOwnProperty shorthand","webpack://AdaptiveCards/webpack/runtime/make namespace object","webpack://AdaptiveCards/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"React\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"React\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"AdaptiveCards\"] = factory(require(\"React\"));\n\telse\n\t\troot[\"AdaptiveCards\"] = factory(root[\"React\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE__1024__) {\nreturn ","'use strict';\n\n\n////////////////////////////////////////////////////////////////////////////////\n// Helpers\n\n// Merge objects\n//\nfunction assign(obj /*from1, from2, from3, ...*/) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n\n  sources.forEach(function (source) {\n    if (!source) { return; }\n\n    Object.keys(source).forEach(function (key) {\n      obj[key] = source[key];\n    });\n  });\n\n  return obj;\n}\n\nfunction _class(obj) { return Object.prototype.toString.call(obj); }\nfunction isString(obj) { return _class(obj) === '[object String]'; }\nfunction isObject(obj) { return _class(obj) === '[object Object]'; }\nfunction isRegExp(obj) { return _class(obj) === '[object RegExp]'; }\nfunction isFunction(obj) { return _class(obj) === '[object Function]'; }\n\n\nfunction escapeRE(str) { return str.replace(/[.?*+^$[\\]\\\\(){}|-]/g, '\\\\$&'); }\n\n////////////////////////////////////////////////////////////////////////////////\n\n\nvar defaultOptions = {\n  fuzzyLink: true,\n  fuzzyEmail: true,\n  fuzzyIP: false\n};\n\n\nfunction isOptionsObj(obj) {\n  return Object.keys(obj || {}).reduce(function (acc, k) {\n    return acc || defaultOptions.hasOwnProperty(k);\n  }, false);\n}\n\n\nvar defaultSchemas = {\n  'http:': {\n    validate: function (text, pos, self) {\n      var tail = text.slice(pos);\n\n      if (!self.re.http) {\n        // compile lazily, because \"host\"-containing variables can change on tlds update.\n        self.re.http =  new RegExp(\n          '^\\\\/\\\\/' + self.re.src_auth + self.re.src_host_port_strict + self.re.src_path, 'i'\n        );\n      }\n      if (self.re.http.test(tail)) {\n        return tail.match(self.re.http)[0].length;\n      }\n      return 0;\n    }\n  },\n  'https:':  'http:',\n  'ftp:':    'http:',\n  '//':      {\n    validate: function (text, pos, self) {\n      var tail = text.slice(pos);\n\n      if (!self.re.no_http) {\n      // compile lazily, because \"host\"-containing variables can change on tlds update.\n        self.re.no_http =  new RegExp(\n          '^' +\n          self.re.src_auth +\n          // Don't allow single-level domains, because of false positives like '//test'\n          // with code comments\n          '(?:localhost|(?:(?:' + self.re.src_domain + ')\\\\.)+' + self.re.src_domain_root + ')' +\n          self.re.src_port +\n          self.re.src_host_terminator +\n          self.re.src_path,\n\n          'i'\n        );\n      }\n\n      if (self.re.no_http.test(tail)) {\n        // should not be `://` & `///`, that protects from errors in protocol name\n        if (pos >= 3 && text[pos - 3] === ':') { return 0; }\n        if (pos >= 3 && text[pos - 3] === '/') { return 0; }\n        return tail.match(self.re.no_http)[0].length;\n      }\n      return 0;\n    }\n  },\n  'mailto:': {\n    validate: function (text, pos, self) {\n      var tail = text.slice(pos);\n\n      if (!self.re.mailto) {\n        self.re.mailto =  new RegExp(\n          '^' + self.re.src_email_name + '@' + self.re.src_host_strict, 'i'\n        );\n      }\n      if (self.re.mailto.test(tail)) {\n        return tail.match(self.re.mailto)[0].length;\n      }\n      return 0;\n    }\n  }\n};\n\n/*eslint-disable max-len*/\n\n// RE pattern for 2-character tlds (autogenerated by ./support/tlds_2char_gen.js)\nvar tlds_2ch_src_re = 'a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]';\n\n// DON'T try to make PRs with changes. Extend TLDs with LinkifyIt.tlds() instead\nvar tlds_default = 'biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|'.split('|');\n\n/*eslint-enable max-len*/\n\n////////////////////////////////////////////////////////////////////////////////\n\nfunction resetScanCache(self) {\n  self.__index__ = -1;\n  self.__text_cache__   = '';\n}\n\nfunction createValidator(re) {\n  return function (text, pos) {\n    var tail = text.slice(pos);\n\n    if (re.test(tail)) {\n      return tail.match(re)[0].length;\n    }\n    return 0;\n  };\n}\n\nfunction createNormalizer() {\n  return function (match, self) {\n    self.normalize(match);\n  };\n}\n\n// Schemas compiler. Build regexps.\n//\nfunction compile(self) {\n\n  // Load & clone RE patterns.\n  var re = self.re = require('./lib/re')(self.__opts__);\n\n  // Define dynamic patterns\n  var tlds = self.__tlds__.slice();\n\n  self.onCompile();\n\n  if (!self.__tlds_replaced__) {\n    tlds.push(tlds_2ch_src_re);\n  }\n  tlds.push(re.src_xn);\n\n  re.src_tlds = tlds.join('|');\n\n  function untpl(tpl) { return tpl.replace('%TLDS%', re.src_tlds); }\n\n  re.email_fuzzy      = RegExp(untpl(re.tpl_email_fuzzy), 'i');\n  re.link_fuzzy       = RegExp(untpl(re.tpl_link_fuzzy), 'i');\n  re.link_no_ip_fuzzy = RegExp(untpl(re.tpl_link_no_ip_fuzzy), 'i');\n  re.host_fuzzy_test  = RegExp(untpl(re.tpl_host_fuzzy_test), 'i');\n\n  //\n  // Compile each schema\n  //\n\n  var aliases = [];\n\n  self.__compiled__ = {}; // Reset compiled data\n\n  function schemaError(name, val) {\n    throw new Error('(LinkifyIt) Invalid schema \"' + name + '\": ' + val);\n  }\n\n  Object.keys(self.__schemas__).forEach(function (name) {\n    var val = self.__schemas__[name];\n\n    // skip disabled methods\n    if (val === null) { return; }\n\n    var compiled = { validate: null, link: null };\n\n    self.__compiled__[name] = compiled;\n\n    if (isObject(val)) {\n      if (isRegExp(val.validate)) {\n        compiled.validate = createValidator(val.validate);\n      } else if (isFunction(val.validate)) {\n        compiled.validate = val.validate;\n      } else {\n        schemaError(name, val);\n      }\n\n      if (isFunction(val.normalize)) {\n        compiled.normalize = val.normalize;\n      } else if (!val.normalize) {\n        compiled.normalize = createNormalizer();\n      } else {\n        schemaError(name, val);\n      }\n\n      return;\n    }\n\n    if (isString(val)) {\n      aliases.push(name);\n      return;\n    }\n\n    schemaError(name, val);\n  });\n\n  //\n  // Compile postponed aliases\n  //\n\n  aliases.forEach(function (alias) {\n    if (!self.__compiled__[self.__schemas__[alias]]) {\n      // Silently fail on missed schemas to avoid errons on disable.\n      // schemaError(alias, self.__schemas__[alias]);\n      return;\n    }\n\n    self.__compiled__[alias].validate =\n      self.__compiled__[self.__schemas__[alias]].validate;\n    self.__compiled__[alias].normalize =\n      self.__compiled__[self.__schemas__[alias]].normalize;\n  });\n\n  //\n  // Fake record for guessed links\n  //\n  self.__compiled__[''] = { validate: null, normalize: createNormalizer() };\n\n  //\n  // Build schema condition\n  //\n  var slist = Object.keys(self.__compiled__)\n                      .filter(function (name) {\n                        // Filter disabled & fake schemas\n                        return name.length > 0 && self.__compiled__[name];\n                      })\n                      .map(escapeRE)\n                      .join('|');\n  // (?!_) cause 1.5x slowdown\n  self.re.schema_test   = RegExp('(^|(?!_)(?:[><\\uff5c]|' + re.src_ZPCc + '))(' + slist + ')', 'i');\n  self.re.schema_search = RegExp('(^|(?!_)(?:[><\\uff5c]|' + re.src_ZPCc + '))(' + slist + ')', 'ig');\n\n  self.re.pretest = RegExp(\n    '(' + self.re.schema_test.source + ')|(' + self.re.host_fuzzy_test.source + ')|@',\n    'i'\n  );\n\n  //\n  // Cleanup\n  //\n\n  resetScanCache(self);\n}\n\n/**\n * class Match\n *\n * Match result. Single element of array, returned by [[LinkifyIt#match]]\n **/\nfunction Match(self, shift) {\n  var start = self.__index__,\n      end   = self.__last_index__,\n      text  = self.__text_cache__.slice(start, end);\n\n  /**\n   * Match#schema -> String\n   *\n   * Prefix (protocol) for matched string.\n   **/\n  this.schema    = self.__schema__.toLowerCase();\n  /**\n   * Match#index -> Number\n   *\n   * First position of matched string.\n   **/\n  this.index     = start + shift;\n  /**\n   * Match#lastIndex -> Number\n   *\n   * Next position after matched string.\n   **/\n  this.lastIndex = end + shift;\n  /**\n   * Match#raw -> String\n   *\n   * Matched string.\n   **/\n  this.raw       = text;\n  /**\n   * Match#text -> String\n   *\n   * Notmalized text of matched string.\n   **/\n  this.text      = text;\n  /**\n   * Match#url -> String\n   *\n   * Normalized url of matched string.\n   **/\n  this.url       = text;\n}\n\nfunction createMatch(self, shift) {\n  var match = new Match(self, shift);\n\n  self.__compiled__[match.schema].normalize(match, self);\n\n  return match;\n}\n\n\n/**\n * class LinkifyIt\n **/\n\n/**\n * new LinkifyIt(schemas, options)\n * - schemas (Object): Optional. Additional schemas to validate (prefix/validator)\n * - options (Object): { fuzzyLink|fuzzyEmail|fuzzyIP: true|false }\n *\n * Creates new linkifier instance with optional additional schemas.\n * Can be called without `new` keyword for convenience.\n *\n * By default understands:\n *\n * - `http(s)://...` , `ftp://...`, `mailto:...` & `//...` links\n * - \"fuzzy\" links and emails (example.com, foo@bar.com).\n *\n * `schemas` is an object, where each key/value describes protocol/rule:\n *\n * - __key__ - link prefix (usually, protocol name with `:` at the end, `skype:`\n *   for example). `linkify-it` makes shure that prefix is not preceeded with\n *   alphanumeric char and symbols. Only whitespaces and punctuation allowed.\n * - __value__ - rule to check tail after link prefix\n *   - _String_ - just alias to existing rule\n *   - _Object_\n *     - _validate_ - validator function (should return matched length on success),\n *       or `RegExp`.\n *     - _normalize_ - optional function to normalize text & url of matched result\n *       (for example, for @twitter mentions).\n *\n * `options`:\n *\n * - __fuzzyLink__ - recognige URL-s without `http(s):` prefix. Default `true`.\n * - __fuzzyIP__ - allow IPs in fuzzy links above. Can conflict with some texts\n *   like version numbers. Default `false`.\n * - __fuzzyEmail__ - recognize emails without `mailto:` prefix.\n *\n **/\nfunction LinkifyIt(schemas, options) {\n  if (!(this instanceof LinkifyIt)) {\n    return new LinkifyIt(schemas, options);\n  }\n\n  if (!options) {\n    if (isOptionsObj(schemas)) {\n      options = schemas;\n      schemas = {};\n    }\n  }\n\n  this.__opts__           = assign({}, defaultOptions, options);\n\n  // Cache last tested result. Used to skip repeating steps on next `match` call.\n  this.__index__          = -1;\n  this.__last_index__     = -1; // Next scan position\n  this.__schema__         = '';\n  this.__text_cache__     = '';\n\n  this.__schemas__        = assign({}, defaultSchemas, schemas);\n  this.__compiled__       = {};\n\n  this.__tlds__           = tlds_default;\n  this.__tlds_replaced__  = false;\n\n  this.re = {};\n\n  compile(this);\n}\n\n\n/** chainable\n * LinkifyIt#add(schema, definition)\n * - schema (String): rule name (fixed pattern prefix)\n * - definition (String|RegExp|Object): schema definition\n *\n * Add new rule definition. See constructor description for details.\n **/\nLinkifyIt.prototype.add = function add(schema, definition) {\n  this.__schemas__[schema] = definition;\n  compile(this);\n  return this;\n};\n\n\n/** chainable\n * LinkifyIt#set(options)\n * - options (Object): { fuzzyLink|fuzzyEmail|fuzzyIP: true|false }\n *\n * Set recognition options for links without schema.\n **/\nLinkifyIt.prototype.set = function set(options) {\n  this.__opts__ = assign(this.__opts__, options);\n  return this;\n};\n\n\n/**\n * LinkifyIt#test(text) -> Boolean\n *\n * Searches linkifiable pattern and returns `true` on success or `false` on fail.\n **/\nLinkifyIt.prototype.test = function test(text) {\n  // Reset scan cache\n  this.__text_cache__ = text;\n  this.__index__      = -1;\n\n  if (!text.length) { return false; }\n\n  var m, ml, me, len, shift, next, re, tld_pos, at_pos;\n\n  // try to scan for link with schema - that's the most simple rule\n  if (this.re.schema_test.test(text)) {\n    re = this.re.schema_search;\n    re.lastIndex = 0;\n    while ((m = re.exec(text)) !== null) {\n      len = this.testSchemaAt(text, m[2], re.lastIndex);\n      if (len) {\n        this.__schema__     = m[2];\n        this.__index__      = m.index + m[1].length;\n        this.__last_index__ = m.index + m[0].length + len;\n        break;\n      }\n    }\n  }\n\n  if (this.__opts__.fuzzyLink && this.__compiled__['http:']) {\n    // guess schemaless links\n    tld_pos = text.search(this.re.host_fuzzy_test);\n    if (tld_pos >= 0) {\n      // if tld is located after found link - no need to check fuzzy pattern\n      if (this.__index__ < 0 || tld_pos < this.__index__) {\n        if ((ml = text.match(this.__opts__.fuzzyIP ? this.re.link_fuzzy : this.re.link_no_ip_fuzzy)) !== null) {\n\n          shift = ml.index + ml[1].length;\n\n          if (this.__index__ < 0 || shift < this.__index__) {\n            this.__schema__     = '';\n            this.__index__      = shift;\n            this.__last_index__ = ml.index + ml[0].length;\n          }\n        }\n      }\n    }\n  }\n\n  if (this.__opts__.fuzzyEmail && this.__compiled__['mailto:']) {\n    // guess schemaless emails\n    at_pos = text.indexOf('@');\n    if (at_pos >= 0) {\n      // We can't skip this check, because this cases are possible:\n      // 192.168.1.1@gmail.com, my.in@example.com\n      if ((me = text.match(this.re.email_fuzzy)) !== null) {\n\n        shift = me.index + me[1].length;\n        next  = me.index + me[0].length;\n\n        if (this.__index__ < 0 || shift < this.__index__ ||\n            (shift === this.__index__ && next > this.__last_index__)) {\n          this.__schema__     = 'mailto:';\n          this.__index__      = shift;\n          this.__last_index__ = next;\n        }\n      }\n    }\n  }\n\n  return this.__index__ >= 0;\n};\n\n\n/**\n * LinkifyIt#pretest(text) -> Boolean\n *\n * Very quick check, that can give false positives. Returns true if link MAY BE\n * can exists. Can be used for speed optimization, when you need to check that\n * link NOT exists.\n **/\nLinkifyIt.prototype.pretest = function pretest(text) {\n  return this.re.pretest.test(text);\n};\n\n\n/**\n * LinkifyIt#testSchemaAt(text, name, position) -> Number\n * - text (String): text to scan\n * - name (String): rule (schema) name\n * - position (Number): text offset to check from\n *\n * Similar to [[LinkifyIt#test]] but checks only specific protocol tail exactly\n * at given position. Returns length of found pattern (0 on fail).\n **/\nLinkifyIt.prototype.testSchemaAt = function testSchemaAt(text, schema, pos) {\n  // If not supported schema check requested - terminate\n  if (!this.__compiled__[schema.toLowerCase()]) {\n    return 0;\n  }\n  return this.__compiled__[schema.toLowerCase()].validate(text, pos, this);\n};\n\n\n/**\n * LinkifyIt#match(text) -> Array|null\n *\n * Returns array of found link descriptions or `null` on fail. We strongly\n * recommend to use [[LinkifyIt#test]] first, for best speed.\n *\n * ##### Result match description\n *\n * - __schema__ - link schema, can be empty for fuzzy links, or `//` for\n *   protocol-neutral  links.\n * - __index__ - offset of matched text\n * - __lastIndex__ - index of next char after mathch end\n * - __raw__ - matched text\n * - __text__ - normalized text\n * - __url__ - link, generated from matched text\n **/\nLinkifyIt.prototype.match = function match(text) {\n  var shift = 0, result = [];\n\n  // Try to take previous element from cache, if .test() called before\n  if (this.__index__ >= 0 && this.__text_cache__ === text) {\n    result.push(createMatch(this, shift));\n    shift = this.__last_index__;\n  }\n\n  // Cut head if cache was used\n  var tail = shift ? text.slice(shift) : text;\n\n  // Scan string until end reached\n  while (this.test(tail)) {\n    result.push(createMatch(this, shift));\n\n    tail = tail.slice(this.__last_index__);\n    shift += this.__last_index__;\n  }\n\n  if (result.length) {\n    return result;\n  }\n\n  return null;\n};\n\n\n/** chainable\n * LinkifyIt#tlds(list [, keepOld]) -> this\n * - list (Array): list of tlds\n * - keepOld (Boolean): merge with current list if `true` (`false` by default)\n *\n * Load (or merge) new tlds list. Those are user for fuzzy links (without prefix)\n * to avoid false positives. By default this algorythm used:\n *\n * - hostname with any 2-letter root zones are ok.\n * - biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\n *   are ok.\n * - encoded (`xn--...`) root zones are ok.\n *\n * If list is replaced, then exact match for 2-chars root zones will be checked.\n **/\nLinkifyIt.prototype.tlds = function tlds(list, keepOld) {\n  list = Array.isArray(list) ? list : [ list ];\n\n  if (!keepOld) {\n    this.__tlds__ = list.slice();\n    this.__tlds_replaced__ = true;\n    compile(this);\n    return this;\n  }\n\n  this.__tlds__ = this.__tlds__.concat(list)\n                                  .sort()\n                                  .filter(function (el, idx, arr) {\n                                    return el !== arr[idx - 1];\n                                  })\n                                  .reverse();\n\n  compile(this);\n  return this;\n};\n\n/**\n * LinkifyIt#normalize(match)\n *\n * Default normalizer (if schema does not define it's own).\n **/\nLinkifyIt.prototype.normalize = function normalize(match) {\n\n  // Do minimal possible changes by default. Need to collect feedback prior\n  // to move forward https://github.com/markdown-it/linkify-it/issues/1\n\n  if (!match.schema) { match.url = 'http://' + match.url; }\n\n  if (match.schema === 'mailto:' && !/^mailto:/i.test(match.url)) {\n    match.url = 'mailto:' + match.url;\n  }\n};\n\n\n/**\n * LinkifyIt#onCompile()\n *\n * Override to modify basic RegExp-s.\n **/\nLinkifyIt.prototype.onCompile = function onCompile() {\n};\n\n\nmodule.exports = LinkifyIt;\n","'use strict';\n\n\nmodule.exports = function (opts) {\n  var re = {};\n\n  // Use direct extract instead of `regenerate` to reduse browserified size\n  re.src_Any = require('uc.micro/properties/Any/regex').source;\n  re.src_Cc  = require('uc.micro/categories/Cc/regex').source;\n  re.src_Z   = require('uc.micro/categories/Z/regex').source;\n  re.src_P   = require('uc.micro/categories/P/regex').source;\n\n  // \\p{\\Z\\P\\Cc\\CF} (white spaces + control + format + punctuation)\n  re.src_ZPCc = [ re.src_Z, re.src_P, re.src_Cc ].join('|');\n\n  // \\p{\\Z\\Cc} (white spaces + control)\n  re.src_ZCc = [ re.src_Z, re.src_Cc ].join('|');\n\n  // Experimental. List of chars, completely prohibited in links\n  // because can separate it from other part of text\n  var text_separators = '[><\\uff5c]';\n\n  // All possible word characters (everything without punctuation, spaces & controls)\n  // Defined via punctuation & spaces to save space\n  // Should be something like \\p{\\L\\N\\S\\M} (\\w but without `_`)\n  re.src_pseudo_letter       = '(?:(?!' + text_separators + '|' + re.src_ZPCc + ')' + re.src_Any + ')';\n  // The same as abothe but without [0-9]\n  // var src_pseudo_letter_non_d = '(?:(?![0-9]|' + src_ZPCc + ')' + src_Any + ')';\n\n  ////////////////////////////////////////////////////////////////////////////////\n\n  re.src_ip4 =\n\n    '(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)';\n\n  // Prohibit any of \"@/[]()\" in user/pass to avoid wrong domain fetch.\n  re.src_auth    = '(?:(?:(?!' + re.src_ZCc + '|[@/\\\\[\\\\]()]).)+@)?';\n\n  re.src_port =\n\n    '(?::(?:6(?:[0-4]\\\\d{3}|5(?:[0-4]\\\\d{2}|5(?:[0-2]\\\\d|3[0-5])))|[1-5]?\\\\d{1,4}))?';\n\n  re.src_host_terminator =\n\n    '(?=$|' + text_separators + '|' + re.src_ZPCc + ')(?!-|_|:\\\\d|\\\\.-|\\\\.(?!$|' + re.src_ZPCc + '))';\n\n  re.src_path =\n\n    '(?:' +\n      '[/?#]' +\n        '(?:' +\n          '(?!' + re.src_ZCc + '|' + text_separators + '|[()[\\\\]{}.,\"\\'?!\\\\-]).|' +\n          '\\\\[(?:(?!' + re.src_ZCc + '|\\\\]).)*\\\\]|' +\n          '\\\\((?:(?!' + re.src_ZCc + '|[)]).)*\\\\)|' +\n          '\\\\{(?:(?!' + re.src_ZCc + '|[}]).)*\\\\}|' +\n          '\\\\\"(?:(?!' + re.src_ZCc + '|[\"]).)+\\\\\"|' +\n          \"\\\\'(?:(?!\" + re.src_ZCc + \"|[']).)+\\\\'|\" +\n          \"\\\\'(?=\" + re.src_pseudo_letter + '|[-]).|' +  // allow `I'm_king` if no pair found\n          '\\\\.{2,}[a-zA-Z0-9%/&]|' + // google has many dots in \"google search\" links (#66, #81).\n                                     // github has ... in commit range links,\n                                     // Restrict to\n                                     // - english\n                                     // - percent-encoded\n                                     // - parts of file path\n                                     // - params separator\n                                     // until more examples found.\n          '\\\\.(?!' + re.src_ZCc + '|[.]).|' +\n          (opts && opts['---'] ?\n            '\\\\-(?!--(?:[^-]|$))(?:-*)|' // `---` => long dash, terminate\n            :\n            '\\\\-+|'\n          ) +\n          '\\\\,(?!' + re.src_ZCc + ').|' +       // allow `,,,` in paths\n          '\\\\!+(?!' + re.src_ZCc + '|[!]).|' +  // allow `!!!` in paths, but not at the end\n          '\\\\?(?!' + re.src_ZCc + '|[?]).' +\n        ')+' +\n      '|\\\\/' +\n    ')?';\n\n  // Allow anything in markdown spec, forbid quote (\") at the first position\n  // because emails enclosed in quotes are far more common\n  re.src_email_name =\n\n    '[\\\\-;:&=\\\\+\\\\$,\\\\.a-zA-Z0-9_][\\\\-;:&=\\\\+\\\\$,\\\\\"\\\\.a-zA-Z0-9_]*';\n\n  re.src_xn =\n\n    'xn--[a-z0-9\\\\-]{1,59}';\n\n  // More to read about domain names\n  // http://serverfault.com/questions/638260/\n\n  re.src_domain_root =\n\n    // Allow letters & digits (http://test1)\n    '(?:' +\n      re.src_xn +\n      '|' +\n      re.src_pseudo_letter + '{1,63}' +\n    ')';\n\n  re.src_domain =\n\n    '(?:' +\n      re.src_xn +\n      '|' +\n      '(?:' + re.src_pseudo_letter + ')' +\n      '|' +\n      '(?:' + re.src_pseudo_letter + '(?:-|' + re.src_pseudo_letter + '){0,61}' + re.src_pseudo_letter + ')' +\n    ')';\n\n  re.src_host =\n\n    '(?:' +\n    // Don't need IP check, because digits are already allowed in normal domain names\n    //   src_ip4 +\n    // '|' +\n      '(?:(?:(?:' + re.src_domain + ')\\\\.)*' + re.src_domain/*_root*/ + ')' +\n    ')';\n\n  re.tpl_host_fuzzy =\n\n    '(?:' +\n      re.src_ip4 +\n    '|' +\n      '(?:(?:(?:' + re.src_domain + ')\\\\.)+(?:%TLDS%))' +\n    ')';\n\n  re.tpl_host_no_ip_fuzzy =\n\n    '(?:(?:(?:' + re.src_domain + ')\\\\.)+(?:%TLDS%))';\n\n  re.src_host_strict =\n\n    re.src_host + re.src_host_terminator;\n\n  re.tpl_host_fuzzy_strict =\n\n    re.tpl_host_fuzzy + re.src_host_terminator;\n\n  re.src_host_port_strict =\n\n    re.src_host + re.src_port + re.src_host_terminator;\n\n  re.tpl_host_port_fuzzy_strict =\n\n    re.tpl_host_fuzzy + re.src_port + re.src_host_terminator;\n\n  re.tpl_host_port_no_ip_fuzzy_strict =\n\n    re.tpl_host_no_ip_fuzzy + re.src_port + re.src_host_terminator;\n\n\n  ////////////////////////////////////////////////////////////////////////////////\n  // Main rules\n\n  // Rude test fuzzy links by host, for quick deny\n  re.tpl_host_fuzzy_test =\n\n    'localhost|www\\\\.|\\\\.\\\\d{1,3}\\\\.|(?:\\\\.(?:%TLDS%)(?:' + re.src_ZPCc + '|>|$))';\n\n  re.tpl_email_fuzzy =\n\n      '(^|' + text_separators + '|\"|\\\\(|' + re.src_ZCc + ')' +\n      '(' + re.src_email_name + '@' + re.tpl_host_fuzzy_strict + ')';\n\n  re.tpl_link_fuzzy =\n      // Fuzzy link can't be prepended with .:/\\- and non punctuation.\n      // but can start with > (markdown blockquote)\n      '(^|(?![.:/\\\\-_@])(?:[$+<=>^`|\\uff5c]|' + re.src_ZPCc + '))' +\n      '((?![$+<=>^`|\\uff5c])' + re.tpl_host_port_fuzzy_strict + re.src_path + ')';\n\n  re.tpl_link_no_ip_fuzzy =\n      // Fuzzy link can't be prepended with .:/\\- and non punctuation.\n      // but can start with > (markdown blockquote)\n      '(^|(?![.:/\\\\-_@])(?:[$+<=>^`|\\uff5c]|' + re.src_ZPCc + '))' +\n      '((?![$+<=>^`|\\uff5c])' + re.tpl_host_port_no_ip_fuzzy_strict + re.src_path + ')';\n\n  return re;\n};\n","'use strict';\n\n\nmodule.exports = require('./lib/');\n","// HTML5 entities map: { name -> utf16string }\n//\n'use strict';\n\n/*eslint quotes:0*/\nmodule.exports = require('entities/lib/maps/entities.json');\n","// List of valid html blocks names, accorting to commonmark spec\n// http://jgm.github.io/CommonMark/spec.html#html-blocks\n\n'use strict';\n\n\nmodule.exports = [\n  'address',\n  'article',\n  'aside',\n  'base',\n  'basefont',\n  'blockquote',\n  'body',\n  'caption',\n  'center',\n  'col',\n  'colgroup',\n  'dd',\n  'details',\n  'dialog',\n  'dir',\n  'div',\n  'dl',\n  'dt',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'footer',\n  'form',\n  'frame',\n  'frameset',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'head',\n  'header',\n  'hr',\n  'html',\n  'iframe',\n  'legend',\n  'li',\n  'link',\n  'main',\n  'menu',\n  'menuitem',\n  'nav',\n  'noframes',\n  'ol',\n  'optgroup',\n  'option',\n  'p',\n  'param',\n  'section',\n  'source',\n  'summary',\n  'table',\n  'tbody',\n  'td',\n  'tfoot',\n  'th',\n  'thead',\n  'title',\n  'tr',\n  'track',\n  'ul'\n];\n","// Regexps to match html elements\n\n'use strict';\n\nvar attr_name     = '[a-zA-Z_:][a-zA-Z0-9:._-]*';\n\nvar unquoted      = '[^\"\\'=<>`\\\\x00-\\\\x20]+';\nvar single_quoted = \"'[^']*'\";\nvar double_quoted = '\"[^\"]*\"';\n\nvar attr_value  = '(?:' + unquoted + '|' + single_quoted + '|' + double_quoted + ')';\n\nvar attribute   = '(?:\\\\s+' + attr_name + '(?:\\\\s*=\\\\s*' + attr_value + ')?)';\n\nvar open_tag    = '<[A-Za-z][A-Za-z0-9\\\\-]*' + attribute + '*\\\\s*\\\\/?>';\n\nvar close_tag   = '<\\\\/[A-Za-z][A-Za-z0-9\\\\-]*\\\\s*>';\nvar comment     = '<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->';\nvar processing  = '<[?][\\\\s\\\\S]*?[?]>';\nvar declaration = '<![A-Z]+\\\\s+[^>]*>';\nvar cdata       = '<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>';\n\nvar HTML_TAG_RE = new RegExp('^(?:' + open_tag + '|' + close_tag + '|' + comment +\n                        '|' + processing + '|' + declaration + '|' + cdata + ')');\nvar HTML_OPEN_CLOSE_TAG_RE = new RegExp('^(?:' + open_tag + '|' + close_tag + ')');\n\nmodule.exports.HTML_TAG_RE = HTML_TAG_RE;\nmodule.exports.HTML_OPEN_CLOSE_TAG_RE = HTML_OPEN_CLOSE_TAG_RE;\n","// Utilities\n//\n'use strict';\n\n\nfunction _class(obj) { return Object.prototype.toString.call(obj); }\n\nfunction isString(obj) { return _class(obj) === '[object String]'; }\n\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction has(object, key) {\n  return _hasOwnProperty.call(object, key);\n}\n\n// Merge objects\n//\nfunction assign(obj /*from1, from2, from3, ...*/) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n\n  sources.forEach(function (source) {\n    if (!source) { return; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be object');\n    }\n\n    Object.keys(source).forEach(function (key) {\n      obj[key] = source[key];\n    });\n  });\n\n  return obj;\n}\n\n// Remove element from array and put another array at those position.\n// Useful for some operations with tokens\nfunction arrayReplaceAt(src, pos, newElements) {\n  return [].concat(src.slice(0, pos), newElements, src.slice(pos + 1));\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nfunction isValidEntityCode(c) {\n  /*eslint no-bitwise:0*/\n  // broken sequence\n  if (c >= 0xD800 && c <= 0xDFFF) { return false; }\n  // never used\n  if (c >= 0xFDD0 && c <= 0xFDEF) { return false; }\n  if ((c & 0xFFFF) === 0xFFFF || (c & 0xFFFF) === 0xFFFE) { return false; }\n  // control codes\n  if (c >= 0x00 && c <= 0x08) { return false; }\n  if (c === 0x0B) { return false; }\n  if (c >= 0x0E && c <= 0x1F) { return false; }\n  if (c >= 0x7F && c <= 0x9F) { return false; }\n  // out of range\n  if (c > 0x10FFFF) { return false; }\n  return true;\n}\n\nfunction fromCodePoint(c) {\n  /*eslint no-bitwise:0*/\n  if (c > 0xffff) {\n    c -= 0x10000;\n    var surrogate1 = 0xd800 + (c >> 10),\n        surrogate2 = 0xdc00 + (c & 0x3ff);\n\n    return String.fromCharCode(surrogate1, surrogate2);\n  }\n  return String.fromCharCode(c);\n}\n\n\nvar UNESCAPE_MD_RE  = /\\\\([!\"#$%&'()*+,\\-.\\/:;<=>?@[\\\\\\]^_`{|}~])/g;\nvar ENTITY_RE       = /&([a-z#][a-z0-9]{1,31});/gi;\nvar UNESCAPE_ALL_RE = new RegExp(UNESCAPE_MD_RE.source + '|' + ENTITY_RE.source, 'gi');\n\nvar DIGITAL_ENTITY_TEST_RE = /^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;\n\nvar entities = require('./entities');\n\nfunction replaceEntityPattern(match, name) {\n  var code = 0;\n\n  if (has(entities, name)) {\n    return entities[name];\n  }\n\n  if (name.charCodeAt(0) === 0x23/* # */ && DIGITAL_ENTITY_TEST_RE.test(name)) {\n    code = name[1].toLowerCase() === 'x' ?\n      parseInt(name.slice(2), 16) : parseInt(name.slice(1), 10);\n\n    if (isValidEntityCode(code)) {\n      return fromCodePoint(code);\n    }\n  }\n\n  return match;\n}\n\n/*function replaceEntities(str) {\n  if (str.indexOf('&') < 0) { return str; }\n\n  return str.replace(ENTITY_RE, replaceEntityPattern);\n}*/\n\nfunction unescapeMd(str) {\n  if (str.indexOf('\\\\') < 0) { return str; }\n  return str.replace(UNESCAPE_MD_RE, '$1');\n}\n\nfunction unescapeAll(str) {\n  if (str.indexOf('\\\\') < 0 && str.indexOf('&') < 0) { return str; }\n\n  return str.replace(UNESCAPE_ALL_RE, function (match, escaped, entity) {\n    if (escaped) { return escaped; }\n    return replaceEntityPattern(match, entity);\n  });\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nvar HTML_ESCAPE_TEST_RE = /[&<>\"]/;\nvar HTML_ESCAPE_REPLACE_RE = /[&<>\"]/g;\nvar HTML_REPLACEMENTS = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;'\n};\n\nfunction replaceUnsafeChar(ch) {\n  return HTML_REPLACEMENTS[ch];\n}\n\nfunction escapeHtml(str) {\n  if (HTML_ESCAPE_TEST_RE.test(str)) {\n    return str.replace(HTML_ESCAPE_REPLACE_RE, replaceUnsafeChar);\n  }\n  return str;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nvar REGEXP_ESCAPE_RE = /[.?*+^$[\\]\\\\(){}|-]/g;\n\nfunction escapeRE(str) {\n  return str.replace(REGEXP_ESCAPE_RE, '\\\\$&');\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nfunction isSpace(code) {\n  switch (code) {\n    case 0x09:\n    case 0x20:\n      return true;\n  }\n  return false;\n}\n\n// Zs (unicode class) || [\\t\\f\\v\\r\\n]\nfunction isWhiteSpace(code) {\n  if (code >= 0x2000 && code <= 0x200A) { return true; }\n  switch (code) {\n    case 0x09: // \\t\n    case 0x0A: // \\n\n    case 0x0B: // \\v\n    case 0x0C: // \\f\n    case 0x0D: // \\r\n    case 0x20:\n    case 0xA0:\n    case 0x1680:\n    case 0x202F:\n    case 0x205F:\n    case 0x3000:\n      return true;\n  }\n  return false;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\n/*eslint-disable max-len*/\nvar UNICODE_PUNCT_RE = require('uc.micro/categories/P/regex');\n\n// Currently without astral characters support.\nfunction isPunctChar(ch) {\n  return UNICODE_PUNCT_RE.test(ch);\n}\n\n\n// Markdown ASCII punctuation characters.\n//\n// !, \", #, $, %, &, ', (, ), *, +, ,, -, ., /, :, ;, <, =, >, ?, @, [, \\, ], ^, _, `, {, |, }, or ~\n// http://spec.commonmark.org/0.15/#ascii-punctuation-character\n//\n// Don't confuse with unicode punctuation !!! It lacks some chars in ascii range.\n//\nfunction isMdAsciiPunct(ch) {\n  switch (ch) {\n    case 0x21/* ! */:\n    case 0x22/* \" */:\n    case 0x23/* # */:\n    case 0x24/* $ */:\n    case 0x25/* % */:\n    case 0x26/* & */:\n    case 0x27/* ' */:\n    case 0x28/* ( */:\n    case 0x29/* ) */:\n    case 0x2A/* * */:\n    case 0x2B/* + */:\n    case 0x2C/* , */:\n    case 0x2D/* - */:\n    case 0x2E/* . */:\n    case 0x2F/* / */:\n    case 0x3A/* : */:\n    case 0x3B/* ; */:\n    case 0x3C/* < */:\n    case 0x3D/* = */:\n    case 0x3E/* > */:\n    case 0x3F/* ? */:\n    case 0x40/* @ */:\n    case 0x5B/* [ */:\n    case 0x5C/* \\ */:\n    case 0x5D/* ] */:\n    case 0x5E/* ^ */:\n    case 0x5F/* _ */:\n    case 0x60/* ` */:\n    case 0x7B/* { */:\n    case 0x7C/* | */:\n    case 0x7D/* } */:\n    case 0x7E/* ~ */:\n      return true;\n    default:\n      return false;\n  }\n}\n\n// Hepler to unify [reference labels].\n//\nfunction normalizeReference(str) {\n  // Trim and collapse whitespace\n  //\n  str = str.trim().replace(/\\s+/g, ' ');\n\n  // In node v10 ''.toLowerCase() === '', which is presumed to be a bug\n  // fixed in v12 (couldn't find any details).\n  //\n  // So treat this one as a special case\n  // (remove this when node v10 is no longer supported).\n  //\n  if (''.toLowerCase() === '') {\n    str = str.replace(//g, '');\n  }\n\n  // .toLowerCase().toUpperCase() should get rid of all differences\n  // between letter variants.\n  //\n  // Simple .toLowerCase() doesn't normalize 125 code points correctly,\n  // and .toUpperCase doesn't normalize 6 of them (list of exceptions:\n  // , , , , ,  - those are already uppercased, but have differently\n  // uppercased versions).\n  //\n  // Here's an example showing how it happens. Lets take greek letter omega:\n  // uppercase U+0398 (), U+03f4 () and lowercase U+03b8 (), U+03d1 ()\n  //\n  // Unicode entries:\n  // 0398;GREEK CAPITAL LETTER THETA;Lu;0;L;;;;;N;;;;03B8;\n  // 03B8;GREEK SMALL LETTER THETA;Ll;0;L;;;;;N;;;0398;;0398\n  // 03D1;GREEK THETA SYMBOL;Ll;0;L;<compat> 03B8;;;;N;GREEK SMALL LETTER SCRIPT THETA;;0398;;0398\n  // 03F4;GREEK CAPITAL THETA SYMBOL;Lu;0;L;<compat> 0398;;;;N;;;;03B8;\n  //\n  // Case-insensitive comparison should treat all of them as equivalent.\n  //\n  // But .toLowerCase() doesn't change  (it's already lowercase),\n  // and .toUpperCase() doesn't change  (already uppercase).\n  //\n  // Applying first lower then upper case normalizes any character:\n  // '\\u0398\\u03f4\\u03b8\\u03d1'.toLowerCase().toUpperCase() === '\\u0398\\u0398\\u0398\\u0398'\n  //\n  // Note: this is equivalent to unicode case folding; unicode normalization\n  // is a different step that is not required here.\n  //\n  // Final result should be uppercased, because it's later stored in an object\n  // (this avoid a conflict with Object.prototype members,\n  // most notably, `__proto__`)\n  //\n  return str.toLowerCase().toUpperCase();\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\n// Re-export libraries commonly used in both markdown-it and its plugins,\n// so plugins won't have to depend on them explicitly, which reduces their\n// bundled size (e.g. a browser build).\n//\nexports.lib                 = {};\nexports.lib.mdurl           = require('mdurl');\nexports.lib.ucmicro         = require('uc.micro');\n\nexports.assign              = assign;\nexports.isString            = isString;\nexports.has                 = has;\nexports.unescapeMd          = unescapeMd;\nexports.unescapeAll         = unescapeAll;\nexports.isValidEntityCode   = isValidEntityCode;\nexports.fromCodePoint       = fromCodePoint;\n// exports.replaceEntities     = replaceEntities;\nexports.escapeHtml          = escapeHtml;\nexports.arrayReplaceAt      = arrayReplaceAt;\nexports.isSpace             = isSpace;\nexports.isWhiteSpace        = isWhiteSpace;\nexports.isMdAsciiPunct      = isMdAsciiPunct;\nexports.isPunctChar         = isPunctChar;\nexports.escapeRE            = escapeRE;\nexports.normalizeReference  = normalizeReference;\n","// Just a shortcut for bulk export\n'use strict';\n\n\nexports.parseLinkLabel       = require('./parse_link_label');\nexports.parseLinkDestination = require('./parse_link_destination');\nexports.parseLinkTitle       = require('./parse_link_title');\n","// Parse link destination\n//\n'use strict';\n\n\nvar unescapeAll = require('../common/utils').unescapeAll;\n\n\nmodule.exports = function parseLinkDestination(str, pos, max) {\n  var code, level,\n      lines = 0,\n      start = pos,\n      result = {\n        ok: false,\n        pos: 0,\n        lines: 0,\n        str: ''\n      };\n\n  if (str.charCodeAt(pos) === 0x3C /* < */) {\n    pos++;\n    while (pos < max) {\n      code = str.charCodeAt(pos);\n      if (code === 0x0A /* \\n */) { return result; }\n      if (code === 0x3C /* < */) { return result; }\n      if (code === 0x3E /* > */) {\n        result.pos = pos + 1;\n        result.str = unescapeAll(str.slice(start + 1, pos));\n        result.ok = true;\n        return result;\n      }\n      if (code === 0x5C /* \\ */ && pos + 1 < max) {\n        pos += 2;\n        continue;\n      }\n\n      pos++;\n    }\n\n    // no closing '>'\n    return result;\n  }\n\n  // this should be ... } else { ... branch\n\n  level = 0;\n  while (pos < max) {\n    code = str.charCodeAt(pos);\n\n    if (code === 0x20) { break; }\n\n    // ascii control characters\n    if (code < 0x20 || code === 0x7F) { break; }\n\n    if (code === 0x5C /* \\ */ && pos + 1 < max) {\n      if (str.charCodeAt(pos + 1) === 0x20) { break; }\n      pos += 2;\n      continue;\n    }\n\n    if (code === 0x28 /* ( */) {\n      level++;\n      if (level > 32) { return result; }\n    }\n\n    if (code === 0x29 /* ) */) {\n      if (level === 0) { break; }\n      level--;\n    }\n\n    pos++;\n  }\n\n  if (start === pos) { return result; }\n  if (level !== 0) { return result; }\n\n  result.str = unescapeAll(str.slice(start, pos));\n  result.lines = lines;\n  result.pos = pos;\n  result.ok = true;\n  return result;\n};\n","// Parse link label\n//\n// this function assumes that first character (\"[\") already matches;\n// returns the end of the label\n//\n'use strict';\n\nmodule.exports = function parseLinkLabel(state, start, disableNested) {\n  var level, found, marker, prevPos,\n      labelEnd = -1,\n      max = state.posMax,\n      oldPos = state.pos;\n\n  state.pos = start + 1;\n  level = 1;\n\n  while (state.pos < max) {\n    marker = state.src.charCodeAt(state.pos);\n    if (marker === 0x5D /* ] */) {\n      level--;\n      if (level === 0) {\n        found = true;\n        break;\n      }\n    }\n\n    prevPos = state.pos;\n    state.md.inline.skipToken(state);\n    if (marker === 0x5B /* [ */) {\n      if (prevPos === state.pos - 1) {\n        // increase level if we find text `[`, which is not a part of any token\n        level++;\n      } else if (disableNested) {\n        state.pos = oldPos;\n        return -1;\n      }\n    }\n  }\n\n  if (found) {\n    labelEnd = state.pos;\n  }\n\n  // restore old state\n  state.pos = oldPos;\n\n  return labelEnd;\n};\n","// Parse link title\n//\n'use strict';\n\n\nvar unescapeAll = require('../common/utils').unescapeAll;\n\n\nmodule.exports = function parseLinkTitle(str, pos, max) {\n  var code,\n      marker,\n      lines = 0,\n      start = pos,\n      result = {\n        ok: false,\n        pos: 0,\n        lines: 0,\n        str: ''\n      };\n\n  if (pos >= max) { return result; }\n\n  marker = str.charCodeAt(pos);\n\n  if (marker !== 0x22 /* \" */ && marker !== 0x27 /* ' */ && marker !== 0x28 /* ( */) { return result; }\n\n  pos++;\n\n  // if opening marker is \"(\", switch it to closing marker \")\"\n  if (marker === 0x28) { marker = 0x29; }\n\n  while (pos < max) {\n    code = str.charCodeAt(pos);\n    if (code === marker) {\n      result.pos = pos + 1;\n      result.lines = lines;\n      result.str = unescapeAll(str.slice(start + 1, pos));\n      result.ok = true;\n      return result;\n    } else if (code === 0x28 /* ( */ && marker === 0x29 /* ) */) {\n      return result;\n    } else if (code === 0x0A) {\n      lines++;\n    } else if (code === 0x5C /* \\ */ && pos + 1 < max) {\n      pos++;\n      if (str.charCodeAt(pos) === 0x0A) {\n        lines++;\n      }\n    }\n\n    pos++;\n  }\n\n  return result;\n};\n","// Main parser class\n\n'use strict';\n\n\nvar utils        = require('./common/utils');\nvar helpers      = require('./helpers');\nvar Renderer     = require('./renderer');\nvar ParserCore   = require('./parser_core');\nvar ParserBlock  = require('./parser_block');\nvar ParserInline = require('./parser_inline');\nvar LinkifyIt    = require('linkify-it');\nvar mdurl        = require('mdurl');\nvar punycode     = require('punycode');\n\n\nvar config = {\n  default: require('./presets/default'),\n  zero: require('./presets/zero'),\n  commonmark: require('./presets/commonmark')\n};\n\n////////////////////////////////////////////////////////////////////////////////\n//\n// This validator can prohibit more than really needed to prevent XSS. It's a\n// tradeoff to keep code simple and to be secure by default.\n//\n// If you need different setup - override validator method as you wish. Or\n// replace it with dummy function and use external sanitizer.\n//\n\nvar BAD_PROTO_RE = /^(vbscript|javascript|file|data):/;\nvar GOOD_DATA_RE = /^data:image\\/(gif|png|jpeg|webp);/;\n\nfunction validateLink(url) {\n  // url should be normalized at this point, and existing entities are decoded\n  var str = url.trim().toLowerCase();\n\n  return BAD_PROTO_RE.test(str) ? (GOOD_DATA_RE.test(str) ? true : false) : true;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\n\nvar RECODE_HOSTNAME_FOR = [ 'http:', 'https:', 'mailto:' ];\n\nfunction normalizeLink(url) {\n  var parsed = mdurl.parse(url, true);\n\n  if (parsed.hostname) {\n    // Encode hostnames in urls like:\n    // `http://host/`, `https://host/`, `mailto:user@host`, `//host/`\n    //\n    // We don't encode unknown schemas, because it's likely that we encode\n    // something we shouldn't (e.g. `skype:name` treated as `skype:host`)\n    //\n    if (!parsed.protocol || RECODE_HOSTNAME_FOR.indexOf(parsed.protocol) >= 0) {\n      try {\n        parsed.hostname = punycode.toASCII(parsed.hostname);\n      } catch (er) { /**/ }\n    }\n  }\n\n  return mdurl.encode(mdurl.format(parsed));\n}\n\nfunction normalizeLinkText(url) {\n  var parsed = mdurl.parse(url, true);\n\n  if (parsed.hostname) {\n    // Encode hostnames in urls like:\n    // `http://host/`, `https://host/`, `mailto:user@host`, `//host/`\n    //\n    // We don't encode unknown schemas, because it's likely that we encode\n    // something we shouldn't (e.g. `skype:name` treated as `skype:host`)\n    //\n    if (!parsed.protocol || RECODE_HOSTNAME_FOR.indexOf(parsed.protocol) >= 0) {\n      try {\n        parsed.hostname = punycode.toUnicode(parsed.hostname);\n      } catch (er) { /**/ }\n    }\n  }\n\n  // add '%' to exclude list because of https://github.com/markdown-it/markdown-it/issues/720\n  return mdurl.decode(mdurl.format(parsed), mdurl.decode.defaultChars + '%');\n}\n\n\n/**\n * class MarkdownIt\n *\n * Main parser/renderer class.\n *\n * ##### Usage\n *\n * ```javascript\n * // node.js, \"classic\" way:\n * var MarkdownIt = require('markdown-it'),\n *     md = new MarkdownIt();\n * var result = md.render('# markdown-it rulezz!');\n *\n * // node.js, the same, but with sugar:\n * var md = require('markdown-it')();\n * var result = md.render('# markdown-it rulezz!');\n *\n * // browser without AMD, added to \"window\" on script load\n * // Note, there are no dash.\n * var md = window.markdownit();\n * var result = md.render('# markdown-it rulezz!');\n * ```\n *\n * Single line rendering, without paragraph wrap:\n *\n * ```javascript\n * var md = require('markdown-it')();\n * var result = md.renderInline('__markdown-it__ rulezz!');\n * ```\n **/\n\n/**\n * new MarkdownIt([presetName, options])\n * - presetName (String): optional, `commonmark` / `zero`\n * - options (Object)\n *\n * Creates parser instanse with given config. Can be called without `new`.\n *\n * ##### presetName\n *\n * MarkdownIt provides named presets as a convenience to quickly\n * enable/disable active syntax rules and options for common use cases.\n *\n * - [\"commonmark\"](https://github.com/markdown-it/markdown-it/blob/master/lib/presets/commonmark.js) -\n *   configures parser to strict [CommonMark](http://commonmark.org/) mode.\n * - [default](https://github.com/markdown-it/markdown-it/blob/master/lib/presets/default.js) -\n *   similar to GFM, used when no preset name given. Enables all available rules,\n *   but still without html, typographer & autolinker.\n * - [\"zero\"](https://github.com/markdown-it/markdown-it/blob/master/lib/presets/zero.js) -\n *   all rules disabled. Useful to quickly setup your config via `.enable()`.\n *   For example, when you need only `bold` and `italic` markup and nothing else.\n *\n * ##### options:\n *\n * - __html__ - `false`. Set `true` to enable HTML tags in source. Be careful!\n *   That's not safe! You may need external sanitizer to protect output from XSS.\n *   It's better to extend features via plugins, instead of enabling HTML.\n * - __xhtmlOut__ - `false`. Set `true` to add '/' when closing single tags\n *   (`<br />`). This is needed only for full CommonMark compatibility. In real\n *   world you will need HTML output.\n * - __breaks__ - `false`. Set `true` to convert `\\n` in paragraphs into `<br>`.\n * - __langPrefix__ - `language-`. CSS language class prefix for fenced blocks.\n *   Can be useful for external highlighters.\n * - __linkify__ - `false`. Set `true` to autoconvert URL-like text to links.\n * - __typographer__  - `false`. Set `true` to enable [some language-neutral\n *   replacement](https://github.com/markdown-it/markdown-it/blob/master/lib/rules_core/replacements.js) +\n *   quotes beautification (smartquotes).\n * - __quotes__ - ``, String or Array. Double + single quotes replacement\n *   pairs, when typographer enabled and smartquotes on. For example, you can\n *   use `''` for Russian, `''` for German, and\n *   `['\\xA0', '\\xA0', '\\xA0', '\\xA0']` for French (including nbsp).\n * - __highlight__ - `null`. Highlighter function for fenced code blocks.\n *   Highlighter `function (str, lang)` should return escaped HTML. It can also\n *   return empty string if the source was not changed and should be escaped\n *   externaly. If result starts with <pre... internal wrapper is skipped.\n *\n * ##### Example\n *\n * ```javascript\n * // commonmark mode\n * var md = require('markdown-it')('commonmark');\n *\n * // default mode\n * var md = require('markdown-it')();\n *\n * // enable everything\n * var md = require('markdown-it')({\n *   html: true,\n *   linkify: true,\n *   typographer: true\n * });\n * ```\n *\n * ##### Syntax highlighting\n *\n * ```js\n * var hljs = require('highlight.js') // https://highlightjs.org/\n *\n * var md = require('markdown-it')({\n *   highlight: function (str, lang) {\n *     if (lang && hljs.getLanguage(lang)) {\n *       try {\n *         return hljs.highlight(str, { language: lang, ignoreIllegals: true }).value;\n *       } catch (__) {}\n *     }\n *\n *     return ''; // use external default escaping\n *   }\n * });\n * ```\n *\n * Or with full wrapper override (if you need assign class to `<pre>`):\n *\n * ```javascript\n * var hljs = require('highlight.js') // https://highlightjs.org/\n *\n * // Actual default values\n * var md = require('markdown-it')({\n *   highlight: function (str, lang) {\n *     if (lang && hljs.getLanguage(lang)) {\n *       try {\n *         return '<pre class=\"hljs\"><code>' +\n *                hljs.highlight(str, { language: lang, ignoreIllegals: true }).value +\n *                '</code></pre>';\n *       } catch (__) {}\n *     }\n *\n *     return '<pre class=\"hljs\"><code>' + md.utils.escapeHtml(str) + '</code></pre>';\n *   }\n * });\n * ```\n *\n **/\nfunction MarkdownIt(presetName, options) {\n  if (!(this instanceof MarkdownIt)) {\n    return new MarkdownIt(presetName, options);\n  }\n\n  if (!options) {\n    if (!utils.isString(presetName)) {\n      options = presetName || {};\n      presetName = 'default';\n    }\n  }\n\n  /**\n   * MarkdownIt#inline -> ParserInline\n   *\n   * Instance of [[ParserInline]]. You may need it to add new rules when\n   * writing plugins. For simple rules control use [[MarkdownIt.disable]] and\n   * [[MarkdownIt.enable]].\n   **/\n  this.inline = new ParserInline();\n\n  /**\n   * MarkdownIt#block -> ParserBlock\n   *\n   * Instance of [[ParserBlock]]. You may need it to add new rules when\n   * writing plugins. For simple rules control use [[MarkdownIt.disable]] and\n   * [[MarkdownIt.enable]].\n   **/\n  this.block = new ParserBlock();\n\n  /**\n   * MarkdownIt#core -> Core\n   *\n   * Instance of [[Core]] chain executor. You may need it to add new rules when\n   * writing plugins. For simple rules control use [[MarkdownIt.disable]] and\n   * [[MarkdownIt.enable]].\n   **/\n  this.core = new ParserCore();\n\n  /**\n   * MarkdownIt#renderer -> Renderer\n   *\n   * Instance of [[Renderer]]. Use it to modify output look. Or to add rendering\n   * rules for new token types, generated by plugins.\n   *\n   * ##### Example\n   *\n   * ```javascript\n   * var md = require('markdown-it')();\n   *\n   * function myToken(tokens, idx, options, env, self) {\n   *   //...\n   *   return result;\n   * };\n   *\n   * md.renderer.rules['my_token'] = myToken\n   * ```\n   *\n   * See [[Renderer]] docs and [source code](https://github.com/markdown-it/markdown-it/blob/master/lib/renderer.js).\n   **/\n  this.renderer = new Renderer();\n\n  /**\n   * MarkdownIt#linkify -> LinkifyIt\n   *\n   * [linkify-it](https://github.com/markdown-it/linkify-it) instance.\n   * Used by [linkify](https://github.com/markdown-it/markdown-it/blob/master/lib/rules_core/linkify.js)\n   * rule.\n   **/\n  this.linkify = new LinkifyIt();\n\n  /**\n   * MarkdownIt#validateLink(url) -> Boolean\n   *\n   * Link validation function. CommonMark allows too much in links. By default\n   * we disable `javascript:`, `vbscript:`, `file:` schemas, and almost all `data:...` schemas\n   * except some embedded image types.\n   *\n   * You can change this behaviour:\n   *\n   * ```javascript\n   * var md = require('markdown-it')();\n   * // enable everything\n   * md.validateLink = function () { return true; }\n   * ```\n   **/\n  this.validateLink = validateLink;\n\n  /**\n   * MarkdownIt#normalizeLink(url) -> String\n   *\n   * Function used to encode link url to a machine-readable format,\n   * which includes url-encoding, punycode, etc.\n   **/\n  this.normalizeLink = normalizeLink;\n\n  /**\n   * MarkdownIt#normalizeLinkText(url) -> String\n   *\n   * Function used to decode link url to a human-readable format`\n   **/\n  this.normalizeLinkText = normalizeLinkText;\n\n\n  // Expose utils & helpers for easy acces from plugins\n\n  /**\n   * MarkdownIt#utils -> utils\n   *\n   * Assorted utility functions, useful to write plugins. See details\n   * [here](https://github.com/markdown-it/markdown-it/blob/master/lib/common/utils.js).\n   **/\n  this.utils = utils;\n\n  /**\n   * MarkdownIt#helpers -> helpers\n   *\n   * Link components parser functions, useful to write plugins. See details\n   * [here](https://github.com/markdown-it/markdown-it/blob/master/lib/helpers).\n   **/\n  this.helpers = utils.assign({}, helpers);\n\n\n  this.options = {};\n  this.configure(presetName);\n\n  if (options) { this.set(options); }\n}\n\n\n/** chainable\n * MarkdownIt.set(options)\n *\n * Set parser options (in the same format as in constructor). Probably, you\n * will never need it, but you can change options after constructor call.\n *\n * ##### Example\n *\n * ```javascript\n * var md = require('markdown-it')()\n *             .set({ html: true, breaks: true })\n *             .set({ typographer, true });\n * ```\n *\n * __Note:__ To achieve the best possible performance, don't modify a\n * `markdown-it` instance options on the fly. If you need multiple configurations\n * it's best to create multiple instances and initialize each with separate\n * config.\n **/\nMarkdownIt.prototype.set = function (options) {\n  utils.assign(this.options, options);\n  return this;\n};\n\n\n/** chainable, internal\n * MarkdownIt.configure(presets)\n *\n * Batch load of all options and compenent settings. This is internal method,\n * and you probably will not need it. But if you will - see available presets\n * and data structure [here](https://github.com/markdown-it/markdown-it/tree/master/lib/presets)\n *\n * We strongly recommend to use presets instead of direct config loads. That\n * will give better compatibility with next versions.\n **/\nMarkdownIt.prototype.configure = function (presets) {\n  var self = this, presetName;\n\n  if (utils.isString(presets)) {\n    presetName = presets;\n    presets = config[presetName];\n    if (!presets) { throw new Error('Wrong `markdown-it` preset \"' + presetName + '\", check name'); }\n  }\n\n  if (!presets) { throw new Error('Wrong `markdown-it` preset, can\\'t be empty'); }\n\n  if (presets.options) { self.set(presets.options); }\n\n  if (presets.components) {\n    Object.keys(presets.components).forEach(function (name) {\n      if (presets.components[name].rules) {\n        self[name].ruler.enableOnly(presets.components[name].rules);\n      }\n      if (presets.components[name].rules2) {\n        self[name].ruler2.enableOnly(presets.components[name].rules2);\n      }\n    });\n  }\n  return this;\n};\n\n\n/** chainable\n * MarkdownIt.enable(list, ignoreInvalid)\n * - list (String|Array): rule name or list of rule names to enable\n * - ignoreInvalid (Boolean): set `true` to ignore errors when rule not found.\n *\n * Enable list or rules. It will automatically find appropriate components,\n * containing rules with given names. If rule not found, and `ignoreInvalid`\n * not set - throws exception.\n *\n * ##### Example\n *\n * ```javascript\n * var md = require('markdown-it')()\n *             .enable(['sub', 'sup'])\n *             .disable('smartquotes');\n * ```\n **/\nMarkdownIt.prototype.enable = function (list, ignoreInvalid) {\n  var result = [];\n\n  if (!Array.isArray(list)) { list = [ list ]; }\n\n  [ 'core', 'block', 'inline' ].forEach(function (chain) {\n    result = result.concat(this[chain].ruler.enable(list, true));\n  }, this);\n\n  result = result.concat(this.inline.ruler2.enable(list, true));\n\n  var missed = list.filter(function (name) { return result.indexOf(name) < 0; });\n\n  if (missed.length && !ignoreInvalid) {\n    throw new Error('MarkdownIt. Failed to enable unknown rule(s): ' + missed);\n  }\n\n  return this;\n};\n\n\n/** chainable\n * MarkdownIt.disable(list, ignoreInvalid)\n * - list (String|Array): rule name or list of rule names to disable.\n * - ignoreInvalid (Boolean): set `true` to ignore errors when rule not found.\n *\n * The same as [[MarkdownIt.enable]], but turn specified rules off.\n **/\nMarkdownIt.prototype.disable = function (list, ignoreInvalid) {\n  var result = [];\n\n  if (!Array.isArray(list)) { list = [ list ]; }\n\n  [ 'core', 'block', 'inline' ].forEach(function (chain) {\n    result = result.concat(this[chain].ruler.disable(list, true));\n  }, this);\n\n  result = result.concat(this.inline.ruler2.disable(list, true));\n\n  var missed = list.filter(function (name) { return result.indexOf(name) < 0; });\n\n  if (missed.length && !ignoreInvalid) {\n    throw new Error('MarkdownIt. Failed to disable unknown rule(s): ' + missed);\n  }\n  return this;\n};\n\n\n/** chainable\n * MarkdownIt.use(plugin, params)\n *\n * Load specified plugin with given params into current parser instance.\n * It's just a sugar to call `plugin(md, params)` with curring.\n *\n * ##### Example\n *\n * ```javascript\n * var iterator = require('markdown-it-for-inline');\n * var md = require('markdown-it')()\n *             .use(iterator, 'foo_replace', 'text', function (tokens, idx) {\n *               tokens[idx].content = tokens[idx].content.replace(/foo/g, 'bar');\n *             });\n * ```\n **/\nMarkdownIt.prototype.use = function (plugin /*, params, ... */) {\n  var args = [ this ].concat(Array.prototype.slice.call(arguments, 1));\n  plugin.apply(plugin, args);\n  return this;\n};\n\n\n/** internal\n * MarkdownIt.parse(src, env) -> Array\n * - src (String): source string\n * - env (Object): environment sandbox\n *\n * Parse input string and return list of block tokens (special token type\n * \"inline\" will contain list of inline tokens). You should not call this\n * method directly, until you write custom renderer (for example, to produce\n * AST).\n *\n * `env` is used to pass data between \"distributed\" rules and return additional\n * metadata like reference info, needed for the renderer. It also can be used to\n * inject data in specific cases. Usually, you will be ok to pass `{}`,\n * and then pass updated object to renderer.\n **/\nMarkdownIt.prototype.parse = function (src, env) {\n  if (typeof src !== 'string') {\n    throw new Error('Input data should be a String');\n  }\n\n  var state = new this.core.State(src, this, env);\n\n  this.core.process(state);\n\n  return state.tokens;\n};\n\n\n/**\n * MarkdownIt.render(src [, env]) -> String\n * - src (String): source string\n * - env (Object): environment sandbox\n *\n * Render markdown string into html. It does all magic for you :).\n *\n * `env` can be used to inject additional metadata (`{}` by default).\n * But you will not need it with high probability. See also comment\n * in [[MarkdownIt.parse]].\n **/\nMarkdownIt.prototype.render = function (src, env) {\n  env = env || {};\n\n  return this.renderer.render(this.parse(src, env), this.options, env);\n};\n\n\n/** internal\n * MarkdownIt.parseInline(src, env) -> Array\n * - src (String): source string\n * - env (Object): environment sandbox\n *\n * The same as [[MarkdownIt.parse]] but skip all block rules. It returns the\n * block tokens list with the single `inline` element, containing parsed inline\n * tokens in `children` property. Also updates `env` object.\n **/\nMarkdownIt.prototype.parseInline = function (src, env) {\n  var state = new this.core.State(src, this, env);\n\n  state.inlineMode = true;\n  this.core.process(state);\n\n  return state.tokens;\n};\n\n\n/**\n * MarkdownIt.renderInline(src [, env]) -> String\n * - src (String): source string\n * - env (Object): environment sandbox\n *\n * Similar to [[MarkdownIt.render]] but for single paragraph content. Result\n * will NOT be wrapped into `<p>` tags.\n **/\nMarkdownIt.prototype.renderInline = function (src, env) {\n  env = env || {};\n\n  return this.renderer.render(this.parseInline(src, env), this.options, env);\n};\n\n\nmodule.exports = MarkdownIt;\n","/** internal\n * class ParserBlock\n *\n * Block-level tokenizer.\n **/\n'use strict';\n\n\nvar Ruler           = require('./ruler');\n\n\nvar _rules = [\n  // First 2 params - rule name & source. Secondary array - list of rules,\n  // which can be terminated by this one.\n  [ 'table',      require('./rules_block/table'),      [ 'paragraph', 'reference' ] ],\n  [ 'code',       require('./rules_block/code') ],\n  [ 'fence',      require('./rules_block/fence'),      [ 'paragraph', 'reference', 'blockquote', 'list' ] ],\n  [ 'blockquote', require('./rules_block/blockquote'), [ 'paragraph', 'reference', 'blockquote', 'list' ] ],\n  [ 'hr',         require('./rules_block/hr'),         [ 'paragraph', 'reference', 'blockquote', 'list' ] ],\n  [ 'list',       require('./rules_block/list'),       [ 'paragraph', 'reference', 'blockquote' ] ],\n  [ 'reference',  require('./rules_block/reference') ],\n  [ 'html_block', require('./rules_block/html_block'), [ 'paragraph', 'reference', 'blockquote' ] ],\n  [ 'heading',    require('./rules_block/heading'),    [ 'paragraph', 'reference', 'blockquote' ] ],\n  [ 'lheading',   require('./rules_block/lheading') ],\n  [ 'paragraph',  require('./rules_block/paragraph') ]\n];\n\n\n/**\n * new ParserBlock()\n **/\nfunction ParserBlock() {\n  /**\n   * ParserBlock#ruler -> Ruler\n   *\n   * [[Ruler]] instance. Keep configuration of block rules.\n   **/\n  this.ruler = new Ruler();\n\n  for (var i = 0; i < _rules.length; i++) {\n    this.ruler.push(_rules[i][0], _rules[i][1], { alt: (_rules[i][2] || []).slice() });\n  }\n}\n\n\n// Generate tokens for input range\n//\nParserBlock.prototype.tokenize = function (state, startLine, endLine) {\n  var ok, i,\n      rules = this.ruler.getRules(''),\n      len = rules.length,\n      line = startLine,\n      hasEmptyLines = false,\n      maxNesting = state.md.options.maxNesting;\n\n  while (line < endLine) {\n    state.line = line = state.skipEmptyLines(line);\n    if (line >= endLine) { break; }\n\n    // Termination condition for nested calls.\n    // Nested calls currently used for blockquotes & lists\n    if (state.sCount[line] < state.blkIndent) { break; }\n\n    // If nesting level exceeded - skip tail to the end. That's not ordinary\n    // situation and we should not care about content.\n    if (state.level >= maxNesting) {\n      state.line = endLine;\n      break;\n    }\n\n    // Try all possible rules.\n    // On success, rule should:\n    //\n    // - update `state.line`\n    // - update `state.tokens`\n    // - return true\n\n    for (i = 0; i < len; i++) {\n      ok = rules[i](state, line, endLine, false);\n      if (ok) { break; }\n    }\n\n    // set state.tight if we had an empty line before current tag\n    // i.e. latest empty line should not count\n    state.tight = !hasEmptyLines;\n\n    // paragraph might \"eat\" one newline after it in nested lists\n    if (state.isEmpty(state.line - 1)) {\n      hasEmptyLines = true;\n    }\n\n    line = state.line;\n\n    if (line < endLine && state.isEmpty(line)) {\n      hasEmptyLines = true;\n      line++;\n      state.line = line;\n    }\n  }\n};\n\n\n/**\n * ParserBlock.parse(str, md, env, outTokens)\n *\n * Process input string and push block tokens into `outTokens`\n **/\nParserBlock.prototype.parse = function (src, md, env, outTokens) {\n  var state;\n\n  if (!src) { return; }\n\n  state = new this.State(src, md, env, outTokens);\n\n  this.tokenize(state, state.line, state.lineMax);\n};\n\n\nParserBlock.prototype.State = require('./rules_block/state_block');\n\n\nmodule.exports = ParserBlock;\n","/** internal\n * class Core\n *\n * Top-level rules executor. Glues block/inline parsers and does intermediate\n * transformations.\n **/\n'use strict';\n\n\nvar Ruler  = require('./ruler');\n\n\nvar _rules = [\n  [ 'normalize',      require('./rules_core/normalize')      ],\n  [ 'block',          require('./rules_core/block')          ],\n  [ 'inline',         require('./rules_core/inline')         ],\n  [ 'linkify',        require('./rules_core/linkify')        ],\n  [ 'replacements',   require('./rules_core/replacements')   ],\n  [ 'smartquotes',    require('./rules_core/smartquotes')    ]\n];\n\n\n/**\n * new Core()\n **/\nfunction Core() {\n  /**\n   * Core#ruler -> Ruler\n   *\n   * [[Ruler]] instance. Keep configuration of core rules.\n   **/\n  this.ruler = new Ruler();\n\n  for (var i = 0; i < _rules.length; i++) {\n    this.ruler.push(_rules[i][0], _rules[i][1]);\n  }\n}\n\n\n/**\n * Core.process(state)\n *\n * Executes core chain rules.\n **/\nCore.prototype.process = function (state) {\n  var i, l, rules;\n\n  rules = this.ruler.getRules('');\n\n  for (i = 0, l = rules.length; i < l; i++) {\n    rules[i](state);\n  }\n};\n\nCore.prototype.State = require('./rules_core/state_core');\n\n\nmodule.exports = Core;\n","/** internal\n * class ParserInline\n *\n * Tokenizes paragraph content.\n **/\n'use strict';\n\n\nvar Ruler           = require('./ruler');\n\n\n////////////////////////////////////////////////////////////////////////////////\n// Parser rules\n\nvar _rules = [\n  [ 'text',            require('./rules_inline/text') ],\n  [ 'newline',         require('./rules_inline/newline') ],\n  [ 'escape',          require('./rules_inline/escape') ],\n  [ 'backticks',       require('./rules_inline/backticks') ],\n  [ 'strikethrough',   require('./rules_inline/strikethrough').tokenize ],\n  [ 'emphasis',        require('./rules_inline/emphasis').tokenize ],\n  [ 'link',            require('./rules_inline/link') ],\n  [ 'image',           require('./rules_inline/image') ],\n  [ 'autolink',        require('./rules_inline/autolink') ],\n  [ 'html_inline',     require('./rules_inline/html_inline') ],\n  [ 'entity',          require('./rules_inline/entity') ]\n];\n\nvar _rules2 = [\n  [ 'balance_pairs',   require('./rules_inline/balance_pairs') ],\n  [ 'strikethrough',   require('./rules_inline/strikethrough').postProcess ],\n  [ 'emphasis',        require('./rules_inline/emphasis').postProcess ],\n  [ 'text_collapse',   require('./rules_inline/text_collapse') ]\n];\n\n\n/**\n * new ParserInline()\n **/\nfunction ParserInline() {\n  var i;\n\n  /**\n   * ParserInline#ruler -> Ruler\n   *\n   * [[Ruler]] instance. Keep configuration of inline rules.\n   **/\n  this.ruler = new Ruler();\n\n  for (i = 0; i < _rules.length; i++) {\n    this.ruler.push(_rules[i][0], _rules[i][1]);\n  }\n\n  /**\n   * ParserInline#ruler2 -> Ruler\n   *\n   * [[Ruler]] instance. Second ruler used for post-processing\n   * (e.g. in emphasis-like rules).\n   **/\n  this.ruler2 = new Ruler();\n\n  for (i = 0; i < _rules2.length; i++) {\n    this.ruler2.push(_rules2[i][0], _rules2[i][1]);\n  }\n}\n\n\n// Skip single token by running all rules in validation mode;\n// returns `true` if any rule reported success\n//\nParserInline.prototype.skipToken = function (state) {\n  var ok, i, pos = state.pos,\n      rules = this.ruler.getRules(''),\n      len = rules.length,\n      maxNesting = state.md.options.maxNesting,\n      cache = state.cache;\n\n\n  if (typeof cache[pos] !== 'undefined') {\n    state.pos = cache[pos];\n    return;\n  }\n\n  if (state.level < maxNesting) {\n    for (i = 0; i < len; i++) {\n      // Increment state.level and decrement it later to limit recursion.\n      // It's harmless to do here, because no tokens are created. But ideally,\n      // we'd need a separate private state variable for this purpose.\n      //\n      state.level++;\n      ok = rules[i](state, true);\n      state.level--;\n\n      if (ok) { break; }\n    }\n  } else {\n    // Too much nesting, just skip until the end of the paragraph.\n    //\n    // NOTE: this will cause links to behave incorrectly in the following case,\n    //       when an amount of `[` is exactly equal to `maxNesting + 1`:\n    //\n    //       [[[[[[[[[[[[[[[[[[[[[foo]()\n    //\n    // TODO: remove this workaround when CM standard will allow nested links\n    //       (we can replace it by preventing links from being parsed in\n    //       validation mode)\n    //\n    state.pos = state.posMax;\n  }\n\n  if (!ok) { state.pos++; }\n  cache[pos] = state.pos;\n};\n\n\n// Generate tokens for input range\n//\nParserInline.prototype.tokenize = function (state) {\n  var ok, i,\n      rules = this.ruler.getRules(''),\n      len = rules.length,\n      end = state.posMax,\n      maxNesting = state.md.options.maxNesting;\n\n  while (state.pos < end) {\n    // Try all possible rules.\n    // On success, rule should:\n    //\n    // - update `state.pos`\n    // - update `state.tokens`\n    // - return true\n\n    if (state.level < maxNesting) {\n      for (i = 0; i < len; i++) {\n        ok = rules[i](state, false);\n        if (ok) { break; }\n      }\n    }\n\n    if (ok) {\n      if (state.pos >= end) { break; }\n      continue;\n    }\n\n    state.pending += state.src[state.pos++];\n  }\n\n  if (state.pending) {\n    state.pushPending();\n  }\n};\n\n\n/**\n * ParserInline.parse(str, md, env, outTokens)\n *\n * Process input string and push inline tokens into `outTokens`\n **/\nParserInline.prototype.parse = function (str, md, env, outTokens) {\n  var i, rules, len;\n  var state = new this.State(str, md, env, outTokens);\n\n  this.tokenize(state);\n\n  rules = this.ruler2.getRules('');\n  len = rules.length;\n\n  for (i = 0; i < len; i++) {\n    rules[i](state);\n  }\n};\n\n\nParserInline.prototype.State = require('./rules_inline/state_inline');\n\n\nmodule.exports = ParserInline;\n","// Commonmark default options\n\n'use strict';\n\n\nmodule.exports = {\n  options: {\n    html:         true,         // Enable HTML tags in source\n    xhtmlOut:     true,         // Use '/' to close single tags (<br />)\n    breaks:       false,        // Convert '\\n' in paragraphs into <br>\n    langPrefix:   'language-',  // CSS language prefix for fenced blocks\n    linkify:      false,        // autoconvert URL-like texts to links\n\n    // Enable some language-neutral replacements + quotes beautification\n    typographer:  false,\n\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Could be either a String or an Array.\n    //\n    // For example, you can use '' for Russian, '' for German,\n    // and ['\\xA0', '\\xA0', '\\xA0', '\\xA0'] for French (including nbsp).\n    quotes: '\\u201c\\u201d\\u2018\\u2019', /*  */\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if the source string is not changed and should be escaped externaly.\n    // If result starts with <pre... internal wrapper is skipped.\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight: null,\n\n    maxNesting:   20            // Internal protection, recursion limit\n  },\n\n  components: {\n\n    core: {\n      rules: [\n        'normalize',\n        'block',\n        'inline'\n      ]\n    },\n\n    block: {\n      rules: [\n        'blockquote',\n        'code',\n        'fence',\n        'heading',\n        'hr',\n        'html_block',\n        'lheading',\n        'list',\n        'reference',\n        'paragraph'\n      ]\n    },\n\n    inline: {\n      rules: [\n        'autolink',\n        'backticks',\n        'emphasis',\n        'entity',\n        'escape',\n        'html_inline',\n        'image',\n        'link',\n        'newline',\n        'text'\n      ],\n      rules2: [\n        'balance_pairs',\n        'emphasis',\n        'text_collapse'\n      ]\n    }\n  }\n};\n","// markdown-it default options\n\n'use strict';\n\n\nmodule.exports = {\n  options: {\n    html:         false,        // Enable HTML tags in source\n    xhtmlOut:     false,        // Use '/' to close single tags (<br />)\n    breaks:       false,        // Convert '\\n' in paragraphs into <br>\n    langPrefix:   'language-',  // CSS language prefix for fenced blocks\n    linkify:      false,        // autoconvert URL-like texts to links\n\n    // Enable some language-neutral replacements + quotes beautification\n    typographer:  false,\n\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Could be either a String or an Array.\n    //\n    // For example, you can use '' for Russian, '' for German,\n    // and ['\\xA0', '\\xA0', '\\xA0', '\\xA0'] for French (including nbsp).\n    quotes: '\\u201c\\u201d\\u2018\\u2019', /*  */\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if the source string is not changed and should be escaped externaly.\n    // If result starts with <pre... internal wrapper is skipped.\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight: null,\n\n    maxNesting:   100            // Internal protection, recursion limit\n  },\n\n  components: {\n\n    core: {},\n    block: {},\n    inline: {}\n  }\n};\n","// \"Zero\" preset, with nothing enabled. Useful for manual configuring of simple\n// modes. For example, to parse bold/italic only.\n\n'use strict';\n\n\nmodule.exports = {\n  options: {\n    html:         false,        // Enable HTML tags in source\n    xhtmlOut:     false,        // Use '/' to close single tags (<br />)\n    breaks:       false,        // Convert '\\n' in paragraphs into <br>\n    langPrefix:   'language-',  // CSS language prefix for fenced blocks\n    linkify:      false,        // autoconvert URL-like texts to links\n\n    // Enable some language-neutral replacements + quotes beautification\n    typographer:  false,\n\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Could be either a String or an Array.\n    //\n    // For example, you can use '' for Russian, '' for German,\n    // and ['\\xA0', '\\xA0', '\\xA0', '\\xA0'] for French (including nbsp).\n    quotes: '\\u201c\\u201d\\u2018\\u2019', /*  */\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if the source string is not changed and should be escaped externaly.\n    // If result starts with <pre... internal wrapper is skipped.\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight: null,\n\n    maxNesting:   20            // Internal protection, recursion limit\n  },\n\n  components: {\n\n    core: {\n      rules: [\n        'normalize',\n        'block',\n        'inline'\n      ]\n    },\n\n    block: {\n      rules: [\n        'paragraph'\n      ]\n    },\n\n    inline: {\n      rules: [\n        'text'\n      ],\n      rules2: [\n        'balance_pairs',\n        'text_collapse'\n      ]\n    }\n  }\n};\n","/**\n * class Renderer\n *\n * Generates HTML from parsed token stream. Each instance has independent\n * copy of rules. Those can be rewritten with ease. Also, you can add new\n * rules if you create plugin and adds new token types.\n **/\n'use strict';\n\n\nvar assign          = require('./common/utils').assign;\nvar unescapeAll     = require('./common/utils').unescapeAll;\nvar escapeHtml      = require('./common/utils').escapeHtml;\n\n\n////////////////////////////////////////////////////////////////////////////////\n\nvar default_rules = {};\n\n\ndefault_rules.code_inline = function (tokens, idx, options, env, slf) {\n  var token = tokens[idx];\n\n  return  '<code' + slf.renderAttrs(token) + '>' +\n          escapeHtml(tokens[idx].content) +\n          '</code>';\n};\n\n\ndefault_rules.code_block = function (tokens, idx, options, env, slf) {\n  var token = tokens[idx];\n\n  return  '<pre' + slf.renderAttrs(token) + '><code>' +\n          escapeHtml(tokens[idx].content) +\n          '</code></pre>\\n';\n};\n\n\ndefault_rules.fence = function (tokens, idx, options, env, slf) {\n  var token = tokens[idx],\n      info = token.info ? unescapeAll(token.info).trim() : '',\n      langName = '',\n      langAttrs = '',\n      highlighted, i, arr, tmpAttrs, tmpToken;\n\n  if (info) {\n    arr = info.split(/(\\s+)/g);\n    langName = arr[0];\n    langAttrs = arr.slice(2).join('');\n  }\n\n  if (options.highlight) {\n    highlighted = options.highlight(token.content, langName, langAttrs) || escapeHtml(token.content);\n  } else {\n    highlighted = escapeHtml(token.content);\n  }\n\n  if (highlighted.indexOf('<pre') === 0) {\n    return highlighted + '\\n';\n  }\n\n  // If language exists, inject class gently, without modifying original token.\n  // May be, one day we will add .deepClone() for token and simplify this part, but\n  // now we prefer to keep things local.\n  if (info) {\n    i        = token.attrIndex('class');\n    tmpAttrs = token.attrs ? token.attrs.slice() : [];\n\n    if (i < 0) {\n      tmpAttrs.push([ 'class', options.langPrefix + langName ]);\n    } else {\n      tmpAttrs[i] = tmpAttrs[i].slice();\n      tmpAttrs[i][1] += ' ' + options.langPrefix + langName;\n    }\n\n    // Fake token just to render attributes\n    tmpToken = {\n      attrs: tmpAttrs\n    };\n\n    return  '<pre><code' + slf.renderAttrs(tmpToken) + '>'\n          + highlighted\n          + '</code></pre>\\n';\n  }\n\n\n  return  '<pre><code' + slf.renderAttrs(token) + '>'\n        + highlighted\n        + '</code></pre>\\n';\n};\n\n\ndefault_rules.image = function (tokens, idx, options, env, slf) {\n  var token = tokens[idx];\n\n  // \"alt\" attr MUST be set, even if empty. Because it's mandatory and\n  // should be placed on proper position for tests.\n  //\n  // Replace content with actual value\n\n  token.attrs[token.attrIndex('alt')][1] =\n    slf.renderInlineAsText(token.children, options, env);\n\n  return slf.renderToken(tokens, idx, options);\n};\n\n\ndefault_rules.hardbreak = function (tokens, idx, options /*, env */) {\n  return options.xhtmlOut ? '<br />\\n' : '<br>\\n';\n};\ndefault_rules.softbreak = function (tokens, idx, options /*, env */) {\n  return options.breaks ? (options.xhtmlOut ? '<br />\\n' : '<br>\\n') : '\\n';\n};\n\n\ndefault_rules.text = function (tokens, idx /*, options, env */) {\n  return escapeHtml(tokens[idx].content);\n};\n\n\ndefault_rules.html_block = function (tokens, idx /*, options, env */) {\n  return tokens[idx].content;\n};\ndefault_rules.html_inline = function (tokens, idx /*, options, env */) {\n  return tokens[idx].content;\n};\n\n\n/**\n * new Renderer()\n *\n * Creates new [[Renderer]] instance and fill [[Renderer#rules]] with defaults.\n **/\nfunction Renderer() {\n\n  /**\n   * Renderer#rules -> Object\n   *\n   * Contains render rules for tokens. Can be updated and extended.\n   *\n   * ##### Example\n   *\n   * ```javascript\n   * var md = require('markdown-it')();\n   *\n   * md.renderer.rules.strong_open  = function () { return '<b>'; };\n   * md.renderer.rules.strong_close = function () { return '</b>'; };\n   *\n   * var result = md.renderInline(...);\n   * ```\n   *\n   * Each rule is called as independent static function with fixed signature:\n   *\n   * ```javascript\n   * function my_token_render(tokens, idx, options, env, renderer) {\n   *   // ...\n   *   return renderedHTML;\n   * }\n   * ```\n   *\n   * See [source code](https://github.com/markdown-it/markdown-it/blob/master/lib/renderer.js)\n   * for more details and examples.\n   **/\n  this.rules = assign({}, default_rules);\n}\n\n\n/**\n * Renderer.renderAttrs(token) -> String\n *\n * Render token attributes to string.\n **/\nRenderer.prototype.renderAttrs = function renderAttrs(token) {\n  var i, l, result;\n\n  if (!token.attrs) { return ''; }\n\n  result = '';\n\n  for (i = 0, l = token.attrs.length; i < l; i++) {\n    result += ' ' + escapeHtml(token.attrs[i][0]) + '=\"' + escapeHtml(token.attrs[i][1]) + '\"';\n  }\n\n  return result;\n};\n\n\n/**\n * Renderer.renderToken(tokens, idx, options) -> String\n * - tokens (Array): list of tokens\n * - idx (Numbed): token index to render\n * - options (Object): params of parser instance\n *\n * Default token renderer. Can be overriden by custom function\n * in [[Renderer#rules]].\n **/\nRenderer.prototype.renderToken = function renderToken(tokens, idx, options) {\n  var nextToken,\n      result = '',\n      needLf = false,\n      token = tokens[idx];\n\n  // Tight list paragraphs\n  if (token.hidden) {\n    return '';\n  }\n\n  // Insert a newline between hidden paragraph and subsequent opening\n  // block-level tag.\n  //\n  // For example, here we should insert a newline before blockquote:\n  //  - a\n  //    >\n  //\n  if (token.block && token.nesting !== -1 && idx && tokens[idx - 1].hidden) {\n    result += '\\n';\n  }\n\n  // Add token name, e.g. `<img`\n  result += (token.nesting === -1 ? '</' : '<') + token.tag;\n\n  // Encode attributes, e.g. `<img src=\"foo\"`\n  result += this.renderAttrs(token);\n\n  // Add a slash for self-closing tags, e.g. `<img src=\"foo\" /`\n  if (token.nesting === 0 && options.xhtmlOut) {\n    result += ' /';\n  }\n\n  // Check if we need to add a newline after this tag\n  if (token.block) {\n    needLf = true;\n\n    if (token.nesting === 1) {\n      if (idx + 1 < tokens.length) {\n        nextToken = tokens[idx + 1];\n\n        if (nextToken.type === 'inline' || nextToken.hidden) {\n          // Block-level tag containing an inline tag.\n          //\n          needLf = false;\n\n        } else if (nextToken.nesting === -1 && nextToken.tag === token.tag) {\n          // Opening tag + closing tag of the same type. E.g. `<li></li>`.\n          //\n          needLf = false;\n        }\n      }\n    }\n  }\n\n  result += needLf ? '>\\n' : '>';\n\n  return result;\n};\n\n\n/**\n * Renderer.renderInline(tokens, options, env) -> String\n * - tokens (Array): list on block tokens to render\n * - options (Object): params of parser instance\n * - env (Object): additional data from parsed input (references, for example)\n *\n * The same as [[Renderer.render]], but for single token of `inline` type.\n **/\nRenderer.prototype.renderInline = function (tokens, options, env) {\n  var type,\n      result = '',\n      rules = this.rules;\n\n  for (var i = 0, len = tokens.length; i < len; i++) {\n    type = tokens[i].type;\n\n    if (typeof rules[type] !== 'undefined') {\n      result += rules[type](tokens, i, options, env, this);\n    } else {\n      result += this.renderToken(tokens, i, options);\n    }\n  }\n\n  return result;\n};\n\n\n/** internal\n * Renderer.renderInlineAsText(tokens, options, env) -> String\n * - tokens (Array): list on block tokens to render\n * - options (Object): params of parser instance\n * - env (Object): additional data from parsed input (references, for example)\n *\n * Special kludge for image `alt` attributes to conform CommonMark spec.\n * Don't try to use it! Spec requires to show `alt` content with stripped markup,\n * instead of simple escaping.\n **/\nRenderer.prototype.renderInlineAsText = function (tokens, options, env) {\n  var result = '';\n\n  for (var i = 0, len = tokens.length; i < len; i++) {\n    if (tokens[i].type === 'text') {\n      result += tokens[i].content;\n    } else if (tokens[i].type === 'image') {\n      result += this.renderInlineAsText(tokens[i].children, options, env);\n    } else if (tokens[i].type === 'softbreak') {\n      result += '\\n';\n    }\n  }\n\n  return result;\n};\n\n\n/**\n * Renderer.render(tokens, options, env) -> String\n * - tokens (Array): list on block tokens to render\n * - options (Object): params of parser instance\n * - env (Object): additional data from parsed input (references, for example)\n *\n * Takes token stream and generates HTML. Probably, you will never need to call\n * this method directly.\n **/\nRenderer.prototype.render = function (tokens, options, env) {\n  var i, len, type,\n      result = '',\n      rules = this.rules;\n\n  for (i = 0, len = tokens.length; i < len; i++) {\n    type = tokens[i].type;\n\n    if (type === 'inline') {\n      result += this.renderInline(tokens[i].children, options, env);\n    } else if (typeof rules[type] !== 'undefined') {\n      result += rules[tokens[i].type](tokens, i, options, env, this);\n    } else {\n      result += this.renderToken(tokens, i, options, env);\n    }\n  }\n\n  return result;\n};\n\nmodule.exports = Renderer;\n","/**\n * class Ruler\n *\n * Helper class, used by [[MarkdownIt#core]], [[MarkdownIt#block]] and\n * [[MarkdownIt#inline]] to manage sequences of functions (rules):\n *\n * - keep rules in defined order\n * - assign the name to each rule\n * - enable/disable rules\n * - add/replace rules\n * - allow assign rules to additional named chains (in the same)\n * - cacheing lists of active rules\n *\n * You will not need use this class directly until write plugins. For simple\n * rules control use [[MarkdownIt.disable]], [[MarkdownIt.enable]] and\n * [[MarkdownIt.use]].\n **/\n'use strict';\n\n\n/**\n * new Ruler()\n **/\nfunction Ruler() {\n  // List of added rules. Each element is:\n  //\n  // {\n  //   name: XXX,\n  //   enabled: Boolean,\n  //   fn: Function(),\n  //   alt: [ name2, name3 ]\n  // }\n  //\n  this.__rules__ = [];\n\n  // Cached rule chains.\n  //\n  // First level - chain name, '' for default.\n  // Second level - diginal anchor for fast filtering by charcodes.\n  //\n  this.__cache__ = null;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// Helper methods, should not be used directly\n\n\n// Find rule index by name\n//\nRuler.prototype.__find__ = function (name) {\n  for (var i = 0; i < this.__rules__.length; i++) {\n    if (this.__rules__[i].name === name) {\n      return i;\n    }\n  }\n  return -1;\n};\n\n\n// Build rules lookup cache\n//\nRuler.prototype.__compile__ = function () {\n  var self = this;\n  var chains = [ '' ];\n\n  // collect unique names\n  self.__rules__.forEach(function (rule) {\n    if (!rule.enabled) { return; }\n\n    rule.alt.forEach(function (altName) {\n      if (chains.indexOf(altName) < 0) {\n        chains.push(altName);\n      }\n    });\n  });\n\n  self.__cache__ = {};\n\n  chains.forEach(function (chain) {\n    self.__cache__[chain] = [];\n    self.__rules__.forEach(function (rule) {\n      if (!rule.enabled) { return; }\n\n      if (chain && rule.alt.indexOf(chain) < 0) { return; }\n\n      self.__cache__[chain].push(rule.fn);\n    });\n  });\n};\n\n\n/**\n * Ruler.at(name, fn [, options])\n * - name (String): rule name to replace.\n * - fn (Function): new rule function.\n * - options (Object): new rule options (not mandatory).\n *\n * Replace rule by name with new function & options. Throws error if name not\n * found.\n *\n * ##### Options:\n *\n * - __alt__ - array with names of \"alternate\" chains.\n *\n * ##### Example\n *\n * Replace existing typographer replacement rule with new one:\n *\n * ```javascript\n * var md = require('markdown-it')();\n *\n * md.core.ruler.at('replacements', function replace(state) {\n *   //...\n * });\n * ```\n **/\nRuler.prototype.at = function (name, fn, options) {\n  var index = this.__find__(name);\n  var opt = options || {};\n\n  if (index === -1) { throw new Error('Parser rule not found: ' + name); }\n\n  this.__rules__[index].fn = fn;\n  this.__rules__[index].alt = opt.alt || [];\n  this.__cache__ = null;\n};\n\n\n/**\n * Ruler.before(beforeName, ruleName, fn [, options])\n * - beforeName (String): new rule will be added before this one.\n * - ruleName (String): name of added rule.\n * - fn (Function): rule function.\n * - options (Object): rule options (not mandatory).\n *\n * Add new rule to chain before one with given name. See also\n * [[Ruler.after]], [[Ruler.push]].\n *\n * ##### Options:\n *\n * - __alt__ - array with names of \"alternate\" chains.\n *\n * ##### Example\n *\n * ```javascript\n * var md = require('markdown-it')();\n *\n * md.block.ruler.before('paragraph', 'my_rule', function replace(state) {\n *   //...\n * });\n * ```\n **/\nRuler.prototype.before = function (beforeName, ruleName, fn, options) {\n  var index = this.__find__(beforeName);\n  var opt = options || {};\n\n  if (index === -1) { throw new Error('Parser rule not found: ' + beforeName); }\n\n  this.__rules__.splice(index, 0, {\n    name: ruleName,\n    enabled: true,\n    fn: fn,\n    alt: opt.alt || []\n  });\n\n  this.__cache__ = null;\n};\n\n\n/**\n * Ruler.after(afterName, ruleName, fn [, options])\n * - afterName (String): new rule will be added after this one.\n * - ruleName (String): name of added rule.\n * - fn (Function): rule function.\n * - options (Object): rule options (not mandatory).\n *\n * Add new rule to chain after one with given name. See also\n * [[Ruler.before]], [[Ruler.push]].\n *\n * ##### Options:\n *\n * - __alt__ - array with names of \"alternate\" chains.\n *\n * ##### Example\n *\n * ```javascript\n * var md = require('markdown-it')();\n *\n * md.inline.ruler.after('text', 'my_rule', function replace(state) {\n *   //...\n * });\n * ```\n **/\nRuler.prototype.after = function (afterName, ruleName, fn, options) {\n  var index = this.__find__(afterName);\n  var opt = options || {};\n\n  if (index === -1) { throw new Error('Parser rule not found: ' + afterName); }\n\n  this.__rules__.splice(index + 1, 0, {\n    name: ruleName,\n    enabled: true,\n    fn: fn,\n    alt: opt.alt || []\n  });\n\n  this.__cache__ = null;\n};\n\n/**\n * Ruler.push(ruleName, fn [, options])\n * - ruleName (String): name of added rule.\n * - fn (Function): rule function.\n * - options (Object): rule options (not mandatory).\n *\n * Push new rule to the end of chain. See also\n * [[Ruler.before]], [[Ruler.after]].\n *\n * ##### Options:\n *\n * - __alt__ - array with names of \"alternate\" chains.\n *\n * ##### Example\n *\n * ```javascript\n * var md = require('markdown-it')();\n *\n * md.core.ruler.push('my_rule', function replace(state) {\n *   //...\n * });\n * ```\n **/\nRuler.prototype.push = function (ruleName, fn, options) {\n  var opt = options || {};\n\n  this.__rules__.push({\n    name: ruleName,\n    enabled: true,\n    fn: fn,\n    alt: opt.alt || []\n  });\n\n  this.__cache__ = null;\n};\n\n\n/**\n * Ruler.enable(list [, ignoreInvalid]) -> Array\n * - list (String|Array): list of rule names to enable.\n * - ignoreInvalid (Boolean): set `true` to ignore errors when rule not found.\n *\n * Enable rules with given names. If any rule name not found - throw Error.\n * Errors can be disabled by second param.\n *\n * Returns list of found rule names (if no exception happened).\n *\n * See also [[Ruler.disable]], [[Ruler.enableOnly]].\n **/\nRuler.prototype.enable = function (list, ignoreInvalid) {\n  if (!Array.isArray(list)) { list = [ list ]; }\n\n  var result = [];\n\n  // Search by name and enable\n  list.forEach(function (name) {\n    var idx = this.__find__(name);\n\n    if (idx < 0) {\n      if (ignoreInvalid) { return; }\n      throw new Error('Rules manager: invalid rule name ' + name);\n    }\n    this.__rules__[idx].enabled = true;\n    result.push(name);\n  }, this);\n\n  this.__cache__ = null;\n  return result;\n};\n\n\n/**\n * Ruler.enableOnly(list [, ignoreInvalid])\n * - list (String|Array): list of rule names to enable (whitelist).\n * - ignoreInvalid (Boolean): set `true` to ignore errors when rule not found.\n *\n * Enable rules with given names, and disable everything else. If any rule name\n * not found - throw Error. Errors can be disabled by second param.\n *\n * See also [[Ruler.disable]], [[Ruler.enable]].\n **/\nRuler.prototype.enableOnly = function (list, ignoreInvalid) {\n  if (!Array.isArray(list)) { list = [ list ]; }\n\n  this.__rules__.forEach(function (rule) { rule.enabled = false; });\n\n  this.enable(list, ignoreInvalid);\n};\n\n\n/**\n * Ruler.disable(list [, ignoreInvalid]) -> Array\n * - list (String|Array): list of rule names to disable.\n * - ignoreInvalid (Boolean): set `true` to ignore errors when rule not found.\n *\n * Disable rules with given names. If any rule name not found - throw Error.\n * Errors can be disabled by second param.\n *\n * Returns list of found rule names (if no exception happened).\n *\n * See also [[Ruler.enable]], [[Ruler.enableOnly]].\n **/\nRuler.prototype.disable = function (list, ignoreInvalid) {\n  if (!Array.isArray(list)) { list = [ list ]; }\n\n  var result = [];\n\n  // Search by name and disable\n  list.forEach(function (name) {\n    var idx = this.__find__(name);\n\n    if (idx < 0) {\n      if (ignoreInvalid) { return; }\n      throw new Error('Rules manager: invalid rule name ' + name);\n    }\n    this.__rules__[idx].enabled = false;\n    result.push(name);\n  }, this);\n\n  this.__cache__ = null;\n  return result;\n};\n\n\n/**\n * Ruler.getRules(chainName) -> Array\n *\n * Return array of active functions (rules) for given chain name. It analyzes\n * rules configuration, compiles caches if not exists and returns result.\n *\n * Default chain name is `''` (empty string). It can't be skipped. That's\n * done intentionally, to keep signature monomorphic for high speed.\n **/\nRuler.prototype.getRules = function (chainName) {\n  if (this.__cache__ === null) {\n    this.__compile__();\n  }\n\n  // Chain can be empty, if rules disabled. But we still have to return Array.\n  return this.__cache__[chainName] || [];\n};\n\nmodule.exports = Ruler;\n","// Block quotes\n\n'use strict';\n\nvar isSpace = require('../common/utils').isSpace;\n\n\nmodule.exports = function blockquote(state, startLine, endLine, silent) {\n  var adjustTab,\n      ch,\n      i,\n      initial,\n      l,\n      lastLineEmpty,\n      lines,\n      nextLine,\n      offset,\n      oldBMarks,\n      oldBSCount,\n      oldIndent,\n      oldParentType,\n      oldSCount,\n      oldTShift,\n      spaceAfterMarker,\n      terminate,\n      terminatorRules,\n      token,\n      isOutdented,\n      oldLineMax = state.lineMax,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) { return false; }\n\n  // check the block quote marker\n  if (state.src.charCodeAt(pos++) !== 0x3E/* > */) { return false; }\n\n  // we know that it's going to be a valid blockquote,\n  // so no point trying to find the end of it in silent mode\n  if (silent) { return true; }\n\n  // set offset past spaces and \">\"\n  initial = offset = state.sCount[startLine] + 1;\n\n  // skip one optional space after '>'\n  if (state.src.charCodeAt(pos) === 0x20 /* space */) {\n    // ' >   test '\n    //     ^ -- position start of line here:\n    pos++;\n    initial++;\n    offset++;\n    adjustTab = false;\n    spaceAfterMarker = true;\n  } else if (state.src.charCodeAt(pos) === 0x09 /* tab */) {\n    spaceAfterMarker = true;\n\n    if ((state.bsCount[startLine] + offset) % 4 === 3) {\n      // '  >\\t  test '\n      //       ^ -- position start of line here (tab has width===1)\n      pos++;\n      initial++;\n      offset++;\n      adjustTab = false;\n    } else {\n      // ' >\\t  test '\n      //    ^ -- position start of line here + shift bsCount slightly\n      //         to make extra space appear\n      adjustTab = true;\n    }\n  } else {\n    spaceAfterMarker = false;\n  }\n\n  oldBMarks = [ state.bMarks[startLine] ];\n  state.bMarks[startLine] = pos;\n\n  while (pos < max) {\n    ch = state.src.charCodeAt(pos);\n\n    if (isSpace(ch)) {\n      if (ch === 0x09) {\n        offset += 4 - (offset + state.bsCount[startLine] + (adjustTab ? 1 : 0)) % 4;\n      } else {\n        offset++;\n      }\n    } else {\n      break;\n    }\n\n    pos++;\n  }\n\n  oldBSCount = [ state.bsCount[startLine] ];\n  state.bsCount[startLine] = state.sCount[startLine] + 1 + (spaceAfterMarker ? 1 : 0);\n\n  lastLineEmpty = pos >= max;\n\n  oldSCount = [ state.sCount[startLine] ];\n  state.sCount[startLine] = offset - initial;\n\n  oldTShift = [ state.tShift[startLine] ];\n  state.tShift[startLine] = pos - state.bMarks[startLine];\n\n  terminatorRules = state.md.block.ruler.getRules('blockquote');\n\n  oldParentType = state.parentType;\n  state.parentType = 'blockquote';\n\n  // Search the end of the block\n  //\n  // Block ends with either:\n  //  1. an empty line outside:\n  //     ```\n  //     > test\n  //\n  //     ```\n  //  2. an empty line inside:\n  //     ```\n  //     >\n  //     test\n  //     ```\n  //  3. another tag:\n  //     ```\n  //     > test\n  //      - - -\n  //     ```\n  for (nextLine = startLine + 1; nextLine < endLine; nextLine++) {\n    // check if it's outdented, i.e. it's inside list item and indented\n    // less than said list item:\n    //\n    // ```\n    // 1. anything\n    //    > current blockquote\n    // 2. checking this line\n    // ```\n    isOutdented = state.sCount[nextLine] < state.blkIndent;\n\n    pos = state.bMarks[nextLine] + state.tShift[nextLine];\n    max = state.eMarks[nextLine];\n\n    if (pos >= max) {\n      // Case 1: line is not inside the blockquote, and this line is empty.\n      break;\n    }\n\n    if (state.src.charCodeAt(pos++) === 0x3E/* > */ && !isOutdented) {\n      // This line is inside the blockquote.\n\n      // set offset past spaces and \">\"\n      initial = offset = state.sCount[nextLine] + 1;\n\n      // skip one optional space after '>'\n      if (state.src.charCodeAt(pos) === 0x20 /* space */) {\n        // ' >   test '\n        //     ^ -- position start of line here:\n        pos++;\n        initial++;\n        offset++;\n        adjustTab = false;\n        spaceAfterMarker = true;\n      } else if (state.src.charCodeAt(pos) === 0x09 /* tab */) {\n        spaceAfterMarker = true;\n\n        if ((state.bsCount[nextLine] + offset) % 4 === 3) {\n          // '  >\\t  test '\n          //       ^ -- position start of line here (tab has width===1)\n          pos++;\n          initial++;\n          offset++;\n          adjustTab = false;\n        } else {\n          // ' >\\t  test '\n          //    ^ -- position start of line here + shift bsCount slightly\n          //         to make extra space appear\n          adjustTab = true;\n        }\n      } else {\n        spaceAfterMarker = false;\n      }\n\n      oldBMarks.push(state.bMarks[nextLine]);\n      state.bMarks[nextLine] = pos;\n\n      while (pos < max) {\n        ch = state.src.charCodeAt(pos);\n\n        if (isSpace(ch)) {\n          if (ch === 0x09) {\n            offset += 4 - (offset + state.bsCount[nextLine] + (adjustTab ? 1 : 0)) % 4;\n          } else {\n            offset++;\n          }\n        } else {\n          break;\n        }\n\n        pos++;\n      }\n\n      lastLineEmpty = pos >= max;\n\n      oldBSCount.push(state.bsCount[nextLine]);\n      state.bsCount[nextLine] = state.sCount[nextLine] + 1 + (spaceAfterMarker ? 1 : 0);\n\n      oldSCount.push(state.sCount[nextLine]);\n      state.sCount[nextLine] = offset - initial;\n\n      oldTShift.push(state.tShift[nextLine]);\n      state.tShift[nextLine] = pos - state.bMarks[nextLine];\n      continue;\n    }\n\n    // Case 2: line is not inside the blockquote, and the last line was empty.\n    if (lastLineEmpty) { break; }\n\n    // Case 3: another tag found.\n    terminate = false;\n    for (i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n\n    if (terminate) {\n      // Quirk to enforce \"hard termination mode\" for paragraphs;\n      // normally if you call `tokenize(state, startLine, nextLine)`,\n      // paragraphs will look below nextLine for paragraph continuation,\n      // but if blockquote is terminated by another tag, they shouldn't\n      state.lineMax = nextLine;\n\n      if (state.blkIndent !== 0) {\n        // state.blkIndent was non-zero, we now set it to zero,\n        // so we need to re-calculate all offsets to appear as\n        // if indent wasn't changed\n        oldBMarks.push(state.bMarks[nextLine]);\n        oldBSCount.push(state.bsCount[nextLine]);\n        oldTShift.push(state.tShift[nextLine]);\n        oldSCount.push(state.sCount[nextLine]);\n        state.sCount[nextLine] -= state.blkIndent;\n      }\n\n      break;\n    }\n\n    oldBMarks.push(state.bMarks[nextLine]);\n    oldBSCount.push(state.bsCount[nextLine]);\n    oldTShift.push(state.tShift[nextLine]);\n    oldSCount.push(state.sCount[nextLine]);\n\n    // A negative indentation means that this is a paragraph continuation\n    //\n    state.sCount[nextLine] = -1;\n  }\n\n  oldIndent = state.blkIndent;\n  state.blkIndent = 0;\n\n  token        = state.push('blockquote_open', 'blockquote', 1);\n  token.markup = '>';\n  token.map    = lines = [ startLine, 0 ];\n\n  state.md.block.tokenize(state, startLine, nextLine);\n\n  token        = state.push('blockquote_close', 'blockquote', -1);\n  token.markup = '>';\n\n  state.lineMax = oldLineMax;\n  state.parentType = oldParentType;\n  lines[1] = state.line;\n\n  // Restore original tShift; this might not be necessary since the parser\n  // has already been here, but just to make sure we can do that.\n  for (i = 0; i < oldTShift.length; i++) {\n    state.bMarks[i + startLine] = oldBMarks[i];\n    state.tShift[i + startLine] = oldTShift[i];\n    state.sCount[i + startLine] = oldSCount[i];\n    state.bsCount[i + startLine] = oldBSCount[i];\n  }\n  state.blkIndent = oldIndent;\n\n  return true;\n};\n","// Code block (4 spaces padded)\n\n'use strict';\n\n\nmodule.exports = function code(state, startLine, endLine/*, silent*/) {\n  var nextLine, last, token;\n\n  if (state.sCount[startLine] - state.blkIndent < 4) { return false; }\n\n  last = nextLine = startLine + 1;\n\n  while (nextLine < endLine) {\n    if (state.isEmpty(nextLine)) {\n      nextLine++;\n      continue;\n    }\n\n    if (state.sCount[nextLine] - state.blkIndent >= 4) {\n      nextLine++;\n      last = nextLine;\n      continue;\n    }\n    break;\n  }\n\n  state.line = last;\n\n  token         = state.push('code_block', 'code', 0);\n  token.content = state.getLines(startLine, last, 4 + state.blkIndent, false) + '\\n';\n  token.map     = [ startLine, state.line ];\n\n  return true;\n};\n","// fences (``` lang, ~~~ lang)\n\n'use strict';\n\n\nmodule.exports = function fence(state, startLine, endLine, silent) {\n  var marker, len, params, nextLine, mem, token, markup,\n      haveEndMarker = false,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) { return false; }\n\n  if (pos + 3 > max) { return false; }\n\n  marker = state.src.charCodeAt(pos);\n\n  if (marker !== 0x7E/* ~ */ && marker !== 0x60 /* ` */) {\n    return false;\n  }\n\n  // scan marker length\n  mem = pos;\n  pos = state.skipChars(pos, marker);\n\n  len = pos - mem;\n\n  if (len < 3) { return false; }\n\n  markup = state.src.slice(mem, pos);\n  params = state.src.slice(pos, max);\n\n  if (marker === 0x60 /* ` */) {\n    if (params.indexOf(String.fromCharCode(marker)) >= 0) {\n      return false;\n    }\n  }\n\n  // Since start is found, we can report success here in validation mode\n  if (silent) { return true; }\n\n  // search end of block\n  nextLine = startLine;\n\n  for (;;) {\n    nextLine++;\n    if (nextLine >= endLine) {\n      // unclosed block should be autoclosed by end of document.\n      // also block seems to be autoclosed by end of parent\n      break;\n    }\n\n    pos = mem = state.bMarks[nextLine] + state.tShift[nextLine];\n    max = state.eMarks[nextLine];\n\n    if (pos < max && state.sCount[nextLine] < state.blkIndent) {\n      // non-empty line with negative indent should stop the list:\n      // - ```\n      //  test\n      break;\n    }\n\n    if (state.src.charCodeAt(pos) !== marker) { continue; }\n\n    if (state.sCount[nextLine] - state.blkIndent >= 4) {\n      // closing fence should be indented less than 4 spaces\n      continue;\n    }\n\n    pos = state.skipChars(pos, marker);\n\n    // closing code fence must be at least as long as the opening one\n    if (pos - mem < len) { continue; }\n\n    // make sure tail has spaces only\n    pos = state.skipSpaces(pos);\n\n    if (pos < max) { continue; }\n\n    haveEndMarker = true;\n    // found!\n    break;\n  }\n\n  // If a fence has heading spaces, they should be removed from its inner block\n  len = state.sCount[startLine];\n\n  state.line = nextLine + (haveEndMarker ? 1 : 0);\n\n  token         = state.push('fence', 'code', 0);\n  token.info    = params;\n  token.content = state.getLines(startLine + 1, nextLine, len, true);\n  token.markup  = markup;\n  token.map     = [ startLine, state.line ];\n\n  return true;\n};\n","// heading (#, ##, ...)\n\n'use strict';\n\nvar isSpace = require('../common/utils').isSpace;\n\n\nmodule.exports = function heading(state, startLine, endLine, silent) {\n  var ch, level, tmp, token,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) { return false; }\n\n  ch  = state.src.charCodeAt(pos);\n\n  if (ch !== 0x23/* # */ || pos >= max) { return false; }\n\n  // count heading level\n  level = 1;\n  ch = state.src.charCodeAt(++pos);\n  while (ch === 0x23/* # */ && pos < max && level <= 6) {\n    level++;\n    ch = state.src.charCodeAt(++pos);\n  }\n\n  if (level > 6 || (pos < max && !isSpace(ch))) { return false; }\n\n  if (silent) { return true; }\n\n  // Let's cut tails like '    ###  ' from the end of string\n\n  max = state.skipSpacesBack(max, pos);\n  tmp = state.skipCharsBack(max, 0x23, pos); // #\n  if (tmp > pos && isSpace(state.src.charCodeAt(tmp - 1))) {\n    max = tmp;\n  }\n\n  state.line = startLine + 1;\n\n  token        = state.push('heading_open', 'h' + String(level), 1);\n  token.markup = '########'.slice(0, level);\n  token.map    = [ startLine, state.line ];\n\n  token          = state.push('inline', '', 0);\n  token.content  = state.src.slice(pos, max).trim();\n  token.map      = [ startLine, state.line ];\n  token.children = [];\n\n  token        = state.push('heading_close', 'h' + String(level), -1);\n  token.markup = '########'.slice(0, level);\n\n  return true;\n};\n","// Horizontal rule\n\n'use strict';\n\nvar isSpace = require('../common/utils').isSpace;\n\n\nmodule.exports = function hr(state, startLine, endLine, silent) {\n  var marker, cnt, ch, token,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) { return false; }\n\n  marker = state.src.charCodeAt(pos++);\n\n  // Check hr marker\n  if (marker !== 0x2A/* * */ &&\n      marker !== 0x2D/* - */ &&\n      marker !== 0x5F/* _ */) {\n    return false;\n  }\n\n  // markers can be mixed with spaces, but there should be at least 3 of them\n\n  cnt = 1;\n  while (pos < max) {\n    ch = state.src.charCodeAt(pos++);\n    if (ch !== marker && !isSpace(ch)) { return false; }\n    if (ch === marker) { cnt++; }\n  }\n\n  if (cnt < 3) { return false; }\n\n  if (silent) { return true; }\n\n  state.line = startLine + 1;\n\n  token        = state.push('hr', 'hr', 0);\n  token.map    = [ startLine, state.line ];\n  token.markup = Array(cnt + 1).join(String.fromCharCode(marker));\n\n  return true;\n};\n","// HTML block\n\n'use strict';\n\n\nvar block_names = require('../common/html_blocks');\nvar HTML_OPEN_CLOSE_TAG_RE = require('../common/html_re').HTML_OPEN_CLOSE_TAG_RE;\n\n// An array of opening and corresponding closing sequences for html tags,\n// last argument defines whether it can terminate a paragraph or not\n//\nvar HTML_SEQUENCES = [\n  [ /^<(script|pre|style|textarea)(?=(\\s|>|$))/i, /<\\/(script|pre|style|textarea)>/i, true ],\n  [ /^<!--/,        /-->/,   true ],\n  [ /^<\\?/,         /\\?>/,   true ],\n  [ /^<![A-Z]/,     />/,     true ],\n  [ /^<!\\[CDATA\\[/, /\\]\\]>/, true ],\n  [ new RegExp('^</?(' + block_names.join('|') + ')(?=(\\\\s|/?>|$))', 'i'), /^$/, true ],\n  [ new RegExp(HTML_OPEN_CLOSE_TAG_RE.source + '\\\\s*$'),  /^$/, false ]\n];\n\n\nmodule.exports = function html_block(state, startLine, endLine, silent) {\n  var i, nextLine, token, lineText,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) { return false; }\n\n  if (!state.md.options.html) { return false; }\n\n  if (state.src.charCodeAt(pos) !== 0x3C/* < */) { return false; }\n\n  lineText = state.src.slice(pos, max);\n\n  for (i = 0; i < HTML_SEQUENCES.length; i++) {\n    if (HTML_SEQUENCES[i][0].test(lineText)) { break; }\n  }\n\n  if (i === HTML_SEQUENCES.length) { return false; }\n\n  if (silent) {\n    // true if this sequence can be a terminator, false otherwise\n    return HTML_SEQUENCES[i][2];\n  }\n\n  nextLine = startLine + 1;\n\n  // If we are here - we detected HTML block.\n  // Let's roll down till block end.\n  if (!HTML_SEQUENCES[i][1].test(lineText)) {\n    for (; nextLine < endLine; nextLine++) {\n      if (state.sCount[nextLine] < state.blkIndent) { break; }\n\n      pos = state.bMarks[nextLine] + state.tShift[nextLine];\n      max = state.eMarks[nextLine];\n      lineText = state.src.slice(pos, max);\n\n      if (HTML_SEQUENCES[i][1].test(lineText)) {\n        if (lineText.length !== 0) { nextLine++; }\n        break;\n      }\n    }\n  }\n\n  state.line = nextLine;\n\n  token         = state.push('html_block', '', 0);\n  token.map     = [ startLine, nextLine ];\n  token.content = state.getLines(startLine, nextLine, state.blkIndent, true);\n\n  return true;\n};\n","// lheading (---, ===)\n\n'use strict';\n\n\nmodule.exports = function lheading(state, startLine, endLine/*, silent*/) {\n  var content, terminate, i, l, token, pos, max, level, marker,\n      nextLine = startLine + 1, oldParentType,\n      terminatorRules = state.md.block.ruler.getRules('paragraph');\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) { return false; }\n\n  oldParentType = state.parentType;\n  state.parentType = 'paragraph'; // use paragraph to match terminatorRules\n\n  // jump line-by-line until empty one or EOF\n  for (; nextLine < endLine && !state.isEmpty(nextLine); nextLine++) {\n    // this would be a code block normally, but after paragraph\n    // it's considered a lazy continuation regardless of what's there\n    if (state.sCount[nextLine] - state.blkIndent > 3) { continue; }\n\n    //\n    // Check for underline in setext header\n    //\n    if (state.sCount[nextLine] >= state.blkIndent) {\n      pos = state.bMarks[nextLine] + state.tShift[nextLine];\n      max = state.eMarks[nextLine];\n\n      if (pos < max) {\n        marker = state.src.charCodeAt(pos);\n\n        if (marker === 0x2D/* - */ || marker === 0x3D/* = */) {\n          pos = state.skipChars(pos, marker);\n          pos = state.skipSpaces(pos);\n\n          if (pos >= max) {\n            level = (marker === 0x3D/* = */ ? 1 : 2);\n            break;\n          }\n        }\n      }\n    }\n\n    // quirk for blockquotes, this line should already be checked by that rule\n    if (state.sCount[nextLine] < 0) { continue; }\n\n    // Some tags can terminate paragraph without empty line.\n    terminate = false;\n    for (i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) { break; }\n  }\n\n  if (!level) {\n    // Didn't find valid underline\n    return false;\n  }\n\n  content = state.getLines(startLine, nextLine, state.blkIndent, false).trim();\n\n  state.line = nextLine + 1;\n\n  token          = state.push('heading_open', 'h' + String(level), 1);\n  token.markup   = String.fromCharCode(marker);\n  token.map      = [ startLine, state.line ];\n\n  token          = state.push('inline', '', 0);\n  token.content  = content;\n  token.map      = [ startLine, state.line - 1 ];\n  token.children = [];\n\n  token          = state.push('heading_close', 'h' + String(level), -1);\n  token.markup   = String.fromCharCode(marker);\n\n  state.parentType = oldParentType;\n\n  return true;\n};\n","// Lists\n\n'use strict';\n\nvar isSpace = require('../common/utils').isSpace;\n\n\n// Search `[-+*][\\n ]`, returns next pos after marker on success\n// or -1 on fail.\nfunction skipBulletListMarker(state, startLine) {\n  var marker, pos, max, ch;\n\n  pos = state.bMarks[startLine] + state.tShift[startLine];\n  max = state.eMarks[startLine];\n\n  marker = state.src.charCodeAt(pos++);\n  // Check bullet\n  if (marker !== 0x2A/* * */ &&\n      marker !== 0x2D/* - */ &&\n      marker !== 0x2B/* + */) {\n    return -1;\n  }\n\n  if (pos < max) {\n    ch = state.src.charCodeAt(pos);\n\n    if (!isSpace(ch)) {\n      // \" -test \" - is not a list item\n      return -1;\n    }\n  }\n\n  return pos;\n}\n\n// Search `\\d+[.)][\\n ]`, returns next pos after marker on success\n// or -1 on fail.\nfunction skipOrderedListMarker(state, startLine) {\n  var ch,\n      start = state.bMarks[startLine] + state.tShift[startLine],\n      pos = start,\n      max = state.eMarks[startLine];\n\n  // List marker should have at least 2 chars (digit + dot)\n  if (pos + 1 >= max) { return -1; }\n\n  ch = state.src.charCodeAt(pos++);\n\n  if (ch < 0x30/* 0 */ || ch > 0x39/* 9 */) { return -1; }\n\n  for (;;) {\n    // EOL -> fail\n    if (pos >= max) { return -1; }\n\n    ch = state.src.charCodeAt(pos++);\n\n    if (ch >= 0x30/* 0 */ && ch <= 0x39/* 9 */) {\n\n      // List marker should have no more than 9 digits\n      // (prevents integer overflow in browsers)\n      if (pos - start >= 10) { return -1; }\n\n      continue;\n    }\n\n    // found valid marker\n    if (ch === 0x29/* ) */ || ch === 0x2e/* . */) {\n      break;\n    }\n\n    return -1;\n  }\n\n\n  if (pos < max) {\n    ch = state.src.charCodeAt(pos);\n\n    if (!isSpace(ch)) {\n      // \" 1.test \" - is not a list item\n      return -1;\n    }\n  }\n  return pos;\n}\n\nfunction markTightParagraphs(state, idx) {\n  var i, l,\n      level = state.level + 2;\n\n  for (i = idx + 2, l = state.tokens.length - 2; i < l; i++) {\n    if (state.tokens[i].level === level && state.tokens[i].type === 'paragraph_open') {\n      state.tokens[i + 2].hidden = true;\n      state.tokens[i].hidden = true;\n      i += 2;\n    }\n  }\n}\n\n\nmodule.exports = function list(state, startLine, endLine, silent) {\n  var ch,\n      contentStart,\n      i,\n      indent,\n      indentAfterMarker,\n      initial,\n      isOrdered,\n      itemLines,\n      l,\n      listLines,\n      listTokIdx,\n      markerCharCode,\n      markerValue,\n      max,\n      nextLine,\n      offset,\n      oldListIndent,\n      oldParentType,\n      oldSCount,\n      oldTShift,\n      oldTight,\n      pos,\n      posAfterMarker,\n      prevEmptyEnd,\n      start,\n      terminate,\n      terminatorRules,\n      token,\n      isTerminatingParagraph = false,\n      tight = true;\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) { return false; }\n\n  // Special case:\n  //  - item 1\n  //   - item 2\n  //    - item 3\n  //     - item 4\n  //      - this one is a paragraph continuation\n  if (state.listIndent >= 0 &&\n      state.sCount[startLine] - state.listIndent >= 4 &&\n      state.sCount[startLine] < state.blkIndent) {\n    return false;\n  }\n\n  // limit conditions when list can interrupt\n  // a paragraph (validation mode only)\n  if (silent && state.parentType === 'paragraph') {\n    // Next list item should still terminate previous list item;\n    //\n    // This code can fail if plugins use blkIndent as well as lists,\n    // but I hope the spec gets fixed long before that happens.\n    //\n    if (state.sCount[startLine] >= state.blkIndent) {\n      isTerminatingParagraph = true;\n    }\n  }\n\n  // Detect list type and position after marker\n  if ((posAfterMarker = skipOrderedListMarker(state, startLine)) >= 0) {\n    isOrdered = true;\n    start = state.bMarks[startLine] + state.tShift[startLine];\n    markerValue = Number(state.src.slice(start, posAfterMarker - 1));\n\n    // If we're starting a new ordered list right after\n    // a paragraph, it should start with 1.\n    if (isTerminatingParagraph && markerValue !== 1) return false;\n\n  } else if ((posAfterMarker = skipBulletListMarker(state, startLine)) >= 0) {\n    isOrdered = false;\n\n  } else {\n    return false;\n  }\n\n  // If we're starting a new unordered list right after\n  // a paragraph, first line should not be empty.\n  if (isTerminatingParagraph) {\n    if (state.skipSpaces(posAfterMarker) >= state.eMarks[startLine]) return false;\n  }\n\n  // We should terminate list on style change. Remember first one to compare.\n  markerCharCode = state.src.charCodeAt(posAfterMarker - 1);\n\n  // For validation mode we can terminate immediately\n  if (silent) { return true; }\n\n  // Start list\n  listTokIdx = state.tokens.length;\n\n  if (isOrdered) {\n    token       = state.push('ordered_list_open', 'ol', 1);\n    if (markerValue !== 1) {\n      token.attrs = [ [ 'start', markerValue ] ];\n    }\n\n  } else {\n    token       = state.push('bullet_list_open', 'ul', 1);\n  }\n\n  token.map    = listLines = [ startLine, 0 ];\n  token.markup = String.fromCharCode(markerCharCode);\n\n  //\n  // Iterate list items\n  //\n\n  nextLine = startLine;\n  prevEmptyEnd = false;\n  terminatorRules = state.md.block.ruler.getRules('list');\n\n  oldParentType = state.parentType;\n  state.parentType = 'list';\n\n  while (nextLine < endLine) {\n    pos = posAfterMarker;\n    max = state.eMarks[nextLine];\n\n    initial = offset = state.sCount[nextLine] + posAfterMarker - (state.bMarks[startLine] + state.tShift[startLine]);\n\n    while (pos < max) {\n      ch = state.src.charCodeAt(pos);\n\n      if (ch === 0x09) {\n        offset += 4 - (offset + state.bsCount[nextLine]) % 4;\n      } else if (ch === 0x20) {\n        offset++;\n      } else {\n        break;\n      }\n\n      pos++;\n    }\n\n    contentStart = pos;\n\n    if (contentStart >= max) {\n      // trimming space in \"-    \\n  3\" case, indent is 1 here\n      indentAfterMarker = 1;\n    } else {\n      indentAfterMarker = offset - initial;\n    }\n\n    // If we have more than 4 spaces, the indent is 1\n    // (the rest is just indented code block)\n    if (indentAfterMarker > 4) { indentAfterMarker = 1; }\n\n    // \"  -  test\"\n    //  ^^^^^ - calculating total length of this thing\n    indent = initial + indentAfterMarker;\n\n    // Run subparser & write tokens\n    token        = state.push('list_item_open', 'li', 1);\n    token.markup = String.fromCharCode(markerCharCode);\n    token.map    = itemLines = [ startLine, 0 ];\n    if (isOrdered) {\n      token.info = state.src.slice(start, posAfterMarker - 1);\n    }\n\n    // change current state, then restore it after parser subcall\n    oldTight = state.tight;\n    oldTShift = state.tShift[startLine];\n    oldSCount = state.sCount[startLine];\n\n    //  - example list\n    // ^ listIndent position will be here\n    //   ^ blkIndent position will be here\n    //\n    oldListIndent = state.listIndent;\n    state.listIndent = state.blkIndent;\n    state.blkIndent = indent;\n\n    state.tight = true;\n    state.tShift[startLine] = contentStart - state.bMarks[startLine];\n    state.sCount[startLine] = offset;\n\n    if (contentStart >= max && state.isEmpty(startLine + 1)) {\n      // workaround for this case\n      // (list item is empty, list terminates before \"foo\"):\n      // ~~~~~~~~\n      //   -\n      //\n      //     foo\n      // ~~~~~~~~\n      state.line = Math.min(state.line + 2, endLine);\n    } else {\n      state.md.block.tokenize(state, startLine, endLine, true);\n    }\n\n    // If any of list item is tight, mark list as tight\n    if (!state.tight || prevEmptyEnd) {\n      tight = false;\n    }\n    // Item become loose if finish with empty line,\n    // but we should filter last element, because it means list finish\n    prevEmptyEnd = (state.line - startLine) > 1 && state.isEmpty(state.line - 1);\n\n    state.blkIndent = state.listIndent;\n    state.listIndent = oldListIndent;\n    state.tShift[startLine] = oldTShift;\n    state.sCount[startLine] = oldSCount;\n    state.tight = oldTight;\n\n    token        = state.push('list_item_close', 'li', -1);\n    token.markup = String.fromCharCode(markerCharCode);\n\n    nextLine = startLine = state.line;\n    itemLines[1] = nextLine;\n    contentStart = state.bMarks[startLine];\n\n    if (nextLine >= endLine) { break; }\n\n    //\n    // Try to check if list is terminated or continued.\n    //\n    if (state.sCount[nextLine] < state.blkIndent) { break; }\n\n    // if it's indented more than 3 spaces, it should be a code block\n    if (state.sCount[startLine] - state.blkIndent >= 4) { break; }\n\n    // fail if terminating block found\n    terminate = false;\n    for (i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) { break; }\n\n    // fail if list has another type\n    if (isOrdered) {\n      posAfterMarker = skipOrderedListMarker(state, nextLine);\n      if (posAfterMarker < 0) { break; }\n      start = state.bMarks[nextLine] + state.tShift[nextLine];\n    } else {\n      posAfterMarker = skipBulletListMarker(state, nextLine);\n      if (posAfterMarker < 0) { break; }\n    }\n\n    if (markerCharCode !== state.src.charCodeAt(posAfterMarker - 1)) { break; }\n  }\n\n  // Finalize list\n  if (isOrdered) {\n    token = state.push('ordered_list_close', 'ol', -1);\n  } else {\n    token = state.push('bullet_list_close', 'ul', -1);\n  }\n  token.markup = String.fromCharCode(markerCharCode);\n\n  listLines[1] = nextLine;\n  state.line = nextLine;\n\n  state.parentType = oldParentType;\n\n  // mark paragraphs tight if needed\n  if (tight) {\n    markTightParagraphs(state, listTokIdx);\n  }\n\n  return true;\n};\n","// Paragraph\n\n'use strict';\n\n\nmodule.exports = function paragraph(state, startLine/*, endLine*/) {\n  var content, terminate, i, l, token, oldParentType,\n      nextLine = startLine + 1,\n      terminatorRules = state.md.block.ruler.getRules('paragraph'),\n      endLine = state.lineMax;\n\n  oldParentType = state.parentType;\n  state.parentType = 'paragraph';\n\n  // jump line-by-line until empty one or EOF\n  for (; nextLine < endLine && !state.isEmpty(nextLine); nextLine++) {\n    // this would be a code block normally, but after paragraph\n    // it's considered a lazy continuation regardless of what's there\n    if (state.sCount[nextLine] - state.blkIndent > 3) { continue; }\n\n    // quirk for blockquotes, this line should already be checked by that rule\n    if (state.sCount[nextLine] < 0) { continue; }\n\n    // Some tags can terminate paragraph without empty line.\n    terminate = false;\n    for (i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) { break; }\n  }\n\n  content = state.getLines(startLine, nextLine, state.blkIndent, false).trim();\n\n  state.line = nextLine;\n\n  token          = state.push('paragraph_open', 'p', 1);\n  token.map      = [ startLine, state.line ];\n\n  token          = state.push('inline', '', 0);\n  token.content  = content;\n  token.map      = [ startLine, state.line ];\n  token.children = [];\n\n  token          = state.push('paragraph_close', 'p', -1);\n\n  state.parentType = oldParentType;\n\n  return true;\n};\n","'use strict';\n\n\nvar normalizeReference   = require('../common/utils').normalizeReference;\nvar isSpace              = require('../common/utils').isSpace;\n\n\nmodule.exports = function reference(state, startLine, _endLine, silent) {\n  var ch,\n      destEndPos,\n      destEndLineNo,\n      endLine,\n      href,\n      i,\n      l,\n      label,\n      labelEnd,\n      oldParentType,\n      res,\n      start,\n      str,\n      terminate,\n      terminatorRules,\n      title,\n      lines = 0,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine],\n      nextLine = startLine + 1;\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[startLine] - state.blkIndent >= 4) { return false; }\n\n  if (state.src.charCodeAt(pos) !== 0x5B/* [ */) { return false; }\n\n  // Simple check to quickly interrupt scan on [link](url) at the start of line.\n  // Can be useful on practice: https://github.com/markdown-it/markdown-it/issues/54\n  while (++pos < max) {\n    if (state.src.charCodeAt(pos) === 0x5D /* ] */ &&\n        state.src.charCodeAt(pos - 1) !== 0x5C/* \\ */) {\n      if (pos + 1 === max) { return false; }\n      if (state.src.charCodeAt(pos + 1) !== 0x3A/* : */) { return false; }\n      break;\n    }\n  }\n\n  endLine = state.lineMax;\n\n  // jump line-by-line until empty one or EOF\n  terminatorRules = state.md.block.ruler.getRules('reference');\n\n  oldParentType = state.parentType;\n  state.parentType = 'reference';\n\n  for (; nextLine < endLine && !state.isEmpty(nextLine); nextLine++) {\n    // this would be a code block normally, but after paragraph\n    // it's considered a lazy continuation regardless of what's there\n    if (state.sCount[nextLine] - state.blkIndent > 3) { continue; }\n\n    // quirk for blockquotes, this line should already be checked by that rule\n    if (state.sCount[nextLine] < 0) { continue; }\n\n    // Some tags can terminate paragraph without empty line.\n    terminate = false;\n    for (i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) { break; }\n  }\n\n  str = state.getLines(startLine, nextLine, state.blkIndent, false).trim();\n  max = str.length;\n\n  for (pos = 1; pos < max; pos++) {\n    ch = str.charCodeAt(pos);\n    if (ch === 0x5B /* [ */) {\n      return false;\n    } else if (ch === 0x5D /* ] */) {\n      labelEnd = pos;\n      break;\n    } else if (ch === 0x0A /* \\n */) {\n      lines++;\n    } else if (ch === 0x5C /* \\ */) {\n      pos++;\n      if (pos < max && str.charCodeAt(pos) === 0x0A) {\n        lines++;\n      }\n    }\n  }\n\n  if (labelEnd < 0 || str.charCodeAt(labelEnd + 1) !== 0x3A/* : */) { return false; }\n\n  // [label]:   destination   'title'\n  //         ^^^ skip optional whitespace here\n  for (pos = labelEnd + 2; pos < max; pos++) {\n    ch = str.charCodeAt(pos);\n    if (ch === 0x0A) {\n      lines++;\n    } else if (isSpace(ch)) {\n      /*eslint no-empty:0*/\n    } else {\n      break;\n    }\n  }\n\n  // [label]:   destination   'title'\n  //            ^^^^^^^^^^^ parse this\n  res = state.md.helpers.parseLinkDestination(str, pos, max);\n  if (!res.ok) { return false; }\n\n  href = state.md.normalizeLink(res.str);\n  if (!state.md.validateLink(href)) { return false; }\n\n  pos = res.pos;\n  lines += res.lines;\n\n  // save cursor state, we could require to rollback later\n  destEndPos = pos;\n  destEndLineNo = lines;\n\n  // [label]:   destination   'title'\n  //                       ^^^ skipping those spaces\n  start = pos;\n  for (; pos < max; pos++) {\n    ch = str.charCodeAt(pos);\n    if (ch === 0x0A) {\n      lines++;\n    } else if (isSpace(ch)) {\n      /*eslint no-empty:0*/\n    } else {\n      break;\n    }\n  }\n\n  // [label]:   destination   'title'\n  //                          ^^^^^^^ parse this\n  res = state.md.helpers.parseLinkTitle(str, pos, max);\n  if (pos < max && start !== pos && res.ok) {\n    title = res.str;\n    pos = res.pos;\n    lines += res.lines;\n  } else {\n    title = '';\n    pos = destEndPos;\n    lines = destEndLineNo;\n  }\n\n  // skip trailing spaces until the rest of the line\n  while (pos < max) {\n    ch = str.charCodeAt(pos);\n    if (!isSpace(ch)) { break; }\n    pos++;\n  }\n\n  if (pos < max && str.charCodeAt(pos) !== 0x0A) {\n    if (title) {\n      // garbage at the end of the line after title,\n      // but it could still be a valid reference if we roll back\n      title = '';\n      pos = destEndPos;\n      lines = destEndLineNo;\n      while (pos < max) {\n        ch = str.charCodeAt(pos);\n        if (!isSpace(ch)) { break; }\n        pos++;\n      }\n    }\n  }\n\n  if (pos < max && str.charCodeAt(pos) !== 0x0A) {\n    // garbage at the end of the line\n    return false;\n  }\n\n  label = normalizeReference(str.slice(1, labelEnd));\n  if (!label) {\n    // CommonMark 0.20 disallows empty labels\n    return false;\n  }\n\n  // Reference can not terminate anything. This check is for safety only.\n  /*istanbul ignore if*/\n  if (silent) { return true; }\n\n  if (typeof state.env.references === 'undefined') {\n    state.env.references = {};\n  }\n  if (typeof state.env.references[label] === 'undefined') {\n    state.env.references[label] = { title: title, href: href };\n  }\n\n  state.parentType = oldParentType;\n\n  state.line = startLine + lines + 1;\n  return true;\n};\n","// Parser state class\n\n'use strict';\n\nvar Token = require('../token');\nvar isSpace = require('../common/utils').isSpace;\n\n\nfunction StateBlock(src, md, env, tokens) {\n  var ch, s, start, pos, len, indent, offset, indent_found;\n\n  this.src = src;\n\n  // link to parser instance\n  this.md     = md;\n\n  this.env = env;\n\n  //\n  // Internal state vartiables\n  //\n\n  this.tokens = tokens;\n\n  this.bMarks = [];  // line begin offsets for fast jumps\n  this.eMarks = [];  // line end offsets for fast jumps\n  this.tShift = [];  // offsets of the first non-space characters (tabs not expanded)\n  this.sCount = [];  // indents for each line (tabs expanded)\n\n  // An amount of virtual spaces (tabs expanded) between beginning\n  // of each line (bMarks) and real beginning of that line.\n  //\n  // It exists only as a hack because blockquotes override bMarks\n  // losing information in the process.\n  //\n  // It's used only when expanding tabs, you can think about it as\n  // an initial tab length, e.g. bsCount=21 applied to string `\\t123`\n  // means first tab should be expanded to 4-21%4 === 3 spaces.\n  //\n  this.bsCount = [];\n\n  // block parser variables\n  this.blkIndent  = 0; // required block content indent (for example, if we are\n                       // inside a list, it would be positioned after list marker)\n  this.line       = 0; // line index in src\n  this.lineMax    = 0; // lines count\n  this.tight      = false;  // loose/tight mode for lists\n  this.ddIndent   = -1; // indent of the current dd block (-1 if there isn't any)\n  this.listIndent = -1; // indent of the current list block (-1 if there isn't any)\n\n  // can be 'blockquote', 'list', 'root', 'paragraph' or 'reference'\n  // used in lists to determine if they interrupt a paragraph\n  this.parentType = 'root';\n\n  this.level = 0;\n\n  // renderer\n  this.result = '';\n\n  // Create caches\n  // Generate markers.\n  s = this.src;\n  indent_found = false;\n\n  for (start = pos = indent = offset = 0, len = s.length; pos < len; pos++) {\n    ch = s.charCodeAt(pos);\n\n    if (!indent_found) {\n      if (isSpace(ch)) {\n        indent++;\n\n        if (ch === 0x09) {\n          offset += 4 - offset % 4;\n        } else {\n          offset++;\n        }\n        continue;\n      } else {\n        indent_found = true;\n      }\n    }\n\n    if (ch === 0x0A || pos === len - 1) {\n      if (ch !== 0x0A) { pos++; }\n      this.bMarks.push(start);\n      this.eMarks.push(pos);\n      this.tShift.push(indent);\n      this.sCount.push(offset);\n      this.bsCount.push(0);\n\n      indent_found = false;\n      indent = 0;\n      offset = 0;\n      start = pos + 1;\n    }\n  }\n\n  // Push fake entry to simplify cache bounds checks\n  this.bMarks.push(s.length);\n  this.eMarks.push(s.length);\n  this.tShift.push(0);\n  this.sCount.push(0);\n  this.bsCount.push(0);\n\n  this.lineMax = this.bMarks.length - 1; // don't count last fake line\n}\n\n// Push new token to \"stream\".\n//\nStateBlock.prototype.push = function (type, tag, nesting) {\n  var token = new Token(type, tag, nesting);\n  token.block = true;\n\n  if (nesting < 0) this.level--; // closing tag\n  token.level = this.level;\n  if (nesting > 0) this.level++; // opening tag\n\n  this.tokens.push(token);\n  return token;\n};\n\nStateBlock.prototype.isEmpty = function isEmpty(line) {\n  return this.bMarks[line] + this.tShift[line] >= this.eMarks[line];\n};\n\nStateBlock.prototype.skipEmptyLines = function skipEmptyLines(from) {\n  for (var max = this.lineMax; from < max; from++) {\n    if (this.bMarks[from] + this.tShift[from] < this.eMarks[from]) {\n      break;\n    }\n  }\n  return from;\n};\n\n// Skip spaces from given position.\nStateBlock.prototype.skipSpaces = function skipSpaces(pos) {\n  var ch;\n\n  for (var max = this.src.length; pos < max; pos++) {\n    ch = this.src.charCodeAt(pos);\n    if (!isSpace(ch)) { break; }\n  }\n  return pos;\n};\n\n// Skip spaces from given position in reverse.\nStateBlock.prototype.skipSpacesBack = function skipSpacesBack(pos, min) {\n  if (pos <= min) { return pos; }\n\n  while (pos > min) {\n    if (!isSpace(this.src.charCodeAt(--pos))) { return pos + 1; }\n  }\n  return pos;\n};\n\n// Skip char codes from given position\nStateBlock.prototype.skipChars = function skipChars(pos, code) {\n  for (var max = this.src.length; pos < max; pos++) {\n    if (this.src.charCodeAt(pos) !== code) { break; }\n  }\n  return pos;\n};\n\n// Skip char codes reverse from given position - 1\nStateBlock.prototype.skipCharsBack = function skipCharsBack(pos, code, min) {\n  if (pos <= min) { return pos; }\n\n  while (pos > min) {\n    if (code !== this.src.charCodeAt(--pos)) { return pos + 1; }\n  }\n  return pos;\n};\n\n// cut lines range from source.\nStateBlock.prototype.getLines = function getLines(begin, end, indent, keepLastLF) {\n  var i, lineIndent, ch, first, last, queue, lineStart,\n      line = begin;\n\n  if (begin >= end) {\n    return '';\n  }\n\n  queue = new Array(end - begin);\n\n  for (i = 0; line < end; line++, i++) {\n    lineIndent = 0;\n    lineStart = first = this.bMarks[line];\n\n    if (line + 1 < end || keepLastLF) {\n      // No need for bounds check because we have fake entry on tail.\n      last = this.eMarks[line] + 1;\n    } else {\n      last = this.eMarks[line];\n    }\n\n    while (first < last && lineIndent < indent) {\n      ch = this.src.charCodeAt(first);\n\n      if (isSpace(ch)) {\n        if (ch === 0x09) {\n          lineIndent += 4 - (lineIndent + this.bsCount[line]) % 4;\n        } else {\n          lineIndent++;\n        }\n      } else if (first - lineStart < this.tShift[line]) {\n        // patched tShift masked characters to look like spaces (blockquotes, list markers)\n        lineIndent++;\n      } else {\n        break;\n      }\n\n      first++;\n    }\n\n    if (lineIndent > indent) {\n      // partially expanding tabs in code blocks, e.g '\\t\\tfoobar'\n      // with indent=2 becomes '  \\tfoobar'\n      queue[i] = new Array(lineIndent - indent + 1).join(' ') + this.src.slice(first, last);\n    } else {\n      queue[i] = this.src.slice(first, last);\n    }\n  }\n\n  return queue.join('');\n};\n\n// re-export Token class to use in block rules\nStateBlock.prototype.Token = Token;\n\n\nmodule.exports = StateBlock;\n","// GFM table, https://github.github.com/gfm/#tables-extension-\n\n'use strict';\n\nvar isSpace = require('../common/utils').isSpace;\n\n\nfunction getLine(state, line) {\n  var pos = state.bMarks[line] + state.tShift[line],\n      max = state.eMarks[line];\n\n  return state.src.substr(pos, max - pos);\n}\n\nfunction escapedSplit(str) {\n  var result = [],\n      pos = 0,\n      max = str.length,\n      ch,\n      isEscaped = false,\n      lastPos = 0,\n      current = '';\n\n  ch  = str.charCodeAt(pos);\n\n  while (pos < max) {\n    if (ch === 0x7c/* | */) {\n      if (!isEscaped) {\n        // pipe separating cells, '|'\n        result.push(current + str.substring(lastPos, pos));\n        current = '';\n        lastPos = pos + 1;\n      } else {\n        // escaped pipe, '\\|'\n        current += str.substring(lastPos, pos - 1);\n        lastPos = pos;\n      }\n    }\n\n    isEscaped = (ch === 0x5c/* \\ */);\n    pos++;\n\n    ch = str.charCodeAt(pos);\n  }\n\n  result.push(current + str.substring(lastPos));\n\n  return result;\n}\n\n\nmodule.exports = function table(state, startLine, endLine, silent) {\n  var ch, lineText, pos, i, l, nextLine, columns, columnCount, token,\n      aligns, t, tableLines, tbodyLines, oldParentType, terminate,\n      terminatorRules, firstCh, secondCh;\n\n  // should have at least two lines\n  if (startLine + 2 > endLine) { return false; }\n\n  nextLine = startLine + 1;\n\n  if (state.sCount[nextLine] < state.blkIndent) { return false; }\n\n  // if it's indented more than 3 spaces, it should be a code block\n  if (state.sCount[nextLine] - state.blkIndent >= 4) { return false; }\n\n  // first character of the second line should be '|', '-', ':',\n  // and no other characters are allowed but spaces;\n  // basically, this is the equivalent of /^[-:|][-:|\\s]*$/ regexp\n\n  pos = state.bMarks[nextLine] + state.tShift[nextLine];\n  if (pos >= state.eMarks[nextLine]) { return false; }\n\n  firstCh = state.src.charCodeAt(pos++);\n  if (firstCh !== 0x7C/* | */ && firstCh !== 0x2D/* - */ && firstCh !== 0x3A/* : */) { return false; }\n\n  if (pos >= state.eMarks[nextLine]) { return false; }\n\n  secondCh = state.src.charCodeAt(pos++);\n  if (secondCh !== 0x7C/* | */ && secondCh !== 0x2D/* - */ && secondCh !== 0x3A/* : */ && !isSpace(secondCh)) {\n    return false;\n  }\n\n  // if first character is '-', then second character must not be a space\n  // (due to parsing ambiguity with list)\n  if (firstCh === 0x2D/* - */ && isSpace(secondCh)) { return false; }\n\n  while (pos < state.eMarks[nextLine]) {\n    ch = state.src.charCodeAt(pos);\n\n    if (ch !== 0x7C/* | */ && ch !== 0x2D/* - */ && ch !== 0x3A/* : */ && !isSpace(ch)) { return false; }\n\n    pos++;\n  }\n\n  lineText = getLine(state, startLine + 1);\n\n  columns = lineText.split('|');\n  aligns = [];\n  for (i = 0; i < columns.length; i++) {\n    t = columns[i].trim();\n    if (!t) {\n      // allow empty columns before and after table, but not in between columns;\n      // e.g. allow ` |---| `, disallow ` ---||--- `\n      if (i === 0 || i === columns.length - 1) {\n        continue;\n      } else {\n        return false;\n      }\n    }\n\n    if (!/^:?-+:?$/.test(t)) { return false; }\n    if (t.charCodeAt(t.length - 1) === 0x3A/* : */) {\n      aligns.push(t.charCodeAt(0) === 0x3A/* : */ ? 'center' : 'right');\n    } else if (t.charCodeAt(0) === 0x3A/* : */) {\n      aligns.push('left');\n    } else {\n      aligns.push('');\n    }\n  }\n\n  lineText = getLine(state, startLine).trim();\n  if (lineText.indexOf('|') === -1) { return false; }\n  if (state.sCount[startLine] - state.blkIndent >= 4) { return false; }\n  columns = escapedSplit(lineText);\n  if (columns.length && columns[0] === '') columns.shift();\n  if (columns.length && columns[columns.length - 1] === '') columns.pop();\n\n  // header row will define an amount of columns in the entire table,\n  // and align row should be exactly the same (the rest of the rows can differ)\n  columnCount = columns.length;\n  if (columnCount === 0 || columnCount !== aligns.length) { return false; }\n\n  if (silent) { return true; }\n\n  oldParentType = state.parentType;\n  state.parentType = 'table';\n\n  // use 'blockquote' lists for termination because it's\n  // the most similar to tables\n  terminatorRules = state.md.block.ruler.getRules('blockquote');\n\n  token     = state.push('table_open', 'table', 1);\n  token.map = tableLines = [ startLine, 0 ];\n\n  token     = state.push('thead_open', 'thead', 1);\n  token.map = [ startLine, startLine + 1 ];\n\n  token     = state.push('tr_open', 'tr', 1);\n  token.map = [ startLine, startLine + 1 ];\n\n  for (i = 0; i < columns.length; i++) {\n    token          = state.push('th_open', 'th', 1);\n    if (aligns[i]) {\n      token.attrs  = [ [ 'style', 'text-align:' + aligns[i] ] ];\n    }\n\n    token          = state.push('inline', '', 0);\n    token.content  = columns[i].trim();\n    token.children = [];\n\n    token          = state.push('th_close', 'th', -1);\n  }\n\n  token     = state.push('tr_close', 'tr', -1);\n  token     = state.push('thead_close', 'thead', -1);\n\n  for (nextLine = startLine + 2; nextLine < endLine; nextLine++) {\n    if (state.sCount[nextLine] < state.blkIndent) { break; }\n\n    terminate = false;\n    for (i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n\n    if (terminate) { break; }\n    lineText = getLine(state, nextLine).trim();\n    if (!lineText) { break; }\n    if (state.sCount[nextLine] - state.blkIndent >= 4) { break; }\n    columns = escapedSplit(lineText);\n    if (columns.length && columns[0] === '') columns.shift();\n    if (columns.length && columns[columns.length - 1] === '') columns.pop();\n\n    if (nextLine === startLine + 2) {\n      token     = state.push('tbody_open', 'tbody', 1);\n      token.map = tbodyLines = [ startLine + 2, 0 ];\n    }\n\n    token     = state.push('tr_open', 'tr', 1);\n    token.map = [ nextLine, nextLine + 1 ];\n\n    for (i = 0; i < columnCount; i++) {\n      token          = state.push('td_open', 'td', 1);\n      if (aligns[i]) {\n        token.attrs  = [ [ 'style', 'text-align:' + aligns[i] ] ];\n      }\n\n      token          = state.push('inline', '', 0);\n      token.content  = columns[i] ? columns[i].trim() : '';\n      token.children = [];\n\n      token          = state.push('td_close', 'td', -1);\n    }\n    token = state.push('tr_close', 'tr', -1);\n  }\n\n  if (tbodyLines) {\n    token = state.push('tbody_close', 'tbody', -1);\n    tbodyLines[1] = nextLine;\n  }\n\n  token = state.push('table_close', 'table', -1);\n  tableLines[1] = nextLine;\n\n  state.parentType = oldParentType;\n  state.line = nextLine;\n  return true;\n};\n","'use strict';\n\n\nmodule.exports = function block(state) {\n  var token;\n\n  if (state.inlineMode) {\n    token          = new state.Token('inline', '', 0);\n    token.content  = state.src;\n    token.map      = [ 0, 1 ];\n    token.children = [];\n    state.tokens.push(token);\n  } else {\n    state.md.block.parse(state.src, state.md, state.env, state.tokens);\n  }\n};\n","'use strict';\n\nmodule.exports = function inline(state) {\n  var tokens = state.tokens, tok, i, l;\n\n  // Parse inlines\n  for (i = 0, l = tokens.length; i < l; i++) {\n    tok = tokens[i];\n    if (tok.type === 'inline') {\n      state.md.inline.parse(tok.content, state.md, state.env, tok.children);\n    }\n  }\n};\n","// Replace link-like texts with link nodes.\n//\n// Currently restricted by `md.validateLink()` to http/https/ftp\n//\n'use strict';\n\n\nvar arrayReplaceAt = require('../common/utils').arrayReplaceAt;\n\n\nfunction isLinkOpen(str) {\n  return /^<a[>\\s]/i.test(str);\n}\nfunction isLinkClose(str) {\n  return /^<\\/a\\s*>/i.test(str);\n}\n\n\nmodule.exports = function linkify(state) {\n  var i, j, l, tokens, token, currentToken, nodes, ln, text, pos, lastPos,\n      level, htmlLinkLevel, url, fullUrl, urlText,\n      blockTokens = state.tokens,\n      links;\n\n  if (!state.md.options.linkify) { return; }\n\n  for (j = 0, l = blockTokens.length; j < l; j++) {\n    if (blockTokens[j].type !== 'inline' ||\n        !state.md.linkify.pretest(blockTokens[j].content)) {\n      continue;\n    }\n\n    tokens = blockTokens[j].children;\n\n    htmlLinkLevel = 0;\n\n    // We scan from the end, to keep position when new tags added.\n    // Use reversed logic in links start/end match\n    for (i = tokens.length - 1; i >= 0; i--) {\n      currentToken = tokens[i];\n\n      // Skip content of markdown links\n      if (currentToken.type === 'link_close') {\n        i--;\n        while (tokens[i].level !== currentToken.level && tokens[i].type !== 'link_open') {\n          i--;\n        }\n        continue;\n      }\n\n      // Skip content of html tag links\n      if (currentToken.type === 'html_inline') {\n        if (isLinkOpen(currentToken.content) && htmlLinkLevel > 0) {\n          htmlLinkLevel--;\n        }\n        if (isLinkClose(currentToken.content)) {\n          htmlLinkLevel++;\n        }\n      }\n      if (htmlLinkLevel > 0) { continue; }\n\n      if (currentToken.type === 'text' && state.md.linkify.test(currentToken.content)) {\n\n        text = currentToken.content;\n        links = state.md.linkify.match(text);\n\n        // Now split string to nodes\n        nodes = [];\n        level = currentToken.level;\n        lastPos = 0;\n\n        for (ln = 0; ln < links.length; ln++) {\n\n          url = links[ln].url;\n          fullUrl = state.md.normalizeLink(url);\n          if (!state.md.validateLink(fullUrl)) { continue; }\n\n          urlText = links[ln].text;\n\n          // Linkifier might send raw hostnames like \"example.com\", where url\n          // starts with domain name. So we prepend http:// in those cases,\n          // and remove it afterwards.\n          //\n          if (!links[ln].schema) {\n            urlText = state.md.normalizeLinkText('http://' + urlText).replace(/^http:\\/\\//, '');\n          } else if (links[ln].schema === 'mailto:' && !/^mailto:/i.test(urlText)) {\n            urlText = state.md.normalizeLinkText('mailto:' + urlText).replace(/^mailto:/, '');\n          } else {\n            urlText = state.md.normalizeLinkText(urlText);\n          }\n\n          pos = links[ln].index;\n\n          if (pos > lastPos) {\n            token         = new state.Token('text', '', 0);\n            token.content = text.slice(lastPos, pos);\n            token.level   = level;\n            nodes.push(token);\n          }\n\n          token         = new state.Token('link_open', 'a', 1);\n          token.attrs   = [ [ 'href', fullUrl ] ];\n          token.level   = level++;\n          token.markup  = 'linkify';\n          token.info    = 'auto';\n          nodes.push(token);\n\n          token         = new state.Token('text', '', 0);\n          token.content = urlText;\n          token.level   = level;\n          nodes.push(token);\n\n          token         = new state.Token('link_close', 'a', -1);\n          token.level   = --level;\n          token.markup  = 'linkify';\n          token.info    = 'auto';\n          nodes.push(token);\n\n          lastPos = links[ln].lastIndex;\n        }\n        if (lastPos < text.length) {\n          token         = new state.Token('text', '', 0);\n          token.content = text.slice(lastPos);\n          token.level   = level;\n          nodes.push(token);\n        }\n\n        // replace current node\n        blockTokens[j].children = tokens = arrayReplaceAt(tokens, i, nodes);\n      }\n    }\n  }\n};\n","// Normalize input string\n\n'use strict';\n\n\n// https://spec.commonmark.org/0.29/#line-ending\nvar NEWLINES_RE  = /\\r\\n?|\\n/g;\nvar NULL_RE      = /\\0/g;\n\n\nmodule.exports = function normalize(state) {\n  var str;\n\n  // Normalize newlines\n  str = state.src.replace(NEWLINES_RE, '\\n');\n\n  // Replace NULL characters\n  str = str.replace(NULL_RE, '\\uFFFD');\n\n  state.src = str;\n};\n","// Simple typographic replacements\n//\n// (c) (C)  \n// (tm) (TM)  \n// (r) (R)  \n// +-  \n// (p) (P) -> \n// ...   (also ?....  ?.., !....  !..)\n// ????????  ???, !!!!!  !!!, `,,`  `,`\n// --  &ndash;, ---  &mdash;\n//\n'use strict';\n\n// TODO:\n// - fractionals 1/2, 1/4, 3/4 -> , , \n// - miltiplication 2 x 4 -> 2  4\n\nvar RARE_RE = /\\+-|\\.\\.|\\?\\?\\?\\?|!!!!|,,|--/;\n\n// Workaround for phantomjs - need regex without /g flag,\n// or root check will fail every second time\nvar SCOPED_ABBR_TEST_RE = /\\((c|tm|r|p)\\)/i;\n\nvar SCOPED_ABBR_RE = /\\((c|tm|r|p)\\)/ig;\nvar SCOPED_ABBR = {\n  c: '',\n  r: '',\n  p: '',\n  tm: ''\n};\n\nfunction replaceFn(match, name) {\n  return SCOPED_ABBR[name.toLowerCase()];\n}\n\nfunction replace_scoped(inlineTokens) {\n  var i, token, inside_autolink = 0;\n\n  for (i = inlineTokens.length - 1; i >= 0; i--) {\n    token = inlineTokens[i];\n\n    if (token.type === 'text' && !inside_autolink) {\n      token.content = token.content.replace(SCOPED_ABBR_RE, replaceFn);\n    }\n\n    if (token.type === 'link_open' && token.info === 'auto') {\n      inside_autolink--;\n    }\n\n    if (token.type === 'link_close' && token.info === 'auto') {\n      inside_autolink++;\n    }\n  }\n}\n\nfunction replace_rare(inlineTokens) {\n  var i, token, inside_autolink = 0;\n\n  for (i = inlineTokens.length - 1; i >= 0; i--) {\n    token = inlineTokens[i];\n\n    if (token.type === 'text' && !inside_autolink) {\n      if (RARE_RE.test(token.content)) {\n        token.content = token.content\n          .replace(/\\+-/g, '')\n          // .., ..., ....... -> \n          // but ?..... & !..... -> ?.. & !..\n          .replace(/\\.{2,}/g, '').replace(/([?!])/g, '$1..')\n          .replace(/([?!]){4,}/g, '$1$1$1').replace(/,{2,}/g, ',')\n          // em-dash\n          .replace(/(^|[^-])---(?=[^-]|$)/mg, '$1\\u2014')\n          // en-dash\n          .replace(/(^|\\s)--(?=\\s|$)/mg, '$1\\u2013')\n          .replace(/(^|[^-\\s])--(?=[^-\\s]|$)/mg, '$1\\u2013');\n      }\n    }\n\n    if (token.type === 'link_open' && token.info === 'auto') {\n      inside_autolink--;\n    }\n\n    if (token.type === 'link_close' && token.info === 'auto') {\n      inside_autolink++;\n    }\n  }\n}\n\n\nmodule.exports = function replace(state) {\n  var blkIdx;\n\n  if (!state.md.options.typographer) { return; }\n\n  for (blkIdx = state.tokens.length - 1; blkIdx >= 0; blkIdx--) {\n\n    if (state.tokens[blkIdx].type !== 'inline') { continue; }\n\n    if (SCOPED_ABBR_TEST_RE.test(state.tokens[blkIdx].content)) {\n      replace_scoped(state.tokens[blkIdx].children);\n    }\n\n    if (RARE_RE.test(state.tokens[blkIdx].content)) {\n      replace_rare(state.tokens[blkIdx].children);\n    }\n\n  }\n};\n","// Convert straight quotation marks to typographic ones\n//\n'use strict';\n\n\nvar isWhiteSpace   = require('../common/utils').isWhiteSpace;\nvar isPunctChar    = require('../common/utils').isPunctChar;\nvar isMdAsciiPunct = require('../common/utils').isMdAsciiPunct;\n\nvar QUOTE_TEST_RE = /['\"]/;\nvar QUOTE_RE = /['\"]/g;\nvar APOSTROPHE = '\\u2019'; /*  */\n\n\nfunction replaceAt(str, index, ch) {\n  return str.substr(0, index) + ch + str.substr(index + 1);\n}\n\nfunction process_inlines(tokens, state) {\n  var i, token, text, t, pos, max, thisLevel, item, lastChar, nextChar,\n      isLastPunctChar, isNextPunctChar, isLastWhiteSpace, isNextWhiteSpace,\n      canOpen, canClose, j, isSingle, stack, openQuote, closeQuote;\n\n  stack = [];\n\n  for (i = 0; i < tokens.length; i++) {\n    token = tokens[i];\n\n    thisLevel = tokens[i].level;\n\n    for (j = stack.length - 1; j >= 0; j--) {\n      if (stack[j].level <= thisLevel) { break; }\n    }\n    stack.length = j + 1;\n\n    if (token.type !== 'text') { continue; }\n\n    text = token.content;\n    pos = 0;\n    max = text.length;\n\n    /*eslint no-labels:0,block-scoped-var:0*/\n    OUTER:\n    while (pos < max) {\n      QUOTE_RE.lastIndex = pos;\n      t = QUOTE_RE.exec(text);\n      if (!t) { break; }\n\n      canOpen = canClose = true;\n      pos = t.index + 1;\n      isSingle = (t[0] === \"'\");\n\n      // Find previous character,\n      // default to space if it's the beginning of the line\n      //\n      lastChar = 0x20;\n\n      if (t.index - 1 >= 0) {\n        lastChar = text.charCodeAt(t.index - 1);\n      } else {\n        for (j = i - 1; j >= 0; j--) {\n          if (tokens[j].type === 'softbreak' || tokens[j].type === 'hardbreak') break; // lastChar defaults to 0x20\n          if (!tokens[j].content) continue; // should skip all tokens except 'text', 'html_inline' or 'code_inline'\n\n          lastChar = tokens[j].content.charCodeAt(tokens[j].content.length - 1);\n          break;\n        }\n      }\n\n      // Find next character,\n      // default to space if it's the end of the line\n      //\n      nextChar = 0x20;\n\n      if (pos < max) {\n        nextChar = text.charCodeAt(pos);\n      } else {\n        for (j = i + 1; j < tokens.length; j++) {\n          if (tokens[j].type === 'softbreak' || tokens[j].type === 'hardbreak') break; // nextChar defaults to 0x20\n          if (!tokens[j].content) continue; // should skip all tokens except 'text', 'html_inline' or 'code_inline'\n\n          nextChar = tokens[j].content.charCodeAt(0);\n          break;\n        }\n      }\n\n      isLastPunctChar = isMdAsciiPunct(lastChar) || isPunctChar(String.fromCharCode(lastChar));\n      isNextPunctChar = isMdAsciiPunct(nextChar) || isPunctChar(String.fromCharCode(nextChar));\n\n      isLastWhiteSpace = isWhiteSpace(lastChar);\n      isNextWhiteSpace = isWhiteSpace(nextChar);\n\n      if (isNextWhiteSpace) {\n        canOpen = false;\n      } else if (isNextPunctChar) {\n        if (!(isLastWhiteSpace || isLastPunctChar)) {\n          canOpen = false;\n        }\n      }\n\n      if (isLastWhiteSpace) {\n        canClose = false;\n      } else if (isLastPunctChar) {\n        if (!(isNextWhiteSpace || isNextPunctChar)) {\n          canClose = false;\n        }\n      }\n\n      if (nextChar === 0x22 /* \" */ && t[0] === '\"') {\n        if (lastChar >= 0x30 /* 0 */ && lastChar <= 0x39 /* 9 */) {\n          // special case: 1\"\" - count first quote as an inch\n          canClose = canOpen = false;\n        }\n      }\n\n      if (canOpen && canClose) {\n        // Replace quotes in the middle of punctuation sequence, but not\n        // in the middle of the words, i.e.:\n        //\n        // 1. foo \" bar \" baz - not replaced\n        // 2. foo-\"-bar-\"-baz - replaced\n        // 3. foo\"bar\"baz     - not replaced\n        //\n        canOpen = isLastPunctChar;\n        canClose = isNextPunctChar;\n      }\n\n      if (!canOpen && !canClose) {\n        // middle of word\n        if (isSingle) {\n          token.content = replaceAt(token.content, t.index, APOSTROPHE);\n        }\n        continue;\n      }\n\n      if (canClose) {\n        // this could be a closing quote, rewind the stack to get a match\n        for (j = stack.length - 1; j >= 0; j--) {\n          item = stack[j];\n          if (stack[j].level < thisLevel) { break; }\n          if (item.single === isSingle && stack[j].level === thisLevel) {\n            item = stack[j];\n\n            if (isSingle) {\n              openQuote = state.md.options.quotes[2];\n              closeQuote = state.md.options.quotes[3];\n            } else {\n              openQuote = state.md.options.quotes[0];\n              closeQuote = state.md.options.quotes[1];\n            }\n\n            // replace token.content *before* tokens[item.token].content,\n            // because, if they are pointing at the same token, replaceAt\n            // could mess up indices when quote length != 1\n            token.content = replaceAt(token.content, t.index, closeQuote);\n            tokens[item.token].content = replaceAt(\n              tokens[item.token].content, item.pos, openQuote);\n\n            pos += closeQuote.length - 1;\n            if (item.token === i) { pos += openQuote.length - 1; }\n\n            text = token.content;\n            max = text.length;\n\n            stack.length = j;\n            continue OUTER;\n          }\n        }\n      }\n\n      if (canOpen) {\n        stack.push({\n          token: i,\n          pos: t.index,\n          single: isSingle,\n          level: thisLevel\n        });\n      } else if (canClose && isSingle) {\n        token.content = replaceAt(token.content, t.index, APOSTROPHE);\n      }\n    }\n  }\n}\n\n\nmodule.exports = function smartquotes(state) {\n  /*eslint max-depth:0*/\n  var blkIdx;\n\n  if (!state.md.options.typographer) { return; }\n\n  for (blkIdx = state.tokens.length - 1; blkIdx >= 0; blkIdx--) {\n\n    if (state.tokens[blkIdx].type !== 'inline' ||\n        !QUOTE_TEST_RE.test(state.tokens[blkIdx].content)) {\n      continue;\n    }\n\n    process_inlines(state.tokens[blkIdx].children, state);\n  }\n};\n","// Core state object\n//\n'use strict';\n\nvar Token = require('../token');\n\n\nfunction StateCore(src, md, env) {\n  this.src = src;\n  this.env = env;\n  this.tokens = [];\n  this.inlineMode = false;\n  this.md = md; // link to parser instance\n}\n\n// re-export Token class to use in core rules\nStateCore.prototype.Token = Token;\n\n\nmodule.exports = StateCore;\n","// Process autolinks '<protocol:...>'\n\n'use strict';\n\n\n/*eslint max-len:0*/\nvar EMAIL_RE    = /^([a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/;\nvar AUTOLINK_RE = /^([a-zA-Z][a-zA-Z0-9+.\\-]{1,31}):([^<>\\x00-\\x20]*)$/;\n\n\nmodule.exports = function autolink(state, silent) {\n  var url, fullUrl, token, ch, start, max,\n      pos = state.pos;\n\n  if (state.src.charCodeAt(pos) !== 0x3C/* < */) { return false; }\n\n  start = state.pos;\n  max = state.posMax;\n\n  for (;;) {\n    if (++pos >= max) return false;\n\n    ch = state.src.charCodeAt(pos);\n\n    if (ch === 0x3C /* < */) return false;\n    if (ch === 0x3E /* > */) break;\n  }\n\n  url = state.src.slice(start + 1, pos);\n\n  if (AUTOLINK_RE.test(url)) {\n    fullUrl = state.md.normalizeLink(url);\n    if (!state.md.validateLink(fullUrl)) { return false; }\n\n    if (!silent) {\n      token         = state.push('link_open', 'a', 1);\n      token.attrs   = [ [ 'href', fullUrl ] ];\n      token.markup  = 'autolink';\n      token.info    = 'auto';\n\n      token         = state.push('text', '', 0);\n      token.content = state.md.normalizeLinkText(url);\n\n      token         = state.push('link_close', 'a', -1);\n      token.markup  = 'autolink';\n      token.info    = 'auto';\n    }\n\n    state.pos += url.length + 2;\n    return true;\n  }\n\n  if (EMAIL_RE.test(url)) {\n    fullUrl = state.md.normalizeLink('mailto:' + url);\n    if (!state.md.validateLink(fullUrl)) { return false; }\n\n    if (!silent) {\n      token         = state.push('link_open', 'a', 1);\n      token.attrs   = [ [ 'href', fullUrl ] ];\n      token.markup  = 'autolink';\n      token.info    = 'auto';\n\n      token         = state.push('text', '', 0);\n      token.content = state.md.normalizeLinkText(url);\n\n      token         = state.push('link_close', 'a', -1);\n      token.markup  = 'autolink';\n      token.info    = 'auto';\n    }\n\n    state.pos += url.length + 2;\n    return true;\n  }\n\n  return false;\n};\n","// Parse backticks\n\n'use strict';\n\n\nmodule.exports = function backtick(state, silent) {\n  var start, max, marker, token, matchStart, matchEnd, openerLength, closerLength,\n      pos = state.pos,\n      ch = state.src.charCodeAt(pos);\n\n  if (ch !== 0x60/* ` */) { return false; }\n\n  start = pos;\n  pos++;\n  max = state.posMax;\n\n  // scan marker length\n  while (pos < max && state.src.charCodeAt(pos) === 0x60/* ` */) { pos++; }\n\n  marker = state.src.slice(start, pos);\n  openerLength = marker.length;\n\n  if (state.backticksScanned && (state.backticks[openerLength] || 0) <= start) {\n    if (!silent) state.pending += marker;\n    state.pos += openerLength;\n    return true;\n  }\n\n  matchStart = matchEnd = pos;\n\n  // Nothing found in the cache, scan until the end of the line (or until marker is found)\n  while ((matchStart = state.src.indexOf('`', matchEnd)) !== -1) {\n    matchEnd = matchStart + 1;\n\n    // scan marker length\n    while (matchEnd < max && state.src.charCodeAt(matchEnd) === 0x60/* ` */) { matchEnd++; }\n\n    closerLength = matchEnd - matchStart;\n\n    if (closerLength === openerLength) {\n      // Found matching closer length.\n      if (!silent) {\n        token     = state.push('code_inline', 'code', 0);\n        token.markup  = marker;\n        token.content = state.src.slice(pos, matchStart)\n          .replace(/\\n/g, ' ')\n          .replace(/^ (.+) $/, '$1');\n      }\n      state.pos = matchEnd;\n      return true;\n    }\n\n    // Some different length found, put it in cache as upper limit of where closer can be found\n    state.backticks[closerLength] = matchStart;\n  }\n\n  // Scanned through the end, didn't find anything\n  state.backticksScanned = true;\n\n  if (!silent) state.pending += marker;\n  state.pos += openerLength;\n  return true;\n};\n","// For each opening emphasis-like marker find a matching closing one\n//\n'use strict';\n\n\nfunction processDelimiters(state, delimiters) {\n  var closerIdx, openerIdx, closer, opener, minOpenerIdx, newMinOpenerIdx,\n      isOddMatch, lastJump,\n      openersBottom = {},\n      max = delimiters.length;\n\n  if (!max) return;\n\n  // headerIdx is the first delimiter of the current (where closer is) delimiter run\n  var headerIdx = 0;\n  var lastTokenIdx = -2; // needs any value lower than -1\n  var jumps = [];\n\n  for (closerIdx = 0; closerIdx < max; closerIdx++) {\n    closer = delimiters[closerIdx];\n\n    jumps.push(0);\n\n    // markers belong to same delimiter run if:\n    //  - they have adjacent tokens\n    //  - AND markers are the same\n    //\n    if (delimiters[headerIdx].marker !== closer.marker || lastTokenIdx !== closer.token - 1) {\n      headerIdx = closerIdx;\n    }\n\n    lastTokenIdx = closer.token;\n\n    // Length is only used for emphasis-specific \"rule of 3\",\n    // if it's not defined (in strikethrough or 3rd party plugins),\n    // we can default it to 0 to disable those checks.\n    //\n    closer.length = closer.length || 0;\n\n    if (!closer.close) continue;\n\n    // Previously calculated lower bounds (previous fails)\n    // for each marker, each delimiter length modulo 3,\n    // and for whether this closer can be an opener;\n    // https://github.com/commonmark/cmark/commit/34250e12ccebdc6372b8b49c44fab57c72443460\n    if (!openersBottom.hasOwnProperty(closer.marker)) {\n      openersBottom[closer.marker] = [ -1, -1, -1, -1, -1, -1 ];\n    }\n\n    minOpenerIdx = openersBottom[closer.marker][(closer.open ? 3 : 0) + (closer.length % 3)];\n\n    openerIdx = headerIdx - jumps[headerIdx] - 1;\n\n    newMinOpenerIdx = openerIdx;\n\n    for (; openerIdx > minOpenerIdx; openerIdx -= jumps[openerIdx] + 1) {\n      opener = delimiters[openerIdx];\n\n      if (opener.marker !== closer.marker) continue;\n\n      if (opener.open && opener.end < 0) {\n\n        isOddMatch = false;\n\n        // from spec:\n        //\n        // If one of the delimiters can both open and close emphasis, then the\n        // sum of the lengths of the delimiter runs containing the opening and\n        // closing delimiters must not be a multiple of 3 unless both lengths\n        // are multiples of 3.\n        //\n        if (opener.close || closer.open) {\n          if ((opener.length + closer.length) % 3 === 0) {\n            if (opener.length % 3 !== 0 || closer.length % 3 !== 0) {\n              isOddMatch = true;\n            }\n          }\n        }\n\n        if (!isOddMatch) {\n          // If previous delimiter cannot be an opener, we can safely skip\n          // the entire sequence in future checks. This is required to make\n          // sure algorithm has linear complexity (see *_*_*_*_*_... case).\n          //\n          lastJump = openerIdx > 0 && !delimiters[openerIdx - 1].open ?\n            jumps[openerIdx - 1] + 1 :\n            0;\n\n          jumps[closerIdx] = closerIdx - openerIdx + lastJump;\n          jumps[openerIdx] = lastJump;\n\n          closer.open  = false;\n          opener.end   = closerIdx;\n          opener.close = false;\n          newMinOpenerIdx = -1;\n          // treat next token as start of run,\n          // it optimizes skips in **<...>**a**<...>** pathological case\n          lastTokenIdx = -2;\n          break;\n        }\n      }\n    }\n\n    if (newMinOpenerIdx !== -1) {\n      // If match for this delimiter run failed, we want to set lower bound for\n      // future lookups. This is required to make sure algorithm has linear\n      // complexity.\n      //\n      // See details here:\n      // https://github.com/commonmark/cmark/issues/178#issuecomment-270417442\n      //\n      openersBottom[closer.marker][(closer.open ? 3 : 0) + ((closer.length || 0) % 3)] = newMinOpenerIdx;\n    }\n  }\n}\n\n\nmodule.exports = function link_pairs(state) {\n  var curr,\n      tokens_meta = state.tokens_meta,\n      max = state.tokens_meta.length;\n\n  processDelimiters(state, state.delimiters);\n\n  for (curr = 0; curr < max; curr++) {\n    if (tokens_meta[curr] && tokens_meta[curr].delimiters) {\n      processDelimiters(state, tokens_meta[curr].delimiters);\n    }\n  }\n};\n","// Process *this* and _that_\n//\n'use strict';\n\n\n// Insert each marker as a separate text token, and add it to delimiter list\n//\nmodule.exports.tokenize = function emphasis(state, silent) {\n  var i, scanned, token,\n      start = state.pos,\n      marker = state.src.charCodeAt(start);\n\n  if (silent) { return false; }\n\n  if (marker !== 0x5F /* _ */ && marker !== 0x2A /* * */) { return false; }\n\n  scanned = state.scanDelims(state.pos, marker === 0x2A);\n\n  for (i = 0; i < scanned.length; i++) {\n    token         = state.push('text', '', 0);\n    token.content = String.fromCharCode(marker);\n\n    state.delimiters.push({\n      // Char code of the starting marker (number).\n      //\n      marker: marker,\n\n      // Total length of these series of delimiters.\n      //\n      length: scanned.length,\n\n      // A position of the token this delimiter corresponds to.\n      //\n      token:  state.tokens.length - 1,\n\n      // If this delimiter is matched as a valid opener, `end` will be\n      // equal to its position, otherwise it's `-1`.\n      //\n      end:    -1,\n\n      // Boolean flags that determine if this delimiter could open or close\n      // an emphasis.\n      //\n      open:   scanned.can_open,\n      close:  scanned.can_close\n    });\n  }\n\n  state.pos += scanned.length;\n\n  return true;\n};\n\n\nfunction postProcess(state, delimiters) {\n  var i,\n      startDelim,\n      endDelim,\n      token,\n      ch,\n      isStrong,\n      max = delimiters.length;\n\n  for (i = max - 1; i >= 0; i--) {\n    startDelim = delimiters[i];\n\n    if (startDelim.marker !== 0x5F/* _ */ && startDelim.marker !== 0x2A/* * */) {\n      continue;\n    }\n\n    // Process only opening markers\n    if (startDelim.end === -1) {\n      continue;\n    }\n\n    endDelim = delimiters[startDelim.end];\n\n    // If the previous delimiter has the same marker and is adjacent to this one,\n    // merge those into one strong delimiter.\n    //\n    // `<em><em>whatever</em></em>` -> `<strong>whatever</strong>`\n    //\n    isStrong = i > 0 &&\n               delimiters[i - 1].end === startDelim.end + 1 &&\n               // check that first two markers match and adjacent\n               delimiters[i - 1].marker === startDelim.marker &&\n               delimiters[i - 1].token === startDelim.token - 1 &&\n               // check that last two markers are adjacent (we can safely assume they match)\n               delimiters[startDelim.end + 1].token === endDelim.token + 1;\n\n    ch = String.fromCharCode(startDelim.marker);\n\n    token         = state.tokens[startDelim.token];\n    token.type    = isStrong ? 'strong_open' : 'em_open';\n    token.tag     = isStrong ? 'strong' : 'em';\n    token.nesting = 1;\n    token.markup  = isStrong ? ch + ch : ch;\n    token.content = '';\n\n    token         = state.tokens[endDelim.token];\n    token.type    = isStrong ? 'strong_close' : 'em_close';\n    token.tag     = isStrong ? 'strong' : 'em';\n    token.nesting = -1;\n    token.markup  = isStrong ? ch + ch : ch;\n    token.content = '';\n\n    if (isStrong) {\n      state.tokens[delimiters[i - 1].token].content = '';\n      state.tokens[delimiters[startDelim.end + 1].token].content = '';\n      i--;\n    }\n  }\n}\n\n\n// Walk through delimiter list and replace text tokens with tags\n//\nmodule.exports.postProcess = function emphasis(state) {\n  var curr,\n      tokens_meta = state.tokens_meta,\n      max = state.tokens_meta.length;\n\n  postProcess(state, state.delimiters);\n\n  for (curr = 0; curr < max; curr++) {\n    if (tokens_meta[curr] && tokens_meta[curr].delimiters) {\n      postProcess(state, tokens_meta[curr].delimiters);\n    }\n  }\n};\n","// Process html entity - &#123;, &#xAF;, &quot;, ...\n\n'use strict';\n\nvar entities          = require('../common/entities');\nvar has               = require('../common/utils').has;\nvar isValidEntityCode = require('../common/utils').isValidEntityCode;\nvar fromCodePoint     = require('../common/utils').fromCodePoint;\n\n\nvar DIGITAL_RE = /^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i;\nvar NAMED_RE   = /^&([a-z][a-z0-9]{1,31});/i;\n\n\nmodule.exports = function entity(state, silent) {\n  var ch, code, match, pos = state.pos, max = state.posMax;\n\n  if (state.src.charCodeAt(pos) !== 0x26/* & */) { return false; }\n\n  if (pos + 1 < max) {\n    ch = state.src.charCodeAt(pos + 1);\n\n    if (ch === 0x23 /* # */) {\n      match = state.src.slice(pos).match(DIGITAL_RE);\n      if (match) {\n        if (!silent) {\n          code = match[1][0].toLowerCase() === 'x' ? parseInt(match[1].slice(1), 16) : parseInt(match[1], 10);\n          state.pending += isValidEntityCode(code) ? fromCodePoint(code) : fromCodePoint(0xFFFD);\n        }\n        state.pos += match[0].length;\n        return true;\n      }\n    } else {\n      match = state.src.slice(pos).match(NAMED_RE);\n      if (match) {\n        if (has(entities, match[1])) {\n          if (!silent) { state.pending += entities[match[1]]; }\n          state.pos += match[0].length;\n          return true;\n        }\n      }\n    }\n  }\n\n  if (!silent) { state.pending += '&'; }\n  state.pos++;\n  return true;\n};\n","// Process escaped chars and hardbreaks\n\n'use strict';\n\nvar isSpace = require('../common/utils').isSpace;\n\nvar ESCAPED = [];\n\nfor (var i = 0; i < 256; i++) { ESCAPED.push(0); }\n\n'\\\\!\"#$%&\\'()*+,./:;<=>?@[]^_`{|}~-'\n  .split('').forEach(function (ch) { ESCAPED[ch.charCodeAt(0)] = 1; });\n\n\nmodule.exports = function escape(state, silent) {\n  var ch, pos = state.pos, max = state.posMax;\n\n  if (state.src.charCodeAt(pos) !== 0x5C/* \\ */) { return false; }\n\n  pos++;\n\n  if (pos < max) {\n    ch = state.src.charCodeAt(pos);\n\n    if (ch < 256 && ESCAPED[ch] !== 0) {\n      if (!silent) { state.pending += state.src[pos]; }\n      state.pos += 2;\n      return true;\n    }\n\n    if (ch === 0x0A) {\n      if (!silent) {\n        state.push('hardbreak', 'br', 0);\n      }\n\n      pos++;\n      // skip leading whitespaces from next line\n      while (pos < max) {\n        ch = state.src.charCodeAt(pos);\n        if (!isSpace(ch)) { break; }\n        pos++;\n      }\n\n      state.pos = pos;\n      return true;\n    }\n  }\n\n  if (!silent) { state.pending += '\\\\'; }\n  state.pos++;\n  return true;\n};\n","// Process html tags\n\n'use strict';\n\n\nvar HTML_TAG_RE = require('../common/html_re').HTML_TAG_RE;\n\n\nfunction isLetter(ch) {\n  /*eslint no-bitwise:0*/\n  var lc = ch | 0x20; // to lower case\n  return (lc >= 0x61/* a */) && (lc <= 0x7a/* z */);\n}\n\n\nmodule.exports = function html_inline(state, silent) {\n  var ch, match, max, token,\n      pos = state.pos;\n\n  if (!state.md.options.html) { return false; }\n\n  // Check start\n  max = state.posMax;\n  if (state.src.charCodeAt(pos) !== 0x3C/* < */ ||\n      pos + 2 >= max) {\n    return false;\n  }\n\n  // Quick fail on second char\n  ch = state.src.charCodeAt(pos + 1);\n  if (ch !== 0x21/* ! */ &&\n      ch !== 0x3F/* ? */ &&\n      ch !== 0x2F/* / */ &&\n      !isLetter(ch)) {\n    return false;\n  }\n\n  match = state.src.slice(pos).match(HTML_TAG_RE);\n  if (!match) { return false; }\n\n  if (!silent) {\n    token         = state.push('html_inline', '', 0);\n    token.content = state.src.slice(pos, pos + match[0].length);\n  }\n  state.pos += match[0].length;\n  return true;\n};\n","// Process ![image](<src> \"title\")\n\n'use strict';\n\nvar normalizeReference   = require('../common/utils').normalizeReference;\nvar isSpace              = require('../common/utils').isSpace;\n\n\nmodule.exports = function image(state, silent) {\n  var attrs,\n      code,\n      content,\n      label,\n      labelEnd,\n      labelStart,\n      pos,\n      ref,\n      res,\n      title,\n      token,\n      tokens,\n      start,\n      href = '',\n      oldPos = state.pos,\n      max = state.posMax;\n\n  if (state.src.charCodeAt(state.pos) !== 0x21/* ! */) { return false; }\n  if (state.src.charCodeAt(state.pos + 1) !== 0x5B/* [ */) { return false; }\n\n  labelStart = state.pos + 2;\n  labelEnd = state.md.helpers.parseLinkLabel(state, state.pos + 1, false);\n\n  // parser failed to find ']', so it's not a valid link\n  if (labelEnd < 0) { return false; }\n\n  pos = labelEnd + 1;\n  if (pos < max && state.src.charCodeAt(pos) === 0x28/* ( */) {\n    //\n    // Inline link\n    //\n\n    // [link](  <href>  \"title\"  )\n    //        ^^ skipping these spaces\n    pos++;\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (!isSpace(code) && code !== 0x0A) { break; }\n    }\n    if (pos >= max) { return false; }\n\n    // [link](  <href>  \"title\"  )\n    //          ^^^^^^ parsing link destination\n    start = pos;\n    res = state.md.helpers.parseLinkDestination(state.src, pos, state.posMax);\n    if (res.ok) {\n      href = state.md.normalizeLink(res.str);\n      if (state.md.validateLink(href)) {\n        pos = res.pos;\n      } else {\n        href = '';\n      }\n    }\n\n    // [link](  <href>  \"title\"  )\n    //                ^^ skipping these spaces\n    start = pos;\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (!isSpace(code) && code !== 0x0A) { break; }\n    }\n\n    // [link](  <href>  \"title\"  )\n    //                  ^^^^^^^ parsing link title\n    res = state.md.helpers.parseLinkTitle(state.src, pos, state.posMax);\n    if (pos < max && start !== pos && res.ok) {\n      title = res.str;\n      pos = res.pos;\n\n      // [link](  <href>  \"title\"  )\n      //                         ^^ skipping these spaces\n      for (; pos < max; pos++) {\n        code = state.src.charCodeAt(pos);\n        if (!isSpace(code) && code !== 0x0A) { break; }\n      }\n    } else {\n      title = '';\n    }\n\n    if (pos >= max || state.src.charCodeAt(pos) !== 0x29/* ) */) {\n      state.pos = oldPos;\n      return false;\n    }\n    pos++;\n  } else {\n    //\n    // Link reference\n    //\n    if (typeof state.env.references === 'undefined') { return false; }\n\n    if (pos < max && state.src.charCodeAt(pos) === 0x5B/* [ */) {\n      start = pos + 1;\n      pos = state.md.helpers.parseLinkLabel(state, pos);\n      if (pos >= 0) {\n        label = state.src.slice(start, pos++);\n      } else {\n        pos = labelEnd + 1;\n      }\n    } else {\n      pos = labelEnd + 1;\n    }\n\n    // covers label === '' and label === undefined\n    // (collapsed reference link and shortcut reference link respectively)\n    if (!label) { label = state.src.slice(labelStart, labelEnd); }\n\n    ref = state.env.references[normalizeReference(label)];\n    if (!ref) {\n      state.pos = oldPos;\n      return false;\n    }\n    href = ref.href;\n    title = ref.title;\n  }\n\n  //\n  // We found the end of the link, and know for a fact it's a valid link;\n  // so all that's left to do is to call tokenizer.\n  //\n  if (!silent) {\n    content = state.src.slice(labelStart, labelEnd);\n\n    state.md.inline.parse(\n      content,\n      state.md,\n      state.env,\n      tokens = []\n    );\n\n    token          = state.push('image', 'img', 0);\n    token.attrs    = attrs = [ [ 'src', href ], [ 'alt', '' ] ];\n    token.children = tokens;\n    token.content  = content;\n\n    if (title) {\n      attrs.push([ 'title', title ]);\n    }\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n  return true;\n};\n","// Process [link](<to> \"stuff\")\n\n'use strict';\n\nvar normalizeReference   = require('../common/utils').normalizeReference;\nvar isSpace              = require('../common/utils').isSpace;\n\n\nmodule.exports = function link(state, silent) {\n  var attrs,\n      code,\n      label,\n      labelEnd,\n      labelStart,\n      pos,\n      res,\n      ref,\n      token,\n      href = '',\n      title = '',\n      oldPos = state.pos,\n      max = state.posMax,\n      start = state.pos,\n      parseReference = true;\n\n  if (state.src.charCodeAt(state.pos) !== 0x5B/* [ */) { return false; }\n\n  labelStart = state.pos + 1;\n  labelEnd = state.md.helpers.parseLinkLabel(state, state.pos, true);\n\n  // parser failed to find ']', so it's not a valid link\n  if (labelEnd < 0) { return false; }\n\n  pos = labelEnd + 1;\n  if (pos < max && state.src.charCodeAt(pos) === 0x28/* ( */) {\n    //\n    // Inline link\n    //\n\n    // might have found a valid shortcut link, disable reference parsing\n    parseReference = false;\n\n    // [link](  <href>  \"title\"  )\n    //        ^^ skipping these spaces\n    pos++;\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (!isSpace(code) && code !== 0x0A) { break; }\n    }\n    if (pos >= max) { return false; }\n\n    // [link](  <href>  \"title\"  )\n    //          ^^^^^^ parsing link destination\n    start = pos;\n    res = state.md.helpers.parseLinkDestination(state.src, pos, state.posMax);\n    if (res.ok) {\n      href = state.md.normalizeLink(res.str);\n      if (state.md.validateLink(href)) {\n        pos = res.pos;\n      } else {\n        href = '';\n      }\n\n      // [link](  <href>  \"title\"  )\n      //                ^^ skipping these spaces\n      start = pos;\n      for (; pos < max; pos++) {\n        code = state.src.charCodeAt(pos);\n        if (!isSpace(code) && code !== 0x0A) { break; }\n      }\n\n      // [link](  <href>  \"title\"  )\n      //                  ^^^^^^^ parsing link title\n      res = state.md.helpers.parseLinkTitle(state.src, pos, state.posMax);\n      if (pos < max && start !== pos && res.ok) {\n        title = res.str;\n        pos = res.pos;\n\n        // [link](  <href>  \"title\"  )\n        //                         ^^ skipping these spaces\n        for (; pos < max; pos++) {\n          code = state.src.charCodeAt(pos);\n          if (!isSpace(code) && code !== 0x0A) { break; }\n        }\n      }\n    }\n\n    if (pos >= max || state.src.charCodeAt(pos) !== 0x29/* ) */) {\n      // parsing a valid shortcut link failed, fallback to reference\n      parseReference = true;\n    }\n    pos++;\n  }\n\n  if (parseReference) {\n    //\n    // Link reference\n    //\n    if (typeof state.env.references === 'undefined') { return false; }\n\n    if (pos < max && state.src.charCodeAt(pos) === 0x5B/* [ */) {\n      start = pos + 1;\n      pos = state.md.helpers.parseLinkLabel(state, pos);\n      if (pos >= 0) {\n        label = state.src.slice(start, pos++);\n      } else {\n        pos = labelEnd + 1;\n      }\n    } else {\n      pos = labelEnd + 1;\n    }\n\n    // covers label === '' and label === undefined\n    // (collapsed reference link and shortcut reference link respectively)\n    if (!label) { label = state.src.slice(labelStart, labelEnd); }\n\n    ref = state.env.references[normalizeReference(label)];\n    if (!ref) {\n      state.pos = oldPos;\n      return false;\n    }\n    href = ref.href;\n    title = ref.title;\n  }\n\n  //\n  // We found the end of the link, and know for a fact it's a valid link;\n  // so all that's left to do is to call tokenizer.\n  //\n  if (!silent) {\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n\n    token        = state.push('link_open', 'a', 1);\n    token.attrs  = attrs = [ [ 'href', href ] ];\n    if (title) {\n      attrs.push([ 'title', title ]);\n    }\n\n    state.md.inline.tokenize(state);\n\n    token        = state.push('link_close', 'a', -1);\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n  return true;\n};\n","// Proceess '\\n'\n\n'use strict';\n\nvar isSpace = require('../common/utils').isSpace;\n\n\nmodule.exports = function newline(state, silent) {\n  var pmax, max, ws, pos = state.pos;\n\n  if (state.src.charCodeAt(pos) !== 0x0A/* \\n */) { return false; }\n\n  pmax = state.pending.length - 1;\n  max = state.posMax;\n\n  // '  \\n' -> hardbreak\n  // Lookup in pending chars is bad practice! Don't copy to other rules!\n  // Pending string is stored in concat mode, indexed lookups will cause\n  // convertion to flat mode.\n  if (!silent) {\n    if (pmax >= 0 && state.pending.charCodeAt(pmax) === 0x20) {\n      if (pmax >= 1 && state.pending.charCodeAt(pmax - 1) === 0x20) {\n        // Find whitespaces tail of pending chars.\n        ws = pmax - 1;\n        while (ws >= 1 && state.pending.charCodeAt(ws - 1) === 0x20) ws--;\n\n        state.pending = state.pending.slice(0, ws);\n        state.push('hardbreak', 'br', 0);\n      } else {\n        state.pending = state.pending.slice(0, -1);\n        state.push('softbreak', 'br', 0);\n      }\n\n    } else {\n      state.push('softbreak', 'br', 0);\n    }\n  }\n\n  pos++;\n\n  // skip heading spaces for next line\n  while (pos < max && isSpace(state.src.charCodeAt(pos))) { pos++; }\n\n  state.pos = pos;\n  return true;\n};\n","// Inline parser state\n\n'use strict';\n\n\nvar Token          = require('../token');\nvar isWhiteSpace   = require('../common/utils').isWhiteSpace;\nvar isPunctChar    = require('../common/utils').isPunctChar;\nvar isMdAsciiPunct = require('../common/utils').isMdAsciiPunct;\n\n\nfunction StateInline(src, md, env, outTokens) {\n  this.src = src;\n  this.env = env;\n  this.md = md;\n  this.tokens = outTokens;\n  this.tokens_meta = Array(outTokens.length);\n\n  this.pos = 0;\n  this.posMax = this.src.length;\n  this.level = 0;\n  this.pending = '';\n  this.pendingLevel = 0;\n\n  // Stores { start: end } pairs. Useful for backtrack\n  // optimization of pairs parse (emphasis, strikes).\n  this.cache = {};\n\n  // List of emphasis-like delimiters for current tag\n  this.delimiters = [];\n\n  // Stack of delimiter lists for upper level tags\n  this._prev_delimiters = [];\n\n  // backtick length => last seen position\n  this.backticks = {};\n  this.backticksScanned = false;\n}\n\n\n// Flush pending text\n//\nStateInline.prototype.pushPending = function () {\n  var token = new Token('text', '', 0);\n  token.content = this.pending;\n  token.level = this.pendingLevel;\n  this.tokens.push(token);\n  this.pending = '';\n  return token;\n};\n\n\n// Push new token to \"stream\".\n// If pending text exists - flush it as text token\n//\nStateInline.prototype.push = function (type, tag, nesting) {\n  if (this.pending) {\n    this.pushPending();\n  }\n\n  var token = new Token(type, tag, nesting);\n  var token_meta = null;\n\n  if (nesting < 0) {\n    // closing tag\n    this.level--;\n    this.delimiters = this._prev_delimiters.pop();\n  }\n\n  token.level = this.level;\n\n  if (nesting > 0) {\n    // opening tag\n    this.level++;\n    this._prev_delimiters.push(this.delimiters);\n    this.delimiters = [];\n    token_meta = { delimiters: this.delimiters };\n  }\n\n  this.pendingLevel = this.level;\n  this.tokens.push(token);\n  this.tokens_meta.push(token_meta);\n  return token;\n};\n\n\n// Scan a sequence of emphasis-like markers, and determine whether\n// it can start an emphasis sequence or end an emphasis sequence.\n//\n//  - start - position to scan from (it should point at a valid marker);\n//  - canSplitWord - determine if these markers can be found inside a word\n//\nStateInline.prototype.scanDelims = function (start, canSplitWord) {\n  var pos = start, lastChar, nextChar, count, can_open, can_close,\n      isLastWhiteSpace, isLastPunctChar,\n      isNextWhiteSpace, isNextPunctChar,\n      left_flanking = true,\n      right_flanking = true,\n      max = this.posMax,\n      marker = this.src.charCodeAt(start);\n\n  // treat beginning of the line as a whitespace\n  lastChar = start > 0 ? this.src.charCodeAt(start - 1) : 0x20;\n\n  while (pos < max && this.src.charCodeAt(pos) === marker) { pos++; }\n\n  count = pos - start;\n\n  // treat end of the line as a whitespace\n  nextChar = pos < max ? this.src.charCodeAt(pos) : 0x20;\n\n  isLastPunctChar = isMdAsciiPunct(lastChar) || isPunctChar(String.fromCharCode(lastChar));\n  isNextPunctChar = isMdAsciiPunct(nextChar) || isPunctChar(String.fromCharCode(nextChar));\n\n  isLastWhiteSpace = isWhiteSpace(lastChar);\n  isNextWhiteSpace = isWhiteSpace(nextChar);\n\n  if (isNextWhiteSpace) {\n    left_flanking = false;\n  } else if (isNextPunctChar) {\n    if (!(isLastWhiteSpace || isLastPunctChar)) {\n      left_flanking = false;\n    }\n  }\n\n  if (isLastWhiteSpace) {\n    right_flanking = false;\n  } else if (isLastPunctChar) {\n    if (!(isNextWhiteSpace || isNextPunctChar)) {\n      right_flanking = false;\n    }\n  }\n\n  if (!canSplitWord) {\n    can_open  = left_flanking  && (!right_flanking || isLastPunctChar);\n    can_close = right_flanking && (!left_flanking  || isNextPunctChar);\n  } else {\n    can_open  = left_flanking;\n    can_close = right_flanking;\n  }\n\n  return {\n    can_open:  can_open,\n    can_close: can_close,\n    length:    count\n  };\n};\n\n\n// re-export Token class to use in block rules\nStateInline.prototype.Token = Token;\n\n\nmodule.exports = StateInline;\n","// ~~strike through~~\n//\n'use strict';\n\n\n// Insert each marker as a separate text token, and add it to delimiter list\n//\nmodule.exports.tokenize = function strikethrough(state, silent) {\n  var i, scanned, token, len, ch,\n      start = state.pos,\n      marker = state.src.charCodeAt(start);\n\n  if (silent) { return false; }\n\n  if (marker !== 0x7E/* ~ */) { return false; }\n\n  scanned = state.scanDelims(state.pos, true);\n  len = scanned.length;\n  ch = String.fromCharCode(marker);\n\n  if (len < 2) { return false; }\n\n  if (len % 2) {\n    token         = state.push('text', '', 0);\n    token.content = ch;\n    len--;\n  }\n\n  for (i = 0; i < len; i += 2) {\n    token         = state.push('text', '', 0);\n    token.content = ch + ch;\n\n    state.delimiters.push({\n      marker: marker,\n      length: 0,     // disable \"rule of 3\" length checks meant for emphasis\n      token:  state.tokens.length - 1,\n      end:    -1,\n      open:   scanned.can_open,\n      close:  scanned.can_close\n    });\n  }\n\n  state.pos += scanned.length;\n\n  return true;\n};\n\n\nfunction postProcess(state, delimiters) {\n  var i, j,\n      startDelim,\n      endDelim,\n      token,\n      loneMarkers = [],\n      max = delimiters.length;\n\n  for (i = 0; i < max; i++) {\n    startDelim = delimiters[i];\n\n    if (startDelim.marker !== 0x7E/* ~ */) {\n      continue;\n    }\n\n    if (startDelim.end === -1) {\n      continue;\n    }\n\n    endDelim = delimiters[startDelim.end];\n\n    token         = state.tokens[startDelim.token];\n    token.type    = 's_open';\n    token.tag     = 's';\n    token.nesting = 1;\n    token.markup  = '~~';\n    token.content = '';\n\n    token         = state.tokens[endDelim.token];\n    token.type    = 's_close';\n    token.tag     = 's';\n    token.nesting = -1;\n    token.markup  = '~~';\n    token.content = '';\n\n    if (state.tokens[endDelim.token - 1].type === 'text' &&\n        state.tokens[endDelim.token - 1].content === '~') {\n\n      loneMarkers.push(endDelim.token - 1);\n    }\n  }\n\n  // If a marker sequence has an odd number of characters, it's splitted\n  // like this: `~~~~~` -> `~` + `~~` + `~~`, leaving one marker at the\n  // start of the sequence.\n  //\n  // So, we have to move all those markers after subsequent s_close tags.\n  //\n  while (loneMarkers.length) {\n    i = loneMarkers.pop();\n    j = i + 1;\n\n    while (j < state.tokens.length && state.tokens[j].type === 's_close') {\n      j++;\n    }\n\n    j--;\n\n    if (i !== j) {\n      token = state.tokens[j];\n      state.tokens[j] = state.tokens[i];\n      state.tokens[i] = token;\n    }\n  }\n}\n\n\n// Walk through delimiter list and replace text tokens with tags\n//\nmodule.exports.postProcess = function strikethrough(state) {\n  var curr,\n      tokens_meta = state.tokens_meta,\n      max = state.tokens_meta.length;\n\n  postProcess(state, state.delimiters);\n\n  for (curr = 0; curr < max; curr++) {\n    if (tokens_meta[curr] && tokens_meta[curr].delimiters) {\n      postProcess(state, tokens_meta[curr].delimiters);\n    }\n  }\n};\n","// Skip text characters for text token, place those to pending buffer\n// and increment current pos\n\n'use strict';\n\n\n// Rule to skip pure text\n// '{}$%@~+=:' reserved for extentions\n\n// !, \", #, $, %, &, ', (, ), *, +, ,, -, ., /, :, ;, <, =, >, ?, @, [, \\, ], ^, _, `, {, |, }, or ~\n\n// !!!! Don't confuse with \"Markdown ASCII Punctuation\" chars\n// http://spec.commonmark.org/0.15/#ascii-punctuation-character\nfunction isTerminatorChar(ch) {\n  switch (ch) {\n    case 0x0A/* \\n */:\n    case 0x21/* ! */:\n    case 0x23/* # */:\n    case 0x24/* $ */:\n    case 0x25/* % */:\n    case 0x26/* & */:\n    case 0x2A/* * */:\n    case 0x2B/* + */:\n    case 0x2D/* - */:\n    case 0x3A/* : */:\n    case 0x3C/* < */:\n    case 0x3D/* = */:\n    case 0x3E/* > */:\n    case 0x40/* @ */:\n    case 0x5B/* [ */:\n    case 0x5C/* \\ */:\n    case 0x5D/* ] */:\n    case 0x5E/* ^ */:\n    case 0x5F/* _ */:\n    case 0x60/* ` */:\n    case 0x7B/* { */:\n    case 0x7D/* } */:\n    case 0x7E/* ~ */:\n      return true;\n    default:\n      return false;\n  }\n}\n\nmodule.exports = function text(state, silent) {\n  var pos = state.pos;\n\n  while (pos < state.posMax && !isTerminatorChar(state.src.charCodeAt(pos))) {\n    pos++;\n  }\n\n  if (pos === state.pos) { return false; }\n\n  if (!silent) { state.pending += state.src.slice(state.pos, pos); }\n\n  state.pos = pos;\n\n  return true;\n};\n\n// Alternative implementation, for memory.\n//\n// It costs 10% of performance, but allows extend terminators list, if place it\n// to `ParcerInline` property. Probably, will switch to it sometime, such\n// flexibility required.\n\n/*\nvar TERMINATOR_RE = /[\\n!#$%&*+\\-:<=>@[\\\\\\]^_`{}~]/;\n\nmodule.exports = function text(state, silent) {\n  var pos = state.pos,\n      idx = state.src.slice(pos).search(TERMINATOR_RE);\n\n  // first char is terminator -> empty text\n  if (idx === 0) { return false; }\n\n  // no terminator -> text till end of string\n  if (idx < 0) {\n    if (!silent) { state.pending += state.src.slice(pos); }\n    state.pos = state.src.length;\n    return true;\n  }\n\n  if (!silent) { state.pending += state.src.slice(pos, pos + idx); }\n\n  state.pos += idx;\n\n  return true;\n};*/\n","// Clean up tokens after emphasis and strikethrough postprocessing:\n// merge adjacent text nodes into one and re-calculate all token levels\n//\n// This is necessary because initially emphasis delimiter markers (*, _, ~)\n// are treated as their own separate text tokens. Then emphasis rule either\n// leaves them as text (needed to merge with adjacent text) or turns them\n// into opening/closing tags (which messes up levels inside).\n//\n'use strict';\n\n\nmodule.exports = function text_collapse(state) {\n  var curr, last,\n      level = 0,\n      tokens = state.tokens,\n      max = state.tokens.length;\n\n  for (curr = last = 0; curr < max; curr++) {\n    // re-calculate levels after emphasis/strikethrough turns some text nodes\n    // into opening/closing tags\n    if (tokens[curr].nesting < 0) level--; // closing tag\n    tokens[curr].level = level;\n    if (tokens[curr].nesting > 0) level++; // opening tag\n\n    if (tokens[curr].type === 'text' &&\n        curr + 1 < max &&\n        tokens[curr + 1].type === 'text') {\n\n      // collapse two adjacent text nodes\n      tokens[curr + 1].content = tokens[curr].content + tokens[curr + 1].content;\n    } else {\n      if (curr !== last) { tokens[last] = tokens[curr]; }\n\n      last++;\n    }\n  }\n\n  if (curr !== last) {\n    tokens.length = last;\n  }\n};\n","// Token class\n\n'use strict';\n\n\n/**\n * class Token\n **/\n\n/**\n * new Token(type, tag, nesting)\n *\n * Create new token and fill passed properties.\n **/\nfunction Token(type, tag, nesting) {\n  /**\n   * Token#type -> String\n   *\n   * Type of the token (string, e.g. \"paragraph_open\")\n   **/\n  this.type     = type;\n\n  /**\n   * Token#tag -> String\n   *\n   * html tag name, e.g. \"p\"\n   **/\n  this.tag      = tag;\n\n  /**\n   * Token#attrs -> Array\n   *\n   * Html attributes. Format: `[ [ name1, value1 ], [ name2, value2 ] ]`\n   **/\n  this.attrs    = null;\n\n  /**\n   * Token#map -> Array\n   *\n   * Source map info. Format: `[ line_begin, line_end ]`\n   **/\n  this.map      = null;\n\n  /**\n   * Token#nesting -> Number\n   *\n   * Level change (number in {-1, 0, 1} set), where:\n   *\n   * -  `1` means the tag is opening\n   * -  `0` means the tag is self-closing\n   * - `-1` means the tag is closing\n   **/\n  this.nesting  = nesting;\n\n  /**\n   * Token#level -> Number\n   *\n   * nesting level, the same as `state.level`\n   **/\n  this.level    = 0;\n\n  /**\n   * Token#children -> Array\n   *\n   * An array of child nodes (inline and img tokens)\n   **/\n  this.children = null;\n\n  /**\n   * Token#content -> String\n   *\n   * In a case of self-closing tag (code, html, fence, etc.),\n   * it has contents of this tag.\n   **/\n  this.content  = '';\n\n  /**\n   * Token#markup -> String\n   *\n   * '*' or '_' for emphasis, fence string for fence, etc.\n   **/\n  this.markup   = '';\n\n  /**\n   * Token#info -> String\n   *\n   * Additional information:\n   *\n   * - Info string for \"fence\" tokens\n   * - The value \"auto\" for autolink \"link_open\" and \"link_close\" tokens\n   * - The string value of the item marker for ordered-list \"list_item_open\" tokens\n   **/\n  this.info     = '';\n\n  /**\n   * Token#meta -> Object\n   *\n   * A place for plugins to store an arbitrary data\n   **/\n  this.meta     = null;\n\n  /**\n   * Token#block -> Boolean\n   *\n   * True for block-level tokens, false for inline tokens.\n   * Used in renderer to calculate line breaks\n   **/\n  this.block    = false;\n\n  /**\n   * Token#hidden -> Boolean\n   *\n   * If it's true, ignore this element when rendering. Used for tight lists\n   * to hide paragraphs.\n   **/\n  this.hidden   = false;\n}\n\n\n/**\n * Token.attrIndex(name) -> Number\n *\n * Search attribute index by name.\n **/\nToken.prototype.attrIndex = function attrIndex(name) {\n  var attrs, i, len;\n\n  if (!this.attrs) { return -1; }\n\n  attrs = this.attrs;\n\n  for (i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i][0] === name) { return i; }\n  }\n  return -1;\n};\n\n\n/**\n * Token.attrPush(attrData)\n *\n * Add `[ name, value ]` attribute to list. Init attrs if necessary\n **/\nToken.prototype.attrPush = function attrPush(attrData) {\n  if (this.attrs) {\n    this.attrs.push(attrData);\n  } else {\n    this.attrs = [ attrData ];\n  }\n};\n\n\n/**\n * Token.attrSet(name, value)\n *\n * Set `name` attribute to `value`. Override old value if exists.\n **/\nToken.prototype.attrSet = function attrSet(name, value) {\n  var idx = this.attrIndex(name),\n      attrData = [ name, value ];\n\n  if (idx < 0) {\n    this.attrPush(attrData);\n  } else {\n    this.attrs[idx] = attrData;\n  }\n};\n\n\n/**\n * Token.attrGet(name)\n *\n * Get the value of attribute `name`, or null if it does not exist.\n **/\nToken.prototype.attrGet = function attrGet(name) {\n  var idx = this.attrIndex(name), value = null;\n  if (idx >= 0) {\n    value = this.attrs[idx][1];\n  }\n  return value;\n};\n\n\n/**\n * Token.attrJoin(name, value)\n *\n * Join value to existing attribute via space. Or create new attribute if not\n * exists. Useful to operate with token classes.\n **/\nToken.prototype.attrJoin = function attrJoin(name, value) {\n  var idx = this.attrIndex(name);\n\n  if (idx < 0) {\n    this.attrPush([ name, value ]);\n  } else {\n    this.attrs[idx][1] = this.attrs[idx][1] + ' ' + value;\n  }\n};\n\n\nmodule.exports = Token;\n","\n'use strict';\n\n\n/* eslint-disable no-bitwise */\n\nvar decodeCache = {};\n\nfunction getDecodeCache(exclude) {\n  var i, ch, cache = decodeCache[exclude];\n  if (cache) { return cache; }\n\n  cache = decodeCache[exclude] = [];\n\n  for (i = 0; i < 128; i++) {\n    ch = String.fromCharCode(i);\n    cache.push(ch);\n  }\n\n  for (i = 0; i < exclude.length; i++) {\n    ch = exclude.charCodeAt(i);\n    cache[ch] = '%' + ('0' + ch.toString(16).toUpperCase()).slice(-2);\n  }\n\n  return cache;\n}\n\n\n// Decode percent-encoded string.\n//\nfunction decode(string, exclude) {\n  var cache;\n\n  if (typeof exclude !== 'string') {\n    exclude = decode.defaultChars;\n  }\n\n  cache = getDecodeCache(exclude);\n\n  return string.replace(/(%[a-f0-9]{2})+/gi, function(seq) {\n    var i, l, b1, b2, b3, b4, chr,\n        result = '';\n\n    for (i = 0, l = seq.length; i < l; i += 3) {\n      b1 = parseInt(seq.slice(i + 1, i + 3), 16);\n\n      if (b1 < 0x80) {\n        result += cache[b1];\n        continue;\n      }\n\n      if ((b1 & 0xE0) === 0xC0 && (i + 3 < l)) {\n        // 110xxxxx 10xxxxxx\n        b2 = parseInt(seq.slice(i + 4, i + 6), 16);\n\n        if ((b2 & 0xC0) === 0x80) {\n          chr = ((b1 << 6) & 0x7C0) | (b2 & 0x3F);\n\n          if (chr < 0x80) {\n            result += '\\ufffd\\ufffd';\n          } else {\n            result += String.fromCharCode(chr);\n          }\n\n          i += 3;\n          continue;\n        }\n      }\n\n      if ((b1 & 0xF0) === 0xE0 && (i + 6 < l)) {\n        // 1110xxxx 10xxxxxx 10xxxxxx\n        b2 = parseInt(seq.slice(i + 4, i + 6), 16);\n        b3 = parseInt(seq.slice(i + 7, i + 9), 16);\n\n        if ((b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80) {\n          chr = ((b1 << 12) & 0xF000) | ((b2 << 6) & 0xFC0) | (b3 & 0x3F);\n\n          if (chr < 0x800 || (chr >= 0xD800 && chr <= 0xDFFF)) {\n            result += '\\ufffd\\ufffd\\ufffd';\n          } else {\n            result += String.fromCharCode(chr);\n          }\n\n          i += 6;\n          continue;\n        }\n      }\n\n      if ((b1 & 0xF8) === 0xF0 && (i + 9 < l)) {\n        // 111110xx 10xxxxxx 10xxxxxx 10xxxxxx\n        b2 = parseInt(seq.slice(i + 4, i + 6), 16);\n        b3 = parseInt(seq.slice(i + 7, i + 9), 16);\n        b4 = parseInt(seq.slice(i + 10, i + 12), 16);\n\n        if ((b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80 && (b4 & 0xC0) === 0x80) {\n          chr = ((b1 << 18) & 0x1C0000) | ((b2 << 12) & 0x3F000) | ((b3 << 6) & 0xFC0) | (b4 & 0x3F);\n\n          if (chr < 0x10000 || chr > 0x10FFFF) {\n            result += '\\ufffd\\ufffd\\ufffd\\ufffd';\n          } else {\n            chr -= 0x10000;\n            result += String.fromCharCode(0xD800 + (chr >> 10), 0xDC00 + (chr & 0x3FF));\n          }\n\n          i += 9;\n          continue;\n        }\n      }\n\n      result += '\\ufffd';\n    }\n\n    return result;\n  });\n}\n\n\ndecode.defaultChars   = ';/?:@&=+$,#';\ndecode.componentChars = '';\n\n\nmodule.exports = decode;\n","\n'use strict';\n\n\nvar encodeCache = {};\n\n\n// Create a lookup array where anything but characters in `chars` string\n// and alphanumeric chars is percent-encoded.\n//\nfunction getEncodeCache(exclude) {\n  var i, ch, cache = encodeCache[exclude];\n  if (cache) { return cache; }\n\n  cache = encodeCache[exclude] = [];\n\n  for (i = 0; i < 128; i++) {\n    ch = String.fromCharCode(i);\n\n    if (/^[0-9a-z]$/i.test(ch)) {\n      // always allow unencoded alphanumeric characters\n      cache.push(ch);\n    } else {\n      cache.push('%' + ('0' + i.toString(16).toUpperCase()).slice(-2));\n    }\n  }\n\n  for (i = 0; i < exclude.length; i++) {\n    cache[exclude.charCodeAt(i)] = exclude[i];\n  }\n\n  return cache;\n}\n\n\n// Encode unsafe characters with percent-encoding, skipping already\n// encoded sequences.\n//\n//  - string       - string to encode\n//  - exclude      - list of characters to ignore (in addition to a-zA-Z0-9)\n//  - keepEscaped  - don't encode '%' in a correct escape sequence (default: true)\n//\nfunction encode(string, exclude, keepEscaped) {\n  var i, l, code, nextCode, cache,\n      result = '';\n\n  if (typeof exclude !== 'string') {\n    // encode(string, keepEscaped)\n    keepEscaped  = exclude;\n    exclude = encode.defaultChars;\n  }\n\n  if (typeof keepEscaped === 'undefined') {\n    keepEscaped = true;\n  }\n\n  cache = getEncodeCache(exclude);\n\n  for (i = 0, l = string.length; i < l; i++) {\n    code = string.charCodeAt(i);\n\n    if (keepEscaped && code === 0x25 /* % */ && i + 2 < l) {\n      if (/^[0-9a-f]{2}$/i.test(string.slice(i + 1, i + 3))) {\n        result += string.slice(i, i + 3);\n        i += 2;\n        continue;\n      }\n    }\n\n    if (code < 128) {\n      result += cache[code];\n      continue;\n    }\n\n    if (code >= 0xD800 && code <= 0xDFFF) {\n      if (code >= 0xD800 && code <= 0xDBFF && i + 1 < l) {\n        nextCode = string.charCodeAt(i + 1);\n        if (nextCode >= 0xDC00 && nextCode <= 0xDFFF) {\n          result += encodeURIComponent(string[i] + string[i + 1]);\n          i++;\n          continue;\n        }\n      }\n      result += '%EF%BF%BD';\n      continue;\n    }\n\n    result += encodeURIComponent(string[i]);\n  }\n\n  return result;\n}\n\nencode.defaultChars   = \";/?:@&=+$,-_.!~*'()#\";\nencode.componentChars = \"-_.!~*'()\";\n\n\nmodule.exports = encode;\n","\n'use strict';\n\n\nmodule.exports = function format(url) {\n  var result = '';\n\n  result += url.protocol || '';\n  result += url.slashes ? '//' : '';\n  result += url.auth ? url.auth + '@' : '';\n\n  if (url.hostname && url.hostname.indexOf(':') !== -1) {\n    // ipv6 address\n    result += '[' + url.hostname + ']';\n  } else {\n    result += url.hostname || '';\n  }\n\n  result += url.port ? ':' + url.port : '';\n  result += url.pathname || '';\n  result += url.search || '';\n  result += url.hash || '';\n\n  return result;\n};\n","'use strict';\n\n\nmodule.exports.encode = require('./encode');\nmodule.exports.decode = require('./decode');\nmodule.exports.format = require('./format');\nmodule.exports.parse  = require('./parse');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n//\n// Changes from joyent/node:\n//\n// 1. No leading slash in paths,\n//    e.g. in `url.parse('http://foo?bar')` pathname is ``, not `/`\n//\n// 2. Backslashes are not replaced with slashes,\n//    so `http:\\\\example.org\\` is treated like a relative path\n//\n// 3. Trailing colon is treated like a part of the path,\n//    i.e. in `http://example.org:foo` pathname is `:foo`\n//\n// 4. Nothing is URL-encoded in the resulting object,\n//    (in joyent/node some chars in auth and paths are encoded)\n//\n// 5. `url.parse()` does not have `parseQueryString` argument\n//\n// 6. Removed extraneous result properties: `host`, `path`, `query`, etc.,\n//    which can be constructed using other parts of the url.\n//\n\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.pathname = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = [ '<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t' ],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = [ '{', '}', '|', '\\\\', '^', '`' ].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = [ '\\'' ].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = [ '%', '/', '?', ';', '#' ].concat(autoEscape),\n    hostEndingChars = [ '/', '?', '#' ],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    /* eslint-disable no-script-url */\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    };\n    /* eslint-enable no-script-url */\n\nfunction urlParse(url, slashesDenoteHost) {\n  if (url && url instanceof Url) { return url; }\n\n  var u = new Url();\n  u.parse(url, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, slashesDenoteHost) {\n  var i, l, lowerProto, hec, slashes,\n      rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    lowerProto = proto.toLowerCase();\n    this.protocol = proto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (i = 0; i < hostEndingChars.length; i++) {\n      hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd)) {\n        hostEnd = hec;\n      }\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = auth;\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (i = 0; i < nonHostChars.length; i++) {\n      hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd)) {\n        hostEnd = hec;\n      }\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1) {\n      hostEnd = rest.length;\n    }\n\n    if (rest[hostEnd - 1] === ':') { hostEnd--; }\n    var host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost(host);\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) { continue; }\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    }\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n    }\n  }\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    rest = rest.slice(0, qm);\n  }\n  if (rest) { this.pathname = rest; }\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '';\n  }\n\n  return this;\n};\n\nUrl.prototype.parseHost = function(host) {\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) { this.hostname = host; }\n};\n\nmodule.exports = urlParse;\n","module.exports=/[\\0-\\x1F\\x7F-\\x9F]/","module.exports=/[\\xAD\\u0600-\\u0605\\u061C\\u06DD\\u070F\\u08E2\\u180E\\u200B-\\u200F\\u202A-\\u202E\\u2060-\\u2064\\u2066-\\u206F\\uFEFF\\uFFF9-\\uFFFB]|\\uD804[\\uDCBD\\uDCCD]|\\uD82F[\\uDCA0-\\uDCA3]|\\uD834[\\uDD73-\\uDD7A]|\\uDB40[\\uDC01\\uDC20-\\uDC7F]/","module.exports=/[!-#%-\\*,-\\/:;\\?@\\[-\\]_\\{\\}\\xA1\\xA7\\xAB\\xB6\\xB7\\xBB\\xBF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u09FD\\u0A76\\u0AF0\\u0C84\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2308-\\u230B\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E4E\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA8FC\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]|\\uD800[\\uDD00-\\uDD02\\uDF9F\\uDFD0]|\\uD801\\uDD6F|\\uD802[\\uDC57\\uDD1F\\uDD3F\\uDE50-\\uDE58\\uDE7F\\uDEF0-\\uDEF6\\uDF39-\\uDF3F\\uDF99-\\uDF9C]|\\uD803[\\uDF55-\\uDF59]|\\uD804[\\uDC47-\\uDC4D\\uDCBB\\uDCBC\\uDCBE-\\uDCC1\\uDD40-\\uDD43\\uDD74\\uDD75\\uDDC5-\\uDDC8\\uDDCD\\uDDDB\\uDDDD-\\uDDDF\\uDE38-\\uDE3D\\uDEA9]|\\uD805[\\uDC4B-\\uDC4F\\uDC5B\\uDC5D\\uDCC6\\uDDC1-\\uDDD7\\uDE41-\\uDE43\\uDE60-\\uDE6C\\uDF3C-\\uDF3E]|\\uD806[\\uDC3B\\uDE3F-\\uDE46\\uDE9A-\\uDE9C\\uDE9E-\\uDEA2]|\\uD807[\\uDC41-\\uDC45\\uDC70\\uDC71\\uDEF7\\uDEF8]|\\uD809[\\uDC70-\\uDC74]|\\uD81A[\\uDE6E\\uDE6F\\uDEF5\\uDF37-\\uDF3B\\uDF44]|\\uD81B[\\uDE97-\\uDE9A]|\\uD82F\\uDC9F|\\uD836[\\uDE87-\\uDE8B]|\\uD83A[\\uDD5E\\uDD5F]/","module.exports=/[ \\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000]/","'use strict';\n\nexports.Any = require('./properties/Any/regex');\nexports.Cc  = require('./categories/Cc/regex');\nexports.Cf  = require('./categories/Cf/regex');\nexports.P   = require('./categories/P/regex');\nexports.Z   = require('./categories/Z/regex');\n","module.exports=/[\\0-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LoginRequestResponse = exports.ErrorResponse = exports.SuccessResponse = exports.ActivityResponse = exports.ActivityRequestError = exports.ActivityRequestTrigger = void 0;\r\nvar ActivityRequestTrigger;\r\n(function (ActivityRequestTrigger) {\r\n    ActivityRequestTrigger[\"Automatic\"] = \"automatic\";\r\n    ActivityRequestTrigger[\"Manual\"] = \"manual\";\r\n})(ActivityRequestTrigger = exports.ActivityRequestTrigger || (exports.ActivityRequestTrigger = {}));\r\nvar ActivityRequestError = /** @class */ (function () {\r\n    function ActivityRequestError(code, message) {\r\n        this.code = code;\r\n        this.message = message;\r\n    }\r\n    return ActivityRequestError;\r\n}());\r\nexports.ActivityRequestError = ActivityRequestError;\r\nvar ActivityResponse = /** @class */ (function () {\r\n    function ActivityResponse(request) {\r\n        this.request = request;\r\n    }\r\n    return ActivityResponse;\r\n}());\r\nexports.ActivityResponse = ActivityResponse;\r\nvar SuccessResponse = /** @class */ (function (_super) {\r\n    __extends(SuccessResponse, _super);\r\n    function SuccessResponse(request, rawContent) {\r\n        var _this = _super.call(this, request) || this;\r\n        _this.request = request;\r\n        _this.rawContent = rawContent;\r\n        return _this;\r\n    }\r\n    return SuccessResponse;\r\n}(ActivityResponse));\r\nexports.SuccessResponse = SuccessResponse;\r\nvar ErrorResponse = /** @class */ (function (_super) {\r\n    __extends(ErrorResponse, _super);\r\n    function ErrorResponse(request, error) {\r\n        var _this = _super.call(this, request) || this;\r\n        _this.request = request;\r\n        _this.error = error;\r\n        return _this;\r\n    }\r\n    return ErrorResponse;\r\n}(ActivityResponse));\r\nexports.ErrorResponse = ErrorResponse;\r\nvar LoginRequestResponse = /** @class */ (function (_super) {\r\n    __extends(LoginRequestResponse, _super);\r\n    function LoginRequestResponse(request, auth) {\r\n        var _this = _super.call(this, request) || this;\r\n        _this.request = request;\r\n        _this._auth = auth;\r\n        for (var _i = 0, _a = _this._auth.buttons; _i < _a.length; _i++) {\r\n            var button = _a[_i];\r\n            if (button.type === \"signin\" && button.value !== undefined) {\r\n                try {\r\n                    new URL(button.value);\r\n                    _this.signinButton = button;\r\n                    break;\r\n                }\r\n                catch (e) {\r\n                    // Ignore parsing error\r\n                }\r\n            }\r\n        }\r\n        return _this;\r\n    }\r\n    Object.defineProperty(LoginRequestResponse.prototype, \"tokenExchangeResource\", {\r\n        get: function () {\r\n            return this._auth.tokenExchangeResource;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return LoginRequestResponse;\r\n}(ActivityResponse));\r\nexports.LoginRequestResponse = LoginRequestResponse;\r\n//# sourceMappingURL=activity-request.js.map","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AdaptiveApplet = void 0;\r\n// Copyright (C) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar Enums = require(\"./enums\");\r\nvar Utils = require(\"./utils\");\r\nvar shared_1 = require(\"./shared\");\r\nvar activity_request_1 = require(\"./activity-request\");\r\nvar strings_1 = require(\"./strings\");\r\nvar card_elements_1 = require(\"./card-elements\");\r\nvar serialization_1 = require(\"./serialization\");\r\nfunction logEvent(level, message) {\r\n    var optionalParams = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        optionalParams[_i - 2] = arguments[_i];\r\n    }\r\n    if (shared_1.GlobalSettings.applets.logEnabled) {\r\n        if (shared_1.GlobalSettings.applets.onLogEvent) {\r\n            shared_1.GlobalSettings.applets.onLogEvent(level, message, optionalParams);\r\n        }\r\n        else {\r\n            /* eslint-disable no-console */\r\n            switch (level) {\r\n                case Enums.LogLevel.Warning:\r\n                    console.warn(message, optionalParams);\r\n                    break;\r\n                case Enums.LogLevel.Error:\r\n                    console.error(message, optionalParams);\r\n                    break;\r\n                default:\r\n                    console.log(message, optionalParams);\r\n                    break;\r\n            }\r\n            /* eslint-enable no-console */\r\n        }\r\n    }\r\n}\r\nvar ActivityRequest = /** @class */ (function () {\r\n    function ActivityRequest(action, trigger, consecutiveRefreshes) {\r\n        this.action = action;\r\n        this.trigger = trigger;\r\n        this.consecutiveRefreshes = consecutiveRefreshes;\r\n        this.attemptNumber = 0;\r\n    }\r\n    // eslint-disable-next-line @typescript-eslint/require-await\r\n    ActivityRequest.prototype.retryAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                if (this.onSend) {\r\n                    this.onSend(this);\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    return ActivityRequest;\r\n}());\r\nvar AdaptiveApplet = /** @class */ (function () {\r\n    function AdaptiveApplet() {\r\n        this._allowAutomaticCardUpdate = false;\r\n        this.renderedElement = document.createElement(\"div\");\r\n        this.renderedElement.className = \"aaf-cardHost\";\r\n        this.renderedElement.style.position = \"relative\";\r\n        this.renderedElement.style.display = \"flex\";\r\n        this.renderedElement.style.flexDirection = \"column\";\r\n        this._cardHostElement = document.createElement(\"div\");\r\n        this._refreshButtonHostElement = document.createElement(\"div\");\r\n        this._refreshButtonHostElement.className = \"aaf-refreshButtonHost\";\r\n        this._refreshButtonHostElement.style.display = \"none\";\r\n        this.renderedElement.appendChild(this._cardHostElement);\r\n        this.renderedElement.appendChild(this._refreshButtonHostElement);\r\n    }\r\n    AdaptiveApplet.prototype.displayCard = function (card) {\r\n        if (card.renderedElement) {\r\n            Utils.clearElementChildren(this._cardHostElement);\r\n            this._refreshButtonHostElement.style.display = \"none\";\r\n            this._cardHostElement.appendChild(card.renderedElement);\r\n        }\r\n        else {\r\n            throw new Error(\"displayCard: undefined card.\");\r\n        }\r\n    };\r\n    AdaptiveApplet.prototype.showManualRefreshButton = function (refreshAction) {\r\n        var _this = this;\r\n        var displayBuiltInManualRefreshButton = this.onShowManualRefreshButton\r\n            ? this.onShowManualRefreshButton(this)\r\n            : true;\r\n        if (displayBuiltInManualRefreshButton) {\r\n            this._refreshButtonHostElement.style.display = \"none\";\r\n            var renderedRefreshButton = undefined;\r\n            if (this.onRenderManualRefreshButton) {\r\n                renderedRefreshButton = this.onRenderManualRefreshButton(this);\r\n            }\r\n            else {\r\n                var message = strings_1.Strings.runtime.refreshThisCard();\r\n                if (shared_1.GlobalSettings.applets.refresh.mode === Enums.RefreshMode.Automatic) {\r\n                    var autoRefreshPausedMessage = strings_1.Strings.runtime.automaticRefreshPaused();\r\n                    if (autoRefreshPausedMessage[autoRefreshPausedMessage.length - 1] !== \" \") {\r\n                        autoRefreshPausedMessage += \" \";\r\n                    }\r\n                    message = strings_1.Strings.runtime.clckToRestartAutomaticRefresh();\r\n                }\r\n                var cardPayload = {\r\n                    type: \"AdaptiveCard\",\r\n                    version: \"1.2\",\r\n                    body: [\r\n                        {\r\n                            type: \"RichTextBlock\",\r\n                            horizontalAlignment: \"right\",\r\n                            inlines: [\r\n                                {\r\n                                    type: \"TextRun\",\r\n                                    text: message,\r\n                                    selectAction: {\r\n                                        type: \"Action.Submit\",\r\n                                        id: \"refreshCard\"\r\n                                    }\r\n                                }\r\n                            ]\r\n                        }\r\n                    ]\r\n                };\r\n                var card = new card_elements_1.AdaptiveCard();\r\n                card.parse(cardPayload, new card_elements_1.SerializationContext(serialization_1.Versions.v1_2));\r\n                card.onExecuteAction = function (action) {\r\n                    if (action.id === \"refreshCard\") {\r\n                        Utils.clearElementChildren(_this._refreshButtonHostElement);\r\n                        _this.internalExecuteAction(refreshAction, activity_request_1.ActivityRequestTrigger.Automatic, 0);\r\n                    }\r\n                };\r\n                renderedRefreshButton = card.render();\r\n            }\r\n            if (renderedRefreshButton) {\r\n                Utils.clearElementChildren(this._refreshButtonHostElement);\r\n                this._refreshButtonHostElement.appendChild(renderedRefreshButton);\r\n                this._refreshButtonHostElement.style.removeProperty(\"display\");\r\n            }\r\n        }\r\n    };\r\n    AdaptiveApplet.prototype.createActivityRequest = function (action, trigger, consecutiveRefreshes) {\r\n        var _this = this;\r\n        if (this.card) {\r\n            var request_1 = new ActivityRequest(action, trigger, consecutiveRefreshes);\r\n            request_1.onSend = function (sender) {\r\n                sender.attemptNumber++;\r\n                void _this.internalSendActivityRequestAsync(request_1);\r\n            };\r\n            var cancel = this.onPrepareActivityRequest\r\n                ? !this.onPrepareActivityRequest(this, request_1, action)\r\n                : false;\r\n            return cancel ? undefined : request_1;\r\n        }\r\n        else {\r\n            throw new Error(\"createActivityRequest: no card has been set.\");\r\n        }\r\n    };\r\n    AdaptiveApplet.prototype.createMagicCodeInputCard = function (attemptNumber) {\r\n        var payload = {\r\n            type: \"AdaptiveCard\",\r\n            version: \"1.0\",\r\n            body: [\r\n                {\r\n                    type: \"TextBlock\",\r\n                    color: \"attention\",\r\n                    text: attemptNumber === 1 ? undefined : \"That didn't work... let's try again.\",\r\n                    wrap: true,\r\n                    horizontalAlignment: \"center\"\r\n                },\r\n                {\r\n                    type: \"TextBlock\",\r\n                    text: 'Please login in the popup. You will obtain a magic code. Paste that code below and select \"Submit\"',\r\n                    wrap: true,\r\n                    horizontalAlignment: \"center\"\r\n                },\r\n                {\r\n                    type: \"Input.Text\",\r\n                    id: \"magicCode\",\r\n                    placeholder: \"Enter magic code\"\r\n                },\r\n                {\r\n                    type: \"ActionSet\",\r\n                    horizontalAlignment: \"center\",\r\n                    actions: [\r\n                        {\r\n                            type: \"Action.Submit\",\r\n                            id: AdaptiveApplet._submitMagicCodeActionId,\r\n                            title: \"Submit\"\r\n                        },\r\n                        {\r\n                            type: \"Action.Submit\",\r\n                            id: AdaptiveApplet._cancelMagicCodeAuthActionId,\r\n                            title: \"Cancel\"\r\n                        }\r\n                    ]\r\n                }\r\n            ]\r\n        };\r\n        var card = new card_elements_1.AdaptiveCard();\r\n        card.parse(payload);\r\n        return card;\r\n    };\r\n    AdaptiveApplet.prototype.cancelAutomaticRefresh = function () {\r\n        if (this._allowAutomaticCardUpdate) {\r\n            logEvent(Enums.LogLevel.Warning, \"Automatic card refresh has been cancelled as a result of the user interacting with the card.\");\r\n        }\r\n        this._allowAutomaticCardUpdate = false;\r\n    };\r\n    AdaptiveApplet.prototype.createSerializationContext = function () {\r\n        return this.onCreateSerializationContext\r\n            ? this.onCreateSerializationContext(this)\r\n            : new card_elements_1.SerializationContext();\r\n    };\r\n    AdaptiveApplet.prototype.internalSetCard = function (payload, consecutiveRefreshes) {\r\n        var _this = this;\r\n        if (typeof payload === \"object\" && payload[\"type\"] === \"AdaptiveCard\") {\r\n            this._cardPayload = payload;\r\n        }\r\n        if (this._cardPayload) {\r\n            try {\r\n                var card = new card_elements_1.AdaptiveCard();\r\n                if (this.hostConfig) {\r\n                    card.hostConfig = this.hostConfig;\r\n                }\r\n                var serializationContext = this.createSerializationContext();\r\n                card.parse(this._cardPayload, serializationContext);\r\n                var doChangeCard = this.onCardChanging\r\n                    ? this.onCardChanging(this, this._cardPayload)\r\n                    : true;\r\n                if (doChangeCard) {\r\n                    this._card = card;\r\n                    if (this._card.authentication &&\r\n                        this._card.authentication.tokenExchangeResource &&\r\n                        this.onPrefetchSSOToken) {\r\n                        this.onPrefetchSSOToken(this, this._card.authentication.tokenExchangeResource);\r\n                    }\r\n                    this._card.onExecuteAction = function (action) {\r\n                        // If the user takes an action, cancel any pending automatic refresh\r\n                        _this.cancelAutomaticRefresh();\r\n                        _this.internalExecuteAction(action, activity_request_1.ActivityRequestTrigger.Manual, 0);\r\n                    };\r\n                    this._card.onInputValueChanged = function (_input) {\r\n                        // If the user modifies an input, cancel any pending automatic refresh\r\n                        _this.cancelAutomaticRefresh();\r\n                    };\r\n                    this._card.render();\r\n                    if (this._card.renderedElement) {\r\n                        this.displayCard(this._card);\r\n                        if (this.onCardChanged) {\r\n                            this.onCardChanged(this);\r\n                        }\r\n                        if (this._card.refresh) {\r\n                            if (shared_1.GlobalSettings.applets.refresh.mode ===\r\n                                Enums.RefreshMode.Automatic &&\r\n                                consecutiveRefreshes <\r\n                                    shared_1.GlobalSettings.applets.refresh\r\n                                        .maximumConsecutiveAutomaticRefreshes) {\r\n                                if (shared_1.GlobalSettings.applets.refresh.timeBetweenAutomaticRefreshes <=\r\n                                    0) {\r\n                                    logEvent(Enums.LogLevel.Info, \"Triggering automatic card refresh number \" +\r\n                                        (consecutiveRefreshes + 1));\r\n                                    this.internalExecuteAction(this._card.refresh.action, activity_request_1.ActivityRequestTrigger.Automatic, consecutiveRefreshes + 1);\r\n                                }\r\n                                else {\r\n                                    logEvent(Enums.LogLevel.Info, \"Scheduling automatic card refresh number \" +\r\n                                        (consecutiveRefreshes + 1) +\r\n                                        \" in \" +\r\n                                        shared_1.GlobalSettings.applets.refresh\r\n                                            .timeBetweenAutomaticRefreshes +\r\n                                        \"ms\");\r\n                                    var action_1 = this._card.refresh.action;\r\n                                    this._allowAutomaticCardUpdate = true;\r\n                                    window.setTimeout(function () {\r\n                                        if (_this._allowAutomaticCardUpdate) {\r\n                                            _this.internalExecuteAction(action_1, activity_request_1.ActivityRequestTrigger.Automatic, consecutiveRefreshes + 1);\r\n                                        }\r\n                                    }, shared_1.GlobalSettings.applets.refresh.timeBetweenAutomaticRefreshes);\r\n                                }\r\n                            }\r\n                            else if (shared_1.GlobalSettings.applets.refresh.mode !== Enums.RefreshMode.Disabled) {\r\n                                if (consecutiveRefreshes > 0) {\r\n                                    logEvent(Enums.LogLevel.Warning, \"Stopping automatic refreshes after \" +\r\n                                        consecutiveRefreshes +\r\n                                        \" consecutive refreshes.\");\r\n                                }\r\n                                else {\r\n                                    logEvent(Enums.LogLevel.Warning, \"The card has a refresh section, but automatic refreshes are disabled.\");\r\n                                }\r\n                                if (shared_1.GlobalSettings.applets.refresh\r\n                                    .allowManualRefreshesAfterAutomaticRefreshes ||\r\n                                    shared_1.GlobalSettings.applets.refresh.mode === Enums.RefreshMode.Manual) {\r\n                                    logEvent(Enums.LogLevel.Info, \"Showing manual refresh button.\");\r\n                                    this.showManualRefreshButton(this._card.refresh.action);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            catch (error) {\r\n                // Ignore all errors\r\n                logEvent(Enums.LogLevel.Error, \"setCard: \" + error);\r\n            }\r\n        }\r\n    };\r\n    AdaptiveApplet.prototype.internalExecuteAction = function (action, trigger, consecutiveRefreshes) {\r\n        if (action instanceof card_elements_1.ExecuteAction) {\r\n            if (this.channelAdapter) {\r\n                var request = this.createActivityRequest(action, trigger, consecutiveRefreshes);\r\n                if (request) {\r\n                    void request.retryAsync();\r\n                }\r\n            }\r\n            else {\r\n                throw new Error(\"internalExecuteAction: No channel adapter set.\");\r\n            }\r\n        }\r\n        if (this.onAction) {\r\n            this.onAction(this, action);\r\n        }\r\n    };\r\n    AdaptiveApplet.prototype.createProgressOverlay = function (request) {\r\n        if (!this._progressOverlay) {\r\n            if (this.onCreateProgressOverlay) {\r\n                this._progressOverlay = this.onCreateProgressOverlay(this, request);\r\n            }\r\n            else {\r\n                this._progressOverlay = document.createElement(\"div\");\r\n                this._progressOverlay.className = \"aaf-progress-overlay\";\r\n                var spinner = document.createElement(\"div\");\r\n                spinner.className = \"aaf-spinner\";\r\n                spinner.style.width = \"28px\";\r\n                spinner.style.height = \"28px\";\r\n                this._progressOverlay.appendChild(spinner);\r\n            }\r\n        }\r\n        return this._progressOverlay;\r\n    };\r\n    AdaptiveApplet.prototype.removeProgressOverlay = function (request) {\r\n        if (this.onRemoveProgressOverlay) {\r\n            this.onRemoveProgressOverlay(this, request);\r\n        }\r\n        if (this._progressOverlay !== undefined) {\r\n            this.renderedElement.removeChild(this._progressOverlay);\r\n            this._progressOverlay = undefined;\r\n        }\r\n    };\r\n    AdaptiveApplet.prototype.activityRequestSucceeded = function (response, parsedContent) {\r\n        if (this.onActivityRequestSucceeded) {\r\n            this.onActivityRequestSucceeded(this, response, parsedContent);\r\n        }\r\n    };\r\n    AdaptiveApplet.prototype.activityRequestFailed = function (response) {\r\n        return this.onActivityRequestFailed\r\n            ? this.onActivityRequestFailed(this, response)\r\n            : shared_1.GlobalSettings.applets.defaultTimeBetweenRetryAttempts;\r\n    };\r\n    AdaptiveApplet.prototype.showAuthCodeInputDialog = function (request) {\r\n        var _this = this;\r\n        var showBuiltInAuthCodeInputCard = this.onShowAuthCodeInputDialog\r\n            ? this.onShowAuthCodeInputDialog(this, request)\r\n            : true;\r\n        if (showBuiltInAuthCodeInputCard) {\r\n            var authCodeInputCard = this.createMagicCodeInputCard(request.attemptNumber);\r\n            authCodeInputCard.render();\r\n            authCodeInputCard.onExecuteAction = function (submitMagicCodeAction) {\r\n                if (_this.card && submitMagicCodeAction instanceof card_elements_1.SubmitAction) {\r\n                    switch (submitMagicCodeAction.id) {\r\n                        case AdaptiveApplet._submitMagicCodeActionId:\r\n                            var authCode = undefined;\r\n                            if (submitMagicCodeAction.data &&\r\n                                typeof submitMagicCodeAction.data[\"magicCode\"] === \"string\") {\r\n                                authCode = submitMagicCodeAction.data[\"magicCode\"];\r\n                            }\r\n                            if (authCode) {\r\n                                _this.displayCard(_this.card);\r\n                                request.authCode = authCode;\r\n                                void request.retryAsync();\r\n                            }\r\n                            else {\r\n                                alert(\"Please enter the magic code you received.\");\r\n                            }\r\n                            break;\r\n                        case AdaptiveApplet._cancelMagicCodeAuthActionId:\r\n                            logEvent(Enums.LogLevel.Warning, \"Authentication cancelled by user.\");\r\n                            _this.displayCard(_this.card);\r\n                            break;\r\n                        default:\r\n                            logEvent(Enums.LogLevel.Error, \"Unexpected action taken from magic code input card (id = \" +\r\n                                submitMagicCodeAction.id +\r\n                                \")\");\r\n                            alert(strings_1.Strings.magicCodeInputCard.somethingWentWrong());\r\n                            break;\r\n                    }\r\n                }\r\n            };\r\n            this.displayCard(authCodeInputCard);\r\n        }\r\n    };\r\n    AdaptiveApplet.prototype.internalSendActivityRequestAsync = function (request) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var overlay, done, _loop_1, this_1, state_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this.channelAdapter) {\r\n                            throw new Error(\"internalSendActivityRequestAsync: channelAdapter is not set.\");\r\n                        }\r\n                        overlay = this.createProgressOverlay(request);\r\n                        if (overlay !== undefined) {\r\n                            this.renderedElement.appendChild(overlay);\r\n                        }\r\n                        done = false;\r\n                        _loop_1 = function () {\r\n                            var response, error_1, parsedContent, retryIn_1, attemptOAuth, left, top_1;\r\n                            return __generator(this, function (_b) {\r\n                                switch (_b.label) {\r\n                                    case 0:\r\n                                        response = undefined;\r\n                                        if (request.attemptNumber === 1) {\r\n                                            logEvent(Enums.LogLevel.Info, \"Sending activity request to channel (attempt \" + request.attemptNumber + \")\");\r\n                                        }\r\n                                        else {\r\n                                            logEvent(Enums.LogLevel.Info, \"Re-sending activity request to channel (attempt \" + request.attemptNumber + \")\");\r\n                                        }\r\n                                        _b.label = 1;\r\n                                    case 1:\r\n                                        _b.trys.push([1, 3, , 4]);\r\n                                        return [4 /*yield*/, this_1.channelAdapter.sendRequestAsync(request)];\r\n                                    case 2:\r\n                                        response = _b.sent();\r\n                                        return [3 /*break*/, 4];\r\n                                    case 3:\r\n                                        error_1 = _b.sent();\r\n                                        logEvent(Enums.LogLevel.Error, \"Activity request failed: \" + error_1);\r\n                                        this_1.removeProgressOverlay(request);\r\n                                        done = true;\r\n                                        return [3 /*break*/, 4];\r\n                                    case 4:\r\n                                        if (!response) return [3 /*break*/, 10];\r\n                                        if (!(response instanceof activity_request_1.SuccessResponse)) return [3 /*break*/, 5];\r\n                                        this_1.removeProgressOverlay(request);\r\n                                        if (response.rawContent === undefined) {\r\n                                            throw new Error(\"internalSendActivityRequestAsync: Action.Execute result is undefined\");\r\n                                        }\r\n                                        parsedContent = response.rawContent;\r\n                                        try {\r\n                                            parsedContent = JSON.parse(response.rawContent);\r\n                                        }\r\n                                        catch (_c) {\r\n                                            // Leave parseContent as is\r\n                                        }\r\n                                        if (typeof parsedContent === \"string\") {\r\n                                            logEvent(Enums.LogLevel.Info, \"The activity request returned a string after \" +\r\n                                                request.attemptNumber +\r\n                                                \" attempt(s).\");\r\n                                            this_1.activityRequestSucceeded(response, parsedContent);\r\n                                        }\r\n                                        else if (typeof parsedContent === \"object\" &&\r\n                                            parsedContent[\"type\"] === \"AdaptiveCard\") {\r\n                                            logEvent(Enums.LogLevel.Info, \"The activity request returned an Adaptive Card after \" +\r\n                                                request.attemptNumber +\r\n                                                \" attempt(s).\");\r\n                                            this_1.internalSetCard(parsedContent, request.consecutiveRefreshes);\r\n                                            this_1.activityRequestSucceeded(response, this_1.card);\r\n                                        }\r\n                                        else {\r\n                                            throw new Error(\"internalSendActivityRequestAsync: Action.Execute result is of unsupported type (\" +\r\n                                                typeof response.rawContent +\r\n                                                \")\");\r\n                                        }\r\n                                        done = true;\r\n                                        return [3 /*break*/, 10];\r\n                                    case 5:\r\n                                        if (!(response instanceof activity_request_1.ErrorResponse)) return [3 /*break*/, 9];\r\n                                        retryIn_1 = this_1.activityRequestFailed(response);\r\n                                        if (!(retryIn_1 >= 0 &&\r\n                                            request.attemptNumber < shared_1.GlobalSettings.applets.maximumRetryAttempts)) return [3 /*break*/, 7];\r\n                                        logEvent(Enums.LogLevel.Warning, \"Activity request failed: \".concat(response.error.message, \". Retrying in \").concat(retryIn_1, \"ms\"));\r\n                                        request.attemptNumber++;\r\n                                        return [4 /*yield*/, new Promise(function (resolve, _reject) {\r\n                                                window.setTimeout(function () {\r\n                                                    resolve();\r\n                                                }, retryIn_1);\r\n                                            })];\r\n                                    case 6:\r\n                                        _b.sent();\r\n                                        return [3 /*break*/, 8];\r\n                                    case 7:\r\n                                        logEvent(Enums.LogLevel.Error, \"Activity request failed: \".concat(response.error.message, \". Giving up after \").concat(request.attemptNumber, \" attempt(s)\"));\r\n                                        this_1.removeProgressOverlay(request);\r\n                                        done = true;\r\n                                        _b.label = 8;\r\n                                    case 8: return [3 /*break*/, 10];\r\n                                    case 9:\r\n                                        if (response instanceof activity_request_1.LoginRequestResponse) {\r\n                                            logEvent(Enums.LogLevel.Info, \"The activity request returned a LoginRequestResponse after \" +\r\n                                                request.attemptNumber +\r\n                                                \" attempt(s).\");\r\n                                            if (request.attemptNumber <= shared_1.GlobalSettings.applets.maximumRetryAttempts) {\r\n                                                attemptOAuth = true;\r\n                                                if (response.tokenExchangeResource && this_1.onSSOTokenNeeded) {\r\n                                                    // Attempt to use SSO. The host will return true if it can handle SSO, in which case\r\n                                                    // we bypass OAuth\r\n                                                    attemptOAuth = !this_1.onSSOTokenNeeded(this_1, request, response.tokenExchangeResource);\r\n                                                }\r\n                                                if (attemptOAuth) {\r\n                                                    // Attempt to use OAuth\r\n                                                    this_1.removeProgressOverlay(request);\r\n                                                    if (response.signinButton === undefined) {\r\n                                                        throw new Error(\"internalSendActivityRequestAsync: the login request doesn't contain a valid signin URL.\");\r\n                                                    }\r\n                                                    logEvent(Enums.LogLevel.Info, \"Login required at \" + response.signinButton.value);\r\n                                                    if (this_1.onShowSigninPrompt) {\r\n                                                        // Bypass the built-in auth prompt if the host app handles it\r\n                                                        this_1.onShowSigninPrompt(this_1, request, response.signinButton);\r\n                                                    }\r\n                                                    else {\r\n                                                        this_1.showAuthCodeInputDialog(request);\r\n                                                        left = window.screenX +\r\n                                                            (window.outerWidth - shared_1.GlobalSettings.applets.authPromptWidth) /\r\n                                                                2;\r\n                                                        top_1 = window.screenY +\r\n                                                            (window.outerHeight - shared_1.GlobalSettings.applets.authPromptHeight) /\r\n                                                                2;\r\n                                                        window.open(response.signinButton.value, response.signinButton.title\r\n                                                            ? response.signinButton.title\r\n                                                            : \"Sign in\", \"width=\".concat(shared_1.GlobalSettings.applets.authPromptWidth, \",height=\").concat(shared_1.GlobalSettings.applets.authPromptHeight, \",left=\").concat(left, \",top=\").concat(top_1));\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                            else {\r\n                                                logEvent(Enums.LogLevel.Error, \"Authentication failed. Giving up after \" +\r\n                                                    request.attemptNumber +\r\n                                                    \" attempt(s)\");\r\n                                                alert(strings_1.Strings.magicCodeInputCard.authenticationFailed());\r\n                                            }\r\n                                            return [2 /*return*/, \"break\"];\r\n                                        }\r\n                                        else {\r\n                                            throw new Error(\"Unhandled response type: \" + JSON.stringify(response));\r\n                                        }\r\n                                        _b.label = 10;\r\n                                    case 10: return [2 /*return*/];\r\n                                }\r\n                            });\r\n                        };\r\n                        this_1 = this;\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        if (!!done) return [3 /*break*/, 3];\r\n                        return [5 /*yield**/, _loop_1()];\r\n                    case 2:\r\n                        state_1 = _a.sent();\r\n                        if (state_1 === \"break\")\r\n                            return [3 /*break*/, 3];\r\n                        return [3 /*break*/, 1];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    AdaptiveApplet.prototype.refreshCard = function () {\r\n        if (this._card && this._card.refresh) {\r\n            this.internalExecuteAction(this._card.refresh.action, activity_request_1.ActivityRequestTrigger.Manual, 0);\r\n        }\r\n    };\r\n    AdaptiveApplet.prototype.setCard = function (payload) {\r\n        this.internalSetCard(payload, 0);\r\n    };\r\n    Object.defineProperty(AdaptiveApplet.prototype, \"card\", {\r\n        get: function () {\r\n            return this._card;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    AdaptiveApplet._submitMagicCodeActionId = \"submitMagicCode\";\r\n    AdaptiveApplet._cancelMagicCodeAuthActionId = \"cancelMagicCodeAuth\";\r\n    return AdaptiveApplet;\r\n}());\r\nexports.AdaptiveApplet = AdaptiveApplet;\r\n//# sourceMappingURL=adaptive-applet.js.map","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\n__exportStar(require(\"./strings\"), exports);\r\n__exportStar(require(\"./enums\"), exports);\r\n__exportStar(require(\"./shared\"), exports);\r\n__exportStar(require(\"./utils\"), exports);\r\n__exportStar(require(\"./serialization\"), exports);\r\n__exportStar(require(\"./host-capabilities\"), exports);\r\n__exportStar(require(\"./host-config\"), exports);\r\n__exportStar(require(\"./registry\"), exports);\r\n__exportStar(require(\"./card-object\"), exports);\r\n__exportStar(require(\"./card-elements\"), exports);\r\n__exportStar(require(\"./table\"), exports);\r\n__exportStar(require(\"./channel-adapter\"), exports);\r\n__exportStar(require(\"./activity-request\"), exports);\r\n__exportStar(require(\"./adaptive-applet\"), exports);\r\n//# sourceMappingURL=adaptivecards.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ContainerWithActions = exports.ColumnSet = exports.Column = exports.Container = exports.BackgroundImage = exports.ContainerBase = exports.StylableCardElementContainer = exports.ContainerStyleProperty = exports.ActionSet = exports.ShowCardAction = exports.HttpAction = exports.HttpHeader = exports.ToggleVisibilityAction = exports.OpenUrlAction = exports.ExecuteAction = exports.SubmitAction = exports.SubmitActionBase = exports.Action = exports.TimeInput = exports.TimeProperty = exports.DateInput = exports.NumberInput = exports.ChoiceSetInput = exports.Choice = exports.ToggleInput = exports.TextInput = exports.Input = exports.Media = exports.YouTubePlayer = exports.DailymotionPlayer = exports.VimeoPlayer = exports.IFrameMediaMediaPlayer = exports.CustomMediaPlayer = exports.HTML5MediaPlayer = exports.MediaPlayer = exports.MediaSource = exports.CaptionSource = exports.ContentSource = exports.ImageSet = exports.CardElementContainer = exports.Image = exports.FactSet = exports.Fact = exports.RichTextBlock = exports.TextRun = exports.TextBlock = exports.BaseTextBlock = exports.ActionProperty = exports.CardElement = exports.renderSeparation = void 0;\r\nexports.SerializationContext = exports.AdaptiveCard = exports.Authentication = exports.TokenExchangeResource = exports.AuthCardButton = exports.RefreshDefinition = exports.RefreshActionProperty = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar Enums = require(\"./enums\");\r\nvar shared_1 = require(\"./shared\");\r\nvar Utils = require(\"./utils\");\r\nvar host_config_1 = require(\"./host-config\");\r\nvar TextFormatters = require(\"./text-formatters\");\r\nvar card_object_1 = require(\"./card-object\");\r\nvar serialization_1 = require(\"./serialization\");\r\nvar registry_1 = require(\"./registry\");\r\nvar strings_1 = require(\"./strings\");\r\nvar controls_1 = require(\"./controls\");\r\nfunction clearElement(element) {\r\n    var _a, _b;\r\n    var trustedHtml = (typeof window === 'undefined') ? \"\" : ((_b = (_a = window.trustedTypes) === null || _a === void 0 ? void 0 : _a.emptyHTML) !== null && _b !== void 0 ? _b : \"\");\r\n    element.innerHTML = trustedHtml;\r\n}\r\nfunction renderSeparation(hostConfig, separationDefinition, orientation) {\r\n    if (separationDefinition.spacing > 0 ||\r\n        (separationDefinition.lineThickness && separationDefinition.lineThickness > 0)) {\r\n        var separator = document.createElement(\"div\");\r\n        separator.className = hostConfig.makeCssClassName(\"ac-\" +\r\n            (orientation === Enums.Orientation.Horizontal ? \"horizontal\" : \"vertical\") +\r\n            \"-separator\");\r\n        separator.setAttribute(\"aria-hidden\", \"true\");\r\n        var color = separationDefinition.lineColor\r\n            ? Utils.stringToCssColor(separationDefinition.lineColor)\r\n            : \"\";\r\n        if (orientation === Enums.Orientation.Horizontal) {\r\n            if (separationDefinition.lineThickness) {\r\n                separator.style.paddingTop = separationDefinition.spacing / 2 + \"px\";\r\n                separator.style.marginBottom = separationDefinition.spacing / 2 + \"px\";\r\n                separator.style.borderBottom =\r\n                    separationDefinition.lineThickness + \"px solid \" + color;\r\n            }\r\n            else {\r\n                separator.style.height = separationDefinition.spacing + \"px\";\r\n            }\r\n        }\r\n        else {\r\n            if (separationDefinition.lineThickness) {\r\n                separator.style.paddingLeft = separationDefinition.spacing / 2 + \"px\";\r\n                separator.style.marginRight = separationDefinition.spacing / 2 + \"px\";\r\n                separator.style.borderRight =\r\n                    separationDefinition.lineThickness + \"px solid \" + color;\r\n            }\r\n            else {\r\n                separator.style.width = separationDefinition.spacing + \"px\";\r\n            }\r\n        }\r\n        separator.style.overflow = \"hidden\";\r\n        separator.style.flex = \"0 0 auto\";\r\n        return separator;\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\nexports.renderSeparation = renderSeparation;\r\nvar CardElement = /** @class */ (function (_super) {\r\n    __extends(CardElement, _super);\r\n    function CardElement() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._truncatedDueToOverflow = false;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(CardElement.prototype, \"lang\", {\r\n        get: function () {\r\n            var lang = this.getValue(CardElement.langProperty);\r\n            if (lang) {\r\n                return lang;\r\n            }\r\n            else {\r\n                if (this.parent) {\r\n                    return this.parent.lang;\r\n                }\r\n                else {\r\n                    return undefined;\r\n                }\r\n            }\r\n        },\r\n        set: function (value) {\r\n            this.setValue(CardElement.langProperty, value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"isVisible\", {\r\n        get: function () {\r\n            return this.getValue(CardElement.isVisibleProperty);\r\n        },\r\n        set: function (value) {\r\n            // If the element is going to be hidden, reset any changes that were due\r\n            // to overflow truncation (this ensures that if the element is later\r\n            // un-hidden it has the right content)\r\n            if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation && !value) {\r\n                this.undoOverflowTruncation();\r\n            }\r\n            if (this.isVisible !== value) {\r\n                this.setValue(CardElement.isVisibleProperty, value);\r\n                this.updateRenderedElementVisibility();\r\n                if (this._renderedElement) {\r\n                    raiseElementVisibilityChangedEvent(this);\r\n                }\r\n            }\r\n            if (this._renderedElement) {\r\n                this._renderedElement.setAttribute(\"aria-expanded\", value.toString());\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    CardElement.prototype.internalRenderSeparator = function () {\r\n        var renderedSeparator = renderSeparation(this.hostConfig, {\r\n            spacing: this.hostConfig.getEffectiveSpacing(this.spacing),\r\n            lineThickness: this.separator ? this.hostConfig.separator.lineThickness : undefined,\r\n            lineColor: this.separator ? this.hostConfig.separator.lineColor : undefined\r\n        }, this.separatorOrientation);\r\n        if (shared_1.GlobalSettings.alwaysBleedSeparators &&\r\n            renderedSeparator &&\r\n            this.separatorOrientation === Enums.Orientation.Horizontal) {\r\n            // Adjust separator's margins if the option to always bleed separators is turned on\r\n            var parentContainer = this.getParentContainer();\r\n            if (parentContainer && parentContainer.getEffectivePadding()) {\r\n                var parentPhysicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(parentContainer.getEffectivePadding());\r\n                renderedSeparator.style.marginLeft = \"-\" + parentPhysicalPadding.left + \"px\";\r\n                renderedSeparator.style.marginRight = \"-\" + parentPhysicalPadding.right + \"px\";\r\n            }\r\n        }\r\n        return renderedSeparator;\r\n    };\r\n    CardElement.prototype.updateRenderedElementVisibility = function () {\r\n        var displayMode = this.isDesignMode() || this.isVisible\r\n            ? this._defaultRenderedElementDisplayMode\r\n            : \"none\";\r\n        if (this._renderedElement) {\r\n            if (displayMode) {\r\n                this._renderedElement.style.display = displayMode;\r\n            }\r\n            else {\r\n                this._renderedElement.style.removeProperty(\"display\");\r\n            }\r\n        }\r\n        if (this._separatorElement) {\r\n            if (this.parent && this.parent.isFirstElement(this)) {\r\n                this._separatorElement.style.display = \"none\";\r\n            }\r\n            else {\r\n                if (displayMode) {\r\n                    this._separatorElement.style.display = displayMode;\r\n                }\r\n                else {\r\n                    this._separatorElement.style.removeProperty(\"display\");\r\n                }\r\n            }\r\n        }\r\n    };\r\n    CardElement.prototype.hideElementDueToOverflow = function () {\r\n        if (this._renderedElement && this.isVisible) {\r\n            this._renderedElement.style.visibility = \"hidden\";\r\n            this.isVisible = false;\r\n            raiseElementVisibilityChangedEvent(this, false);\r\n        }\r\n    };\r\n    CardElement.prototype.showElementHiddenDueToOverflow = function () {\r\n        if (this._renderedElement && !this.isVisible) {\r\n            this._renderedElement.style.removeProperty(\"visibility\");\r\n            this.isVisible = true;\r\n            raiseElementVisibilityChangedEvent(this, false);\r\n        }\r\n    };\r\n    // Marked private to emulate internal access\r\n    CardElement.prototype.handleOverflow = function (maxHeight) {\r\n        if (this.isVisible || this.isHiddenDueToOverflow()) {\r\n            var handled = this.truncateOverflow(maxHeight);\r\n            // Even if we were unable to truncate the element to fit this time,\r\n            // it still could have been previously truncated\r\n            this._truncatedDueToOverflow = handled || this._truncatedDueToOverflow;\r\n            if (!handled) {\r\n                this.hideElementDueToOverflow();\r\n            }\r\n            else if (handled && !this.isVisible) {\r\n                this.showElementHiddenDueToOverflow();\r\n            }\r\n        }\r\n    };\r\n    // Marked private to emulate internal access\r\n    CardElement.prototype.resetOverflow = function () {\r\n        var sizeChanged = false;\r\n        if (this._truncatedDueToOverflow) {\r\n            this.undoOverflowTruncation();\r\n            this._truncatedDueToOverflow = false;\r\n            sizeChanged = true;\r\n        }\r\n        if (this.isHiddenDueToOverflow()) {\r\n            this.showElementHiddenDueToOverflow();\r\n        }\r\n        return sizeChanged;\r\n    };\r\n    CardElement.prototype.getDefaultSerializationContext = function () {\r\n        return new SerializationContext();\r\n    };\r\n    CardElement.prototype.createPlaceholderElement = function () {\r\n        var styleDefinition = this.getEffectiveStyleDefinition();\r\n        var foregroundCssColor = Utils.stringToCssColor(styleDefinition.foregroundColors.default.subtle);\r\n        var element = document.createElement(\"div\");\r\n        element.style.border = \"1px dashed \" + foregroundCssColor;\r\n        element.style.padding = \"4px\";\r\n        element.style.minHeight = \"32px\";\r\n        element.style.fontSize = \"10px\";\r\n        if (foregroundCssColor) {\r\n            element.style.color = foregroundCssColor;\r\n        }\r\n        element.innerText = \"Empty \" + this.getJsonTypeName();\r\n        return element;\r\n    };\r\n    CardElement.prototype.adjustRenderedElementSize = function (renderedElement) {\r\n        if (this.height === \"auto\") {\r\n            renderedElement.style.flex = \"0 0 auto\";\r\n        }\r\n        else {\r\n            renderedElement.style.flex = \"1 1 auto\";\r\n        }\r\n    };\r\n    CardElement.prototype.isDisplayed = function () {\r\n        return (this._renderedElement !== undefined &&\r\n            this.isVisible &&\r\n            this._renderedElement.offsetHeight > 0);\r\n    };\r\n    CardElement.prototype.overrideInternalRender = function () {\r\n        return this.internalRender();\r\n    };\r\n    CardElement.prototype.applyPadding = function () {\r\n        if (this.separatorElement && this.separatorOrientation === Enums.Orientation.Horizontal) {\r\n            if (shared_1.GlobalSettings.alwaysBleedSeparators && !this.isBleeding()) {\r\n                var padding = new shared_1.PaddingDefinition();\r\n                this.getImmediateSurroundingPadding(padding);\r\n                var physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(padding);\r\n                this.separatorElement.style.marginLeft = \"-\" + physicalPadding.left + \"px\";\r\n                this.separatorElement.style.marginRight = \"-\" + physicalPadding.right + \"px\";\r\n            }\r\n            else {\r\n                this.separatorElement.style.marginRight = \"0\";\r\n                this.separatorElement.style.marginLeft = \"0\";\r\n            }\r\n        }\r\n    };\r\n    /*\r\n     * Called when this element overflows the bottom of the card.\r\n     * maxHeight will be the amount of space still available on the card (0 if\r\n     * the element is fully off the card).\r\n     */\r\n    CardElement.prototype.truncateOverflow = function (_maxHeight) {\r\n        // Child implementations should return true if the element handled\r\n        // the truncation request such that its content fits within maxHeight,\r\n        // false if the element should fall back to being hidden\r\n        return false;\r\n    };\r\n    /*\r\n     * This should reverse any changes performed in truncateOverflow().\r\n     */\r\n    CardElement.prototype.undoOverflowTruncation = function () {\r\n        return;\r\n    };\r\n    CardElement.prototype.getDefaultPadding = function () {\r\n        return new shared_1.PaddingDefinition();\r\n    };\r\n    CardElement.prototype.getHasBackground = function (ignoreBackgroundImages) {\r\n        if (ignoreBackgroundImages === void 0) { ignoreBackgroundImages = false; }\r\n        return false;\r\n    };\r\n    CardElement.prototype.getHasBorder = function () {\r\n        return false;\r\n    };\r\n    CardElement.prototype.getPadding = function () {\r\n        return this._padding;\r\n    };\r\n    CardElement.prototype.setPadding = function (value) {\r\n        this._padding = value;\r\n    };\r\n    CardElement.prototype.shouldSerialize = function (context) {\r\n        return context.elementRegistry.findByName(this.getJsonTypeName()) !== undefined;\r\n    };\r\n    Object.defineProperty(CardElement.prototype, \"useDefaultSizing\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"separatorOrientation\", {\r\n        get: function () {\r\n            return Enums.Orientation.Horizontal;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"defaultStyle\", {\r\n        get: function () {\r\n            return Enums.ContainerStyle.Default;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    CardElement.prototype.parse = function (source, context) {\r\n        _super.prototype.parse.call(this, source, context ? context : new SerializationContext());\r\n    };\r\n    CardElement.prototype.asString = function () {\r\n        return \"\";\r\n    };\r\n    CardElement.prototype.isBleeding = function () {\r\n        return false;\r\n    };\r\n    CardElement.prototype.getEffectiveStyle = function () {\r\n        if (this.parent) {\r\n            return this.parent.getEffectiveStyle();\r\n        }\r\n        return this.defaultStyle;\r\n    };\r\n    CardElement.prototype.getEffectiveStyleDefinition = function () {\r\n        return this.hostConfig.containerStyles.getStyleByName(this.getEffectiveStyle());\r\n    };\r\n    CardElement.prototype.getEffectiveTextStyleDefinition = function () {\r\n        if (this.parent) {\r\n            return this.parent.getEffectiveTextStyleDefinition();\r\n        }\r\n        return this.hostConfig.textStyles.default;\r\n    };\r\n    CardElement.prototype.getForbiddenActionTypes = function () {\r\n        return [];\r\n    };\r\n    CardElement.prototype.getImmediateSurroundingPadding = function (result, processTop, processRight, processBottom, processLeft) {\r\n        if (processTop === void 0) { processTop = true; }\r\n        if (processRight === void 0) { processRight = true; }\r\n        if (processBottom === void 0) { processBottom = true; }\r\n        if (processLeft === void 0) { processLeft = true; }\r\n        if (this.parent) {\r\n            var doProcessTop = processTop && this.parent.isTopElement(this);\r\n            var doProcessRight = processRight && this.parent.isRightMostElement(this);\r\n            var doProcessBottom = processBottom && this.parent.isBottomElement(this);\r\n            var doProcessLeft = processLeft && this.parent.isLeftMostElement(this);\r\n            var effectivePadding = this.parent.getEffectivePadding();\r\n            if (effectivePadding) {\r\n                if (doProcessTop && effectivePadding.top !== Enums.Spacing.None) {\r\n                    result.top = effectivePadding.top;\r\n                    doProcessTop = false;\r\n                }\r\n                if (doProcessRight && effectivePadding.right !== Enums.Spacing.None) {\r\n                    result.right = effectivePadding.right;\r\n                    doProcessRight = false;\r\n                }\r\n                if (doProcessBottom && effectivePadding.bottom !== Enums.Spacing.None) {\r\n                    result.bottom = effectivePadding.bottom;\r\n                    doProcessBottom = false;\r\n                }\r\n                if (doProcessLeft && effectivePadding.left !== Enums.Spacing.None) {\r\n                    result.left = effectivePadding.left;\r\n                    doProcessLeft = false;\r\n                }\r\n            }\r\n            if (doProcessTop || doProcessRight || doProcessBottom || doProcessLeft) {\r\n                this.parent.getImmediateSurroundingPadding(result, doProcessTop, doProcessRight, doProcessBottom, doProcessLeft);\r\n            }\r\n        }\r\n    };\r\n    CardElement.prototype.getActionCount = function () {\r\n        return 0;\r\n    };\r\n    CardElement.prototype.getActionAt = function (index) {\r\n        throw new Error(strings_1.Strings.errors.indexOutOfRange(index));\r\n    };\r\n    CardElement.prototype.indexOfAction = function (action) {\r\n        for (var i = 0; i < this.getActionCount(); i++) {\r\n            if (this.getActionAt(i) === action) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n    CardElement.prototype.remove = function () {\r\n        if (this.parent && this.parent instanceof CardElementContainer) {\r\n            return this.parent.removeItem(this);\r\n        }\r\n        return false;\r\n    };\r\n    CardElement.prototype.render = function () {\r\n        this._renderedElement = this.overrideInternalRender();\r\n        this._separatorElement = this.internalRenderSeparator();\r\n        if (this._renderedElement) {\r\n            if (this.id) {\r\n                this._renderedElement.id = this.id;\r\n            }\r\n            if (this.customCssSelector) {\r\n                this._renderedElement.classList.add(this.customCssSelector);\r\n            }\r\n            this._renderedElement.style.boxSizing = \"border-box\";\r\n            this._defaultRenderedElementDisplayMode = this._renderedElement.style.display\r\n                ? this._renderedElement.style.display\r\n                : undefined;\r\n            this.adjustRenderedElementSize(this._renderedElement);\r\n            this.updateLayout(false);\r\n        }\r\n        else if (this.isDesignMode()) {\r\n            this._renderedElement = this.createPlaceholderElement();\r\n        }\r\n        this.getRootElement().updateActionsEnabledState();\r\n        return this._renderedElement;\r\n    };\r\n    CardElement.prototype.updateLayout = function (_processChildren) {\r\n        if (_processChildren === void 0) { _processChildren = true; }\r\n        this.updateRenderedElementVisibility();\r\n        this.applyPadding();\r\n    };\r\n    CardElement.prototype.updateActionsEnabledState = function () {\r\n        var allActions = this.getRootElement().getAllActions();\r\n        for (var _i = 0, allActions_1 = allActions; _i < allActions_1.length; _i++) {\r\n            var action = allActions_1[_i];\r\n            action.updateEnabledState();\r\n        }\r\n    };\r\n    CardElement.prototype.indexOf = function (_cardElement) {\r\n        return -1;\r\n    };\r\n    CardElement.prototype.isDesignMode = function () {\r\n        var rootElement = this.getRootElement();\r\n        return rootElement instanceof AdaptiveCard && rootElement.designMode;\r\n    };\r\n    CardElement.prototype.isFirstElement = function (_element) {\r\n        return true;\r\n    };\r\n    CardElement.prototype.isLastElement = function (_element) {\r\n        return true;\r\n    };\r\n    CardElement.prototype.isAtTheVeryLeft = function () {\r\n        return this.parent\r\n            ? this.parent.isLeftMostElement(this) && this.parent.isAtTheVeryLeft()\r\n            : true;\r\n    };\r\n    CardElement.prototype.isAtTheVeryRight = function () {\r\n        return this.parent\r\n            ? this.parent.isRightMostElement(this) && this.parent.isAtTheVeryRight()\r\n            : true;\r\n    };\r\n    CardElement.prototype.isAtTheVeryTop = function () {\r\n        return this.parent\r\n            ? this.parent.isFirstElement(this) && this.parent.isAtTheVeryTop()\r\n            : true;\r\n    };\r\n    CardElement.prototype.isAtTheVeryBottom = function () {\r\n        return this.parent\r\n            ? this.parent.isLastElement(this) && this.parent.isAtTheVeryBottom()\r\n            : true;\r\n    };\r\n    CardElement.prototype.isBleedingAtTop = function () {\r\n        return false;\r\n    };\r\n    CardElement.prototype.isBleedingAtBottom = function () {\r\n        return false;\r\n    };\r\n    CardElement.prototype.isLeftMostElement = function (_element) {\r\n        return true;\r\n    };\r\n    CardElement.prototype.isRightMostElement = function (_element) {\r\n        return true;\r\n    };\r\n    CardElement.prototype.isTopElement = function (element) {\r\n        return this.isFirstElement(element);\r\n    };\r\n    CardElement.prototype.isBottomElement = function (element) {\r\n        return this.isLastElement(element);\r\n    };\r\n    CardElement.prototype.isHiddenDueToOverflow = function () {\r\n        return (this._renderedElement !== undefined &&\r\n            this._renderedElement.style.visibility === \"hidden\");\r\n    };\r\n    CardElement.prototype.getRootElement = function () {\r\n        return this.getRootObject();\r\n    };\r\n    CardElement.prototype.getParentContainer = function () {\r\n        var currentElement = this.parent;\r\n        while (currentElement) {\r\n            if (currentElement instanceof Container) {\r\n                return currentElement;\r\n            }\r\n            currentElement = currentElement.parent;\r\n        }\r\n        return undefined;\r\n    };\r\n    CardElement.prototype.getAllInputs = function (processActions) {\r\n        if (processActions === void 0) { processActions = true; }\r\n        return [];\r\n    };\r\n    CardElement.prototype.getAllActions = function () {\r\n        var result = [];\r\n        for (var i = 0; i < this.getActionCount(); i++) {\r\n            var action = this.getActionAt(i);\r\n            if (action) {\r\n                result.push(action);\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    CardElement.prototype.getResourceInformation = function () {\r\n        return [];\r\n    };\r\n    CardElement.prototype.getElementById = function (id) {\r\n        return this.id === id ? this : undefined;\r\n    };\r\n    CardElement.prototype.getActionById = function (_id) {\r\n        return undefined;\r\n    };\r\n    CardElement.prototype.getEffectivePadding = function () {\r\n        var padding = this.getPadding();\r\n        return padding ? padding : this.getDefaultPadding();\r\n    };\r\n    CardElement.prototype.getEffectiveHorizontalAlignment = function () {\r\n        if (this.horizontalAlignment !== undefined) {\r\n            return this.horizontalAlignment;\r\n        }\r\n        if (this.parent) {\r\n            return this.parent.getEffectiveHorizontalAlignment();\r\n        }\r\n        return Enums.HorizontalAlignment.Left;\r\n    };\r\n    Object.defineProperty(CardElement.prototype, \"hostConfig\", {\r\n        get: function () {\r\n            if (this._hostConfig) {\r\n                return this._hostConfig;\r\n            }\r\n            else {\r\n                if (this.parent) {\r\n                    return this.parent.hostConfig;\r\n                }\r\n                else {\r\n                    return host_config_1.defaultHostConfig;\r\n                }\r\n            }\r\n        },\r\n        set: function (value) {\r\n            this._hostConfig = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"index\", {\r\n        get: function () {\r\n            if (this.parent) {\r\n                return this.parent.indexOf(this);\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"isInteractive\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"isStandalone\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"isInline\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"hasVisibleSeparator\", {\r\n        get: function () {\r\n            if (this.parent && this.separatorElement) {\r\n                return !this.parent.isFirstElement(this) && (this.isVisible || this.isDesignMode());\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"separatorElement\", {\r\n        get: function () {\r\n            return this._separatorElement;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardElement.prototype, \"parent\", {\r\n        get: function () {\r\n            return this._parent;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    CardElement.prototype.getElementSingletonBehavior = function () {\r\n        return registry_1.ElementSingletonBehavior.NotAllowed;\r\n    };\r\n    CardElement.langProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"lang\", true, /^[a-z]{2,3}$/gi);\r\n    CardElement.isVisibleProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"isVisible\", true);\r\n    CardElement.separatorProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, \"separator\", false);\r\n    CardElement.heightProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_1, \"height\", [{ value: \"auto\" }, { value: \"stretch\" }], \"auto\");\r\n    CardElement.horizontalAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"horizontalAlignment\", Enums.HorizontalAlignment);\r\n    CardElement.spacingProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"spacing\", Enums.Spacing, Enums.Spacing.Default);\r\n    __decorate([\r\n        (0, serialization_1.property)(CardElement.horizontalAlignmentProperty)\r\n    ], CardElement.prototype, \"horizontalAlignment\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(CardElement.spacingProperty)\r\n    ], CardElement.prototype, \"spacing\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(CardElement.separatorProperty)\r\n    ], CardElement.prototype, \"separator\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(CardElement.heightProperty)\r\n    ], CardElement.prototype, \"height\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(CardElement.langProperty)\r\n    ], CardElement.prototype, \"lang\", null);\r\n    __decorate([\r\n        (0, serialization_1.property)(CardElement.isVisibleProperty)\r\n    ], CardElement.prototype, \"isVisible\", null);\r\n    return CardElement;\r\n}(card_object_1.CardObject));\r\nexports.CardElement = CardElement;\r\nvar ActionProperty = /** @class */ (function (_super) {\r\n    __extends(ActionProperty, _super);\r\n    function ActionProperty(targetVersion, name, forbiddenActionTypes) {\r\n        if (forbiddenActionTypes === void 0) { forbiddenActionTypes = []; }\r\n        var _this = _super.call(this, targetVersion, name, undefined) || this;\r\n        _this.targetVersion = targetVersion;\r\n        _this.name = name;\r\n        _this.forbiddenActionTypes = forbiddenActionTypes;\r\n        return _this;\r\n    }\r\n    ActionProperty.prototype.parse = function (sender, source, context) {\r\n        var parent = sender;\r\n        return context.parseAction(parent, source[this.name], this.forbiddenActionTypes, parent.isDesignMode());\r\n    };\r\n    ActionProperty.prototype.toJSON = function (sender, target, value, context) {\r\n        context.serializeValue(target, this.name, value ? value.toJSON(context) : undefined, undefined, true);\r\n    };\r\n    return ActionProperty;\r\n}(serialization_1.PropertyDefinition));\r\nexports.ActionProperty = ActionProperty;\r\nvar BaseTextBlock = /** @class */ (function (_super) {\r\n    __extends(BaseTextBlock, _super);\r\n    function BaseTextBlock(text) {\r\n        var _this = _super.call(this) || this;\r\n        _this.ariaHidden = false;\r\n        if (text) {\r\n            _this.text = text;\r\n        }\r\n        return _this;\r\n    }\r\n    BaseTextBlock.prototype.populateSchema = function (schema) {\r\n        _super.prototype.populateSchema.call(this, schema);\r\n        // selectAction is declared on BaseTextBlock but is only exposed on TextRun,\r\n        // so the property is removed from the BaseTextBlock schema.\r\n        schema.remove(BaseTextBlock.selectActionProperty);\r\n    };\r\n    Object.defineProperty(BaseTextBlock.prototype, \"text\", {\r\n        get: function () {\r\n            return this.getValue(BaseTextBlock.textProperty);\r\n        },\r\n        set: function (value) {\r\n            this.setText(value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#endregion\r\n    BaseTextBlock.prototype.getFontSize = function (fontType) {\r\n        switch (this.effectiveSize) {\r\n            case Enums.TextSize.Small:\r\n                return fontType.fontSizes.small;\r\n            case Enums.TextSize.Medium:\r\n                return fontType.fontSizes.medium;\r\n            case Enums.TextSize.Large:\r\n                return fontType.fontSizes.large;\r\n            case Enums.TextSize.ExtraLarge:\r\n                return fontType.fontSizes.extraLarge;\r\n            default:\r\n                return fontType.fontSizes.default;\r\n        }\r\n    };\r\n    BaseTextBlock.prototype.getColorDefinition = function (colorSet, color) {\r\n        switch (color) {\r\n            case Enums.TextColor.Accent:\r\n                return colorSet.accent;\r\n            case Enums.TextColor.Dark:\r\n                return colorSet.dark;\r\n            case Enums.TextColor.Light:\r\n                return colorSet.light;\r\n            case Enums.TextColor.Good:\r\n                return colorSet.good;\r\n            case Enums.TextColor.Warning:\r\n                return colorSet.warning;\r\n            case Enums.TextColor.Attention:\r\n                return colorSet.attention;\r\n            default:\r\n                return colorSet.default;\r\n        }\r\n    };\r\n    BaseTextBlock.prototype.setText = function (value) {\r\n        this.setValue(BaseTextBlock.textProperty, value);\r\n    };\r\n    BaseTextBlock.prototype.init = function (textDefinition) {\r\n        this.size = textDefinition.size;\r\n        this.weight = textDefinition.weight;\r\n        this.color = textDefinition.color;\r\n        this.isSubtle = textDefinition.isSubtle;\r\n    };\r\n    BaseTextBlock.prototype.asString = function () {\r\n        return this.text;\r\n    };\r\n    BaseTextBlock.prototype.applyStylesTo = function (targetElement) {\r\n        var fontType = this.hostConfig.getFontTypeDefinition(this.effectiveFontType);\r\n        if (fontType.fontFamily) {\r\n            targetElement.style.fontFamily = fontType.fontFamily;\r\n        }\r\n        var fontSize;\r\n        switch (this.effectiveSize) {\r\n            case Enums.TextSize.Small:\r\n                fontSize = fontType.fontSizes.small;\r\n                break;\r\n            case Enums.TextSize.Medium:\r\n                fontSize = fontType.fontSizes.medium;\r\n                break;\r\n            case Enums.TextSize.Large:\r\n                fontSize = fontType.fontSizes.large;\r\n                break;\r\n            case Enums.TextSize.ExtraLarge:\r\n                fontSize = fontType.fontSizes.extraLarge;\r\n                break;\r\n            default:\r\n                fontSize = fontType.fontSizes.default;\r\n                break;\r\n        }\r\n        targetElement.style.fontSize = fontSize + \"px\";\r\n        var colorDefinition = this.getColorDefinition(this.getEffectiveStyleDefinition().foregroundColors, this.effectiveColor);\r\n        var targetColor = Utils.stringToCssColor(this.effectiveIsSubtle ? colorDefinition.subtle : colorDefinition.default);\r\n        if (targetColor) {\r\n            targetElement.style.color = targetColor;\r\n        }\r\n        var fontWeight;\r\n        switch (this.effectiveWeight) {\r\n            case Enums.TextWeight.Lighter:\r\n                fontWeight = fontType.fontWeights.lighter;\r\n                break;\r\n            case Enums.TextWeight.Bolder:\r\n                fontWeight = fontType.fontWeights.bolder;\r\n                break;\r\n            default:\r\n                fontWeight = fontType.fontWeights.default;\r\n                break;\r\n        }\r\n        targetElement.style.fontWeight = fontWeight.toString();\r\n        if (this.ariaHidden) {\r\n            targetElement.setAttribute(\"aria-hidden\", \"true\");\r\n        }\r\n    };\r\n    BaseTextBlock.prototype.getAllActions = function () {\r\n        var result = _super.prototype.getAllActions.call(this);\r\n        if (this.selectAction) {\r\n            result.push(this.selectAction);\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(BaseTextBlock.prototype, \"effectiveColor\", {\r\n        get: function () {\r\n            return this.color !== undefined ? this.color : this.getEffectiveTextStyleDefinition().color;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BaseTextBlock.prototype, \"effectiveFontType\", {\r\n        get: function () {\r\n            return this.fontType !== undefined\r\n                ? this.fontType\r\n                : this.getEffectiveTextStyleDefinition().fontType;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BaseTextBlock.prototype, \"effectiveIsSubtle\", {\r\n        get: function () {\r\n            return this.isSubtle !== undefined\r\n                ? this.isSubtle\r\n                : this.getEffectiveTextStyleDefinition().isSubtle;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BaseTextBlock.prototype, \"effectiveSize\", {\r\n        get: function () {\r\n            return this.size !== undefined ? this.size : this.getEffectiveTextStyleDefinition().size;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(BaseTextBlock.prototype, \"effectiveWeight\", {\r\n        get: function () {\r\n            return this.weight !== undefined\r\n                ? this.weight\r\n                : this.getEffectiveTextStyleDefinition().weight;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#region Schema\r\n    BaseTextBlock.textProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"text\", true);\r\n    BaseTextBlock.sizeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"size\", Enums.TextSize);\r\n    BaseTextBlock.weightProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"weight\", Enums.TextWeight);\r\n    BaseTextBlock.colorProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"color\", Enums.TextColor);\r\n    BaseTextBlock.isSubtleProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, \"isSubtle\");\r\n    BaseTextBlock.fontTypeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_2, \"fontType\", Enums.FontType);\r\n    BaseTextBlock.selectActionProperty = new ActionProperty(serialization_1.Versions.v1_1, \"selectAction\", [\r\n        \"Action.ShowCard\"\r\n    ]);\r\n    __decorate([\r\n        (0, serialization_1.property)(BaseTextBlock.sizeProperty)\r\n    ], BaseTextBlock.prototype, \"size\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(BaseTextBlock.weightProperty)\r\n    ], BaseTextBlock.prototype, \"weight\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(BaseTextBlock.colorProperty)\r\n    ], BaseTextBlock.prototype, \"color\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(BaseTextBlock.fontTypeProperty)\r\n    ], BaseTextBlock.prototype, \"fontType\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(BaseTextBlock.isSubtleProperty)\r\n    ], BaseTextBlock.prototype, \"isSubtle\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(BaseTextBlock.textProperty)\r\n    ], BaseTextBlock.prototype, \"text\", null);\r\n    __decorate([\r\n        (0, serialization_1.property)(BaseTextBlock.selectActionProperty)\r\n    ], BaseTextBlock.prototype, \"selectAction\", void 0);\r\n    return BaseTextBlock;\r\n}(CardElement));\r\nexports.BaseTextBlock = BaseTextBlock;\r\nvar TextBlock = /** @class */ (function (_super) {\r\n    __extends(TextBlock, _super);\r\n    function TextBlock() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.wrap = false;\r\n        _this._treatAsPlainText = true;\r\n        _this.useMarkdown = true;\r\n        return _this;\r\n    }\r\n    TextBlock.prototype.restoreOriginalContent = function () {\r\n        var _a, _b;\r\n        if (this.renderedElement !== undefined) {\r\n            if (this.maxLines && this.maxLines > 0) {\r\n                this.renderedElement.style.maxHeight =\r\n                    this._computedLineHeight * this.maxLines + \"px\";\r\n            }\r\n            var originalHtml = (_b = (_a = TextBlock._ttRoundtripPolicy) === null || _a === void 0 ? void 0 : _a.createHTML(this._originalInnerHtml)) !== null && _b !== void 0 ? _b : this._originalInnerHtml;\r\n            this.renderedElement.innerHTML = originalHtml;\r\n        }\r\n    };\r\n    TextBlock.prototype.truncateIfSupported = function (maxHeight) {\r\n        if (this.renderedElement !== undefined) {\r\n            // For now, only truncate TextBlocks that contain just a single\r\n            // paragraph -- since the maxLines calculation doesn't take into\r\n            // account Markdown lists\r\n            var children = this.renderedElement.children;\r\n            var isTextOnly = !children.length;\r\n            var truncationSupported = isTextOnly ||\r\n                (children.length === 1 && children[0].tagName.toLowerCase() === \"p\" && !children[0].children.length);\r\n            if (truncationSupported) {\r\n                var element = isTextOnly ? this.renderedElement : children[0];\r\n                Utils.truncateText(element, maxHeight, this._computedLineHeight);\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    TextBlock.prototype.setText = function (value) {\r\n        _super.prototype.setText.call(this, value);\r\n        this._processedText = undefined;\r\n    };\r\n    TextBlock.prototype.internalRender = function () {\r\n        var _this = this;\r\n        var _a, _b;\r\n        this._processedText = undefined;\r\n        if (this.text) {\r\n            var preProcessedText = this.preProcessPropertyValue(BaseTextBlock.textProperty);\r\n            var hostConfig = this.hostConfig;\r\n            var element = void 0;\r\n            if (this.forElementId) {\r\n                var labelElement = document.createElement(\"label\");\r\n                labelElement.htmlFor = this.forElementId;\r\n                element = labelElement;\r\n            }\r\n            else {\r\n                element = document.createElement(\"div\");\r\n            }\r\n            element.classList.add(hostConfig.makeCssClassName(\"ac-textBlock\"));\r\n            element.style.overflow = \"hidden\";\r\n            this.applyStylesTo(element);\r\n            if (this.style === \"heading\") {\r\n                element.setAttribute(\"role\", \"heading\");\r\n                var headingLevel = this.hostConfig.textBlock.headingLevel;\r\n                if (headingLevel !== undefined && headingLevel > 0) {\r\n                    element.setAttribute(\"aria-level\", headingLevel.toString());\r\n                }\r\n            }\r\n            if (this.selectAction && hostConfig.supportsInteractivity) {\r\n                element.onclick = function (e) {\r\n                    if (_this.selectAction && _this.selectAction.isEffectivelyEnabled()) {\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n                        _this.selectAction.execute();\r\n                    }\r\n                };\r\n                this.selectAction.setupElementForAccessibility(element);\r\n                if (this.selectAction.isEffectivelyEnabled()) {\r\n                    element.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\r\n                }\r\n            }\r\n            if (!this._processedText) {\r\n                this._treatAsPlainText = true;\r\n                var formattedText = TextFormatters.formatText(this.lang, preProcessedText);\r\n                if (this.useMarkdown && formattedText) {\r\n                    if (shared_1.GlobalSettings.allowMarkForTextHighlighting) {\r\n                        formattedText = formattedText\r\n                            .replace(/<mark>/g, \"===\")\r\n                            .replace(/<\\/mark>/g, \"/==/\");\r\n                    }\r\n                    var markdownProcessingResult = AdaptiveCard.applyMarkdown(formattedText);\r\n                    if (markdownProcessingResult.didProcess &&\r\n                        markdownProcessingResult.outputHtml) {\r\n                        this._processedText = markdownProcessingResult.outputHtml;\r\n                        this._treatAsPlainText = false;\r\n                        // Only process <mark> tag if markdown processing was applied because\r\n                        // markdown processing is also responsible for sanitizing the input string\r\n                        if (shared_1.GlobalSettings.allowMarkForTextHighlighting && this._processedText) {\r\n                            var markStyle = \"\";\r\n                            var effectiveStyle = this.getEffectiveStyleDefinition();\r\n                            if (effectiveStyle.highlightBackgroundColor) {\r\n                                markStyle +=\r\n                                    \"background-color: \" +\r\n                                        effectiveStyle.highlightBackgroundColor +\r\n                                        \";\";\r\n                            }\r\n                            if (effectiveStyle.highlightForegroundColor) {\r\n                                markStyle +=\r\n                                    \"color: \" + effectiveStyle.highlightForegroundColor + \";\";\r\n                            }\r\n                            if (markStyle) {\r\n                                markStyle = 'style=\"' + markStyle + '\"';\r\n                            }\r\n                            this._processedText = this._processedText\r\n                                .replace(/===/g, \"<mark \" + markStyle + \">\")\r\n                                .replace(/\\/==\\//g, \"</mark>\");\r\n                        }\r\n                    }\r\n                    else {\r\n                        this._processedText = formattedText;\r\n                        this._treatAsPlainText = true;\r\n                    }\r\n                }\r\n                else {\r\n                    this._processedText = formattedText;\r\n                    this._treatAsPlainText = true;\r\n                }\r\n            }\r\n            if (!this._processedText) {\r\n                this._processedText = \"\";\r\n            }\r\n            if (this._treatAsPlainText) {\r\n                element.innerText = this._processedText;\r\n            }\r\n            else {\r\n                var processedHtml = (_b = (_a = TextBlock._ttMarkdownPolicy) === null || _a === void 0 ? void 0 : _a.createHTML(this._processedText)) !== null && _b !== void 0 ? _b : this._processedText;\r\n                element.innerHTML = processedHtml;\r\n            }\r\n            if (element.firstElementChild instanceof HTMLElement) {\r\n                var firstElementChild = element.firstElementChild;\r\n                firstElementChild.style.marginTop = \"0px\";\r\n                firstElementChild.style.width = \"100%\";\r\n                if (!this.wrap) {\r\n                    firstElementChild.style.overflow = \"hidden\";\r\n                    firstElementChild.style.textOverflow = \"ellipsis\";\r\n                }\r\n            }\r\n            if (element.lastElementChild instanceof HTMLElement) {\r\n                element.lastElementChild.style.marginBottom = \"0px\";\r\n            }\r\n            var anchors = element.getElementsByTagName(\"a\");\r\n            var _loop_1 = function (anchor) {\r\n                anchor.classList.add(hostConfig.makeCssClassName(\"ac-anchor\"));\r\n                anchor.target = \"_blank\";\r\n                anchor.onclick = function (e) {\r\n                    if (raiseAnchorClickedEvent(_this, anchor, e)) {\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n                    }\r\n                };\r\n                anchor.oncontextmenu = function (e) {\r\n                    if (raiseAnchorClickedEvent(_this, anchor, e)) {\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                };\r\n            };\r\n            for (var _i = 0, _c = Array.from(anchors); _i < _c.length; _i++) {\r\n                var anchor = _c[_i];\r\n                _loop_1(anchor);\r\n            }\r\n            if (this.wrap) {\r\n                element.style.wordWrap = \"break-word\";\r\n                if (this.maxLines && this.maxLines > 0) {\r\n                    element.style.overflow = \"hidden\";\r\n                    if (Utils.isInternetExplorer() || !shared_1.GlobalSettings.useWebkitLineClamp) {\r\n                        element.style.maxHeight = this._computedLineHeight * this.maxLines + \"px\";\r\n                    }\r\n                    else {\r\n                        // While non standard, --webkit-line-clamp works in every browser (except IE)\r\n                        // and is a great solution to support the maxLines feature with ellipsis\r\n                        // truncation. With --webkit-line-clamp there is need to use explicit line heights\r\n                        element.style.removeProperty(\"line-height\");\r\n                        element.style.display = \"-webkit-box\";\r\n                        element.style.webkitBoxOrient = \"vertical\";\r\n                        element.style.webkitLineClamp = this.maxLines.toString();\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                element.style.whiteSpace = \"nowrap\";\r\n                element.style.textOverflow = \"ellipsis\";\r\n            }\r\n            if (shared_1.GlobalSettings.useAdvancedTextBlockTruncation ||\r\n                shared_1.GlobalSettings.useAdvancedCardBottomTruncation) {\r\n                this._originalInnerHtml = element.innerHTML;\r\n            }\r\n            return element;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    };\r\n    TextBlock.prototype.truncateOverflow = function (maxHeight) {\r\n        if (maxHeight >= this._computedLineHeight) {\r\n            return this.truncateIfSupported(maxHeight);\r\n        }\r\n        return false;\r\n    };\r\n    TextBlock.prototype.undoOverflowTruncation = function () {\r\n        this.restoreOriginalContent();\r\n        if (shared_1.GlobalSettings.useAdvancedTextBlockTruncation && this.maxLines) {\r\n            var maxHeight = this._computedLineHeight * this.maxLines;\r\n            this.truncateIfSupported(maxHeight);\r\n        }\r\n    };\r\n    TextBlock.prototype.applyStylesTo = function (targetElement) {\r\n        _super.prototype.applyStylesTo.call(this, targetElement);\r\n        switch (this.getEffectiveHorizontalAlignment()) {\r\n            case Enums.HorizontalAlignment.Center:\r\n                targetElement.style.textAlign = \"center\";\r\n                break;\r\n            case Enums.HorizontalAlignment.Right:\r\n                targetElement.style.textAlign = \"end\";\r\n                break;\r\n            default:\r\n                targetElement.style.textAlign = \"start\";\r\n                break;\r\n        }\r\n        var lineHeights = this.hostConfig.lineHeights;\r\n        if (lineHeights) {\r\n            switch (this.effectiveSize) {\r\n                case Enums.TextSize.Small:\r\n                    this._computedLineHeight = lineHeights.small;\r\n                    break;\r\n                case Enums.TextSize.Medium:\r\n                    this._computedLineHeight = lineHeights.medium;\r\n                    break;\r\n                case Enums.TextSize.Large:\r\n                    this._computedLineHeight = lineHeights.large;\r\n                    break;\r\n                case Enums.TextSize.ExtraLarge:\r\n                    this._computedLineHeight = lineHeights.extraLarge;\r\n                    break;\r\n                default:\r\n                    this._computedLineHeight = lineHeights.default;\r\n                    break;\r\n            }\r\n        }\r\n        else {\r\n            // Looks like 1.33 is the magic number to compute line-height\r\n            // from font size.\r\n            this._computedLineHeight =\r\n                this.getFontSize(this.hostConfig.getFontTypeDefinition(this.effectiveFontType)) *\r\n                    1.33;\r\n        }\r\n        targetElement.style.lineHeight = this._computedLineHeight + \"px\";\r\n    };\r\n    TextBlock.prototype.getJsonTypeName = function () {\r\n        return \"TextBlock\";\r\n    };\r\n    TextBlock.prototype.getEffectiveTextStyleDefinition = function () {\r\n        if (this.style) {\r\n            return this.hostConfig.textStyles.getStyleByName(this.style);\r\n        }\r\n        return _super.prototype.getEffectiveTextStyleDefinition.call(this);\r\n    };\r\n    TextBlock.prototype.updateLayout = function (processChildren) {\r\n        if (processChildren === void 0) { processChildren = false; }\r\n        _super.prototype.updateLayout.call(this, processChildren);\r\n        if (shared_1.GlobalSettings.useAdvancedTextBlockTruncation && this.maxLines && this.isDisplayed()) {\r\n            // Reset the element's innerHTML in case the available room for\r\n            // content has increased\r\n            this.restoreOriginalContent();\r\n            this.truncateIfSupported(this._computedLineHeight * this.maxLines);\r\n        }\r\n    };\r\n    var _a, _b;\r\n    TextBlock.wrapProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, \"wrap\", false);\r\n    TextBlock.maxLinesProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, \"maxLines\");\r\n    TextBlock.styleProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_5, \"style\", [\r\n        { value: \"default\" },\r\n        { value: \"columnHeader\" },\r\n        { value: \"heading\" }\r\n    ]);\r\n    // Markdown processing is handled outside of Adaptive Cards. It's up to the host to ensure that markdown is safely\r\n    // processed.\r\n    TextBlock._ttMarkdownPolicy = (typeof window === 'undefined') ? undefined : (_a = window.trustedTypes) === null || _a === void 0 ? void 0 : _a.createPolicy(\"adaptivecards#markdownPassthroughPolicy\", { createHTML: function (value) { return value; } });\r\n    // When \"advanced\" truncation is enabled (see GlobalSettings.useAdvancedCardBottomTruncation and\r\n    // GlobalSettings.useAdvancedTextBlockTruncation), we store the original pre-truncation content in\r\n    // _originalInnerHtml so that we can restore/recalculate truncation later if space availability has changed (see\r\n    // TextBlock.restoreOriginalContent())\r\n    TextBlock._ttRoundtripPolicy = (typeof window === 'undefined') ? undefined : (_b = window.trustedTypes) === null || _b === void 0 ? void 0 : _b.createPolicy(\"adaptivecards#restoreContentsPolicy\", { createHTML: function (value) { return value; } });\r\n    __decorate([\r\n        (0, serialization_1.property)(TextBlock.wrapProperty)\r\n    ], TextBlock.prototype, \"wrap\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(TextBlock.maxLinesProperty)\r\n    ], TextBlock.prototype, \"maxLines\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(TextBlock.styleProperty)\r\n    ], TextBlock.prototype, \"style\", void 0);\r\n    return TextBlock;\r\n}(BaseTextBlock));\r\nexports.TextBlock = TextBlock;\r\nvar TextRun = /** @class */ (function (_super) {\r\n    __extends(TextRun, _super);\r\n    function TextRun() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.italic = false;\r\n        _this.strikethrough = false;\r\n        _this.highlight = false;\r\n        _this.underline = false;\r\n        return _this;\r\n    }\r\n    TextRun.prototype.populateSchema = function (schema) {\r\n        _super.prototype.populateSchema.call(this, schema);\r\n        schema.add(BaseTextBlock.selectActionProperty);\r\n    };\r\n    //#endregion\r\n    TextRun.prototype.internalRender = function () {\r\n        var _this = this;\r\n        if (this.text) {\r\n            var preProcessedText = this.preProcessPropertyValue(BaseTextBlock.textProperty);\r\n            var hostConfig = this.hostConfig;\r\n            var formattedText = TextFormatters.formatText(this.lang, preProcessedText);\r\n            if (!formattedText) {\r\n                formattedText = \"\";\r\n            }\r\n            var element = document.createElement(\"span\");\r\n            element.classList.add(hostConfig.makeCssClassName(\"ac-textRun\"));\r\n            this.applyStylesTo(element);\r\n            if (this.selectAction && hostConfig.supportsInteractivity) {\r\n                var anchor = document.createElement(\"a\");\r\n                anchor.classList.add(hostConfig.makeCssClassName(\"ac-anchor\"));\r\n                var href = this.selectAction.getHref();\r\n                anchor.href = href ? href : \"\";\r\n                anchor.target = \"_blank\";\r\n                anchor.onclick = function (e) {\r\n                    if (_this.selectAction && _this.selectAction.isEffectivelyEnabled()) {\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n                        _this.selectAction.execute();\r\n                    }\r\n                };\r\n                this.selectAction.setupElementForAccessibility(anchor);\r\n                anchor.innerText = formattedText;\r\n                element.appendChild(anchor);\r\n            }\r\n            else {\r\n                element.innerText = formattedText;\r\n            }\r\n            return element;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    };\r\n    TextRun.prototype.applyStylesTo = function (targetElement) {\r\n        _super.prototype.applyStylesTo.call(this, targetElement);\r\n        if (this.italic) {\r\n            targetElement.style.fontStyle = \"italic\";\r\n        }\r\n        if (this.strikethrough) {\r\n            targetElement.style.textDecoration = \"line-through\";\r\n        }\r\n        if (this.highlight) {\r\n            var colorDefinition = this.getColorDefinition(this.getEffectiveStyleDefinition().foregroundColors, this.effectiveColor);\r\n            var backgroundColor = Utils.stringToCssColor(this.effectiveIsSubtle\r\n                ? colorDefinition.highlightColors.subtle\r\n                : colorDefinition.highlightColors.default);\r\n            if (backgroundColor) {\r\n                targetElement.style.backgroundColor = backgroundColor;\r\n            }\r\n        }\r\n        if (this.underline) {\r\n            targetElement.style.textDecoration = \"underline\";\r\n        }\r\n    };\r\n    TextRun.prototype.getJsonTypeName = function () {\r\n        return \"TextRun\";\r\n    };\r\n    Object.defineProperty(TextRun.prototype, \"isStandalone\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TextRun.prototype, \"isInline\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    TextRun.italicProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"italic\", false);\r\n    TextRun.strikethroughProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"strikethrough\", false);\r\n    TextRun.highlightProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"highlight\", false);\r\n    TextRun.underlineProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_3, \"underline\", false);\r\n    __decorate([\r\n        (0, serialization_1.property)(TextRun.italicProperty)\r\n    ], TextRun.prototype, \"italic\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(TextRun.strikethroughProperty)\r\n    ], TextRun.prototype, \"strikethrough\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(TextRun.highlightProperty)\r\n    ], TextRun.prototype, \"highlight\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(TextRun.underlineProperty)\r\n    ], TextRun.prototype, \"underline\", void 0);\r\n    return TextRun;\r\n}(BaseTextBlock));\r\nexports.TextRun = TextRun;\r\nvar RichTextBlock = /** @class */ (function (_super) {\r\n    __extends(RichTextBlock, _super);\r\n    function RichTextBlock() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._inlines = [];\r\n        return _this;\r\n    }\r\n    RichTextBlock.prototype.internalAddInline = function (inline, forceAdd) {\r\n        if (forceAdd === void 0) { forceAdd = false; }\r\n        if (!inline.isInline) {\r\n            throw new Error(strings_1.Strings.errors.elementCannotBeUsedAsInline());\r\n        }\r\n        var doAdd = inline.parent === undefined || forceAdd;\r\n        if (!doAdd && inline.parent !== this) {\r\n            throw new Error(strings_1.Strings.errors.inlineAlreadyParented());\r\n        }\r\n        else {\r\n            inline.setParent(this);\r\n            this._inlines.push(inline);\r\n        }\r\n    };\r\n    RichTextBlock.prototype.internalParse = function (source, context) {\r\n        _super.prototype.internalParse.call(this, source, context);\r\n        this._inlines = [];\r\n        if (Array.isArray(source[\"inlines\"])) {\r\n            for (var _i = 0, _a = source[\"inlines\"]; _i < _a.length; _i++) {\r\n                var jsonInline = _a[_i];\r\n                var inline = void 0;\r\n                if (typeof jsonInline === \"string\") {\r\n                    var textRun = new TextRun();\r\n                    textRun.text = jsonInline;\r\n                    inline = textRun;\r\n                }\r\n                else {\r\n                    // No fallback for inlines in 1.2\r\n                    inline = context.parseElement(this, jsonInline, [], false);\r\n                }\r\n                if (inline) {\r\n                    this.internalAddInline(inline, true);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    RichTextBlock.prototype.internalToJSON = function (target, context) {\r\n        _super.prototype.internalToJSON.call(this, target, context);\r\n        if (this._inlines.length > 0) {\r\n            var jsonInlines = [];\r\n            for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {\r\n                var inline = _a[_i];\r\n                jsonInlines.push(inline.toJSON(context));\r\n            }\r\n            context.serializeValue(target, \"inlines\", jsonInlines);\r\n        }\r\n    };\r\n    RichTextBlock.prototype.internalRender = function () {\r\n        if (this._inlines.length > 0) {\r\n            var element = void 0;\r\n            if (this.forElementId) {\r\n                var labelElement = document.createElement(\"label\");\r\n                labelElement.htmlFor = this.forElementId;\r\n                element = labelElement;\r\n            }\r\n            else {\r\n                element = document.createElement(\"div\");\r\n            }\r\n            element.className = this.hostConfig.makeCssClassName(\"ac-richTextBlock\");\r\n            switch (this.getEffectiveHorizontalAlignment()) {\r\n                case Enums.HorizontalAlignment.Center:\r\n                    element.style.textAlign = \"center\";\r\n                    break;\r\n                case Enums.HorizontalAlignment.Right:\r\n                    element.style.textAlign = \"end\";\r\n                    break;\r\n                default:\r\n                    element.style.textAlign = \"start\";\r\n                    break;\r\n            }\r\n            var renderedInlines = 0;\r\n            for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {\r\n                var inline = _a[_i];\r\n                var renderedInline = inline.render();\r\n                if (renderedInline) {\r\n                    element.appendChild(renderedInline);\r\n                    renderedInlines++;\r\n                }\r\n            }\r\n            if (renderedInlines > 0) {\r\n                return element;\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    RichTextBlock.prototype.asString = function () {\r\n        var result = \"\";\r\n        for (var _i = 0, _a = this._inlines; _i < _a.length; _i++) {\r\n            var inline = _a[_i];\r\n            result += inline.asString();\r\n        }\r\n        return result;\r\n    };\r\n    RichTextBlock.prototype.getJsonTypeName = function () {\r\n        return \"RichTextBlock\";\r\n    };\r\n    RichTextBlock.prototype.getInlineCount = function () {\r\n        return this._inlines.length;\r\n    };\r\n    RichTextBlock.prototype.getInlineAt = function (index) {\r\n        if (index >= 0 && index < this._inlines.length) {\r\n            return this._inlines[index];\r\n        }\r\n        else {\r\n            throw new Error(strings_1.Strings.errors.indexOutOfRange(index));\r\n        }\r\n    };\r\n    RichTextBlock.prototype.addInline = function (inline) {\r\n        if (typeof inline === \"string\") {\r\n            this.internalAddInline(new TextRun(inline));\r\n        }\r\n        else {\r\n            this.internalAddInline(inline);\r\n        }\r\n    };\r\n    RichTextBlock.prototype.removeInline = function (inline) {\r\n        var index = this._inlines.indexOf(inline);\r\n        if (index >= 0) {\r\n            this._inlines[index].setParent(undefined);\r\n            this._inlines.splice(index, 1);\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    return RichTextBlock;\r\n}(CardElement));\r\nexports.RichTextBlock = RichTextBlock;\r\nvar Fact = /** @class */ (function (_super) {\r\n    __extends(Fact, _super);\r\n    function Fact(name, value) {\r\n        var _this = _super.call(this) || this;\r\n        _this.name = name;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    //#endregion\r\n    Fact.prototype.getSchemaKey = function () {\r\n        return \"Fact\";\r\n    };\r\n    //#region Schema\r\n    Fact.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"title\");\r\n    Fact.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"value\");\r\n    __decorate([\r\n        (0, serialization_1.property)(Fact.titleProperty)\r\n    ], Fact.prototype, \"name\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Fact.valueProperty)\r\n    ], Fact.prototype, \"value\", void 0);\r\n    return Fact;\r\n}(serialization_1.SerializableObject));\r\nexports.Fact = Fact;\r\nvar FactSet = /** @class */ (function (_super) {\r\n    __extends(FactSet, _super);\r\n    function FactSet() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(FactSet.prototype, \"useDefaultSizing\", {\r\n        //#endregion\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    FactSet.prototype.internalRender = function () {\r\n        var element = undefined;\r\n        var hostConfig = this.hostConfig;\r\n        if (this.facts.length > 0) {\r\n            element = document.createElement(\"table\");\r\n            element.style.borderWidth = \"0px\";\r\n            element.style.borderSpacing = \"0px\";\r\n            element.style.borderStyle = \"none\";\r\n            element.style.borderCollapse = \"collapse\";\r\n            element.style.display = \"block\";\r\n            element.style.overflow = \"hidden\";\r\n            element.classList.add(hostConfig.makeCssClassName(\"ac-factset\"));\r\n            element.setAttribute(\"role\", \"presentation\");\r\n            for (var i = 0; i < this.facts.length; i++) {\r\n                var trElement = document.createElement(\"tr\");\r\n                if (i > 0) {\r\n                    trElement.style.marginTop = hostConfig.factSet.spacing + \"px\";\r\n                }\r\n                // Title column\r\n                var tdElement = document.createElement(\"td\");\r\n                tdElement.style.padding = \"0\";\r\n                tdElement.classList.add(hostConfig.makeCssClassName(\"ac-fact-title\"));\r\n                if (hostConfig.factSet.title.maxWidth) {\r\n                    tdElement.style.maxWidth = hostConfig.factSet.title.maxWidth + \"px\";\r\n                }\r\n                tdElement.style.verticalAlign = \"top\";\r\n                var textBlock = new TextBlock();\r\n                textBlock.setParent(this);\r\n                textBlock.text =\r\n                    !this.facts[i].name && this.isDesignMode() ? \"Title\" : this.facts[i].name;\r\n                textBlock.size = hostConfig.factSet.title.size;\r\n                textBlock.color = hostConfig.factSet.title.color;\r\n                textBlock.isSubtle = hostConfig.factSet.title.isSubtle;\r\n                textBlock.weight = hostConfig.factSet.title.weight;\r\n                textBlock.wrap = hostConfig.factSet.title.wrap;\r\n                textBlock.spacing = Enums.Spacing.None;\r\n                Utils.appendChild(tdElement, textBlock.render());\r\n                Utils.appendChild(trElement, tdElement);\r\n                // Spacer column\r\n                tdElement = document.createElement(\"td\");\r\n                tdElement.style.width = \"10px\";\r\n                Utils.appendChild(trElement, tdElement);\r\n                // Value column\r\n                tdElement = document.createElement(\"td\");\r\n                tdElement.style.padding = \"0\";\r\n                tdElement.style.verticalAlign = \"top\";\r\n                tdElement.classList.add(hostConfig.makeCssClassName(\"ac-fact-value\"));\r\n                textBlock = new TextBlock();\r\n                textBlock.setParent(this);\r\n                textBlock.text = this.facts[i].value;\r\n                textBlock.size = hostConfig.factSet.value.size;\r\n                textBlock.color = hostConfig.factSet.value.color;\r\n                textBlock.isSubtle = hostConfig.factSet.value.isSubtle;\r\n                textBlock.weight = hostConfig.factSet.value.weight;\r\n                textBlock.wrap = hostConfig.factSet.value.wrap;\r\n                textBlock.spacing = Enums.Spacing.None;\r\n                Utils.appendChild(tdElement, textBlock.render());\r\n                Utils.appendChild(trElement, tdElement);\r\n                Utils.appendChild(element, trElement);\r\n            }\r\n        }\r\n        return element;\r\n    };\r\n    FactSet.prototype.getJsonTypeName = function () {\r\n        return \"FactSet\";\r\n    };\r\n    //#region Schema\r\n    FactSet.factsProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_0, \"facts\", Fact);\r\n    __decorate([\r\n        (0, serialization_1.property)(FactSet.factsProperty)\r\n    ], FactSet.prototype, \"facts\", void 0);\r\n    return FactSet;\r\n}(CardElement));\r\nexports.FactSet = FactSet;\r\nvar ImageDimensionProperty = /** @class */ (function (_super) {\r\n    __extends(ImageDimensionProperty, _super);\r\n    function ImageDimensionProperty(targetVersion, name, internalName, fallbackProperty) {\r\n        var _this = _super.call(this, targetVersion, name) || this;\r\n        _this.targetVersion = targetVersion;\r\n        _this.name = name;\r\n        _this.internalName = internalName;\r\n        _this.fallbackProperty = fallbackProperty;\r\n        return _this;\r\n    }\r\n    ImageDimensionProperty.prototype.getInternalName = function () {\r\n        return this.internalName;\r\n    };\r\n    ImageDimensionProperty.prototype.parse = function (sender, source, context) {\r\n        var result = undefined;\r\n        var sourceValue = source[this.name];\r\n        if (sourceValue === undefined) {\r\n            return this.defaultValue;\r\n        }\r\n        var isValid = false;\r\n        if (typeof sourceValue === \"string\") {\r\n            try {\r\n                var size = shared_1.SizeAndUnit.parse(sourceValue, true);\r\n                if (size.unit === Enums.SizeUnit.Pixel) {\r\n                    result = size.physicalSize;\r\n                    isValid = true;\r\n                }\r\n            }\r\n            catch (_a) {\r\n                // Swallow the exception\r\n            }\r\n            // If the source value isn't valid per this property definition,\r\n            // check its validity per the fallback property, if specified\r\n            if (!isValid && this.fallbackProperty) {\r\n                isValid = this.fallbackProperty.isValidValue(sourceValue, context);\r\n            }\r\n        }\r\n        if (!isValid) {\r\n            context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(sourceValue, this.name));\r\n        }\r\n        return result;\r\n    };\r\n    ImageDimensionProperty.prototype.toJSON = function (sender, target, value, context) {\r\n        context.serializeValue(target, this.name, typeof value === \"number\" && !isNaN(value) ? value + \"px\" : undefined);\r\n    };\r\n    return ImageDimensionProperty;\r\n}(serialization_1.PropertyDefinition));\r\nvar Image = /** @class */ (function (_super) {\r\n    __extends(Image, _super);\r\n    function Image() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.size = Enums.Size.Auto;\r\n        _this.style = Enums.ImageStyle.Default;\r\n        return _this;\r\n    }\r\n    Image.prototype.populateSchema = function (schema) {\r\n        _super.prototype.populateSchema.call(this, schema);\r\n        schema.remove(CardElement.heightProperty);\r\n    };\r\n    //#endregion\r\n    Image.prototype.applySize = function (element) {\r\n        if (this.pixelWidth || this.pixelHeight) {\r\n            if (this.pixelWidth) {\r\n                element.style.width = this.pixelWidth + \"px\";\r\n            }\r\n            if (this.pixelHeight) {\r\n                element.style.height = this.pixelHeight + \"px\";\r\n            }\r\n        }\r\n        else {\r\n            if (this.maxHeight) {\r\n                // If the image is constrained in height, we set its height property and\r\n                // auto and stretch are ignored (default to medium). THis is necessary for\r\n                // ImageSet which uses a maximum image height as opposed to the cards width\r\n                // as a constraining dimension\r\n                switch (this.size) {\r\n                    case Enums.Size.Small:\r\n                        element.style.height = this.hostConfig.imageSizes.small + \"px\";\r\n                        break;\r\n                    case Enums.Size.Large:\r\n                        element.style.height = this.hostConfig.imageSizes.large + \"px\";\r\n                        break;\r\n                    default:\r\n                        element.style.height = this.hostConfig.imageSizes.medium + \"px\";\r\n                        break;\r\n                }\r\n                element.style.maxHeight = this.maxHeight + \"px\";\r\n            }\r\n            else {\r\n                switch (this.size) {\r\n                    case Enums.Size.Stretch:\r\n                        element.style.width = \"100%\";\r\n                        break;\r\n                    case Enums.Size.Auto:\r\n                        element.style.maxWidth = \"100%\";\r\n                        break;\r\n                    case Enums.Size.Small:\r\n                        element.style.width = this.hostConfig.imageSizes.small + \"px\";\r\n                        break;\r\n                    case Enums.Size.Large:\r\n                        element.style.width = this.hostConfig.imageSizes.large + \"px\";\r\n                        break;\r\n                    case Enums.Size.Medium:\r\n                        element.style.width = this.hostConfig.imageSizes.medium + \"px\";\r\n                        break;\r\n                }\r\n                element.style.maxHeight = \"100%\";\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(Image.prototype, \"useDefaultSizing\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Image.prototype.internalRender = function () {\r\n        var _this = this;\r\n        var element = undefined;\r\n        if (this.url) {\r\n            element = document.createElement(\"div\");\r\n            element.style.display = \"flex\";\r\n            element.style.alignItems = \"flex-start\";\r\n            // Cache hostConfig to avoid walking the parent hierarchy multiple times\r\n            var hostConfig = this.hostConfig;\r\n            switch (this.getEffectiveHorizontalAlignment()) {\r\n                case Enums.HorizontalAlignment.Center:\r\n                    element.style.justifyContent = \"center\";\r\n                    break;\r\n                case Enums.HorizontalAlignment.Right:\r\n                    element.style.justifyContent = \"flex-end\";\r\n                    break;\r\n                default:\r\n                    element.style.justifyContent = \"flex-start\";\r\n                    break;\r\n            }\r\n            var imageElement = document.createElement(\"img\");\r\n            imageElement.onload = function (_e) {\r\n                raiseImageLoadedEvent(_this);\r\n            };\r\n            imageElement.onerror = function (_e) {\r\n                if (_this.renderedElement) {\r\n                    var card = _this.getRootElement();\r\n                    _this.renderedElement;\r\n                    if (card && card.designMode) {\r\n                        var errorElement = document.createElement(\"div\");\r\n                        errorElement.style.display = \"flex\";\r\n                        errorElement.style.alignItems = \"center\";\r\n                        errorElement.style.justifyContent = \"center\";\r\n                        errorElement.style.backgroundColor = \"#EEEEEE\";\r\n                        errorElement.style.color = \"black\";\r\n                        errorElement.innerText = \":-(\";\r\n                        errorElement.style.padding = \"10px\";\r\n                        _this.applySize(errorElement);\r\n                        _this.renderedElement.appendChild(errorElement);\r\n                    }\r\n                }\r\n                raiseImageLoadedEvent(_this);\r\n            };\r\n            imageElement.style.minWidth = \"0\";\r\n            imageElement.classList.add(hostConfig.makeCssClassName(\"ac-image\"));\r\n            if (this.selectAction && hostConfig.supportsInteractivity) {\r\n                imageElement.onkeypress = function (e) {\r\n                    if (_this.selectAction &&\r\n                        _this.selectAction.isEffectivelyEnabled() &&\r\n                        (e.code === \"Enter\" || e.code === \"Space\")) {\r\n                        // enter or space pressed\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n                        _this.selectAction.execute();\r\n                    }\r\n                };\r\n                imageElement.onclick = function (e) {\r\n                    if (_this.selectAction && _this.selectAction.isEffectivelyEnabled()) {\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n                        _this.selectAction.execute();\r\n                    }\r\n                };\r\n                this.selectAction.setupElementForAccessibility(imageElement);\r\n                if (this.selectAction.isEffectivelyEnabled()) {\r\n                    imageElement.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\r\n                }\r\n            }\r\n            this.applySize(imageElement);\r\n            if (this.style === Enums.ImageStyle.Person) {\r\n                imageElement.style.borderRadius = \"50%\";\r\n                imageElement.style.backgroundPosition = \"50% 50%\";\r\n                imageElement.style.backgroundRepeat = \"no-repeat\";\r\n            }\r\n            var backgroundColor = Utils.stringToCssColor(this.backgroundColor);\r\n            if (backgroundColor) {\r\n                imageElement.style.backgroundColor = backgroundColor;\r\n            }\r\n            imageElement.src = this.preProcessPropertyValue(Image.urlProperty);\r\n            var altTextProperty = this.preProcessPropertyValue(Image.altTextProperty);\r\n            if (altTextProperty) {\r\n                imageElement.alt = altTextProperty;\r\n            }\r\n            element.appendChild(imageElement);\r\n        }\r\n        return element;\r\n    };\r\n    Image.prototype.getJsonTypeName = function () {\r\n        return \"Image\";\r\n    };\r\n    Image.prototype.getAllActions = function () {\r\n        var result = _super.prototype.getAllActions.call(this);\r\n        if (this.selectAction) {\r\n            result.push(this.selectAction);\r\n        }\r\n        return result;\r\n    };\r\n    Image.prototype.getActionById = function (id) {\r\n        var result = _super.prototype.getActionById.call(this, id);\r\n        if (!result && this.selectAction) {\r\n            result = this.selectAction.getActionById(id);\r\n        }\r\n        return result;\r\n    };\r\n    Image.prototype.getResourceInformation = function () {\r\n        return this.url ? [{ url: this.url, mimeType: \"image\" }] : [];\r\n    };\r\n    Image.urlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"url\");\r\n    Image.altTextProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"altText\");\r\n    Image.backgroundColorProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"backgroundColor\");\r\n    Image.styleProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"style\", Enums.ImageStyle, Enums.ImageStyle.Default);\r\n    Image.sizeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"size\", Enums.Size, Enums.Size.Auto);\r\n    Image.pixelWidthProperty = new ImageDimensionProperty(serialization_1.Versions.v1_1, \"width\", \"pixelWidth\");\r\n    Image.pixelHeightProperty = new ImageDimensionProperty(serialization_1.Versions.v1_1, \"height\", \"pixelHeight\", CardElement.heightProperty);\r\n    Image.selectActionProperty = new ActionProperty(serialization_1.Versions.v1_1, \"selectAction\", [\r\n        \"Action.ShowCard\"\r\n    ]);\r\n    __decorate([\r\n        (0, serialization_1.property)(Image.urlProperty)\r\n    ], Image.prototype, \"url\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Image.altTextProperty)\r\n    ], Image.prototype, \"altText\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Image.backgroundColorProperty)\r\n    ], Image.prototype, \"backgroundColor\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Image.sizeProperty)\r\n    ], Image.prototype, \"size\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Image.styleProperty)\r\n    ], Image.prototype, \"style\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Image.pixelWidthProperty)\r\n    ], Image.prototype, \"pixelWidth\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Image.pixelHeightProperty)\r\n    ], Image.prototype, \"pixelHeight\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Image.selectActionProperty)\r\n    ], Image.prototype, \"selectAction\", void 0);\r\n    return Image;\r\n}(CardElement));\r\nexports.Image = Image;\r\nvar CardElementContainer = /** @class */ (function (_super) {\r\n    __extends(CardElementContainer, _super);\r\n    function CardElementContainer() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.allowVerticalOverflow = false;\r\n        return _this;\r\n    }\r\n    CardElementContainer.prototype.populateSchema = function (schema) {\r\n        _super.prototype.populateSchema.call(this, schema);\r\n        if (!this.isSelectable) {\r\n            schema.remove(CardElementContainer.selectActionProperty);\r\n        }\r\n    };\r\n    //#endregion\r\n    CardElementContainer.prototype.isElementAllowed = function (element) {\r\n        return this.hostConfig.supportsInteractivity || !element.isInteractive;\r\n    };\r\n    CardElementContainer.prototype.applyPadding = function () {\r\n        _super.prototype.applyPadding.call(this);\r\n        if (!this.renderedElement) {\r\n            return;\r\n        }\r\n        var physicalPadding = new shared_1.SpacingDefinition();\r\n        if (this.getEffectivePadding()) {\r\n            physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(this.getEffectivePadding());\r\n        }\r\n        this.renderedElement.style.paddingTop = physicalPadding.top + \"px\";\r\n        this.renderedElement.style.paddingRight = physicalPadding.right + \"px\";\r\n        this.renderedElement.style.paddingBottom = physicalPadding.bottom + \"px\";\r\n        this.renderedElement.style.paddingLeft = physicalPadding.left + \"px\";\r\n        this.renderedElement.style.marginRight = \"0\";\r\n        this.renderedElement.style.marginLeft = \"0\";\r\n    };\r\n    Object.defineProperty(CardElementContainer.prototype, \"isSelectable\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    // This function is kept but return [] when removing Carousel from code\r\n    CardElementContainer.prototype.forbiddenChildElements = function () {\r\n        return [];\r\n    };\r\n    CardElementContainer.prototype.releaseDOMResources = function () {\r\n        _super.prototype.releaseDOMResources.call(this);\r\n        for (var i = 0; i < this.getItemCount(); i++) {\r\n            this.getItemAt(i).releaseDOMResources();\r\n        }\r\n    };\r\n    CardElementContainer.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        for (var i = 0; i < this.getItemCount(); i++) {\r\n            var item = this.getItemAt(i);\r\n            if (!this.hostConfig.supportsInteractivity && item.isInteractive) {\r\n                context.addFailure(this, Enums.ValidationEvent.InteractivityNotAllowed, strings_1.Strings.errors.interactivityNotAllowed());\r\n            }\r\n            if (!this.isElementAllowed(item)) {\r\n                context.addFailure(this, Enums.ValidationEvent.InteractivityNotAllowed, strings_1.Strings.errors.elementTypeNotAllowed(item.getJsonTypeName()));\r\n            }\r\n            item.internalValidateProperties(context);\r\n        }\r\n        if (this._selectAction) {\r\n            this._selectAction.internalValidateProperties(context);\r\n        }\r\n    };\r\n    CardElementContainer.prototype.render = function () {\r\n        var _this = this;\r\n        var element = _super.prototype.render.call(this);\r\n        if (element) {\r\n            var hostConfig = this.hostConfig;\r\n            if (this.allowVerticalOverflow) {\r\n                element.style.overflowX = \"hidden\";\r\n                element.style.overflowY = \"auto\";\r\n            }\r\n            if (element &&\r\n                this.isSelectable &&\r\n                this._selectAction &&\r\n                hostConfig.supportsInteractivity) {\r\n                element.onclick = function (e) {\r\n                    if (_this._selectAction && _this._selectAction.isEffectivelyEnabled()) {\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n                        _this._selectAction.execute();\r\n                    }\r\n                };\r\n                element.onkeypress = function (e) {\r\n                    if (_this._selectAction &&\r\n                        _this._selectAction.isEffectivelyEnabled() &&\r\n                        (e.code === \"Enter\" || e.code === \"Space\")) {\r\n                        // Enter or space pressed\r\n                        e.preventDefault();\r\n                        e.cancelBubble = true;\r\n                        _this._selectAction.execute();\r\n                    }\r\n                };\r\n                this._selectAction.setupElementForAccessibility(element);\r\n                if (this._selectAction.isEffectivelyEnabled()) {\r\n                    element.classList.add(hostConfig.makeCssClassName(\"ac-selectable\"));\r\n                }\r\n            }\r\n        }\r\n        return element;\r\n    };\r\n    CardElementContainer.prototype.updateLayout = function (processChildren) {\r\n        if (processChildren === void 0) { processChildren = true; }\r\n        _super.prototype.updateLayout.call(this, processChildren);\r\n        if (processChildren) {\r\n            for (var i = 0; i < this.getItemCount(); i++) {\r\n                this.getItemAt(i).updateLayout();\r\n            }\r\n        }\r\n    };\r\n    CardElementContainer.prototype.getAllInputs = function (processActions) {\r\n        if (processActions === void 0) { processActions = true; }\r\n        var result = [];\r\n        for (var i = 0; i < this.getItemCount(); i++) {\r\n            result.push.apply(result, this.getItemAt(i).getAllInputs(processActions));\r\n        }\r\n        return result;\r\n    };\r\n    CardElementContainer.prototype.getAllActions = function () {\r\n        var result = _super.prototype.getAllActions.call(this);\r\n        for (var i = 0; i < this.getItemCount(); i++) {\r\n            result.push.apply(result, this.getItemAt(i).getAllActions());\r\n        }\r\n        if (this._selectAction) {\r\n            result.push(this._selectAction);\r\n        }\r\n        return result;\r\n    };\r\n    CardElementContainer.prototype.getResourceInformation = function () {\r\n        var result = [];\r\n        for (var i = 0; i < this.getItemCount(); i++) {\r\n            result.push.apply(result, this.getItemAt(i).getResourceInformation());\r\n        }\r\n        return result;\r\n    };\r\n    CardElementContainer.prototype.getElementById = function (id) {\r\n        var result = _super.prototype.getElementById.call(this, id);\r\n        if (!result) {\r\n            for (var i = 0; i < this.getItemCount(); i++) {\r\n                result = this.getItemAt(i).getElementById(id);\r\n                if (result) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    CardElementContainer.prototype.findDOMNodeOwner = function (node) {\r\n        var _a;\r\n        var target = undefined;\r\n        for (var i = 0; i < this.getItemCount(); i++) {\r\n            // recur through child elements\r\n            target = this.getItemAt(i).findDOMNodeOwner(node);\r\n            if (target) {\r\n                return target;\r\n            }\r\n        }\r\n        // If not found in children, check the actions\r\n        for (var i = 0; i < this.getActionCount(); i++) {\r\n            target = (_a = this.getActionAt(i)) === null || _a === void 0 ? void 0 : _a.findDOMNodeOwner(node);\r\n            if (target) {\r\n                return target;\r\n            }\r\n        }\r\n        // if not found in children or actions, defer to parent implementation\r\n        return _super.prototype.findDOMNodeOwner.call(this, node);\r\n    };\r\n    CardElementContainer.selectActionProperty = new ActionProperty(serialization_1.Versions.v1_1, \"selectAction\", [\r\n        \"Action.ShowCard\"\r\n    ]);\r\n    __decorate([\r\n        (0, serialization_1.property)(CardElementContainer.selectActionProperty)\r\n    ], CardElementContainer.prototype, \"_selectAction\", void 0);\r\n    return CardElementContainer;\r\n}(CardElement));\r\nexports.CardElementContainer = CardElementContainer;\r\nvar ImageSet = /** @class */ (function (_super) {\r\n    __extends(ImageSet, _super);\r\n    function ImageSet() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._images = [];\r\n        _this.imageSize = Enums.ImageSize.Medium;\r\n        return _this;\r\n    }\r\n    //#endregion\r\n    ImageSet.prototype.internalRender = function () {\r\n        var element = undefined;\r\n        if (this._images.length > 0) {\r\n            element = document.createElement(\"div\");\r\n            element.style.display = \"flex\";\r\n            element.style.flexWrap = \"wrap\";\r\n            for (var _i = 0, _a = this._images; _i < _a.length; _i++) {\r\n                var image = _a[_i];\r\n                switch (this.imageSize) {\r\n                    case Enums.ImageSize.Small:\r\n                        image.size = Enums.Size.Small;\r\n                        break;\r\n                    case Enums.ImageSize.Large:\r\n                        image.size = Enums.Size.Large;\r\n                        break;\r\n                    default:\r\n                        image.size = Enums.Size.Medium;\r\n                        break;\r\n                }\r\n                image.maxHeight = this.hostConfig.imageSet.maxImageHeight;\r\n                var renderedImage = image.render();\r\n                if (renderedImage) {\r\n                    renderedImage.style.display = \"inline-flex\";\r\n                    renderedImage.style.margin = \"0px\";\r\n                    renderedImage.style.marginRight = \"10px\";\r\n                    Utils.appendChild(element, renderedImage);\r\n                }\r\n            }\r\n        }\r\n        return element;\r\n    };\r\n    ImageSet.prototype.getItemCount = function () {\r\n        return this._images.length;\r\n    };\r\n    ImageSet.prototype.getItemAt = function (index) {\r\n        return this._images[index];\r\n    };\r\n    ImageSet.prototype.getFirstVisibleRenderedItem = function () {\r\n        return this._images && this._images.length > 0 ? this._images[0] : undefined;\r\n    };\r\n    ImageSet.prototype.getLastVisibleRenderedItem = function () {\r\n        return this._images && this._images.length > 0\r\n            ? this._images[this._images.length - 1]\r\n            : undefined;\r\n    };\r\n    ImageSet.prototype.removeItem = function (item) {\r\n        if (item instanceof Image) {\r\n            var itemIndex = this._images.indexOf(item);\r\n            if (itemIndex >= 0) {\r\n                this._images.splice(itemIndex, 1);\r\n                item.setParent(undefined);\r\n                this.updateLayout();\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    ImageSet.prototype.getJsonTypeName = function () {\r\n        return \"ImageSet\";\r\n    };\r\n    ImageSet.prototype.addImage = function (image) {\r\n        if (!image.parent) {\r\n            this._images.push(image);\r\n            image.setParent(this);\r\n        }\r\n        else {\r\n            throw new Error(\"This image already belongs to another ImageSet\");\r\n        }\r\n    };\r\n    ImageSet.prototype.indexOf = function (cardElement) {\r\n        return cardElement instanceof Image ? this._images.indexOf(cardElement) : -1;\r\n    };\r\n    ImageSet.imagesProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_0, \"images\", Image, function (sender, item) {\r\n        item.setParent(sender);\r\n    });\r\n    ImageSet.imageSizeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"imageSize\", Enums.ImageSize, Enums.ImageSize.Medium);\r\n    __decorate([\r\n        (0, serialization_1.property)(ImageSet.imagesProperty)\r\n    ], ImageSet.prototype, \"_images\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(ImageSet.imageSizeProperty)\r\n    ], ImageSet.prototype, \"imageSize\", void 0);\r\n    return ImageSet;\r\n}(CardElementContainer));\r\nexports.ImageSet = ImageSet;\r\nvar ContentSource = /** @class */ (function (_super) {\r\n    __extends(ContentSource, _super);\r\n    //#endregion\r\n    function ContentSource(url, mimeType) {\r\n        var _this = _super.call(this) || this;\r\n        _this.url = url;\r\n        _this.mimeType = mimeType;\r\n        return _this;\r\n    }\r\n    ContentSource.prototype.isValid = function () {\r\n        return this.mimeType && this.url ? true : false;\r\n    };\r\n    //#region Schema\r\n    ContentSource.mimeTypeProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"mimeType\");\r\n    ContentSource.urlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"url\");\r\n    __decorate([\r\n        (0, serialization_1.property)(ContentSource.mimeTypeProperty)\r\n    ], ContentSource.prototype, \"mimeType\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(ContentSource.urlProperty)\r\n    ], ContentSource.prototype, \"url\", void 0);\r\n    return ContentSource;\r\n}(serialization_1.SerializableObject));\r\nexports.ContentSource = ContentSource;\r\nvar CaptionSource = /** @class */ (function (_super) {\r\n    __extends(CaptionSource, _super);\r\n    //#endregion\r\n    function CaptionSource(url, mimeType, label) {\r\n        var _this = _super.call(this, url, mimeType) || this;\r\n        _this.label = label;\r\n        return _this;\r\n    }\r\n    CaptionSource.prototype.getSchemaKey = function () {\r\n        return \"CaptionSource\";\r\n    };\r\n    CaptionSource.prototype.render = function () {\r\n        var result = undefined;\r\n        if (this.isValid()) {\r\n            result = document.createElement(\"track\");\r\n            result.src = this.url;\r\n            result.kind = \"captions\";\r\n            result.label = this.label;\r\n        }\r\n        return result;\r\n    };\r\n    //#region Schema\r\n    CaptionSource.labelProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_6, \"label\");\r\n    __decorate([\r\n        (0, serialization_1.property)(CaptionSource.labelProperty)\r\n    ], CaptionSource.prototype, \"label\", void 0);\r\n    return CaptionSource;\r\n}(ContentSource));\r\nexports.CaptionSource = CaptionSource;\r\nvar MediaSource = /** @class */ (function (_super) {\r\n    __extends(MediaSource, _super);\r\n    function MediaSource() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    MediaSource.prototype.getSchemaKey = function () {\r\n        return \"MediaSource\";\r\n    };\r\n    MediaSource.prototype.render = function () {\r\n        var result = undefined;\r\n        if (this.isValid()) {\r\n            result = document.createElement(\"source\");\r\n            result.src = this.url;\r\n            result.type = this.mimeType;\r\n        }\r\n        return result;\r\n    };\r\n    return MediaSource;\r\n}(ContentSource));\r\nexports.MediaSource = MediaSource;\r\nvar MediaPlayer = /** @class */ (function () {\r\n    function MediaPlayer() {\r\n    }\r\n    MediaPlayer.prototype.play = function () {\r\n        // Do nothing in base implementation\r\n    };\r\n    Object.defineProperty(MediaPlayer.prototype, \"posterUrl\", {\r\n        get: function () {\r\n            return this._posterUrl;\r\n        },\r\n        set: function (value) {\r\n            this._posterUrl = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MediaPlayer.prototype, \"selectedMediaType\", {\r\n        get: function () {\r\n            return undefined;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return MediaPlayer;\r\n}());\r\nexports.MediaPlayer = MediaPlayer;\r\nvar HTML5MediaPlayer = /** @class */ (function (_super) {\r\n    __extends(HTML5MediaPlayer, _super);\r\n    function HTML5MediaPlayer(owner) {\r\n        var _this = _super.call(this) || this;\r\n        _this.owner = owner;\r\n        _this._selectedSources = [];\r\n        _this._captionSources = [];\r\n        _this.processSources();\r\n        return _this;\r\n    }\r\n    HTML5MediaPlayer.prototype.processSources = function () {\r\n        var _a;\r\n        this._selectedSources = [];\r\n        this._captionSources = [];\r\n        this._selectedMediaType = undefined;\r\n        for (var _i = 0, _b = this.owner.sources; _i < _b.length; _i++) {\r\n            var source = _b[_i];\r\n            var mimeComponents = source.mimeType ? source.mimeType.split(\"/\") : [];\r\n            if (mimeComponents.length === 2) {\r\n                if (!this._selectedMediaType) {\r\n                    var index = HTML5MediaPlayer.supportedMediaTypes.indexOf(mimeComponents[0]);\r\n                    if (index >= 0) {\r\n                        this._selectedMediaType = HTML5MediaPlayer.supportedMediaTypes[index];\r\n                    }\r\n                }\r\n                if (mimeComponents[0] === this._selectedMediaType) {\r\n                    this._selectedSources.push(source);\r\n                }\r\n            }\r\n        }\r\n        (_a = this._captionSources).push.apply(_a, this.owner.captionSources);\r\n    };\r\n    HTML5MediaPlayer.prototype.canPlay = function () {\r\n        return this._selectedSources.length > 0;\r\n    };\r\n    HTML5MediaPlayer.prototype.fetchVideoDetails = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    HTML5MediaPlayer.prototype.render = function () {\r\n        if (this._selectedMediaType === \"video\") {\r\n            this._mediaElement = document.createElement(\"video\");\r\n        }\r\n        else {\r\n            this._mediaElement = document.createElement(\"audio\");\r\n        }\r\n        this._mediaElement.setAttribute(\"aria-label\", this.owner.altText ? this.owner.altText : strings_1.Strings.defaults.mediaPlayerAriaLabel());\r\n        this._mediaElement.setAttribute(\"webkit-playsinline\", \"\");\r\n        this._mediaElement.setAttribute(\"playsinline\", \"\");\r\n        // We enable crossorigin for cases where the caption file has a different domain than\r\n        // the video file. If the caption file lives in a different domain than the video file\r\n        // and crossorigin is not set, then the caption file will fail to load.\r\n        this._mediaElement.setAttribute(\"crossorigin\", \"\");\r\n        this._mediaElement.autoplay = true;\r\n        this._mediaElement.controls = true;\r\n        if (Utils.isMobileOS()) {\r\n            this._mediaElement.muted = true;\r\n        }\r\n        this._mediaElement.preload = \"none\";\r\n        this._mediaElement.style.width = \"100%\";\r\n        for (var _i = 0, _a = this.owner.sources; _i < _a.length; _i++) {\r\n            var source = _a[_i];\r\n            var renderedSource = source.render();\r\n            Utils.appendChild(this._mediaElement, renderedSource);\r\n        }\r\n        for (var _b = 0, _c = this.owner.captionSources; _b < _c.length; _b++) {\r\n            var captionSource = _c[_b];\r\n            if (captionSource.mimeType == \"vtt\") {\r\n                var renderedCaptionSource = captionSource.render();\r\n                Utils.appendChild(this._mediaElement, renderedCaptionSource);\r\n            }\r\n        }\r\n        return this._mediaElement;\r\n    };\r\n    HTML5MediaPlayer.prototype.play = function () {\r\n        if (this._mediaElement) {\r\n            this._mediaElement.play();\r\n        }\r\n    };\r\n    Object.defineProperty(HTML5MediaPlayer.prototype, \"selectedMediaType\", {\r\n        get: function () {\r\n            return this._selectedMediaType;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    HTML5MediaPlayer.supportedMediaTypes = [\"audio\", \"video\"];\r\n    return HTML5MediaPlayer;\r\n}(MediaPlayer));\r\nexports.HTML5MediaPlayer = HTML5MediaPlayer;\r\nvar CustomMediaPlayer = /** @class */ (function (_super) {\r\n    __extends(CustomMediaPlayer, _super);\r\n    function CustomMediaPlayer(matches) {\r\n        return _super.call(this) || this;\r\n    }\r\n    return CustomMediaPlayer;\r\n}(MediaPlayer));\r\nexports.CustomMediaPlayer = CustomMediaPlayer;\r\nvar IFrameMediaMediaPlayer = /** @class */ (function (_super) {\r\n    __extends(IFrameMediaMediaPlayer, _super);\r\n    function IFrameMediaMediaPlayer(matches, iFrameTitle) {\r\n        var _this = _super.call(this, matches) || this;\r\n        _this.iFrameTitle = iFrameTitle;\r\n        if (matches.length >= 2) {\r\n            _this._videoId = matches[1];\r\n        }\r\n        return _this;\r\n    }\r\n    IFrameMediaMediaPlayer.prototype.canPlay = function () {\r\n        return this._videoId !== undefined;\r\n    };\r\n    IFrameMediaMediaPlayer.prototype.render = function () {\r\n        var container = document.createElement(\"div\");\r\n        container.style.position = \"relative\";\r\n        container.style.width = \"100%\";\r\n        container.style.height = \"0\";\r\n        container.style.paddingBottom = \"56.25%\";\r\n        var iFrame = document.createElement(\"iframe\");\r\n        iFrame.style.position = \"absolute\";\r\n        iFrame.style.top = \"0\";\r\n        iFrame.style.left = \"0\";\r\n        iFrame.style.width = \"100%\";\r\n        iFrame.style.height = \"100%\";\r\n        iFrame.src = this.getEmbedVideoUrl();\r\n        iFrame.frameBorder = \"0\";\r\n        if (this.iFrameTitle) {\r\n            iFrame.title = this.iFrameTitle;\r\n        }\r\n        iFrame.allow =\r\n            \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\";\r\n        iFrame.allowFullscreen = true;\r\n        container.appendChild(iFrame);\r\n        return container;\r\n    };\r\n    Object.defineProperty(IFrameMediaMediaPlayer.prototype, \"videoId\", {\r\n        get: function () {\r\n            return this._videoId;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return IFrameMediaMediaPlayer;\r\n}(CustomMediaPlayer));\r\nexports.IFrameMediaMediaPlayer = IFrameMediaMediaPlayer;\r\nvar VimeoPlayer = /** @class */ (function (_super) {\r\n    __extends(VimeoPlayer, _super);\r\n    function VimeoPlayer() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    VimeoPlayer.prototype.fetchVideoDetails = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var oEmbedUrl, response, json;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        oEmbedUrl = \"https://vimeo.com/api/oembed.json?url=\".concat(this.getEmbedVideoUrl());\r\n                        return [4 /*yield*/, fetch(oEmbedUrl)];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        if (!response.ok) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, response.json()];\r\n                    case 2:\r\n                        json = _a.sent();\r\n                        this.posterUrl = json[\"thumbnail_url\"];\r\n                        _a.label = 3;\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    VimeoPlayer.prototype.getEmbedVideoUrl = function () {\r\n        return \"https://player.vimeo.com/video/\".concat(this.videoId, \"?autoplay=1\");\r\n    };\r\n    return VimeoPlayer;\r\n}(IFrameMediaMediaPlayer));\r\nexports.VimeoPlayer = VimeoPlayer;\r\nvar DailymotionPlayer = /** @class */ (function (_super) {\r\n    __extends(DailymotionPlayer, _super);\r\n    function DailymotionPlayer() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    DailymotionPlayer.prototype.fetchVideoDetails = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var apiUrl, response, json;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        apiUrl = \"https://api.dailymotion.com/video/\".concat(this.videoId, \"?fields=thumbnail_720_url\");\r\n                        return [4 /*yield*/, fetch(apiUrl)];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        if (!response.ok) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, response.json()];\r\n                    case 2:\r\n                        json = _a.sent();\r\n                        this.posterUrl = json[\"thumbnail_720_url\"];\r\n                        _a.label = 3;\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    DailymotionPlayer.prototype.getEmbedVideoUrl = function () {\r\n        return \"https://www.dailymotion.com/embed/video/\".concat(this.videoId, \"?autoplay=1\");\r\n    };\r\n    return DailymotionPlayer;\r\n}(IFrameMediaMediaPlayer));\r\nexports.DailymotionPlayer = DailymotionPlayer;\r\nvar YouTubePlayer = /** @class */ (function (_super) {\r\n    __extends(YouTubePlayer, _super);\r\n    function YouTubePlayer(matches, iFrameTitle) {\r\n        var _this = _super.call(this, matches, iFrameTitle) || this;\r\n        _this.iFrameTitle = iFrameTitle;\r\n        if (matches.length >= 3 && matches[2] !== undefined) {\r\n            _this._startTimeIndex = parseInt(matches[2]);\r\n        }\r\n        return _this;\r\n    }\r\n    YouTubePlayer.prototype.fetchVideoDetails = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                this.posterUrl = this.videoId\r\n                    ? \"https://img.youtube.com/vi/\".concat(this.videoId, \"/maxresdefault.jpg\")\r\n                    : undefined;\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    YouTubePlayer.prototype.getEmbedVideoUrl = function () {\r\n        var url = \"https://www.youtube.com/embed/\".concat(this.videoId, \"?autoplay=1\");\r\n        if (this._startTimeIndex !== undefined) {\r\n            url += \"&start=\".concat(this._startTimeIndex);\r\n        }\r\n        return url;\r\n    };\r\n    return YouTubePlayer;\r\n}(IFrameMediaMediaPlayer));\r\nexports.YouTubePlayer = YouTubePlayer;\r\nvar Media = /** @class */ (function (_super) {\r\n    __extends(Media, _super);\r\n    function Media() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.sources = [];\r\n        _this.captionSources = [];\r\n        return _this;\r\n    }\r\n    Media.prototype.createMediaPlayer = function () {\r\n        for (var _i = 0, _a = Media.customMediaPlayers; _i < _a.length; _i++) {\r\n            var provider = _a[_i];\r\n            for (var _b = 0, _c = this.sources; _b < _c.length; _b++) {\r\n                var source = _c[_b];\r\n                if (source.url) {\r\n                    for (var _d = 0, _f = provider.urlPatterns; _d < _f.length; _d++) {\r\n                        var pattern = _f[_d];\r\n                        var matches = pattern.exec(source.url);\r\n                        if (matches !== null) {\r\n                            return provider.createMediaPlayer(matches);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return new HTML5MediaPlayer(this);\r\n    };\r\n    Media.prototype.handlePlayButtonInvoke = function (event) {\r\n        if (this.hostConfig.media.allowInlinePlayback) {\r\n            event.preventDefault();\r\n            event.cancelBubble = true;\r\n            if (this.renderedElement) {\r\n                var mediaPlayerElement = this._mediaPlayer.render();\r\n                clearElement(this.renderedElement);\r\n                this.renderedElement.appendChild(mediaPlayerElement);\r\n                this._mediaPlayer.play();\r\n                mediaPlayerElement.focus();\r\n            }\r\n        }\r\n        else {\r\n            if (Media.onPlay) {\r\n                event.preventDefault();\r\n                event.cancelBubble = true;\r\n                Media.onPlay(this);\r\n            }\r\n        }\r\n    };\r\n    Media.prototype.displayPoster = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var playButtonArrowWidth, playButtonArrowHeight, posterRootElement_1, posterUrl, posterImageElement_1, playButtonOuterElement, playButtonInnerElement, playButtonContainer;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                if (this.renderedElement) {\r\n                    playButtonArrowWidth = 12;\r\n                    playButtonArrowHeight = 15;\r\n                    posterRootElement_1 = document.createElement(\"div\");\r\n                    posterRootElement_1.className = this.hostConfig.makeCssClassName(\"ac-media-poster\");\r\n                    posterRootElement_1.setAttribute(\"role\", \"contentinfo\");\r\n                    posterRootElement_1.setAttribute(\"aria-label\", this.altText ? this.altText : strings_1.Strings.defaults.mediaPlayerAriaLabel());\r\n                    posterRootElement_1.style.position = \"relative\";\r\n                    posterRootElement_1.style.display = \"flex\";\r\n                    posterUrl = this.poster ? this.poster : this._mediaPlayer.posterUrl;\r\n                    if (!posterUrl) {\r\n                        posterUrl = this.hostConfig.media.defaultPoster;\r\n                    }\r\n                    if (posterUrl) {\r\n                        posterImageElement_1 = document.createElement(\"img\");\r\n                        posterImageElement_1.style.width = \"100%\";\r\n                        posterImageElement_1.style.height = \"100%\";\r\n                        posterImageElement_1.setAttribute(\"role\", \"presentation\");\r\n                        posterImageElement_1.onerror = function (_e) {\r\n                            if (posterImageElement_1.parentNode) {\r\n                                posterImageElement_1.parentNode.removeChild(posterImageElement_1);\r\n                            }\r\n                            posterRootElement_1.classList.add(\"empty\");\r\n                            posterRootElement_1.style.minHeight = \"150px\";\r\n                        };\r\n                        posterImageElement_1.src = posterUrl;\r\n                        posterRootElement_1.appendChild(posterImageElement_1);\r\n                    }\r\n                    else {\r\n                        posterRootElement_1.classList.add(\"empty\");\r\n                        posterRootElement_1.style.minHeight = \"150px\";\r\n                    }\r\n                    if (this.hostConfig.supportsInteractivity && this._mediaPlayer.canPlay()) {\r\n                        playButtonOuterElement = document.createElement(\"div\");\r\n                        playButtonOuterElement.tabIndex = 0;\r\n                        playButtonOuterElement.setAttribute(\"role\", \"button\");\r\n                        playButtonOuterElement.setAttribute(\"aria-label\", strings_1.Strings.defaults.mediaPlayerPlayMedia());\r\n                        playButtonOuterElement.className =\r\n                            this.hostConfig.makeCssClassName(\"ac-media-playButton\");\r\n                        playButtonOuterElement.style.display = \"flex\";\r\n                        playButtonOuterElement.style.alignItems = \"center\";\r\n                        playButtonOuterElement.style.justifyContent = \"center\";\r\n                        playButtonOuterElement.onclick = function (e) {\r\n                            _this.handlePlayButtonInvoke(e);\r\n                        };\r\n                        playButtonOuterElement.onkeypress = function (e) {\r\n                            if (e.code === \"Enter\" || e.code === \"Space\") {\r\n                                // space or enter\r\n                                _this.handlePlayButtonInvoke(e);\r\n                            }\r\n                        };\r\n                        playButtonInnerElement = document.createElement(\"div\");\r\n                        playButtonInnerElement.className = this.hostConfig.makeCssClassName(\"ac-media-playButton-arrow\");\r\n                        playButtonInnerElement.style.width = playButtonArrowWidth + \"px\";\r\n                        playButtonInnerElement.style.height = playButtonArrowHeight + \"px\";\r\n                        playButtonInnerElement.style.borderTopWidth = playButtonArrowHeight / 2 + \"px\";\r\n                        playButtonInnerElement.style.borderBottomWidth = playButtonArrowHeight / 2 + \"px\";\r\n                        playButtonInnerElement.style.borderLeftWidth = playButtonArrowWidth + \"px\";\r\n                        playButtonInnerElement.style.borderRightWidth = \"0\";\r\n                        playButtonInnerElement.style.borderStyle = \"solid\";\r\n                        playButtonInnerElement.style.borderTopColor = \"transparent\";\r\n                        playButtonInnerElement.style.borderRightColor = \"transparent\";\r\n                        playButtonInnerElement.style.borderBottomColor = \"transparent\";\r\n                        playButtonInnerElement.style.transform =\r\n                            \"translate(\" + playButtonArrowWidth / 10 + \"px,0px)\";\r\n                        playButtonOuterElement.appendChild(playButtonInnerElement);\r\n                        playButtonContainer = document.createElement(\"div\");\r\n                        playButtonContainer.style.position = \"absolute\";\r\n                        playButtonContainer.style.left = \"0\";\r\n                        playButtonContainer.style.top = \"0\";\r\n                        playButtonContainer.style.width = \"100%\";\r\n                        playButtonContainer.style.height = \"100%\";\r\n                        playButtonContainer.style.display = \"flex\";\r\n                        playButtonContainer.style.justifyContent = \"center\";\r\n                        playButtonContainer.style.alignItems = \"center\";\r\n                        playButtonContainer.appendChild(playButtonOuterElement);\r\n                        posterRootElement_1.appendChild(playButtonContainer);\r\n                    }\r\n                    clearElement(this.renderedElement);\r\n                    this.renderedElement.appendChild(posterRootElement_1);\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    Media.prototype.internalRender = function () {\r\n        var element = document.createElement(\"div\");\r\n        element.className = this.hostConfig.makeCssClassName(\"ac-media\");\r\n        return element;\r\n    };\r\n    Media.prototype.render = function () {\r\n        var _this = this;\r\n        var result = _super.prototype.render.call(this);\r\n        if (result) {\r\n            this._mediaPlayer = this.createMediaPlayer();\r\n            this._mediaPlayer.fetchVideoDetails().then(function () { return _this.displayPoster(); });\r\n        }\r\n        return result;\r\n    };\r\n    Media.prototype.releaseDOMResources = function () {\r\n        _super.prototype.releaseDOMResources.call(this);\r\n        this.displayPoster();\r\n    };\r\n    Media.prototype.getJsonTypeName = function () {\r\n        return \"Media\";\r\n    };\r\n    Media.prototype.getResourceInformation = function () {\r\n        var result = [];\r\n        if (this._mediaPlayer) {\r\n            var posterUrl = this.poster ? this.poster : this.hostConfig.media.defaultPoster;\r\n            if (posterUrl) {\r\n                result.push({ url: posterUrl, mimeType: \"image\" });\r\n            }\r\n        }\r\n        for (var _i = 0, _a = this.sources; _i < _a.length; _i++) {\r\n            var mediaSource = _a[_i];\r\n            if (mediaSource.isValid()) {\r\n                result.push({\r\n                    /* eslint-disable @typescript-eslint/no-unnecessary-type-assertion -- `mediaSource.url` is of type `string | undefined`, but is validated by `isValid()` call */\r\n                    url: mediaSource.url,\r\n                    mimeType: mediaSource.mimeType\r\n                    /* eslint-enable @typescript-eslint/no-unnecessary-type-assertion */\r\n                });\r\n            }\r\n        }\r\n        for (var _b = 0, _c = this.captionSources; _b < _c.length; _b++) {\r\n            var captionSource = _c[_b];\r\n            if (captionSource.isValid()) {\r\n                result.push({\r\n                    /* eslint-disable @typescript-eslint/no-unnecessary-type-assertion -- `captionSource.url` is of type `string | undefined`, but is validated by `isValid()` call */\r\n                    url: captionSource.url,\r\n                    mimeType: captionSource.mimeType\r\n                    /* eslint-enable @typescript-eslint/no-unnecessary-type-assertion */\r\n                });\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(Media.prototype, \"selectedMediaType\", {\r\n        get: function () {\r\n            return this._mediaPlayer.selectedMediaType;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Media.customMediaPlayers = [\r\n        {\r\n            urlPatterns: [\r\n                /^(?:https?:\\/\\/)?(?:www.)?youtube.com\\/watch\\?(?=.*v=([\\w\\d-_]+))(?=(?:.*t=(\\d+))?).*/gi,\r\n                /^(?:https?:\\/\\/)?youtu.be\\/([\\w\\d-_]+)(?:\\?t=(\\d+))?/gi\r\n            ],\r\n            createMediaPlayer: function (matches) {\r\n                return new YouTubePlayer(matches, strings_1.Strings.defaults.youTubeVideoPlayer());\r\n            }\r\n        },\r\n        {\r\n            urlPatterns: [/^(?:https?:\\/\\/)?vimeo.com\\/([\\w\\d-_]+).*/gi],\r\n            createMediaPlayer: function (matches) {\r\n                return new VimeoPlayer(matches, strings_1.Strings.defaults.vimeoVideoPlayer());\r\n            }\r\n        },\r\n        {\r\n            urlPatterns: [/^(?:https?:\\/\\/)?(?:www.)?dailymotion.com\\/video\\/([\\w\\d-_]+).*/gi],\r\n            createMediaPlayer: function (matches) {\r\n                return new DailymotionPlayer(matches, strings_1.Strings.defaults.dailymotionVideoPlayer());\r\n            }\r\n        }\r\n    ];\r\n    //#region Schema\r\n    Media.sourcesProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_1, \"sources\", MediaSource);\r\n    Media.captionSourcesProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_6, \"captionSources\", CaptionSource);\r\n    Media.posterProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"poster\");\r\n    Media.altTextProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"altText\");\r\n    __decorate([\r\n        (0, serialization_1.property)(Media.sourcesProperty)\r\n    ], Media.prototype, \"sources\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Media.captionSourcesProperty)\r\n    ], Media.prototype, \"captionSources\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Media.posterProperty)\r\n    ], Media.prototype, \"poster\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Media.altTextProperty)\r\n    ], Media.prototype, \"altText\", void 0);\r\n    return Media;\r\n}(CardElement));\r\nexports.Media = Media;\r\nvar Input = /** @class */ (function (_super) {\r\n    __extends(Input, _super);\r\n    function Input() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Input.prototype.getAllLabelIds = function () {\r\n        var labelIds = [];\r\n        if (this.labelledBy) {\r\n            labelIds.push(this.labelledBy);\r\n        }\r\n        if (this._renderedLabelElement) {\r\n            labelIds.push(this._renderedLabelElement.id);\r\n        }\r\n        if (this._renderedErrorMessageElement) {\r\n            labelIds.push(this._renderedErrorMessageElement.id);\r\n        }\r\n        return labelIds;\r\n    };\r\n    Input.prototype.updateInputControlAriaLabelledBy = function () {\r\n        if (this._renderedInputControlElement) {\r\n            var labelIds = this.getAllLabelIds();\r\n            if (labelIds.length > 0) {\r\n                this._renderedInputControlElement.setAttribute(\"aria-labelledby\", labelIds.join(\" \"));\r\n            }\r\n            else {\r\n                this._renderedInputControlElement.removeAttribute(\"aria-labelledby\");\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(Input.prototype, \"isNullable\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Input.prototype, \"renderedInputControlElement\", {\r\n        get: function () {\r\n            return this._renderedInputControlElement;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Input.prototype, \"inputControlContainerElement\", {\r\n        get: function () {\r\n            return this._inputControlContainerElement;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Input.prototype.overrideInternalRender = function () {\r\n        var hostConfig = this.hostConfig;\r\n        this._outerContainerElement = document.createElement(\"div\");\r\n        this._outerContainerElement.style.display = \"flex\";\r\n        this._outerContainerElement.style.flexDirection = \"column\";\r\n        var renderedInputControlId = Utils.generateUniqueId();\r\n        if (this.label) {\r\n            var labelRichTextBlock = new RichTextBlock();\r\n            labelRichTextBlock.setParent(this);\r\n            labelRichTextBlock.forElementId = renderedInputControlId;\r\n            var labelInline = new TextRun(this.label);\r\n            labelRichTextBlock.addInline(labelInline);\r\n            if (this.isRequired) {\r\n                labelInline.init(hostConfig.inputs.label.requiredInputs);\r\n                var isRequiredCueInline = new TextRun(hostConfig.inputs.label.requiredInputs.suffix);\r\n                isRequiredCueInline.color = hostConfig.inputs.label.requiredInputs.suffixColor;\r\n                isRequiredCueInline.ariaHidden = true;\r\n                labelRichTextBlock.addInline(isRequiredCueInline);\r\n            }\r\n            else {\r\n                labelInline.init(hostConfig.inputs.label.optionalInputs);\r\n            }\r\n            this._renderedLabelElement = labelRichTextBlock.render();\r\n            if (this._renderedLabelElement) {\r\n                this._renderedLabelElement.id = Utils.generateUniqueId();\r\n                this._renderedLabelElement.style.marginBottom =\r\n                    hostConfig.getEffectiveSpacing(hostConfig.inputs.label.inputSpacing) + \"px\";\r\n                this._outerContainerElement.appendChild(this._renderedLabelElement);\r\n            }\r\n        }\r\n        this._inputControlContainerElement = document.createElement(\"div\");\r\n        this._inputControlContainerElement.className =\r\n            hostConfig.makeCssClassName(\"ac-input-container\");\r\n        this._inputControlContainerElement.style.display = \"flex\";\r\n        if (this.height === \"stretch\") {\r\n            this._inputControlContainerElement.style.alignItems = \"stretch\";\r\n            this._inputControlContainerElement.style.flex = \"1 1 auto\";\r\n        }\r\n        this._renderedInputControlElement = this.internalRender();\r\n        if (this._renderedInputControlElement) {\r\n            this._renderedInputControlElement.id = renderedInputControlId;\r\n            this._renderedInputControlElement.style.minWidth = \"0px\";\r\n            if (this.isNullable && this.isRequired) {\r\n                this._renderedInputControlElement.setAttribute(\"aria-required\", \"true\");\r\n                this._renderedInputControlElement.classList.add(hostConfig.makeCssClassName(\"ac-input-required\"));\r\n            }\r\n            this._inputControlContainerElement.appendChild(this._renderedInputControlElement);\r\n            this._outerContainerElement.appendChild(this._inputControlContainerElement);\r\n            this.updateInputControlAriaLabelledBy();\r\n            return this._outerContainerElement;\r\n        }\r\n        this.resetDirtyState();\r\n        return undefined;\r\n    };\r\n    Input.prototype.valueChanged = function () {\r\n        this.getRootElement().updateActionsEnabledState();\r\n        if (this.isValid()) {\r\n            this.resetValidationFailureCue();\r\n        }\r\n        if (this.onValueChanged) {\r\n            this.onValueChanged(this);\r\n        }\r\n        raiseInputValueChangedEvent(this);\r\n    };\r\n    Input.prototype.resetValidationFailureCue = function () {\r\n        if (this.renderedInputControlElement) {\r\n            this.renderedInputControlElement.classList.remove(this.hostConfig.makeCssClassName(\"ac-input-validation-failed\"));\r\n            this.updateInputControlAriaLabelledBy();\r\n            if (this._renderedErrorMessageElement) {\r\n                this._outerContainerElement.removeChild(this._renderedErrorMessageElement);\r\n                this._renderedErrorMessageElement = undefined;\r\n            }\r\n        }\r\n    };\r\n    Input.prototype.showValidationErrorMessage = function () {\r\n        if (this.renderedElement &&\r\n            this.errorMessage &&\r\n            shared_1.GlobalSettings.displayInputValidationErrors) {\r\n            var errorMessageTextBlock = new TextBlock();\r\n            errorMessageTextBlock.setParent(this);\r\n            errorMessageTextBlock.text = this.errorMessage;\r\n            errorMessageTextBlock.wrap = true;\r\n            errorMessageTextBlock.init(this.hostConfig.inputs.errorMessage);\r\n            this._renderedErrorMessageElement = errorMessageTextBlock.render();\r\n            if (this._renderedErrorMessageElement) {\r\n                this._renderedErrorMessageElement.id = Utils.generateUniqueId();\r\n                this._outerContainerElement.appendChild(this._renderedErrorMessageElement);\r\n                this.updateInputControlAriaLabelledBy();\r\n            }\r\n        }\r\n    };\r\n    Input.prototype.focus = function () {\r\n        if (this._renderedInputControlElement) {\r\n            this._renderedInputControlElement.focus();\r\n        }\r\n    };\r\n    Input.prototype.isValid = function () {\r\n        return true;\r\n    };\r\n    Input.prototype.isDirty = function () {\r\n        return this.value !== this._oldValue;\r\n    };\r\n    Input.prototype.resetDirtyState = function () {\r\n        this._oldValue = this.value;\r\n    };\r\n    Input.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        if (!this.id) {\r\n            context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.inputsMustHaveUniqueId());\r\n        }\r\n        if (this.isRequired) {\r\n            if (!this.label) {\r\n                context.addFailure(this, Enums.ValidationEvent.RequiredInputsShouldHaveLabel, \"Required inputs should have a label\");\r\n            }\r\n            if (!this.errorMessage) {\r\n                context.addFailure(this, Enums.ValidationEvent.RequiredInputsShouldHaveErrorMessage, \"Required inputs should have an error message\");\r\n            }\r\n        }\r\n    };\r\n    Input.prototype.validateValue = function () {\r\n        this.resetValidationFailureCue();\r\n        var result = this.isRequired ? this.isSet() && this.isValid() : this.isValid();\r\n        if (!result && this.renderedInputControlElement) {\r\n            this.renderedInputControlElement.classList.add(this.hostConfig.makeCssClassName(\"ac-input-validation-failed\"));\r\n            this.showValidationErrorMessage();\r\n        }\r\n        return result;\r\n    };\r\n    Input.prototype.getAllInputs = function (processActions) {\r\n        if (processActions === void 0) { processActions = true; }\r\n        return [this];\r\n    };\r\n    Input.prototype.render = function () {\r\n        var result = _super.prototype.render.call(this);\r\n        this.resetDirtyState();\r\n        return result;\r\n    };\r\n    Object.defineProperty(Input.prototype, \"isInteractive\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#region Schema\r\n    Input.labelProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_3, \"label\", true);\r\n    Input.isRequiredProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_3, \"isRequired\", false);\r\n    Input.errorMessageProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_3, \"errorMessage\", true);\r\n    __decorate([\r\n        (0, serialization_1.property)(Input.labelProperty)\r\n    ], Input.prototype, \"label\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Input.isRequiredProperty)\r\n    ], Input.prototype, \"isRequired\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Input.errorMessageProperty)\r\n    ], Input.prototype, \"errorMessage\", void 0);\r\n    return Input;\r\n}(CardElement));\r\nexports.Input = Input;\r\nvar TextInput = /** @class */ (function (_super) {\r\n    __extends(TextInput, _super);\r\n    function TextInput() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.isMultiline = false;\r\n        _this.style = Enums.InputTextStyle.Text;\r\n        return _this;\r\n    }\r\n    //#endregion\r\n    TextInput.prototype.setupInput = function (input) {\r\n        var _this = this;\r\n        input.style.flex = \"1 1 auto\";\r\n        input.tabIndex = this.isDesignMode() ? -1 : 0;\r\n        if (this.placeholder) {\r\n            input.placeholder = this.placeholder;\r\n            input.setAttribute(\"aria-label\", this.placeholder);\r\n        }\r\n        if (this.defaultValue) {\r\n            input.value = this.defaultValue;\r\n        }\r\n        if (this.maxLength && this.maxLength > 0) {\r\n            input.maxLength = this.maxLength;\r\n        }\r\n        input.oninput = function () {\r\n            _this.valueChanged();\r\n        };\r\n        input.onkeypress = function (e) {\r\n            // Ctrl+Enter pressed\r\n            if (e.ctrlKey &&\r\n                e.code === \"Enter\" &&\r\n                _this.inlineAction &&\r\n                _this.inlineAction.isEffectivelyEnabled()) {\r\n                _this.inlineAction.execute();\r\n            }\r\n        };\r\n    };\r\n    TextInput.prototype.internalRender = function () {\r\n        var result;\r\n        if (this.isMultiline && this.style !== Enums.InputTextStyle.Password) {\r\n            result = document.createElement(\"textarea\");\r\n            result.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-textInput\", \"ac-multiline\");\r\n            if (this.height === \"stretch\") {\r\n                result.style.height = \"initial\";\r\n            }\r\n        }\r\n        else {\r\n            result = document.createElement(\"input\");\r\n            result.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-textInput\");\r\n            result.type = Enums.InputTextStyle[this.style].toLowerCase();\r\n        }\r\n        this.setupInput(result);\r\n        return result;\r\n    };\r\n    TextInput.prototype.overrideInternalRender = function () {\r\n        var _this = this;\r\n        var renderedInputControl = _super.prototype.overrideInternalRender.call(this);\r\n        if (this.inlineAction) {\r\n            var button_1 = document.createElement(\"button\");\r\n            button_1.className = this.hostConfig.makeCssClassName(this.inlineAction.isEffectivelyEnabled()\r\n                ? \"ac-inlineActionButton\"\r\n                : \"ac-inlineActionButton-disabled\");\r\n            button_1.onclick = function (e) {\r\n                if (_this.inlineAction && _this.inlineAction.isEffectivelyEnabled()) {\r\n                    e.preventDefault();\r\n                    e.cancelBubble = true;\r\n                    _this.inlineAction.execute();\r\n                }\r\n            };\r\n            if (this.inlineAction.iconUrl) {\r\n                button_1.classList.add(\"iconOnly\");\r\n                var icon_1 = document.createElement(\"img\");\r\n                icon_1.style.height = \"100%\";\r\n                icon_1.setAttribute(\"role\", \"presentation\");\r\n                // The below trick is necessary as a workaround in Chrome where the icon is initially displayed\r\n                // at its native size then resized to 100% of the button's height. This cfreates an unpleasant\r\n                // flicker. On top of that, Chrome's flex implementation fails to prperly re-layout the button\r\n                // after the image has loaded and been gicven its final size. The below trick also fixes that.\r\n                icon_1.style.display = \"none\";\r\n                icon_1.onload = function () {\r\n                    icon_1.style.removeProperty(\"display\");\r\n                };\r\n                icon_1.onerror = function () {\r\n                    button_1.removeChild(icon_1);\r\n                    button_1.classList.remove(\"iconOnly\");\r\n                    button_1.classList.add(\"textOnly\");\r\n                    button_1.textContent =\r\n                        _this.inlineAction && _this.inlineAction.title\r\n                            ? _this.inlineAction.title\r\n                            : strings_1.Strings.defaults.inlineActionTitle();\r\n                };\r\n                icon_1.src = this.inlineAction.iconUrl;\r\n                button_1.appendChild(icon_1);\r\n                button_1.title = this.inlineAction.title\r\n                    ? this.inlineAction.title\r\n                    : strings_1.Strings.defaults.inlineActionTitle();\r\n            }\r\n            else {\r\n                button_1.classList.add(\"textOnly\");\r\n                button_1.textContent = this.inlineAction.title\r\n                    ? this.inlineAction.title\r\n                    : strings_1.Strings.defaults.inlineActionTitle();\r\n            }\r\n            this.inlineAction.setupElementForAccessibility(button_1, true);\r\n            button_1.style.marginLeft = \"8px\";\r\n            this.inputControlContainerElement.appendChild(button_1);\r\n        }\r\n        return renderedInputControl;\r\n    };\r\n    TextInput.prototype.getJsonTypeName = function () {\r\n        return \"Input.Text\";\r\n    };\r\n    TextInput.prototype.getAllActions = function () {\r\n        var result = _super.prototype.getAllActions.call(this);\r\n        if (this.inlineAction) {\r\n            result.push(this.inlineAction);\r\n        }\r\n        return result;\r\n    };\r\n    TextInput.prototype.getActionById = function (id) {\r\n        var result = _super.prototype.getActionById.call(this, id);\r\n        if (!result && this.inlineAction) {\r\n            result = this.inlineAction.getActionById(id);\r\n        }\r\n        return result;\r\n    };\r\n    TextInput.prototype.isSet = function () {\r\n        return this.value ? true : false;\r\n    };\r\n    TextInput.prototype.isValid = function () {\r\n        if (!this.value) {\r\n            return true;\r\n        }\r\n        if (this.regex) {\r\n            return new RegExp(this.regex, \"g\").test(this.value);\r\n        }\r\n        return true;\r\n    };\r\n    Object.defineProperty(TextInput.prototype, \"value\", {\r\n        get: function () {\r\n            if (this.renderedInputControlElement) {\r\n                if (this.isMultiline) {\r\n                    return this.renderedInputControlElement.value;\r\n                }\r\n                else {\r\n                    return this.renderedInputControlElement.value;\r\n                }\r\n            }\r\n            else {\r\n                return undefined;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    TextInput.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"value\");\r\n    TextInput.maxLengthProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, \"maxLength\");\r\n    TextInput.isMultilineProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, \"isMultiline\", false);\r\n    TextInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"placeholder\");\r\n    TextInput.styleProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_0, \"style\", Enums.InputTextStyle, Enums.InputTextStyle.Text, [\r\n        { value: Enums.InputTextStyle.Text },\r\n        { value: Enums.InputTextStyle.Tel },\r\n        { value: Enums.InputTextStyle.Url },\r\n        { value: Enums.InputTextStyle.Email },\r\n        { value: Enums.InputTextStyle.Password, targetVersion: serialization_1.Versions.v1_5 }\r\n    ]);\r\n    TextInput.inlineActionProperty = new ActionProperty(serialization_1.Versions.v1_0, \"inlineAction\", [\r\n        \"Action.ShowCard\"\r\n    ]);\r\n    TextInput.regexProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_3, \"regex\", true);\r\n    __decorate([\r\n        (0, serialization_1.property)(TextInput.valueProperty)\r\n    ], TextInput.prototype, \"defaultValue\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(TextInput.maxLengthProperty)\r\n    ], TextInput.prototype, \"maxLength\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(TextInput.isMultilineProperty)\r\n    ], TextInput.prototype, \"isMultiline\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(TextInput.placeholderProperty)\r\n    ], TextInput.prototype, \"placeholder\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(TextInput.styleProperty)\r\n    ], TextInput.prototype, \"style\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(TextInput.inlineActionProperty)\r\n    ], TextInput.prototype, \"inlineAction\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(TextInput.regexProperty)\r\n    ], TextInput.prototype, \"regex\", void 0);\r\n    return TextInput;\r\n}(Input));\r\nexports.TextInput = TextInput;\r\nvar ToggleInput = /** @class */ (function (_super) {\r\n    __extends(ToggleInput, _super);\r\n    function ToggleInput() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.valueOn = \"true\";\r\n        _this.valueOff = \"false\";\r\n        _this.wrap = false;\r\n        return _this;\r\n    }\r\n    ToggleInput.prototype.updateInputControlAriaLabelledBy = function () {\r\n        if (this._checkboxInputElement) {\r\n            var joinedLabelIds = this.getAllLabelIds().join(\" \");\r\n            if (this._checkboxInputLabelElement && this._checkboxInputLabelElement.id) {\r\n                joinedLabelIds += \" \" + this._checkboxInputLabelElement.id;\r\n            }\r\n            if (joinedLabelIds) {\r\n                this._checkboxInputElement.setAttribute(\"aria-labelledby\", joinedLabelIds);\r\n            }\r\n            else {\r\n                this._checkboxInputElement.removeAttribute(\"aria-labelledby\");\r\n            }\r\n        }\r\n    };\r\n    ToggleInput.prototype.internalRender = function () {\r\n        var _this = this;\r\n        var element = document.createElement(\"div\");\r\n        element.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-toggleInput\");\r\n        element.style.width = \"100%\";\r\n        element.style.display = \"flex\";\r\n        element.style.alignItems = \"center\";\r\n        this._checkboxInputElement = document.createElement(\"input\");\r\n        this._checkboxInputElement.id = Utils.generateUniqueId();\r\n        this._checkboxInputElement.type = \"checkbox\";\r\n        this._checkboxInputElement.style.display = \"inline-block\";\r\n        this._checkboxInputElement.style.verticalAlign = \"middle\";\r\n        this._checkboxInputElement.style.margin = \"0\";\r\n        this._checkboxInputElement.style.flex = \"0 0 auto\";\r\n        if (this.title) {\r\n            this._checkboxInputElement.setAttribute(\"aria-label\", this.title);\r\n        }\r\n        if (this.isRequired) {\r\n            this._checkboxInputElement.setAttribute(\"aria-required\", \"true\");\r\n        }\r\n        this._checkboxInputElement.tabIndex = this.isDesignMode() ? -1 : 0;\r\n        if (this.defaultValue === this.valueOn) {\r\n            this._checkboxInputElement.checked = true;\r\n        }\r\n        this._oldCheckboxValue = this._checkboxInputElement.checked;\r\n        this._checkboxInputElement.onchange = function () {\r\n            _this.valueChanged();\r\n        };\r\n        Utils.appendChild(element, this._checkboxInputElement);\r\n        if (this.title || this.isDesignMode()) {\r\n            var label = new TextBlock();\r\n            label.setParent(this);\r\n            label.forElementId = this._checkboxInputElement.id;\r\n            label.hostConfig = this.hostConfig;\r\n            label.text = !this.title ? this.getJsonTypeName() : this.title;\r\n            label.useMarkdown = shared_1.GlobalSettings.useMarkdownInRadioButtonAndCheckbox;\r\n            label.wrap = this.wrap;\r\n            this._checkboxInputLabelElement = label.render();\r\n            if (this._checkboxInputLabelElement) {\r\n                this._checkboxInputLabelElement.id = Utils.generateUniqueId();\r\n                this._checkboxInputLabelElement.style.display = \"inline-block\";\r\n                this._checkboxInputLabelElement.style.flex = \"1 1 auto\";\r\n                this._checkboxInputLabelElement.style.marginLeft = \"6px\";\r\n                this._checkboxInputLabelElement.style.verticalAlign = \"middle\";\r\n                var spacerElement = document.createElement(\"div\");\r\n                spacerElement.style.width = \"6px\";\r\n                Utils.appendChild(element, spacerElement);\r\n                Utils.appendChild(element, this._checkboxInputLabelElement);\r\n            }\r\n        }\r\n        return element;\r\n    };\r\n    Object.defineProperty(ToggleInput.prototype, \"isNullable\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ToggleInput.prototype.getJsonTypeName = function () {\r\n        return \"Input.Toggle\";\r\n    };\r\n    ToggleInput.prototype.focus = function () {\r\n        if (this._checkboxInputElement) {\r\n            this._checkboxInputElement.focus();\r\n        }\r\n    };\r\n    ToggleInput.prototype.isSet = function () {\r\n        if (this.isRequired) {\r\n            return this.value === this.valueOn;\r\n        }\r\n        return this.value ? true : false;\r\n    };\r\n    ToggleInput.prototype.isDirty = function () {\r\n        return this._checkboxInputElement\r\n            ? this._checkboxInputElement.checked !== this._oldCheckboxValue\r\n            : false;\r\n    };\r\n    Object.defineProperty(ToggleInput.prototype, \"value\", {\r\n        get: function () {\r\n            if (this._checkboxInputElement) {\r\n                return this._checkboxInputElement.checked ? this.valueOn : this.valueOff;\r\n            }\r\n            else {\r\n                return undefined;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ToggleInput.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"value\");\r\n    ToggleInput.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"title\");\r\n    ToggleInput.valueOnProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"valueOn\", true, undefined, \"true\", function (sender) {\r\n        return \"true\";\r\n    });\r\n    ToggleInput.valueOffProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"valueOff\", true, undefined, \"false\", function (sender) {\r\n        return \"false\";\r\n    });\r\n    ToggleInput.wrapProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"wrap\", false);\r\n    __decorate([\r\n        (0, serialization_1.property)(ToggleInput.valueProperty)\r\n    ], ToggleInput.prototype, \"defaultValue\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(ToggleInput.titleProperty)\r\n    ], ToggleInput.prototype, \"title\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(ToggleInput.valueOnProperty)\r\n    ], ToggleInput.prototype, \"valueOn\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(ToggleInput.valueOffProperty)\r\n    ], ToggleInput.prototype, \"valueOff\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(ToggleInput.wrapProperty)\r\n    ], ToggleInput.prototype, \"wrap\", void 0);\r\n    return ToggleInput;\r\n}(Input));\r\nexports.ToggleInput = ToggleInput;\r\nvar Choice = /** @class */ (function (_super) {\r\n    __extends(Choice, _super);\r\n    function Choice(title, value) {\r\n        var _this = _super.call(this) || this;\r\n        _this.title = title;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    //#endregion\r\n    Choice.prototype.getSchemaKey = function () {\r\n        return \"Choice\";\r\n    };\r\n    //#region Schema\r\n    Choice.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"title\");\r\n    Choice.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"value\");\r\n    __decorate([\r\n        (0, serialization_1.property)(Choice.titleProperty)\r\n    ], Choice.prototype, \"title\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Choice.valueProperty)\r\n    ], Choice.prototype, \"value\", void 0);\r\n    return Choice;\r\n}(serialization_1.SerializableObject));\r\nexports.Choice = Choice;\r\nvar ChoiceSetInput = /** @class */ (function (_super) {\r\n    __extends(ChoiceSetInput, _super);\r\n    function ChoiceSetInput() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.isMultiSelect = false;\r\n        _this.wrap = false;\r\n        _this.choices = [];\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ChoiceSetInput.prototype, \"isCompact\", {\r\n        get: function () {\r\n            return !this.style || this.style === \"compact\";\r\n        },\r\n        set: function (value) {\r\n            this.style = value ? undefined : \"expanded\";\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ChoiceSetInput.getUniqueCategoryName = function () {\r\n        var uniqueCategoryName = \"__ac-category\" + ChoiceSetInput._uniqueCategoryCounter;\r\n        ChoiceSetInput._uniqueCategoryCounter++;\r\n        return uniqueCategoryName;\r\n    };\r\n    // Make sure `aria-current` is applied to the currently-selected item\r\n    ChoiceSetInput.prototype.internalApplyAriaCurrent = function () {\r\n        if (this._selectElement) {\r\n            var options = this._selectElement.options;\r\n            if (options) {\r\n                for (var _i = 0, _a = Array.from(options); _i < _a.length; _i++) {\r\n                    var option = _a[_i];\r\n                    if (option.selected) {\r\n                        option.setAttribute(\"aria-current\", \"true\");\r\n                    }\r\n                    else {\r\n                        option.removeAttribute(\"aria-current\");\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ChoiceSetInput.prototype.renderCompoundInput = function (cssClassName, type, defaultValues) {\r\n        var _this = this;\r\n        var element = document.createElement(\"div\");\r\n        element.className = this.hostConfig.makeCssClassName(\"ac-input\", cssClassName);\r\n        element.style.width = \"100%\";\r\n        element.tabIndex = this.isDesignMode() ? -1 : 0;\r\n        this._toggleInputs = [];\r\n        this._labels = [];\r\n        for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {\r\n            var choice = _a[_i];\r\n            var input = document.createElement(\"input\");\r\n            input.id = Utils.generateUniqueId();\r\n            input.type = type;\r\n            input.style.margin = \"0\";\r\n            input.style.display = \"inline-block\";\r\n            input.style.verticalAlign = \"middle\";\r\n            input.style.flex = \"0 0 auto\";\r\n            input.name = this.id ? this.id : this._uniqueCategoryName;\r\n            if (this.isRequired) {\r\n                input.setAttribute(\"aria-required\", \"true\");\r\n            }\r\n            input.tabIndex = this.isDesignMode() ? -1 : 0;\r\n            if (choice.value) {\r\n                input.value = choice.value;\r\n            }\r\n            if (choice.title) {\r\n                input.setAttribute(\"aria-label\", choice.title);\r\n            }\r\n            if (defaultValues && choice.value) {\r\n                if (defaultValues.indexOf(choice.value) >= 0) {\r\n                    input.checked = true;\r\n                }\r\n            }\r\n            input.onchange = function () {\r\n                _this.valueChanged();\r\n            };\r\n            this._toggleInputs.push(input);\r\n            var compoundInput = document.createElement(\"div\");\r\n            compoundInput.style.display = \"flex\";\r\n            compoundInput.style.alignItems = \"center\";\r\n            Utils.appendChild(compoundInput, input);\r\n            var label = new TextBlock();\r\n            label.setParent(this);\r\n            label.forElementId = input.id;\r\n            label.hostConfig = this.hostConfig;\r\n            label.text = choice.title ? choice.title : \"Choice \" + this._toggleInputs.length;\r\n            label.useMarkdown = shared_1.GlobalSettings.useMarkdownInRadioButtonAndCheckbox;\r\n            label.wrap = this.wrap;\r\n            var labelElement = label.render();\r\n            this._labels.push(labelElement);\r\n            if (labelElement) {\r\n                labelElement.id = Utils.generateUniqueId();\r\n                labelElement.style.display = \"inline-block\";\r\n                labelElement.style.flex = \"1 1 auto\";\r\n                labelElement.style.marginLeft = \"6px\";\r\n                labelElement.style.verticalAlign = \"middle\";\r\n                var spacerElement = document.createElement(\"div\");\r\n                spacerElement.style.width = \"6px\";\r\n                Utils.appendChild(compoundInput, spacerElement);\r\n                Utils.appendChild(compoundInput, labelElement);\r\n            }\r\n            Utils.appendChild(element, compoundInput);\r\n        }\r\n        return element;\r\n    };\r\n    ChoiceSetInput.prototype.updateInputControlAriaLabelledBy = function () {\r\n        if ((this.isMultiSelect || this.style === \"expanded\") &&\r\n            this._toggleInputs &&\r\n            this._labels) {\r\n            var labelIds = this.getAllLabelIds();\r\n            for (var i = 0; i < this._toggleInputs.length; i++) {\r\n                var joinedLabelIds = labelIds.join(\" \");\r\n                var label = this._labels[i];\r\n                if (label && label.id) {\r\n                    joinedLabelIds += \" \" + label.id;\r\n                }\r\n                if (joinedLabelIds) {\r\n                    this._toggleInputs[i].setAttribute(\"aria-labelledby\", joinedLabelIds);\r\n                }\r\n                else {\r\n                    this._toggleInputs[i].removeAttribute(\"aria-labelledby\");\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            _super.prototype.updateInputControlAriaLabelledBy.call(this);\r\n        }\r\n    };\r\n    ChoiceSetInput.prototype.internalRender = function () {\r\n        var _this = this;\r\n        this._uniqueCategoryName = ChoiceSetInput.getUniqueCategoryName();\r\n        if (this.isMultiSelect) {\r\n            // Render as a list of toggle inputs\r\n            return this.renderCompoundInput(\"ac-choiceSetInput-multiSelect\", \"checkbox\", this.defaultValue\r\n                ? this.defaultValue.split(this.hostConfig.choiceSetInputValueSeparator)\r\n                : undefined);\r\n        }\r\n        else {\r\n            if (this.style === \"expanded\") {\r\n                // Render as a series of radio buttons\r\n                return this.renderCompoundInput(\"ac-choiceSetInput-expanded\", \"radio\", this.defaultValue ? [this.defaultValue] : undefined);\r\n            }\r\n            else if (this.style === \"filtered\") {\r\n                // Render as a text input coupled with a datalist\r\n                var inputContainer = document.createElement(\"div\");\r\n                inputContainer.style.width = \"100%\";\r\n                this._textInput = document.createElement(\"input\");\r\n                this._textInput.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-multichoiceInput\", \"ac-choiceSetInput-filtered\");\r\n                this._textInput.type = \"text\";\r\n                this._textInput.style.width = \"100%\";\r\n                this._textInput.oninput = function () {\r\n                    _this.valueChanged();\r\n                    if (_this._textInput) {\r\n                        // Remove aria-label when value is not empty so narration software doesn't\r\n                        // read the placeholder\r\n                        if (_this.value) {\r\n                            _this._textInput.removeAttribute(\"placeholder\");\r\n                            _this._textInput.removeAttribute(\"aria-label\");\r\n                        }\r\n                        else if (_this.placeholder) {\r\n                            _this._textInput.placeholder = _this.placeholder;\r\n                            _this._textInput.setAttribute(\"aria-label\", _this.placeholder);\r\n                        }\r\n                    }\r\n                };\r\n                if (this.defaultValue) {\r\n                    this._textInput.value = this.defaultValue;\r\n                }\r\n                if (this.placeholder && !this._textInput.value) {\r\n                    this._textInput.placeholder = this.placeholder;\r\n                    this._textInput.setAttribute(\"aria-label\", this.placeholder);\r\n                }\r\n                this._textInput.tabIndex = this.isDesignMode() ? -1 : 0;\r\n                var dataList = document.createElement(\"datalist\");\r\n                dataList.id = Utils.generateUniqueId();\r\n                for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {\r\n                    var choice = _a[_i];\r\n                    var option = document.createElement(\"option\");\r\n                    // To fix https://stackoverflow.com/questions/29882361/show-datalist-labels-but-submit-the-actual-value\r\n                    // value is mapped to choice.title other than choice.value\r\n                    if (choice.title) {\r\n                        option.value = choice.title;\r\n                        option.setAttribute(\"aria-label\", choice.title);\r\n                    }\r\n                    option.tabIndex = this.isDesignMode() ? -1 : 0;\r\n                    dataList.appendChild(option);\r\n                }\r\n                this._textInput.setAttribute(\"list\", dataList.id);\r\n                inputContainer.append(this._textInput, dataList);\r\n                return inputContainer;\r\n            }\r\n            else {\r\n                // Render as a combo box\r\n                this._selectElement = document.createElement(\"select\");\r\n                this._selectElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-multichoiceInput\", \"ac-choiceSetInput-compact\");\r\n                this._selectElement.style.width = \"100%\";\r\n                this._selectElement.tabIndex = this.isDesignMode() ? -1 : 0;\r\n                var placeholderOption = document.createElement(\"option\");\r\n                placeholderOption.selected = true;\r\n                placeholderOption.disabled = true;\r\n                placeholderOption.hidden = true;\r\n                placeholderOption.value = \"\";\r\n                if (this.placeholder) {\r\n                    placeholderOption.text = this.placeholder;\r\n                }\r\n                Utils.appendChild(this._selectElement, placeholderOption);\r\n                for (var _b = 0, _c = this.choices; _b < _c.length; _b++) {\r\n                    var choice = _c[_b];\r\n                    var option = document.createElement(\"option\");\r\n                    option.value = choice.value;\r\n                    if (choice.title) {\r\n                        option.text = choice.title;\r\n                        option.setAttribute(\"aria-label\", choice.title);\r\n                    }\r\n                    option.tabIndex = this.isDesignMode() ? -1 : 0;\r\n                    if (choice.value === this.defaultValue) {\r\n                        option.selected = true;\r\n                    }\r\n                    Utils.appendChild(this._selectElement, option);\r\n                }\r\n                this._selectElement.onchange = function () {\r\n                    _this.internalApplyAriaCurrent();\r\n                    _this.valueChanged();\r\n                };\r\n                this.internalApplyAriaCurrent();\r\n                return this._selectElement;\r\n            }\r\n        }\r\n    };\r\n    ChoiceSetInput.prototype.getJsonTypeName = function () {\r\n        return \"Input.ChoiceSet\";\r\n    };\r\n    ChoiceSetInput.prototype.focus = function () {\r\n        if (this._toggleInputs && (this.isMultiSelect || this.style === \"expanded\")) {\r\n            if (this._toggleInputs.length > 0) {\r\n                this._toggleInputs[0].focus();\r\n            }\r\n        }\r\n        else if (this._textInput) {\r\n            this._textInput.focus();\r\n        }\r\n        else {\r\n            _super.prototype.focus.call(this);\r\n        }\r\n    };\r\n    ChoiceSetInput.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        if (this.choices.length === 0) {\r\n            context.addFailure(this, Enums.ValidationEvent.CollectionCantBeEmpty, strings_1.Strings.errors.choiceSetMustHaveAtLeastOneChoice());\r\n        }\r\n        for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {\r\n            var choice = _a[_i];\r\n            if (!choice.title || !choice.value) {\r\n                context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.choiceSetChoicesMustHaveTitleAndValue());\r\n            }\r\n        }\r\n    };\r\n    ChoiceSetInput.prototype.isSet = function () {\r\n        return this.value ? true : false;\r\n    };\r\n    ChoiceSetInput.prototype.isValid = function () {\r\n        if (this._textInput) {\r\n            if (this.value === \"\" || this.value === this.placeholder) {\r\n                return true;\r\n            }\r\n            for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {\r\n                var choice = _a[_i];\r\n                if (this.value === choice.value) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        return _super.prototype.isValid.call(this);\r\n    };\r\n    Object.defineProperty(ChoiceSetInput.prototype, \"value\", {\r\n        get: function () {\r\n            if (!this.isMultiSelect) {\r\n                if (this._selectElement) {\r\n                    return this._selectElement.selectedIndex > 0\r\n                        ? this._selectElement.value\r\n                        : undefined;\r\n                }\r\n                else if (this._textInput) {\r\n                    for (var _i = 0, _a = this.choices; _i < _a.length; _i++) {\r\n                        var choice = _a[_i];\r\n                        if (choice.title && this._textInput.value === choice.title) {\r\n                            return choice.value;\r\n                        }\r\n                    }\r\n                    return this._textInput.value;\r\n                }\r\n                else if (this._toggleInputs && this._toggleInputs.length > 0) {\r\n                    for (var _b = 0, _c = this._toggleInputs; _b < _c.length; _b++) {\r\n                        var toggleInput = _c[_b];\r\n                        if (toggleInput.checked) {\r\n                            return toggleInput.value;\r\n                        }\r\n                    }\r\n                }\r\n                return undefined;\r\n            }\r\n            else {\r\n                if (!this._toggleInputs || this._toggleInputs.length === 0) {\r\n                    return undefined;\r\n                }\r\n                var result = \"\";\r\n                for (var _d = 0, _f = this._toggleInputs; _d < _f.length; _d++) {\r\n                    var toggleInput = _f[_d];\r\n                    if (toggleInput.checked) {\r\n                        if (result !== \"\") {\r\n                            result += this.hostConfig.choiceSetInputValueSeparator;\r\n                        }\r\n                        result += toggleInput.value;\r\n                    }\r\n                }\r\n                return result ? result : undefined;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ChoiceSetInput.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"value\");\r\n    ChoiceSetInput.choicesProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_0, \"choices\", Choice);\r\n    ChoiceSetInput.styleProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_0, \"style\", [\r\n        { value: \"compact\" },\r\n        { value: \"expanded\" },\r\n        { value: \"filtered\", targetVersion: serialization_1.Versions.v1_5 }\r\n    ], \"compact\");\r\n    ChoiceSetInput.isMultiSelectProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, \"isMultiSelect\", false);\r\n    ChoiceSetInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"placeholder\");\r\n    ChoiceSetInput.wrapProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"wrap\", false);\r\n    //#endregion\r\n    ChoiceSetInput._uniqueCategoryCounter = 0;\r\n    __decorate([\r\n        (0, serialization_1.property)(ChoiceSetInput.valueProperty)\r\n    ], ChoiceSetInput.prototype, \"defaultValue\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(ChoiceSetInput.styleProperty)\r\n    ], ChoiceSetInput.prototype, \"style\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(ChoiceSetInput.isMultiSelectProperty)\r\n    ], ChoiceSetInput.prototype, \"isMultiSelect\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(ChoiceSetInput.placeholderProperty)\r\n    ], ChoiceSetInput.prototype, \"placeholder\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(ChoiceSetInput.wrapProperty)\r\n    ], ChoiceSetInput.prototype, \"wrap\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(ChoiceSetInput.choicesProperty)\r\n    ], ChoiceSetInput.prototype, \"choices\", void 0);\r\n    return ChoiceSetInput;\r\n}(Input));\r\nexports.ChoiceSetInput = ChoiceSetInput;\r\nvar NumberInput = /** @class */ (function (_super) {\r\n    __extends(NumberInput, _super);\r\n    function NumberInput() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    NumberInput.prototype.internalRender = function () {\r\n        var _this = this;\r\n        this._numberInputElement = document.createElement(\"input\");\r\n        this._numberInputElement.setAttribute(\"type\", \"number\");\r\n        if (this.min !== undefined) {\r\n            this._numberInputElement.setAttribute(\"min\", this.min.toString());\r\n        }\r\n        if (this.max !== undefined) {\r\n            this._numberInputElement.setAttribute(\"max\", this.max.toString());\r\n        }\r\n        this._numberInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-numberInput\");\r\n        this._numberInputElement.style.width = \"100%\";\r\n        this._numberInputElement.tabIndex = this.isDesignMode() ? -1 : 0;\r\n        if (this.defaultValue !== undefined) {\r\n            this._numberInputElement.valueAsNumber = this.defaultValue;\r\n        }\r\n        if (this.placeholder) {\r\n            this._numberInputElement.placeholder = this.placeholder;\r\n            this._numberInputElement.setAttribute(\"aria-label\", this.placeholder);\r\n        }\r\n        this._numberInputElement.oninput = function () {\r\n            _this.valueChanged();\r\n        };\r\n        return this._numberInputElement;\r\n    };\r\n    NumberInput.prototype.getJsonTypeName = function () {\r\n        return \"Input.Number\";\r\n    };\r\n    NumberInput.prototype.isSet = function () {\r\n        return this.value !== undefined && !isNaN(this.value);\r\n    };\r\n    NumberInput.prototype.isValid = function () {\r\n        if (this.value === undefined) {\r\n            return !this.isRequired;\r\n        }\r\n        var result = true;\r\n        if (this.min !== undefined) {\r\n            result = result && this.value >= this.min;\r\n        }\r\n        if (this.max !== undefined) {\r\n            result = result && this.value <= this.max;\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(NumberInput.prototype, \"value\", {\r\n        get: function () {\r\n            return this._numberInputElement ? this._numberInputElement.valueAsNumber : undefined;\r\n        },\r\n        set: function (value) {\r\n            if (value && this._numberInputElement) {\r\n                this._numberInputElement.value = value.toString();\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#region Schema\r\n    NumberInput.valueProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, \"value\");\r\n    NumberInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"placeholder\");\r\n    NumberInput.minProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, \"min\");\r\n    NumberInput.maxProperty = new serialization_1.NumProperty(serialization_1.Versions.v1_0, \"max\");\r\n    __decorate([\r\n        (0, serialization_1.property)(NumberInput.valueProperty)\r\n    ], NumberInput.prototype, \"defaultValue\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(NumberInput.minProperty)\r\n    ], NumberInput.prototype, \"min\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(NumberInput.maxProperty)\r\n    ], NumberInput.prototype, \"max\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(NumberInput.placeholderProperty)\r\n    ], NumberInput.prototype, \"placeholder\", void 0);\r\n    return NumberInput;\r\n}(Input));\r\nexports.NumberInput = NumberInput;\r\nvar DateInput = /** @class */ (function (_super) {\r\n    __extends(DateInput, _super);\r\n    function DateInput() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    DateInput.prototype.internalRender = function () {\r\n        var _this = this;\r\n        this._dateInputElement = document.createElement(\"input\");\r\n        this._dateInputElement.setAttribute(\"type\", \"date\");\r\n        if (this.min) {\r\n            this._dateInputElement.setAttribute(\"min\", this.min);\r\n        }\r\n        if (this.max) {\r\n            this._dateInputElement.setAttribute(\"max\", this.max);\r\n        }\r\n        if (this.placeholder) {\r\n            this._dateInputElement.placeholder = this.placeholder;\r\n            this._dateInputElement.setAttribute(\"aria-label\", this.placeholder);\r\n        }\r\n        this._dateInputElement.tabIndex = this.isDesignMode() ? -1 : 0;\r\n        this._dateInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-dateInput\");\r\n        this._dateInputElement.style.width = \"100%\";\r\n        this._dateInputElement.oninput = function () {\r\n            _this.valueChanged();\r\n        };\r\n        if (this.defaultValue) {\r\n            this._dateInputElement.value = this.defaultValue;\r\n        }\r\n        return this._dateInputElement;\r\n    };\r\n    DateInput.prototype.getJsonTypeName = function () {\r\n        return \"Input.Date\";\r\n    };\r\n    DateInput.prototype.isSet = function () {\r\n        return this.value ? true : false;\r\n    };\r\n    DateInput.prototype.isValid = function () {\r\n        if (!this.value) {\r\n            return !this.isRequired;\r\n        }\r\n        var valueAsDate = new Date(this.value);\r\n        var result = true;\r\n        if (this.min) {\r\n            var minDate = new Date(this.min);\r\n            result = result && valueAsDate >= minDate;\r\n        }\r\n        if (this.max) {\r\n            var maxDate = new Date(this.max);\r\n            result = result && valueAsDate <= maxDate;\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(DateInput.prototype, \"value\", {\r\n        get: function () {\r\n            return this._dateInputElement ? this._dateInputElement.value : undefined;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#region Schema\r\n    DateInput.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"value\");\r\n    DateInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"placeholder\");\r\n    DateInput.minProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"min\");\r\n    DateInput.maxProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"max\");\r\n    __decorate([\r\n        (0, serialization_1.property)(DateInput.valueProperty)\r\n    ], DateInput.prototype, \"defaultValue\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(DateInput.minProperty)\r\n    ], DateInput.prototype, \"min\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(DateInput.maxProperty)\r\n    ], DateInput.prototype, \"max\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(DateInput.placeholderProperty)\r\n    ], DateInput.prototype, \"placeholder\", void 0);\r\n    return DateInput;\r\n}(Input));\r\nexports.DateInput = DateInput;\r\nvar TimeProperty = /** @class */ (function (_super) {\r\n    __extends(TimeProperty, _super);\r\n    function TimeProperty(targetVersion, name) {\r\n        var _this = _super.call(this, targetVersion, name, function (sender, prop, source, context) {\r\n            var value = source[prop.name];\r\n            if (typeof value === \"string\" && value && /^[0-9]{2}:[0-9]{2}$/.test(value)) {\r\n                return value;\r\n            }\r\n            return undefined;\r\n        }, function (sender, prop, target, value, context) {\r\n            context.serializeValue(target, prop.name, value);\r\n        }) || this;\r\n        _this.targetVersion = targetVersion;\r\n        _this.name = name;\r\n        return _this;\r\n    }\r\n    return TimeProperty;\r\n}(serialization_1.CustomProperty));\r\nexports.TimeProperty = TimeProperty;\r\nvar TimeInput = /** @class */ (function (_super) {\r\n    __extends(TimeInput, _super);\r\n    function TimeInput() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    TimeInput.convertTimeStringToDate = function (timeString) {\r\n        return new Date(\"1973-09-04T\" + timeString + \":00Z\");\r\n    };\r\n    TimeInput.prototype.internalRender = function () {\r\n        var _this = this;\r\n        this._timeInputElement = document.createElement(\"input\");\r\n        this._timeInputElement.setAttribute(\"type\", \"time\");\r\n        if (this.min) {\r\n            this._timeInputElement.setAttribute(\"min\", this.min);\r\n        }\r\n        if (this.max) {\r\n            this._timeInputElement.setAttribute(\"max\", this.max);\r\n        }\r\n        this._timeInputElement.className = this.hostConfig.makeCssClassName(\"ac-input\", \"ac-timeInput\");\r\n        this._timeInputElement.style.width = \"100%\";\r\n        this._timeInputElement.oninput = function () {\r\n            _this.valueChanged();\r\n        };\r\n        if (this.placeholder) {\r\n            this._timeInputElement.placeholder = this.placeholder;\r\n            this._timeInputElement.setAttribute(\"aria-label\", this.placeholder);\r\n        }\r\n        this._timeInputElement.tabIndex = this.isDesignMode() ? -1 : 0;\r\n        if (this.defaultValue) {\r\n            this._timeInputElement.value = this.defaultValue;\r\n        }\r\n        return this._timeInputElement;\r\n    };\r\n    TimeInput.prototype.getJsonTypeName = function () {\r\n        return \"Input.Time\";\r\n    };\r\n    TimeInput.prototype.isSet = function () {\r\n        return this.value ? true : false;\r\n    };\r\n    TimeInput.prototype.isValid = function () {\r\n        if (!this.value) {\r\n            return !this.isRequired;\r\n        }\r\n        var valueAsDate = TimeInput.convertTimeStringToDate(this.value);\r\n        var result = true;\r\n        if (this.min) {\r\n            var minDate = TimeInput.convertTimeStringToDate(this.min);\r\n            result = result && valueAsDate >= minDate;\r\n        }\r\n        if (this.max) {\r\n            var maxDate = TimeInput.convertTimeStringToDate(this.max);\r\n            result = result && valueAsDate <= maxDate;\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(TimeInput.prototype, \"value\", {\r\n        get: function () {\r\n            return this._timeInputElement ? this._timeInputElement.value : undefined;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#region Schema\r\n    TimeInput.valueProperty = new TimeProperty(serialization_1.Versions.v1_0, \"value\");\r\n    TimeInput.placeholderProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"placeholder\");\r\n    TimeInput.minProperty = new TimeProperty(serialization_1.Versions.v1_0, \"min\");\r\n    TimeInput.maxProperty = new TimeProperty(serialization_1.Versions.v1_0, \"max\");\r\n    __decorate([\r\n        (0, serialization_1.property)(TimeInput.valueProperty)\r\n    ], TimeInput.prototype, \"defaultValue\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(TimeInput.minProperty)\r\n    ], TimeInput.prototype, \"min\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(TimeInput.maxProperty)\r\n    ], TimeInput.prototype, \"max\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(TimeInput.placeholderProperty)\r\n    ], TimeInput.prototype, \"placeholder\", void 0);\r\n    return TimeInput;\r\n}(Input));\r\nexports.TimeInput = TimeInput;\r\nvar Action = /** @class */ (function (_super) {\r\n    __extends(Action, _super);\r\n    function Action() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.style = Enums.ActionStyle.Default;\r\n        _this.mode = Enums.ActionMode.Primary;\r\n        _this._state = 0 /* Normal */;\r\n        _this._isFocusable = true;\r\n        return _this;\r\n    }\r\n    //#endregion\r\n    Action.prototype.renderButtonContent = function () {\r\n        if (this.renderedElement) {\r\n            // Cache hostConfig for perf\r\n            var hostConfig = this.hostConfig;\r\n            var titleElement = document.createElement(\"div\");\r\n            titleElement.style.overflow = \"hidden\";\r\n            titleElement.style.textOverflow = \"ellipsis\";\r\n            if (!(hostConfig.actions.iconPlacement === Enums.ActionIconPlacement.AboveTitle ||\r\n                hostConfig.actions.allowTitleToWrap)) {\r\n                titleElement.style.whiteSpace = \"nowrap\";\r\n            }\r\n            if (this.title) {\r\n                titleElement.innerText = this.title;\r\n            }\r\n            if (!this.iconUrl) {\r\n                this.renderedElement.classList.add(\"noIcon\");\r\n                this.renderedElement.appendChild(titleElement);\r\n            }\r\n            else {\r\n                var iconElement = document.createElement(\"img\");\r\n                iconElement.src = this.iconUrl;\r\n                iconElement.style.width = hostConfig.actions.iconSize + \"px\";\r\n                iconElement.style.height = hostConfig.actions.iconSize + \"px\";\r\n                iconElement.style.flex = \"0 0 auto\";\r\n                if (hostConfig.actions.iconPlacement === Enums.ActionIconPlacement.AboveTitle) {\r\n                    this.renderedElement.classList.add(\"iconAbove\");\r\n                    this.renderedElement.style.flexDirection = \"column\";\r\n                    if (this.title) {\r\n                        iconElement.style.marginBottom = \"6px\";\r\n                    }\r\n                }\r\n                else {\r\n                    this.renderedElement.classList.add(\"iconLeft\");\r\n                    iconElement.style.maxHeight = \"100%\";\r\n                    if (this.title) {\r\n                        iconElement.style.marginRight = \"6px\";\r\n                    }\r\n                }\r\n                this.renderedElement.appendChild(iconElement);\r\n                this.renderedElement.appendChild(titleElement);\r\n            }\r\n        }\r\n    };\r\n    Action.prototype.getParentContainer = function () {\r\n        if (this.parent instanceof Container) {\r\n            return this.parent;\r\n        }\r\n        return this.parent ? this.parent.getParentContainer() : undefined;\r\n    };\r\n    Action.prototype.isDesignMode = function () {\r\n        var rootElement = this.getRootObject();\r\n        return rootElement instanceof CardElement && rootElement.isDesignMode();\r\n    };\r\n    Action.prototype.updateCssClasses = function () {\r\n        var _a, _b;\r\n        if (this.parent && this.renderedElement) {\r\n            var hostConfig = this.parent.hostConfig;\r\n            this.renderedElement.className = hostConfig.makeCssClassName(this.isEffectivelyEnabled() ? \"ac-pushButton\" : \"ac-pushButton-disabled\");\r\n            var parentContainer = this.getParentContainer();\r\n            if (parentContainer) {\r\n                var parentContainerStyle = parentContainer.getEffectiveStyle();\r\n                if (parentContainerStyle) {\r\n                    this.renderedElement.classList.add(\"style-\" + parentContainerStyle);\r\n                }\r\n            }\r\n            this.renderedElement.tabIndex = !this.isDesignMode() && this.isFocusable ? 0 : -1;\r\n            switch (this._state) {\r\n                case 0 /* Normal */:\r\n                    // No additional classes needed\r\n                    break;\r\n                case 1 /* Expanded */:\r\n                    this.renderedElement.classList.add(hostConfig.makeCssClassName(\"expanded\"));\r\n                    break;\r\n                case 2 /* Subdued */:\r\n                    this.renderedElement.classList.add(hostConfig.makeCssClassName(\"subdued\"));\r\n                    break;\r\n            }\r\n            if (this.style && this.isEffectivelyEnabled()) {\r\n                if (this.style === Enums.ActionStyle.Positive) {\r\n                    (_a = this.renderedElement.classList).add.apply(_a, hostConfig.makeCssClassNames(\"primary\", \"style-positive\"));\r\n                }\r\n                else {\r\n                    (_b = this.renderedElement.classList).add.apply(_b, hostConfig.makeCssClassNames(\"style-\" + this.style.toLowerCase()));\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Action.prototype.getDefaultSerializationContext = function () {\r\n        return new SerializationContext();\r\n    };\r\n    Action.prototype.internalGetReferencedInputs = function () {\r\n        return {};\r\n    };\r\n    Action.prototype.internalPrepareForExecution = function (_inputs) {\r\n        // Do nothing in base implementation\r\n    };\r\n    Action.prototype.internalValidateInputs = function (referencedInputs) {\r\n        var result = [];\r\n        if (referencedInputs) {\r\n            for (var _i = 0, _a = Object.keys(referencedInputs); _i < _a.length; _i++) {\r\n                var key = _a[_i];\r\n                var input = referencedInputs[key];\r\n                if (!input.validateValue()) {\r\n                    result.push(input);\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Action.prototype.shouldSerialize = function (context) {\r\n        return context.actionRegistry.findByName(this.getJsonTypeName()) !== undefined;\r\n    };\r\n    Action.prototype.raiseExecuteActionEvent = function () {\r\n        if (this.onExecute) {\r\n            this.onExecute(this);\r\n        }\r\n        raiseExecuteActionEvent(this);\r\n    };\r\n    Action.prototype.internalAfterExecute = function () {\r\n        var rootObject = this.getRootObject();\r\n        if (rootObject instanceof CardElement) {\r\n            rootObject.updateActionsEnabledState();\r\n        }\r\n    };\r\n    Action.prototype.getHref = function () {\r\n        return \"\";\r\n    };\r\n    Action.prototype.getAriaRole = function () {\r\n        return \"button\";\r\n    };\r\n    Action.prototype.setupElementForAccessibility = function (element, promoteTooltipToLabel) {\r\n        if (promoteTooltipToLabel === void 0) { promoteTooltipToLabel = false; }\r\n        element.tabIndex = this.isEffectivelyEnabled() && !this.isDesignMode() ? 0 : -1;\r\n        element.setAttribute(\"role\", this.getAriaRole());\r\n        if (element instanceof HTMLButtonElement) {\r\n            element.disabled = !this.isEffectivelyEnabled();\r\n        }\r\n        if (!this.isEffectivelyEnabled()) {\r\n            element.setAttribute(\"aria-disabled\", \"true\");\r\n        }\r\n        else {\r\n            element.removeAttribute(\"aria-disabled\");\r\n            element.classList.add(this.hostConfig.makeCssClassName(\"ac-selectable\"));\r\n        }\r\n        if (this.title) {\r\n            element.setAttribute(\"aria-label\", this.title);\r\n            element.title = this.title;\r\n        }\r\n        else {\r\n            element.removeAttribute(\"aria-label\");\r\n            element.removeAttribute(\"title\");\r\n        }\r\n        if (this.tooltip) {\r\n            var targetAriaAttribute = promoteTooltipToLabel\r\n                ? this.title\r\n                    ? \"aria-description\"\r\n                    : \"aria-label\"\r\n                : \"aria-description\";\r\n            element.setAttribute(targetAriaAttribute, this.tooltip);\r\n            element.title = this.tooltip;\r\n        }\r\n    };\r\n    Action.prototype.parse = function (source, context) {\r\n        return _super.prototype.parse.call(this, source, context ? context : new SerializationContext());\r\n    };\r\n    Action.prototype.render = function () {\r\n        var _this = this;\r\n        var buttonElement = document.createElement(\"button\");\r\n        buttonElement.type = \"button\";\r\n        buttonElement.style.display = \"flex\";\r\n        buttonElement.style.alignItems = \"center\";\r\n        buttonElement.style.justifyContent = \"center\";\r\n        buttonElement.onclick = function (e) {\r\n            if (_this.isEffectivelyEnabled()) {\r\n                e.preventDefault();\r\n                e.cancelBubble = true;\r\n                _this.execute();\r\n            }\r\n        };\r\n        this._renderedElement = buttonElement;\r\n        this.renderButtonContent();\r\n        this.updateCssClasses();\r\n        this.setupElementForAccessibility(buttonElement);\r\n    };\r\n    Action.prototype.execute = function () {\r\n        if (this._actionCollection) {\r\n            this._actionCollection.actionExecuted(this);\r\n        }\r\n        this.raiseExecuteActionEvent();\r\n        this.internalAfterExecute();\r\n    };\r\n    Action.prototype.prepareForExecution = function () {\r\n        var referencedInputs = this.getReferencedInputs();\r\n        var invalidInputs = this.internalValidateInputs(referencedInputs);\r\n        if (invalidInputs.length > 0) {\r\n            invalidInputs[0].focus();\r\n            return false;\r\n        }\r\n        this.internalPrepareForExecution(referencedInputs);\r\n        return true;\r\n    };\r\n    Action.prototype.remove = function () {\r\n        if (this._actionCollection) {\r\n            return this._actionCollection.removeAction(this);\r\n        }\r\n        return false;\r\n    };\r\n    Action.prototype.getAllInputs = function (processActions) {\r\n        if (processActions === void 0) { processActions = true; }\r\n        return [];\r\n    };\r\n    Action.prototype.getAllActions = function () {\r\n        return [this];\r\n    };\r\n    Action.prototype.getResourceInformation = function () {\r\n        return this.iconUrl ? [{ url: this.iconUrl, mimeType: \"image\" }] : [];\r\n    };\r\n    Action.prototype.getActionById = function (id) {\r\n        return this.id === id ? this : undefined;\r\n    };\r\n    Action.prototype.getReferencedInputs = function () {\r\n        return this.internalGetReferencedInputs();\r\n    };\r\n    /**\r\n     * Validates the inputs associated with this action.\r\n     *\r\n     * @returns A list of inputs that failed validation, or an empty array if no input failed validation.\r\n     */\r\n    Action.prototype.validateInputs = function () {\r\n        return this.internalValidateInputs(this.getReferencedInputs());\r\n    };\r\n    Action.prototype.updateEnabledState = function () {\r\n        // Do nothing in base implementation\r\n    };\r\n    Action.prototype.isEffectivelyEnabled = function () {\r\n        return this.isEnabled;\r\n    };\r\n    Object.defineProperty(Action.prototype, \"isPrimary\", {\r\n        get: function () {\r\n            return this.style === Enums.ActionStyle.Positive;\r\n        },\r\n        set: function (value) {\r\n            if (value) {\r\n                this.style = Enums.ActionStyle.Positive;\r\n            }\r\n            else {\r\n                if (this.style === Enums.ActionStyle.Positive) {\r\n                    this.style = Enums.ActionStyle.Default;\r\n                }\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Action.prototype, \"hostConfig\", {\r\n        get: function () {\r\n            return this.parent ? this.parent.hostConfig : host_config_1.defaultHostConfig;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Action.prototype, \"parent\", {\r\n        get: function () {\r\n            return this._parent;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Action.prototype, \"state\", {\r\n        get: function () {\r\n            return this._state;\r\n        },\r\n        set: function (value) {\r\n            if (this._state !== value) {\r\n                this._state = value;\r\n                this.updateCssClasses();\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Action.prototype, \"isFocusable\", {\r\n        get: function () {\r\n            return this._isFocusable;\r\n        },\r\n        set: function (value) {\r\n            if (this._isFocusable !== value) {\r\n                this._isFocusable = value;\r\n                this.updateCssClasses();\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Action.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"title\");\r\n    Action.iconUrlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_1, \"iconUrl\");\r\n    Action.styleProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_2, \"style\", [\r\n        { value: Enums.ActionStyle.Default },\r\n        { value: Enums.ActionStyle.Positive },\r\n        { value: Enums.ActionStyle.Destructive }\r\n    ], Enums.ActionStyle.Default);\r\n    Action.modeProperty = new serialization_1.ValueSetProperty(serialization_1.Versions.v1_5, \"mode\", [{ value: Enums.ActionMode.Primary }, { value: Enums.ActionMode.Secondary }], Enums.ActionMode.Primary);\r\n    Action.tooltipProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_5, \"tooltip\");\r\n    Action.isEnabledProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_5, \"isEnabled\", true);\r\n    __decorate([\r\n        (0, serialization_1.property)(Action.titleProperty)\r\n    ], Action.prototype, \"title\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Action.iconUrlProperty)\r\n    ], Action.prototype, \"iconUrl\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Action.styleProperty)\r\n    ], Action.prototype, \"style\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Action.modeProperty)\r\n    ], Action.prototype, \"mode\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Action.tooltipProperty)\r\n    ], Action.prototype, \"tooltip\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Action.isEnabledProperty)\r\n    ], Action.prototype, \"isEnabled\", void 0);\r\n    return Action;\r\n}(card_object_1.CardObject));\r\nexports.Action = Action;\r\nvar SubmitActionBase = /** @class */ (function (_super) {\r\n    __extends(SubmitActionBase, _super);\r\n    function SubmitActionBase() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.disabledUnlessAssociatedInputsChange = false;\r\n        //#endregion\r\n        _this._isPrepared = false;\r\n        _this._areReferencedInputsDirty = false;\r\n        return _this;\r\n    }\r\n    SubmitActionBase.prototype.internalGetReferencedInputs = function () {\r\n        var result = {};\r\n        if (this.associatedInputs !== \"none\") {\r\n            var current = this.parent;\r\n            var inputs = [];\r\n            while (current) {\r\n                inputs.push.apply(inputs, current.getAllInputs(false));\r\n                current = current.parent;\r\n            }\r\n            for (var _i = 0, inputs_1 = inputs; _i < inputs_1.length; _i++) {\r\n                var input = inputs_1[_i];\r\n                if (input.id) {\r\n                    result[input.id] = input;\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    SubmitActionBase.prototype.internalPrepareForExecution = function (inputs) {\r\n        if (this._originalData) {\r\n            this._processedData = JSON.parse(JSON.stringify(this._originalData));\r\n        }\r\n        else {\r\n            this._processedData = {};\r\n        }\r\n        if (this._processedData && inputs) {\r\n            for (var _i = 0, _a = Object.keys(inputs); _i < _a.length; _i++) {\r\n                var key = _a[_i];\r\n                var input = inputs[key];\r\n                if (input.id && input.isSet()) {\r\n                    this._processedData[input.id] =\r\n                        typeof input.value === \"string\" ? input.value : input.value.toString();\r\n                }\r\n            }\r\n        }\r\n        this._isPrepared = true;\r\n    };\r\n    SubmitActionBase.prototype.internalAfterExecute = function () {\r\n        if (shared_1.GlobalSettings.resetInputsDirtyStateAfterActionExecution) {\r\n            this.resetReferencedInputsDirtyState();\r\n        }\r\n    };\r\n    SubmitActionBase.prototype.resetReferencedInputsDirtyState = function () {\r\n        var referencedInputs = this.getReferencedInputs();\r\n        this._areReferencedInputsDirty = false;\r\n        if (referencedInputs) {\r\n            for (var _i = 0, _a = Object.keys(referencedInputs); _i < _a.length; _i++) {\r\n                var key = _a[_i];\r\n                var input = referencedInputs[key];\r\n                input.resetDirtyState();\r\n            }\r\n        }\r\n    };\r\n    SubmitActionBase.prototype.updateEnabledState = function () {\r\n        this._areReferencedInputsDirty = false;\r\n        var referencedInputs = this.getReferencedInputs();\r\n        if (referencedInputs) {\r\n            for (var _i = 0, _a = Object.keys(referencedInputs); _i < _a.length; _i++) {\r\n                var key = _a[_i];\r\n                var input = referencedInputs[key];\r\n                if (input.isDirty()) {\r\n                    this._areReferencedInputsDirty = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        this.updateCssClasses();\r\n        if (this._renderedElement) {\r\n            this.setupElementForAccessibility(this._renderedElement);\r\n        }\r\n    };\r\n    SubmitActionBase.prototype.isEffectivelyEnabled = function () {\r\n        var result = _super.prototype.isEffectivelyEnabled.call(this);\r\n        return this.disabledUnlessAssociatedInputsChange\r\n            ? result && this._areReferencedInputsDirty\r\n            : result;\r\n    };\r\n    Object.defineProperty(SubmitActionBase.prototype, \"data\", {\r\n        get: function () {\r\n            return this._isPrepared ? this._processedData : this._originalData;\r\n        },\r\n        set: function (value) {\r\n            this._originalData = value;\r\n            this._isPrepared = false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    SubmitActionBase.dataProperty = new serialization_1.PropertyDefinition(serialization_1.Versions.v1_0, \"data\");\r\n    SubmitActionBase.associatedInputsProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_3, \"associatedInputs\", function (sender, prop, source, context) {\r\n        var value = source[prop.name];\r\n        if (value !== undefined && typeof value === \"string\") {\r\n            return value.toLowerCase() === \"none\" ? \"none\" : \"auto\";\r\n        }\r\n        return undefined;\r\n    }, function (sender, prop, target, value, context) {\r\n        context.serializeValue(target, prop.name, value);\r\n    });\r\n    SubmitActionBase.disabledUnlessAssociatedInputsChangeProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_6, \"disabledUnlessAssociatedInputsChange\", false);\r\n    __decorate([\r\n        (0, serialization_1.property)(SubmitActionBase.dataProperty)\r\n    ], SubmitActionBase.prototype, \"_originalData\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(SubmitActionBase.associatedInputsProperty)\r\n    ], SubmitActionBase.prototype, \"associatedInputs\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(SubmitActionBase.disabledUnlessAssociatedInputsChangeProperty)\r\n    ], SubmitActionBase.prototype, \"disabledUnlessAssociatedInputsChange\", void 0);\r\n    return SubmitActionBase;\r\n}(Action));\r\nexports.SubmitActionBase = SubmitActionBase;\r\nvar SubmitAction = /** @class */ (function (_super) {\r\n    __extends(SubmitAction, _super);\r\n    function SubmitAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    SubmitAction.prototype.getJsonTypeName = function () {\r\n        return SubmitAction.JsonTypeName;\r\n    };\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    SubmitAction.JsonTypeName = \"Action.Submit\";\r\n    return SubmitAction;\r\n}(SubmitActionBase));\r\nexports.SubmitAction = SubmitAction;\r\nvar ExecuteAction = /** @class */ (function (_super) {\r\n    __extends(ExecuteAction, _super);\r\n    function ExecuteAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    //#endregion\r\n    ExecuteAction.prototype.getJsonTypeName = function () {\r\n        return ExecuteAction.JsonTypeName;\r\n    };\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    ExecuteAction.JsonTypeName = \"Action.Execute\";\r\n    //#region Schema\r\n    ExecuteAction.verbProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_4, \"verb\");\r\n    __decorate([\r\n        (0, serialization_1.property)(ExecuteAction.verbProperty)\r\n    ], ExecuteAction.prototype, \"verb\", void 0);\r\n    return ExecuteAction;\r\n}(SubmitActionBase));\r\nexports.ExecuteAction = ExecuteAction;\r\nvar OpenUrlAction = /** @class */ (function (_super) {\r\n    __extends(OpenUrlAction, _super);\r\n    function OpenUrlAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    OpenUrlAction.prototype.getJsonTypeName = function () {\r\n        return OpenUrlAction.JsonTypeName;\r\n    };\r\n    OpenUrlAction.prototype.getAriaRole = function () {\r\n        return \"link\";\r\n    };\r\n    OpenUrlAction.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        if (!this.url) {\r\n            context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.propertyMustBeSet(\"url\"));\r\n        }\r\n    };\r\n    OpenUrlAction.prototype.getHref = function () {\r\n        return this.url;\r\n    };\r\n    //#region Schema\r\n    OpenUrlAction.urlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"url\");\r\n    //#endregion\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    OpenUrlAction.JsonTypeName = \"Action.OpenUrl\";\r\n    __decorate([\r\n        (0, serialization_1.property)(OpenUrlAction.urlProperty)\r\n    ], OpenUrlAction.prototype, \"url\", void 0);\r\n    return OpenUrlAction;\r\n}(Action));\r\nexports.OpenUrlAction = OpenUrlAction;\r\nvar ToggleVisibilityAction = /** @class */ (function (_super) {\r\n    __extends(ToggleVisibilityAction, _super);\r\n    function ToggleVisibilityAction() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.targetElements = {};\r\n        return _this;\r\n    }\r\n    ToggleVisibilityAction.prototype.updateAriaControlsAttribute = function () {\r\n        // apply aria labels to make it clear which elements this action will toggle\r\n        if (this.targetElements) {\r\n            var elementIds = Object.keys(this.targetElements);\r\n            if (this._renderedElement) {\r\n                if (elementIds.length > 0) {\r\n                    this._renderedElement.setAttribute(\"aria-controls\", elementIds.join(\" \"));\r\n                }\r\n                else {\r\n                    this._renderedElement.removeAttribute(\"aria-controls\");\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ToggleVisibilityAction.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        if (!this.targetElements) {\r\n            context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.propertyMustBeSet(\"targetElements\"));\r\n        }\r\n    };\r\n    ToggleVisibilityAction.prototype.getJsonTypeName = function () {\r\n        return ToggleVisibilityAction.JsonTypeName;\r\n    };\r\n    ToggleVisibilityAction.prototype.render = function () {\r\n        _super.prototype.render.call(this);\r\n        this.updateAriaControlsAttribute();\r\n    };\r\n    ToggleVisibilityAction.prototype.execute = function () {\r\n        _super.prototype.execute.call(this);\r\n        if (this.parent) {\r\n            for (var _i = 0, _a = Object.keys(this.targetElements); _i < _a.length; _i++) {\r\n                var elementId = _a[_i];\r\n                var targetElement = this.parent.getRootElement().getElementById(elementId);\r\n                if (targetElement) {\r\n                    if (typeof this.targetElements[elementId] === \"boolean\") {\r\n                        targetElement.isVisible = this.targetElements[elementId];\r\n                    }\r\n                    else {\r\n                        targetElement.isVisible = !targetElement.isVisible;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ToggleVisibilityAction.prototype.addTargetElement = function (elementId, isVisible) {\r\n        if (isVisible === void 0) { isVisible = undefined; }\r\n        this.targetElements[elementId] = isVisible;\r\n        this.updateAriaControlsAttribute();\r\n    };\r\n    ToggleVisibilityAction.prototype.removeTargetElement = function (elementId) {\r\n        delete this.targetElements[elementId];\r\n        this.updateAriaControlsAttribute();\r\n    };\r\n    ToggleVisibilityAction.targetElementsProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_2, \"targetElements\", function (sender, prop, source, context) {\r\n        var result = {};\r\n        if (Array.isArray(source[prop.name])) {\r\n            for (var _i = 0, _a = source[prop.name]; _i < _a.length; _i++) {\r\n                var item = _a[_i];\r\n                if (typeof item === \"string\") {\r\n                    result[item] = undefined;\r\n                }\r\n                else if (typeof item === \"object\") {\r\n                    var elementId = item[\"elementId\"];\r\n                    if (typeof elementId === \"string\") {\r\n                        result[elementId] = Utils.parseBool(item[\"isVisible\"]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }, function (sender, prop, target, value, context) {\r\n        var targetElements = [];\r\n        for (var _i = 0, _a = Object.keys(value); _i < _a.length; _i++) {\r\n            var id = _a[_i];\r\n            if (typeof value[id] === \"boolean\") {\r\n                targetElements.push({\r\n                    elementId: id,\r\n                    isVisible: value[id]\r\n                });\r\n            }\r\n            else {\r\n                targetElements.push(id);\r\n            }\r\n        }\r\n        context.serializeArray(target, prop.name, targetElements);\r\n    }, {}, function (sender) {\r\n        return {};\r\n    });\r\n    //#endregion\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    ToggleVisibilityAction.JsonTypeName = \"Action.ToggleVisibility\";\r\n    __decorate([\r\n        (0, serialization_1.property)(ToggleVisibilityAction.targetElementsProperty)\r\n    ], ToggleVisibilityAction.prototype, \"targetElements\", void 0);\r\n    return ToggleVisibilityAction;\r\n}(Action));\r\nexports.ToggleVisibilityAction = ToggleVisibilityAction;\r\nvar StringWithSubstitutionProperty = /** @class */ (function (_super) {\r\n    __extends(StringWithSubstitutionProperty, _super);\r\n    function StringWithSubstitutionProperty(targetVersion, name) {\r\n        var _this = _super.call(this, targetVersion, name, undefined, function () {\r\n            return new shared_1.StringWithSubstitutions();\r\n        }) || this;\r\n        _this.targetVersion = targetVersion;\r\n        _this.name = name;\r\n        return _this;\r\n    }\r\n    StringWithSubstitutionProperty.prototype.parse = function (sender, source, context) {\r\n        var result = new shared_1.StringWithSubstitutions();\r\n        result.set(Utils.parseString(source[this.name]));\r\n        return result;\r\n    };\r\n    StringWithSubstitutionProperty.prototype.toJSON = function (sender, target, value, context) {\r\n        context.serializeValue(target, this.name, value.getOriginal());\r\n    };\r\n    return StringWithSubstitutionProperty;\r\n}(serialization_1.PropertyDefinition));\r\nvar HttpHeader = /** @class */ (function (_super) {\r\n    __extends(HttpHeader, _super);\r\n    //#endregion\r\n    function HttpHeader(name, value) {\r\n        if (name === void 0) { name = \"\"; }\r\n        if (value === void 0) { value = \"\"; }\r\n        var _this = _super.call(this) || this;\r\n        _this.name = name;\r\n        _this.value = value;\r\n        return _this;\r\n    }\r\n    HttpHeader.prototype.getSchemaKey = function () {\r\n        return \"HttpHeader\";\r\n    };\r\n    HttpHeader.prototype.getReferencedInputs = function (inputs, referencedInputs) {\r\n        this._value.getReferencedInputs(inputs, referencedInputs);\r\n    };\r\n    HttpHeader.prototype.prepareForExecution = function (inputs) {\r\n        this._value.substituteInputValues(inputs, shared_1.ContentTypes.applicationXWwwFormUrlencoded);\r\n    };\r\n    Object.defineProperty(HttpHeader.prototype, \"value\", {\r\n        get: function () {\r\n            return this._value.get();\r\n        },\r\n        set: function (newValue) {\r\n            this._value.set(newValue);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#region Schema\r\n    HttpHeader.nameProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"name\");\r\n    HttpHeader.valueProperty = new StringWithSubstitutionProperty(serialization_1.Versions.v1_0, \"value\");\r\n    __decorate([\r\n        (0, serialization_1.property)(HttpHeader.nameProperty)\r\n    ], HttpHeader.prototype, \"name\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(HttpHeader.valueProperty)\r\n    ], HttpHeader.prototype, \"_value\", void 0);\r\n    return HttpHeader;\r\n}(serialization_1.SerializableObject));\r\nexports.HttpHeader = HttpHeader;\r\nvar HttpAction = /** @class */ (function (_super) {\r\n    __extends(HttpAction, _super);\r\n    function HttpAction() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._ignoreInputValidation = false;\r\n        return _this;\r\n    }\r\n    HttpAction.prototype.internalGetReferencedInputs = function () {\r\n        var allInputs = this.parent ? this.parent.getRootElement().getAllInputs() : [];\r\n        var result = {};\r\n        this._url.getReferencedInputs(allInputs, result);\r\n        for (var _i = 0, _a = this.headers; _i < _a.length; _i++) {\r\n            var header = _a[_i];\r\n            header.getReferencedInputs(allInputs, result);\r\n        }\r\n        this._body.getReferencedInputs(allInputs, result);\r\n        return result;\r\n    };\r\n    HttpAction.prototype.internalPrepareForExecution = function (inputs) {\r\n        if (inputs) {\r\n            this._url.substituteInputValues(inputs, shared_1.ContentTypes.applicationXWwwFormUrlencoded);\r\n            var contentType = shared_1.ContentTypes.applicationJson;\r\n            for (var _i = 0, _a = this.headers; _i < _a.length; _i++) {\r\n                var header = _a[_i];\r\n                header.prepareForExecution(inputs);\r\n                if (header.name && header.name.toLowerCase() === \"content-type\") {\r\n                    contentType = header.value;\r\n                }\r\n            }\r\n            this._body.substituteInputValues(inputs, contentType);\r\n        }\r\n    };\r\n    HttpAction.prototype.getJsonTypeName = function () {\r\n        return HttpAction.JsonTypeName;\r\n    };\r\n    HttpAction.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        if (!this.url) {\r\n            context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.propertyMustBeSet(\"url\"));\r\n        }\r\n        if (this.headers.length > 0) {\r\n            for (var _i = 0, _a = this.headers; _i < _a.length; _i++) {\r\n                var header = _a[_i];\r\n                if (!header.name) {\r\n                    context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.actionHttpHeadersMustHaveNameAndValue());\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(HttpAction.prototype, \"ignoreInputValidation\", {\r\n        get: function () {\r\n            return this._ignoreInputValidation;\r\n        },\r\n        set: function (value) {\r\n            this._ignoreInputValidation = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HttpAction.prototype, \"url\", {\r\n        get: function () {\r\n            return this._url.get();\r\n        },\r\n        set: function (value) {\r\n            this._url.set(value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HttpAction.prototype, \"body\", {\r\n        get: function () {\r\n            return this._body.get();\r\n        },\r\n        set: function (value) {\r\n            this._body.set(value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    HttpAction.urlProperty = new StringWithSubstitutionProperty(serialization_1.Versions.v1_0, \"url\");\r\n    HttpAction.bodyProperty = new StringWithSubstitutionProperty(serialization_1.Versions.v1_0, \"body\");\r\n    HttpAction.methodProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"method\");\r\n    HttpAction.headersProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_0, \"headers\", HttpHeader);\r\n    HttpAction.ignoreInputValidationProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_3, \"ignoreInputValidation\", false);\r\n    //#endregion\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    HttpAction.JsonTypeName = \"Action.Http\";\r\n    __decorate([\r\n        (0, serialization_1.property)(HttpAction.urlProperty)\r\n    ], HttpAction.prototype, \"_url\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(HttpAction.bodyProperty)\r\n    ], HttpAction.prototype, \"_body\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(HttpAction.methodProperty)\r\n    ], HttpAction.prototype, \"method\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(HttpAction.headersProperty)\r\n    ], HttpAction.prototype, \"headers\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(HttpAction.ignoreInputValidationProperty)\r\n    ], HttpAction.prototype, \"_ignoreInputValidation\", void 0);\r\n    return HttpAction;\r\n}(Action));\r\nexports.HttpAction = HttpAction;\r\nvar ShowCardAction = /** @class */ (function (_super) {\r\n    __extends(ShowCardAction, _super);\r\n    function ShowCardAction() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.card = new InlineAdaptiveCard();\r\n        return _this;\r\n    }\r\n    ShowCardAction.prototype.updateCssClasses = function () {\r\n        _super.prototype.updateCssClasses.call(this);\r\n        if (this.renderedElement) {\r\n            var effectiveHostConfig = this.parent ? this.parent.hostConfig : host_config_1.defaultHostConfig;\r\n            this.renderedElement.classList.add(effectiveHostConfig.makeCssClassName(\"expandable\"));\r\n            this.renderedElement.setAttribute(\"aria-expanded\", (this.state === 1 /* Expanded */).toString());\r\n        }\r\n    };\r\n    ShowCardAction.prototype.internalParse = function (source, context) {\r\n        _super.prototype.internalParse.call(this, source, context);\r\n        var jsonCard = source[\"card\"];\r\n        if (jsonCard) {\r\n            this.card.parse(jsonCard, context);\r\n        }\r\n        else {\r\n            context.logParseEvent(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.showCardMustHaveCard());\r\n        }\r\n    };\r\n    ShowCardAction.prototype.internalToJSON = function (target, context) {\r\n        _super.prototype.internalToJSON.call(this, target, context);\r\n        if (this.card) {\r\n            context.serializeValue(target, \"card\", this.card.toJSON(context));\r\n        }\r\n    };\r\n    ShowCardAction.prototype.raiseExecuteActionEvent = function () {\r\n        if (this.hostConfig.actions.showCard.actionMode === Enums.ShowCardActionMode.Popup) {\r\n            // Only raise the event in Popup mode.\r\n            _super.prototype.raiseExecuteActionEvent.call(this);\r\n        }\r\n    };\r\n    ShowCardAction.prototype.releaseDOMResources = function () {\r\n        _super.prototype.releaseDOMResources.call(this);\r\n        this.card.releaseDOMResources();\r\n    };\r\n    ShowCardAction.prototype.getJsonTypeName = function () {\r\n        return ShowCardAction.JsonTypeName;\r\n    };\r\n    ShowCardAction.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        this.card.internalValidateProperties(context);\r\n    };\r\n    ShowCardAction.prototype.setParent = function (value) {\r\n        _super.prototype.setParent.call(this, value);\r\n        this.card.setParent(value);\r\n    };\r\n    ShowCardAction.prototype.getAllInputs = function (processActions) {\r\n        if (processActions === void 0) { processActions = true; }\r\n        return this.card.getAllInputs(processActions);\r\n    };\r\n    ShowCardAction.prototype.getAllActions = function () {\r\n        var result = _super.prototype.getAllActions.call(this);\r\n        result.push.apply(result, this.card.getAllActions());\r\n        return result;\r\n    };\r\n    ShowCardAction.prototype.getResourceInformation = function () {\r\n        var result = _super.prototype.getResourceInformation.call(this);\r\n        result.push.apply(result, this.card.getResourceInformation());\r\n        return result;\r\n    };\r\n    ShowCardAction.prototype.getActionById = function (id) {\r\n        var result = _super.prototype.getActionById.call(this, id);\r\n        if (!result) {\r\n            result = this.card.getActionById(id);\r\n        }\r\n        return result;\r\n    };\r\n    // Note the \"weird\" way this field is declared is to work around a breaking\r\n    // change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    ShowCardAction.JsonTypeName = \"Action.ShowCard\";\r\n    return ShowCardAction;\r\n}(Action));\r\nexports.ShowCardAction = ShowCardAction;\r\nvar OverflowAction = /** @class */ (function (_super) {\r\n    __extends(OverflowAction, _super);\r\n    function OverflowAction(actions) {\r\n        var _this = _super.call(this) || this;\r\n        _this._actions = actions;\r\n        _this.title = strings_1.Strings.defaults.overflowButtonText();\r\n        return _this;\r\n    }\r\n    OverflowAction.prototype.getActions = function () {\r\n        return this._actions;\r\n    };\r\n    OverflowAction.prototype.getAllActions = function () {\r\n        var result = _super.prototype.getAllActions.call(this);\r\n        result.push.apply(result, this._actions);\r\n        return result;\r\n    };\r\n    OverflowAction.prototype.getJsonTypeName = function () {\r\n        return ShowCardAction.JsonTypeName;\r\n    };\r\n    OverflowAction.prototype.execute = function () {\r\n        var _this = this;\r\n        var _a;\r\n        var shouldDisplayPopupMenu = !raiseDisplayOverflowActionMenuEvent(this, this.renderedElement);\r\n        if (shouldDisplayPopupMenu && this.renderedElement) {\r\n            var contextMenu_1 = new controls_1.PopupMenu();\r\n            contextMenu_1.hostConfig = this.hostConfig;\r\n            var _loop_2 = function (i) {\r\n                var menuItem = new controls_1.MenuItem(i.toString(), (_a = this_1._actions[i].title) !== null && _a !== void 0 ? _a : \"\");\r\n                menuItem.isEnabled = this_1._actions[i].isEnabled;\r\n                menuItem.onClick = function () {\r\n                    var actionToExecute = _this._actions[i];\r\n                    contextMenu_1.closePopup(false);\r\n                    if (actionToExecute.isEnabled) {\r\n                        actionToExecute.execute();\r\n                    }\r\n                };\r\n                contextMenu_1.items.add(menuItem);\r\n            };\r\n            var this_1 = this;\r\n            for (var i = 0; i < this._actions.length; i++) {\r\n                _loop_2(i);\r\n            }\r\n            contextMenu_1.popup(this.renderedElement);\r\n        }\r\n    };\r\n    OverflowAction.JsonTypeName = \"Action.Overflow\";\r\n    return OverflowAction;\r\n}(Action));\r\nvar ActionCollection = /** @class */ (function () {\r\n    function ActionCollection(owner) {\r\n        this._items = [];\r\n        this._renderedActions = [];\r\n        this._owner = owner;\r\n    }\r\n    ActionCollection.prototype.isActionAllowed = function (action) {\r\n        var forbiddenTypes = this._owner.getForbiddenActionTypes();\r\n        if (forbiddenTypes) {\r\n            for (var _i = 0, forbiddenTypes_1 = forbiddenTypes; _i < forbiddenTypes_1.length; _i++) {\r\n                var forbiddenType = forbiddenTypes_1[_i];\r\n                if (action.constructor === forbiddenType) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    ActionCollection.prototype.refreshContainer = function () {\r\n        clearElement(this._actionCardContainer);\r\n        if (!this._actionCard) {\r\n            this._actionCardContainer.style.marginTop = \"0px\";\r\n            return;\r\n        }\r\n        this._actionCardContainer.style.marginTop =\r\n            this.renderedActionCount > 0\r\n                ? this._owner.hostConfig.actions.showCard.inlineTopMargin + \"px\"\r\n                : \"0px\";\r\n        var padding = this._owner.getEffectivePadding();\r\n        this._owner.getImmediateSurroundingPadding(padding);\r\n        var physicalPadding = this._owner.hostConfig.paddingDefinitionToSpacingDefinition(padding);\r\n        if (this._actionCard) {\r\n            this._actionCard.style.paddingLeft = physicalPadding.left + \"px\";\r\n            this._actionCard.style.paddingRight = physicalPadding.right + \"px\";\r\n            this._actionCard.style.marginLeft = \"-\" + physicalPadding.left + \"px\";\r\n            this._actionCard.style.marginRight = \"-\" + physicalPadding.right + \"px\";\r\n            if (physicalPadding.bottom !== 0 && !this._owner.isDesignMode()) {\r\n                this._actionCard.style.paddingBottom = physicalPadding.bottom + \"px\";\r\n                this._actionCard.style.marginBottom = \"-\" + physicalPadding.bottom + \"px\";\r\n            }\r\n            Utils.appendChild(this._actionCardContainer, this._actionCard);\r\n        }\r\n    };\r\n    ActionCollection.prototype.layoutChanged = function () {\r\n        this._owner.getRootElement().updateLayout();\r\n    };\r\n    ActionCollection.prototype.showActionCard = function (action, suppressStyle, raiseEvent) {\r\n        if (suppressStyle === void 0) { suppressStyle = false; }\r\n        if (raiseEvent === void 0) { raiseEvent = true; }\r\n        action.card.suppressStyle = suppressStyle;\r\n        // Always re-render a ShowCard action in design mode; reuse already rendered ShowCard (if available) otherwise\r\n        var renderedCard = action.card.renderedElement && !this._owner.isDesignMode()\r\n            ? action.card.renderedElement\r\n            : action.card.render();\r\n        this._actionCard = renderedCard;\r\n        this._expandedAction = action;\r\n        this.refreshContainer();\r\n        if (raiseEvent) {\r\n            this.layoutChanged();\r\n            raiseInlineCardExpandedEvent(action, true);\r\n        }\r\n    };\r\n    ActionCollection.prototype.collapseExpandedAction = function () {\r\n        for (var _i = 0, _a = this._renderedActions; _i < _a.length; _i++) {\r\n            var action = _a[_i];\r\n            action.state = 0 /* Normal */;\r\n        }\r\n        var previouslyExpandedAction = this._expandedAction;\r\n        this._expandedAction = undefined;\r\n        this._actionCard = undefined;\r\n        this.refreshContainer();\r\n        if (previouslyExpandedAction) {\r\n            this.layoutChanged();\r\n            raiseInlineCardExpandedEvent(previouslyExpandedAction, false);\r\n        }\r\n    };\r\n    ActionCollection.prototype.expandShowCardAction = function (action, raiseEvent) {\r\n        var _this = this;\r\n        var afterSelectedAction = false;\r\n        for (var _i = 0, _a = this._renderedActions; _i < _a.length; _i++) {\r\n            var renderedAction = _a[_i];\r\n            // Remove actions after selected action from tabOrder if the actions are oriented horizontally, to skip focus directly to expanded card\r\n            if (this._owner.hostConfig.actions.actionsOrientation == Enums.Orientation.Horizontal &&\r\n                afterSelectedAction) {\r\n                renderedAction.isFocusable = false;\r\n            }\r\n            if (renderedAction !== action) {\r\n                renderedAction.state = 2 /* Subdued */;\r\n            }\r\n            else {\r\n                renderedAction.state = 1 /* Expanded */;\r\n                afterSelectedAction = true;\r\n                if (renderedAction.renderedElement) {\r\n                    renderedAction.renderedElement.onblur = function (_e) {\r\n                        for (var _i = 0, _a = _this._renderedActions; _i < _a.length; _i++) {\r\n                            var ra = _a[_i];\r\n                            ra.isFocusable = true;\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n        }\r\n        this.showActionCard(action, !(this._owner.isAtTheVeryLeft() && this._owner.isAtTheVeryRight()), raiseEvent);\r\n    };\r\n    ActionCollection.prototype.releaseDOMResources = function () {\r\n        for (var _i = 0, _a = this._renderedActions; _i < _a.length; _i++) {\r\n            var action = _a[_i];\r\n            action.releaseDOMResources();\r\n        }\r\n    };\r\n    ActionCollection.prototype.actionExecuted = function (action) {\r\n        if (!(action instanceof ShowCardAction)) {\r\n            this.collapseExpandedAction();\r\n        }\r\n        else {\r\n            if (action === this._expandedAction) {\r\n                this.collapseExpandedAction();\r\n            }\r\n            else if (this._owner.hostConfig.actions.showCard.actionMode ===\r\n                Enums.ShowCardActionMode.Inline) {\r\n                this.expandShowCardAction(action, true);\r\n            }\r\n        }\r\n    };\r\n    ActionCollection.prototype.parse = function (source, context) {\r\n        this.clear();\r\n        if (Array.isArray(source)) {\r\n            for (var _i = 0, source_1 = source; _i < source_1.length; _i++) {\r\n                var jsonAction = source_1[_i];\r\n                var forbiddenActions = [];\r\n                // If the action owner is a ContainerWithActions, we should check for forbidden actions\r\n                if (this._owner instanceof ContainerWithActions) {\r\n                    forbiddenActions = this._owner.getForbiddenActionNames();\r\n                }\r\n                var action = context.parseAction(this._owner, jsonAction, forbiddenActions, !this._owner.isDesignMode());\r\n                if (action) {\r\n                    this.addAction(action);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ActionCollection.prototype.toJSON = function (target, propertyName, context) {\r\n        context.serializeArray(target, propertyName, this._items);\r\n    };\r\n    ActionCollection.prototype.getActionAt = function (id) {\r\n        return this._items[id];\r\n    };\r\n    ActionCollection.prototype.getActionCount = function () {\r\n        return this._items.length;\r\n    };\r\n    ActionCollection.prototype.getActionById = function (id) {\r\n        var result = undefined;\r\n        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            result = item.getActionById(id);\r\n            if (result) {\r\n                break;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    ActionCollection.prototype.validateProperties = function (context) {\r\n        if (this._owner.hostConfig.actions.maxActions &&\r\n            this._items.length > this._owner.hostConfig.actions.maxActions) {\r\n            context.addFailure(this._owner, Enums.ValidationEvent.TooManyActions, strings_1.Strings.errors.tooManyActions(this._owner.hostConfig.actions.maxActions));\r\n        }\r\n        if (this._items.length > 0 && !this._owner.hostConfig.supportsInteractivity) {\r\n            context.addFailure(this._owner, Enums.ValidationEvent.InteractivityNotAllowed, strings_1.Strings.errors.interactivityNotAllowed());\r\n        }\r\n        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            if (!this.isActionAllowed(item)) {\r\n                context.addFailure(this._owner, Enums.ValidationEvent.ActionTypeNotAllowed, strings_1.Strings.errors.actionTypeNotAllowed(item.getJsonTypeName()));\r\n            }\r\n            item.internalValidateProperties(context);\r\n        }\r\n    };\r\n    ActionCollection.prototype.render = function (orientation) {\r\n        // Cache hostConfig for better perf\r\n        var hostConfig = this._owner.hostConfig;\r\n        if (!hostConfig.supportsInteractivity) {\r\n            return undefined;\r\n        }\r\n        var element = document.createElement(\"div\");\r\n        var maxActions = hostConfig.actions.maxActions\r\n            ? Math.min(hostConfig.actions.maxActions, this._items.length)\r\n            : this._items.length;\r\n        this._actionCardContainer = document.createElement(\"div\");\r\n        this._renderedActions = [];\r\n        if (hostConfig.actions.preExpandSingleShowCardAction &&\r\n            maxActions === 1 &&\r\n            this._items[0] instanceof ShowCardAction &&\r\n            this.isActionAllowed(this._items[0])) {\r\n            this.showActionCard(this._items[0], true);\r\n            this._renderedActions.push(this._items[0]);\r\n        }\r\n        else {\r\n            var buttonStrip = document.createElement(\"div\");\r\n            buttonStrip.className = hostConfig.makeCssClassName(\"ac-actionSet\");\r\n            buttonStrip.style.display = \"flex\";\r\n            if (orientation === Enums.Orientation.Horizontal) {\r\n                buttonStrip.style.flexDirection = \"row\";\r\n                if (this._owner.horizontalAlignment &&\r\n                    hostConfig.actions.actionAlignment !== Enums.ActionAlignment.Stretch) {\r\n                    switch (this._owner.horizontalAlignment) {\r\n                        case Enums.HorizontalAlignment.Center:\r\n                            buttonStrip.style.justifyContent = \"center\";\r\n                            break;\r\n                        case Enums.HorizontalAlignment.Right:\r\n                            buttonStrip.style.justifyContent = \"flex-end\";\r\n                            break;\r\n                        default:\r\n                            buttonStrip.style.justifyContent = \"flex-start\";\r\n                            break;\r\n                    }\r\n                }\r\n                else {\r\n                    switch (hostConfig.actions.actionAlignment) {\r\n                        case Enums.ActionAlignment.Center:\r\n                            buttonStrip.style.justifyContent = \"center\";\r\n                            break;\r\n                        case Enums.ActionAlignment.Right:\r\n                            buttonStrip.style.justifyContent = \"flex-end\";\r\n                            break;\r\n                        default:\r\n                            buttonStrip.style.justifyContent = \"flex-start\";\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                buttonStrip.style.flexDirection = \"column\";\r\n                if (this._owner.horizontalAlignment &&\r\n                    hostConfig.actions.actionAlignment !== Enums.ActionAlignment.Stretch) {\r\n                    switch (this._owner.horizontalAlignment) {\r\n                        case Enums.HorizontalAlignment.Center:\r\n                            buttonStrip.style.alignItems = \"center\";\r\n                            break;\r\n                        case Enums.HorizontalAlignment.Right:\r\n                            buttonStrip.style.alignItems = \"flex-end\";\r\n                            break;\r\n                        default:\r\n                            buttonStrip.style.alignItems = \"flex-start\";\r\n                            break;\r\n                    }\r\n                }\r\n                else {\r\n                    switch (hostConfig.actions.actionAlignment) {\r\n                        case Enums.ActionAlignment.Center:\r\n                            buttonStrip.style.alignItems = \"center\";\r\n                            break;\r\n                        case Enums.ActionAlignment.Right:\r\n                            buttonStrip.style.alignItems = \"flex-end\";\r\n                            break;\r\n                        case Enums.ActionAlignment.Stretch:\r\n                            buttonStrip.style.alignItems = \"stretch\";\r\n                            break;\r\n                        default:\r\n                            buttonStrip.style.alignItems = \"flex-start\";\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n            var allowedActions = this._items.filter(this.isActionAllowed.bind(this));\r\n            var primaryActions_1 = [];\r\n            var secondaryActions_1 = [];\r\n            if (!this._owner.isDesignMode()) {\r\n                allowedActions.forEach(function (action) {\r\n                    return action.mode === Enums.ActionMode.Secondary\r\n                        ? secondaryActions_1.push(action)\r\n                        : primaryActions_1.push(action);\r\n                });\r\n                // If primaryActions.length > maxActions, extra actions are moved to overflow\r\n                var overflowPrimaryActions = primaryActions_1.splice(hostConfig.actions.maxActions);\r\n                if (shared_1.GlobalSettings.allowMoreThanMaxActionsInOverflowMenu) {\r\n                    secondaryActions_1.push.apply(secondaryActions_1, overflowPrimaryActions);\r\n                }\r\n                var shouldRenderOverflowActionButton = true;\r\n                if (secondaryActions_1.length > 0) {\r\n                    if (!this._overflowAction) {\r\n                        this._overflowAction = new OverflowAction(secondaryActions_1);\r\n                        this._overflowAction.setParent(this._owner);\r\n                        this._overflowAction[\"_actionCollection\"] = this;\r\n                    }\r\n                    var isRootAction = this._owner instanceof AdaptiveCard && !this._owner.parent;\r\n                    shouldRenderOverflowActionButton = !raiseRenderOverflowActionsEvent(this._overflowAction, isRootAction);\r\n                }\r\n                if (this._overflowAction && shouldRenderOverflowActionButton) {\r\n                    primaryActions_1.push(this._overflowAction);\r\n                }\r\n            }\r\n            else {\r\n                primaryActions_1 = allowedActions;\r\n            }\r\n            for (var i = 0; i < primaryActions_1.length; i++) {\r\n                var action = primaryActions_1[i];\r\n                action.render();\r\n                if (action.renderedElement) {\r\n                    if (hostConfig.actions.actionsOrientation === Enums.Orientation.Horizontal &&\r\n                        hostConfig.actions.actionAlignment === Enums.ActionAlignment.Stretch) {\r\n                        action.renderedElement.style.flex = \"0 1 100%\";\r\n                    }\r\n                    else {\r\n                        action.renderedElement.style.flex = \"0 1 auto\";\r\n                    }\r\n                    buttonStrip.appendChild(action.renderedElement);\r\n                    this._renderedActions.push(action);\r\n                    if (i < primaryActions_1.length - 1 && hostConfig.actions.buttonSpacing > 0) {\r\n                        var spacer = document.createElement(\"div\");\r\n                        if (orientation === Enums.Orientation.Horizontal) {\r\n                            spacer.style.flex = \"0 0 auto\";\r\n                            spacer.style.width = hostConfig.actions.buttonSpacing + \"px\";\r\n                        }\r\n                        else {\r\n                            spacer.style.height = hostConfig.actions.buttonSpacing + \"px\";\r\n                        }\r\n                        Utils.appendChild(buttonStrip, spacer);\r\n                    }\r\n                }\r\n            }\r\n            var buttonStripContainer = document.createElement(\"div\");\r\n            buttonStripContainer.style.overflow = \"hidden\";\r\n            buttonStripContainer.appendChild(buttonStrip);\r\n            Utils.appendChild(element, buttonStripContainer);\r\n        }\r\n        Utils.appendChild(element, this._actionCardContainer);\r\n        for (var _i = 0, _a = this._renderedActions; _i < _a.length; _i++) {\r\n            var renderedAction = _a[_i];\r\n            if (renderedAction.state === 1 /* Expanded */) {\r\n                this.expandShowCardAction(renderedAction, false);\r\n                break;\r\n            }\r\n        }\r\n        return this._renderedActions.length > 0 ? element : undefined;\r\n    };\r\n    ActionCollection.prototype.addAction = function (action) {\r\n        if (!action) {\r\n            throw new Error(\"The action parameter cannot be null.\");\r\n        }\r\n        if ((!action.parent || action.parent === this._owner) && this._items.indexOf(action) < 0) {\r\n            this._items.push(action);\r\n            if (!action.parent) {\r\n                action.setParent(this._owner);\r\n            }\r\n            action[\"_actionCollection\"] = this;\r\n        }\r\n        else {\r\n            throw new Error(strings_1.Strings.errors.actionAlreadyParented());\r\n        }\r\n    };\r\n    ActionCollection.prototype.removeAction = function (action) {\r\n        if (this.expandedAction && this._expandedAction === action) {\r\n            this.collapseExpandedAction();\r\n        }\r\n        var actionIndex = this._items.indexOf(action);\r\n        if (actionIndex >= 0) {\r\n            this._items.splice(actionIndex, 1);\r\n            action.setParent(undefined);\r\n            action[\"_actionCollection\"] = undefined;\r\n            for (var i = 0; i < this._renderedActions.length; i++) {\r\n                if (this._renderedActions[i] === action) {\r\n                    this._renderedActions.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    ActionCollection.prototype.clear = function () {\r\n        this._items = [];\r\n        this._renderedActions = [];\r\n        this._expandedAction = undefined;\r\n    };\r\n    ActionCollection.prototype.getAllInputs = function (processActions) {\r\n        if (processActions === void 0) { processActions = true; }\r\n        var result = [];\r\n        if (processActions) {\r\n            for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\r\n                var action = _a[_i];\r\n                result.push.apply(result, action.getAllInputs());\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    ActionCollection.prototype.getResourceInformation = function () {\r\n        var result = [];\r\n        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\r\n            var action = _a[_i];\r\n            result.push.apply(result, action.getResourceInformation());\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(ActionCollection.prototype, \"renderedActionCount\", {\r\n        get: function () {\r\n            return this._renderedActions.length;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ActionCollection.prototype, \"expandedAction\", {\r\n        get: function () {\r\n            return this._expandedAction;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return ActionCollection;\r\n}());\r\nvar ActionSet = /** @class */ (function (_super) {\r\n    __extends(ActionSet, _super);\r\n    function ActionSet() {\r\n        var _this = _super.call(this) || this;\r\n        _this._actionCollection = new ActionCollection(_this);\r\n        return _this;\r\n    }\r\n    ActionSet.prototype.internalParse = function (source, context) {\r\n        _super.prototype.internalParse.call(this, source, context);\r\n        this._actionCollection.parse(source[\"actions\"], context);\r\n    };\r\n    ActionSet.prototype.internalToJSON = function (target, context) {\r\n        _super.prototype.internalToJSON.call(this, target, context);\r\n        this._actionCollection.toJSON(target, \"actions\", context);\r\n    };\r\n    ActionSet.prototype.internalRender = function () {\r\n        return this._actionCollection.render(this.orientation !== undefined\r\n            ? this.orientation\r\n            : this.hostConfig.actions.actionsOrientation);\r\n    };\r\n    ActionSet.prototype.releaseDOMResources = function () {\r\n        _super.prototype.releaseDOMResources.call(this);\r\n        this._actionCollection.releaseDOMResources();\r\n    };\r\n    ActionSet.prototype.isBleedingAtBottom = function () {\r\n        if (this._actionCollection.renderedActionCount === 0) {\r\n            return _super.prototype.isBleedingAtBottom.call(this);\r\n        }\r\n        else {\r\n            if (this._actionCollection.getActionCount() === 1) {\r\n                return (this._actionCollection.expandedAction !== undefined &&\r\n                    !this.hostConfig.actions.preExpandSingleShowCardAction);\r\n            }\r\n            else {\r\n                return this._actionCollection.expandedAction !== undefined;\r\n            }\r\n        }\r\n    };\r\n    ActionSet.prototype.getJsonTypeName = function () {\r\n        return \"ActionSet\";\r\n    };\r\n    ActionSet.prototype.getActionCount = function () {\r\n        return this._actionCollection.getActionCount();\r\n    };\r\n    ActionSet.prototype.getActionAt = function (index) {\r\n        if (index >= 0 && index < this.getActionCount()) {\r\n            return this._actionCollection.getActionAt(index);\r\n        }\r\n        else {\r\n            return _super.prototype.getActionAt.call(this, index);\r\n        }\r\n    };\r\n    ActionSet.prototype.getActionById = function (id) {\r\n        var result = this._actionCollection.getActionById(id);\r\n        return result ? result : _super.prototype.getActionById.call(this, id);\r\n    };\r\n    ActionSet.prototype.getAllActions = function () {\r\n        var result = _super.prototype.getAllActions.call(this);\r\n        for (var i = 0; i < this.getActionCount(); i++) {\r\n            var action = this.getActionAt(i);\r\n            if (action) {\r\n                result.push(action);\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    ActionSet.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        this._actionCollection.validateProperties(context);\r\n    };\r\n    ActionSet.prototype.addAction = function (action) {\r\n        this._actionCollection.addAction(action);\r\n    };\r\n    ActionSet.prototype.getAllInputs = function (processActions) {\r\n        if (processActions === void 0) { processActions = true; }\r\n        return processActions ? this._actionCollection.getAllInputs() : [];\r\n    };\r\n    ActionSet.prototype.getResourceInformation = function () {\r\n        return this._actionCollection.getResourceInformation();\r\n    };\r\n    /**\r\n     * @inheritdoc\r\n     */\r\n    ActionSet.prototype.findDOMNodeOwner = function (node) {\r\n        var target = undefined;\r\n        for (var i = 0; i < this.getActionCount(); i++) {\r\n            var action = this.getActionAt(i);\r\n            if (action) {\r\n                // recur through each Action\r\n                target = action.findDOMNodeOwner(node);\r\n                if (target) {\r\n                    return target;\r\n                }\r\n            }\r\n        }\r\n        // if not found in any Action, defer to parent implementation\r\n        return _super.prototype.findDOMNodeOwner.call(this, node);\r\n    };\r\n    Object.defineProperty(ActionSet.prototype, \"isInteractive\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#region Schema\r\n    ActionSet.orientationProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_1, \"orientation\", Enums.Orientation);\r\n    __decorate([\r\n        (0, serialization_1.property)(ActionSet.orientationProperty)\r\n    ], ActionSet.prototype, \"orientation\", void 0);\r\n    return ActionSet;\r\n}(CardElement));\r\nexports.ActionSet = ActionSet;\r\nvar ContainerStyleProperty = /** @class */ (function (_super) {\r\n    __extends(ContainerStyleProperty, _super);\r\n    function ContainerStyleProperty(targetVersion, name, defaultValue, onGetInitialValue) {\r\n        var _this = _super.call(this, targetVersion, name, [\r\n            { value: Enums.ContainerStyle.Default },\r\n            { value: Enums.ContainerStyle.Emphasis },\r\n            { targetVersion: serialization_1.Versions.v1_2, value: Enums.ContainerStyle.Accent },\r\n            { targetVersion: serialization_1.Versions.v1_2, value: Enums.ContainerStyle.Good },\r\n            { targetVersion: serialization_1.Versions.v1_2, value: Enums.ContainerStyle.Attention },\r\n            { targetVersion: serialization_1.Versions.v1_2, value: Enums.ContainerStyle.Warning }\r\n        ], defaultValue, onGetInitialValue) || this;\r\n        _this.targetVersion = targetVersion;\r\n        _this.name = name;\r\n        _this.defaultValue = defaultValue;\r\n        _this.onGetInitialValue = onGetInitialValue;\r\n        return _this;\r\n    }\r\n    return ContainerStyleProperty;\r\n}(serialization_1.ValueSetProperty));\r\nexports.ContainerStyleProperty = ContainerStyleProperty;\r\nvar StylableCardElementContainer = /** @class */ (function (_super) {\r\n    __extends(StylableCardElementContainer, _super);\r\n    function StylableCardElementContainer() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(StylableCardElementContainer.prototype, \"style\", {\r\n        get: function () {\r\n            if (this.allowCustomStyle) {\r\n                var style = this.getValue(StylableCardElementContainer.styleProperty);\r\n                if (style && this.hostConfig.containerStyles.getStyleByName(style)) {\r\n                    return style;\r\n                }\r\n            }\r\n            return undefined;\r\n        },\r\n        set: function (value) {\r\n            this.setValue(StylableCardElementContainer.styleProperty, value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(StylableCardElementContainer.prototype, \"allowCustomStyle\", {\r\n        //#endregion\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(StylableCardElementContainer.prototype, \"hasExplicitStyle\", {\r\n        get: function () {\r\n            return this.getValue(StylableCardElementContainer.styleProperty) !== undefined;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    StylableCardElementContainer.prototype.applyBorder = function () {\r\n        // No border in base implementation\r\n    };\r\n    StylableCardElementContainer.prototype.applyBackground = function () {\r\n        if (this.renderedElement) {\r\n            var styleDefinition = this.hostConfig.containerStyles.getStyleByName(this.style, this.hostConfig.containerStyles.getStyleByName(this.defaultStyle));\r\n            if (styleDefinition.backgroundColor) {\r\n                var bgColor = Utils.stringToCssColor(styleDefinition.backgroundColor);\r\n                if (bgColor) {\r\n                    this.renderedElement.style.backgroundColor = bgColor;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    StylableCardElementContainer.prototype.applyPadding = function () {\r\n        _super.prototype.applyPadding.call(this);\r\n        if (!this.renderedElement) {\r\n            return;\r\n        }\r\n        var physicalPadding = new shared_1.SpacingDefinition();\r\n        if (this.getEffectivePadding()) {\r\n            physicalPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(this.getEffectivePadding());\r\n        }\r\n        this.renderedElement.style.paddingTop = physicalPadding.top + \"px\";\r\n        this.renderedElement.style.paddingRight = physicalPadding.right + \"px\";\r\n        this.renderedElement.style.paddingBottom = physicalPadding.bottom + \"px\";\r\n        this.renderedElement.style.paddingLeft = physicalPadding.left + \"px\";\r\n        if (this.isBleeding()) {\r\n            // Bleed into the first parent that does have padding\r\n            var padding = new shared_1.PaddingDefinition();\r\n            this.getImmediateSurroundingPadding(padding);\r\n            var surroundingPadding = this.hostConfig.paddingDefinitionToSpacingDefinition(padding);\r\n            this.renderedElement.style.marginRight = \"-\" + surroundingPadding.right + \"px\";\r\n            this.renderedElement.style.marginLeft = \"-\" + surroundingPadding.left + \"px\";\r\n            if (!this.isDesignMode()) {\r\n                this.renderedElement.style.marginTop = \"-\" + surroundingPadding.top + \"px\";\r\n                this.renderedElement.style.marginBottom = \"-\" + surroundingPadding.bottom + \"px\";\r\n            }\r\n            if (this.separatorElement &&\r\n                this.separatorOrientation === Enums.Orientation.Horizontal) {\r\n                this.separatorElement.style.marginLeft = \"-\" + surroundingPadding.left + \"px\";\r\n                this.separatorElement.style.marginRight = \"-\" + surroundingPadding.right + \"px\";\r\n            }\r\n        }\r\n        else {\r\n            this.renderedElement.style.marginRight = \"0\";\r\n            this.renderedElement.style.marginLeft = \"0\";\r\n            this.renderedElement.style.marginTop = \"0\";\r\n            this.renderedElement.style.marginBottom = \"0\";\r\n            if (this.separatorElement &&\r\n                this.separatorOrientation === Enums.Orientation.Horizontal) {\r\n                this.separatorElement.style.marginRight = \"0\";\r\n                this.separatorElement.style.marginLeft = \"0\";\r\n            }\r\n        }\r\n    };\r\n    StylableCardElementContainer.prototype.getHasBackground = function (ignoreBackgroundImages) {\r\n        if (ignoreBackgroundImages === void 0) { ignoreBackgroundImages = false; }\r\n        var currentElement = this.parent;\r\n        while (currentElement) {\r\n            var currentElementHasBackgroundImage = false;\r\n            if (ignoreBackgroundImages) {\r\n                currentElementHasBackgroundImage = false;\r\n            }\r\n            else {\r\n                currentElementHasBackgroundImage =\r\n                    currentElement instanceof Container\r\n                        ? currentElement.backgroundImage.isValid()\r\n                        : false;\r\n            }\r\n            if (currentElement instanceof StylableCardElementContainer) {\r\n                if (this.hasExplicitStyle &&\r\n                    (currentElement.getEffectiveStyle() !== this.getEffectiveStyle() ||\r\n                        currentElementHasBackgroundImage)) {\r\n                    return true;\r\n                }\r\n            }\r\n            currentElement = currentElement.parent;\r\n        }\r\n        return false;\r\n    };\r\n    StylableCardElementContainer.prototype.getDefaultPadding = function () {\r\n        return this.getHasBackground() || this.getHasBorder()\r\n            ? new shared_1.PaddingDefinition(Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding)\r\n            : _super.prototype.getDefaultPadding.call(this);\r\n    };\r\n    StylableCardElementContainer.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        var explicitStyle = this.getValue(StylableCardElementContainer.styleProperty);\r\n        if (explicitStyle !== undefined) {\r\n            var styleDefinition = this.hostConfig.containerStyles.getStyleByName(explicitStyle);\r\n            if (!styleDefinition) {\r\n                context.addFailure(this, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(explicitStyle, \"style\"));\r\n            }\r\n        }\r\n    };\r\n    StylableCardElementContainer.prototype.render = function () {\r\n        var renderedElement = _super.prototype.render.call(this);\r\n        if (renderedElement && this.getHasBackground()) {\r\n            this.applyBackground();\r\n        }\r\n        this.applyBorder();\r\n        return renderedElement;\r\n    };\r\n    StylableCardElementContainer.prototype.getEffectiveStyle = function () {\r\n        var effectiveStyle = this.style;\r\n        return effectiveStyle ? effectiveStyle : _super.prototype.getEffectiveStyle.call(this);\r\n    };\r\n    //#region Schema\r\n    StylableCardElementContainer.styleProperty = new ContainerStyleProperty(serialization_1.Versions.v1_0, \"style\");\r\n    __decorate([\r\n        (0, serialization_1.property)(StylableCardElementContainer.styleProperty)\r\n    ], StylableCardElementContainer.prototype, \"style\", null);\r\n    return StylableCardElementContainer;\r\n}(CardElementContainer));\r\nexports.StylableCardElementContainer = StylableCardElementContainer;\r\nvar ContainerBase = /** @class */ (function (_super) {\r\n    __extends(ContainerBase, _super);\r\n    function ContainerBase() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._bleed = false;\r\n        return _this;\r\n    }\r\n    //#endregion\r\n    ContainerBase.prototype.adjustRenderedElementSize = function (renderedElement) {\r\n        _super.prototype.adjustRenderedElementSize.call(this, renderedElement);\r\n        if (this.minPixelHeight) {\r\n            renderedElement.style.minHeight = this.minPixelHeight + \"px\";\r\n        }\r\n    };\r\n    ContainerBase.prototype.getHasExpandedAction = function () {\r\n        return false;\r\n    };\r\n    ContainerBase.prototype.getBleed = function () {\r\n        return this._bleed;\r\n    };\r\n    ContainerBase.prototype.setBleed = function (value) {\r\n        this._bleed = value;\r\n    };\r\n    Object.defineProperty(ContainerBase.prototype, \"renderedActionCount\", {\r\n        get: function () {\r\n            return 0;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ContainerBase.prototype.isBleeding = function () {\r\n        return (this.getHasBackground() || this.hostConfig.alwaysAllowBleed) && this.getBleed();\r\n    };\r\n    ContainerBase.bleedProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_2, \"bleed\", false);\r\n    ContainerBase.minHeightProperty = new serialization_1.PixelSizeProperty(serialization_1.Versions.v1_2, \"minHeight\");\r\n    __decorate([\r\n        (0, serialization_1.property)(ContainerBase.bleedProperty)\r\n    ], ContainerBase.prototype, \"_bleed\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(ContainerBase.minHeightProperty)\r\n    ], ContainerBase.prototype, \"minPixelHeight\", void 0);\r\n    return ContainerBase;\r\n}(StylableCardElementContainer));\r\nexports.ContainerBase = ContainerBase;\r\nvar BackgroundImage = /** @class */ (function (_super) {\r\n    __extends(BackgroundImage, _super);\r\n    function BackgroundImage() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    //#endregion\r\n    BackgroundImage.prototype.getSchemaKey = function () {\r\n        return \"BackgroundImage\";\r\n    };\r\n    BackgroundImage.prototype.internalParse = function (source, context) {\r\n        if (typeof source === \"string\") {\r\n            this.resetDefaultValues();\r\n            this.url = source;\r\n        }\r\n        else {\r\n            return _super.prototype.internalParse.call(this, source, context);\r\n        }\r\n    };\r\n    BackgroundImage.prototype.apply = function (element) {\r\n        if (this.url && element.renderedElement) {\r\n            element.renderedElement.style.backgroundImage =\r\n                \"url('\" +\r\n                    element.preProcessPropertyValue(BackgroundImage.urlProperty, this.url) +\r\n                    \"')\";\r\n            switch (this.fillMode) {\r\n                case Enums.FillMode.Repeat:\r\n                    element.renderedElement.style.backgroundRepeat = \"repeat\";\r\n                    break;\r\n                case Enums.FillMode.RepeatHorizontally:\r\n                    element.renderedElement.style.backgroundRepeat = \"repeat-x\";\r\n                    break;\r\n                case Enums.FillMode.RepeatVertically:\r\n                    element.renderedElement.style.backgroundRepeat = \"repeat-y\";\r\n                    break;\r\n                case Enums.FillMode.Cover:\r\n                default:\r\n                    element.renderedElement.style.backgroundRepeat = \"no-repeat\";\r\n                    element.renderedElement.style.backgroundSize = \"cover\";\r\n                    break;\r\n            }\r\n            switch (this.horizontalAlignment) {\r\n                case Enums.HorizontalAlignment.Left:\r\n                    break;\r\n                case Enums.HorizontalAlignment.Center:\r\n                    element.renderedElement.style.backgroundPositionX = \"center\";\r\n                    break;\r\n                case Enums.HorizontalAlignment.Right:\r\n                    element.renderedElement.style.backgroundPositionX = \"right\";\r\n                    break;\r\n            }\r\n            switch (this.verticalAlignment) {\r\n                case Enums.VerticalAlignment.Top:\r\n                    break;\r\n                case Enums.VerticalAlignment.Center:\r\n                    element.renderedElement.style.backgroundPositionY = \"center\";\r\n                    break;\r\n                case Enums.VerticalAlignment.Bottom:\r\n                    element.renderedElement.style.backgroundPositionY = \"bottom\";\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    BackgroundImage.prototype.isValid = function () {\r\n        return this.url ? true : false;\r\n    };\r\n    //#region Schema\r\n    BackgroundImage.urlProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"url\");\r\n    BackgroundImage.fillModeProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_2, \"fillMode\", Enums.FillMode, Enums.FillMode.Cover);\r\n    BackgroundImage.horizontalAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_2, \"horizontalAlignment\", Enums.HorizontalAlignment, Enums.HorizontalAlignment.Left);\r\n    BackgroundImage.verticalAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_2, \"verticalAlignment\", Enums.VerticalAlignment, Enums.VerticalAlignment.Top);\r\n    __decorate([\r\n        (0, serialization_1.property)(BackgroundImage.urlProperty)\r\n    ], BackgroundImage.prototype, \"url\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(BackgroundImage.fillModeProperty)\r\n    ], BackgroundImage.prototype, \"fillMode\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(BackgroundImage.horizontalAlignmentProperty)\r\n    ], BackgroundImage.prototype, \"horizontalAlignment\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(BackgroundImage.verticalAlignmentProperty)\r\n    ], BackgroundImage.prototype, \"verticalAlignment\", void 0);\r\n    return BackgroundImage;\r\n}(serialization_1.SerializableObject));\r\nexports.BackgroundImage = BackgroundImage;\r\nvar Container = /** @class */ (function (_super) {\r\n    __extends(Container, _super);\r\n    function Container() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        //#endregion\r\n        _this._items = [];\r\n        _this._renderedItems = [];\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Container.prototype, \"backgroundImage\", {\r\n        get: function () {\r\n            return this.getValue(Container.backgroundImageProperty);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Container.prototype.insertItemAt = function (item, index, forceInsert) {\r\n        if (!item.parent || forceInsert) {\r\n            if (item.isStandalone) {\r\n                if (index < 0 || index >= this._items.length) {\r\n                    this._items.push(item);\r\n                }\r\n                else {\r\n                    this._items.splice(index, 0, item);\r\n                }\r\n                item.setParent(this);\r\n            }\r\n            else {\r\n                throw new Error(strings_1.Strings.errors.elementTypeNotStandalone(item.getJsonTypeName()));\r\n            }\r\n        }\r\n        else {\r\n            throw new Error(strings_1.Strings.errors.elementAlreadyParented());\r\n        }\r\n    };\r\n    Container.prototype.getItemsCollectionPropertyName = function () {\r\n        return \"items\";\r\n    };\r\n    Container.prototype.applyBackground = function () {\r\n        if (this.backgroundImage.isValid() && this.renderedElement) {\r\n            this.backgroundImage.apply(this);\r\n        }\r\n        _super.prototype.applyBackground.call(this);\r\n    };\r\n    Container.prototype.applyRTL = function (element) {\r\n        if (this.rtl !== undefined) {\r\n            element.dir = this.rtl ? \"rtl\" : \"ltr\";\r\n        }\r\n    };\r\n    Container.prototype.internalRender = function () {\r\n        this._renderedItems = [];\r\n        // Cache hostConfig to avoid walking the parent hierarchy several times\r\n        var hostConfig = this.hostConfig;\r\n        var element = document.createElement(\"div\");\r\n        this.applyRTL(element);\r\n        element.classList.add(hostConfig.makeCssClassName(\"ac-container\"));\r\n        element.style.display = \"flex\";\r\n        element.style.flexDirection = \"column\";\r\n        if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation) {\r\n            // Forces the container to be at least as tall as its content.\r\n            //\r\n            // Fixes a quirk in Chrome where, for nested flex elements, the\r\n            // inner element's height would never exceed the outer element's\r\n            // height. This caused overflow truncation to break -- containers\r\n            // would always be measured as not overflowing, since their heights\r\n            // were constrained by their parents as opposed to truly reflecting\r\n            // the height of their content.\r\n            //\r\n            // See the \"Browser Rendering Notes\" section of this answer:\r\n            // https://stackoverflow.com/questions/36247140/why-doesnt-flex-item-shrink-past-content-size\r\n            element.style.minHeight = \"-webkit-min-content\";\r\n        }\r\n        switch (this.getEffectiveVerticalContentAlignment()) {\r\n            case Enums.VerticalAlignment.Center:\r\n                element.style.justifyContent = \"center\";\r\n                break;\r\n            case Enums.VerticalAlignment.Bottom:\r\n                element.style.justifyContent = \"flex-end\";\r\n                break;\r\n            default:\r\n                element.style.justifyContent = \"flex-start\";\r\n                break;\r\n        }\r\n        if (this._items.length > 0) {\r\n            for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\r\n                var item = _a[_i];\r\n                var renderedItem = this.isElementAllowed(item) ? item.render() : undefined;\r\n                if (renderedItem) {\r\n                    if (this._renderedItems.length > 0 && item.separatorElement) {\r\n                        item.separatorElement.style.flex = \"0 0 auto\";\r\n                        Utils.appendChild(element, item.separatorElement);\r\n                    }\r\n                    Utils.appendChild(element, renderedItem);\r\n                    this._renderedItems.push(item);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (this.isDesignMode()) {\r\n                var placeholderElement = this.createPlaceholderElement();\r\n                placeholderElement.style.width = \"100%\";\r\n                placeholderElement.style.height = \"100%\";\r\n                element.appendChild(placeholderElement);\r\n            }\r\n        }\r\n        return element;\r\n    };\r\n    Container.prototype.truncateOverflow = function (maxHeight) {\r\n        if (this.renderedElement) {\r\n            // Add 1 to account for rounding differences between browsers\r\n            var boundary_1 = this.renderedElement.offsetTop + maxHeight + 1;\r\n            var handleElement_1 = function (cardElement) {\r\n                var elt = cardElement.renderedElement;\r\n                if (elt) {\r\n                    switch (Utils.getFitStatus(elt, boundary_1)) {\r\n                        case Enums.ContainerFitStatus.FullyInContainer:\r\n                            var sizeChanged = cardElement[\"resetOverflow\"]();\r\n                            // If the element's size changed after resetting content,\r\n                            // we have to check if it still fits fully in the card\r\n                            if (sizeChanged) {\r\n                                handleElement_1(cardElement);\r\n                            }\r\n                            break;\r\n                        case Enums.ContainerFitStatus.Overflowing:\r\n                            var containerMaxHeight = boundary_1 - elt.offsetTop;\r\n                            cardElement[\"handleOverflow\"](containerMaxHeight);\r\n                            break;\r\n                        case Enums.ContainerFitStatus.FullyOutOfContainer:\r\n                            cardElement[\"handleOverflow\"](0);\r\n                            break;\r\n                    }\r\n                }\r\n            };\r\n            for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\r\n                var item = _a[_i];\r\n                handleElement_1(item);\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    Container.prototype.undoOverflowTruncation = function () {\r\n        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            item[\"resetOverflow\"]();\r\n        }\r\n    };\r\n    Container.prototype.getHasBackground = function (ignoreBackgroundImages) {\r\n        if (ignoreBackgroundImages === void 0) { ignoreBackgroundImages = false; }\r\n        var result = ignoreBackgroundImages ? false : this.backgroundImage.isValid();\r\n        return result || _super.prototype.getHasBackground.call(this, ignoreBackgroundImages);\r\n    };\r\n    Container.prototype.canHostSingletons = function () {\r\n        return false;\r\n    };\r\n    Container.prototype.internalParse = function (source, context) {\r\n        _super.prototype.internalParse.call(this, source, context);\r\n        this.clear();\r\n        this.setShouldFallback(false);\r\n        var jsonItems = source[this.getItemsCollectionPropertyName()];\r\n        if (!Array.isArray(jsonItems) &&\r\n            typeof jsonItems === \"object\" &&\r\n            this.canHostSingletons()) {\r\n            var typeName = Utils.parseString(jsonItems[\"type\"]);\r\n            if (typeName) {\r\n                var registration = context.elementRegistry.findByName(typeName);\r\n                if ((registration === null || registration === void 0 ? void 0 : registration.singletonBehavior) !== registry_1.ElementSingletonBehavior.NotAllowed) {\r\n                    var element = context.parseElement(this, jsonItems, [], !this.isDesignMode(), true);\r\n                    if (element) {\r\n                        this.insertItemAt(element, -1, true);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else if (Array.isArray(jsonItems)) {\r\n            for (var _i = 0, jsonItems_1 = jsonItems; _i < jsonItems_1.length; _i++) {\r\n                var item = jsonItems_1[_i];\r\n                var element = context.parseElement(this, item, this.forbiddenChildElements(), !this.isDesignMode());\r\n                if (element) {\r\n                    this.insertItemAt(element, -1, true);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Container.prototype.internalToJSON = function (target, context) {\r\n        _super.prototype.internalToJSON.call(this, target, context);\r\n        var collectionPropertyName = this.getItemsCollectionPropertyName();\r\n        if (this._items.length === 1 &&\r\n            this._items[0].getElementSingletonBehavior() === registry_1.ElementSingletonBehavior.Only) {\r\n            // If the element is only allowed in a singleton context, parse it to an object instead of an array\r\n            context.serializeValue(target, collectionPropertyName, this._items[0].toJSON(context));\r\n        }\r\n        else {\r\n            context.serializeArray(target, collectionPropertyName, this._items);\r\n        }\r\n    };\r\n    Object.defineProperty(Container.prototype, \"isSelectable\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Container.prototype.getEffectivePadding = function () {\r\n        if (shared_1.GlobalSettings.removePaddingFromContainersWithBackgroundImage &&\r\n            !this.getHasBackground(true)) {\r\n            return new shared_1.PaddingDefinition();\r\n        }\r\n        return _super.prototype.getEffectivePadding.call(this);\r\n    };\r\n    Container.prototype.getEffectiveVerticalContentAlignment = function () {\r\n        if (this.verticalContentAlignment !== undefined) {\r\n            return this.verticalContentAlignment;\r\n        }\r\n        var parentContainer = this.getParentContainer();\r\n        return parentContainer\r\n            ? parentContainer.getEffectiveVerticalContentAlignment()\r\n            : Enums.VerticalAlignment.Top;\r\n    };\r\n    Container.prototype.getItemCount = function () {\r\n        return this._items.length;\r\n    };\r\n    Container.prototype.getItemAt = function (index) {\r\n        return this._items[index];\r\n    };\r\n    Container.prototype.getFirstVisibleRenderedItem = function () {\r\n        if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {\r\n            for (var _i = 0, _a = this._renderedItems; _i < _a.length; _i++) {\r\n                var item = _a[_i];\r\n                if (item.isVisible) {\r\n                    return item;\r\n                }\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    Container.prototype.getLastVisibleRenderedItem = function () {\r\n        if (this.renderedElement && this._renderedItems && this._renderedItems.length > 0) {\r\n            for (var i = this._renderedItems.length - 1; i >= 0; i--) {\r\n                if (this._renderedItems[i].isVisible) {\r\n                    return this._renderedItems[i];\r\n                }\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    Container.prototype.getJsonTypeName = function () {\r\n        return \"Container\";\r\n    };\r\n    Container.prototype.isFirstElement = function (element) {\r\n        var designMode = this.isDesignMode();\r\n        for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            if (item.isVisible || designMode) {\r\n                return item === element;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    Container.prototype.isLastElement = function (element) {\r\n        var designMode = this.isDesignMode();\r\n        for (var i = this._items.length - 1; i >= 0; i--) {\r\n            if (this._items[i].isVisible || designMode) {\r\n                return this._items[i] === element;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    Container.prototype.isRtl = function () {\r\n        if (this.rtl !== undefined) {\r\n            return this.rtl;\r\n        }\r\n        else {\r\n            var parentContainer = this.getParentContainer();\r\n            return parentContainer ? parentContainer.isRtl() : false;\r\n        }\r\n    };\r\n    Container.prototype.isBleedingAtTop = function () {\r\n        var firstRenderedItem = this.getFirstVisibleRenderedItem();\r\n        return (this.isBleeding() || (firstRenderedItem ? firstRenderedItem.isBleedingAtTop() : false));\r\n    };\r\n    Container.prototype.isBleedingAtBottom = function () {\r\n        var lastRenderedItem = this.getLastVisibleRenderedItem();\r\n        return (this.isBleeding() ||\r\n            (lastRenderedItem\r\n                ? lastRenderedItem.isBleedingAtBottom() &&\r\n                    lastRenderedItem.getEffectiveStyle() === this.getEffectiveStyle()\r\n                : false));\r\n    };\r\n    Container.prototype.indexOf = function (cardElement) {\r\n        return this._items.indexOf(cardElement);\r\n    };\r\n    Container.prototype.addItem = function (item) {\r\n        this.insertItemAt(item, -1, false);\r\n    };\r\n    Container.prototype.insertItemBefore = function (item, insertBefore) {\r\n        this.insertItemAt(item, this._items.indexOf(insertBefore), false);\r\n    };\r\n    Container.prototype.insertItemAfter = function (item, insertAfter) {\r\n        this.insertItemAt(item, this._items.indexOf(insertAfter) + 1, false);\r\n    };\r\n    Container.prototype.removeItem = function (item) {\r\n        var itemIndex = this._items.indexOf(item);\r\n        if (itemIndex >= 0) {\r\n            this._items.splice(itemIndex, 1);\r\n            item.setParent(undefined);\r\n            this.updateLayout();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    Container.prototype.clear = function () {\r\n        this._items = [];\r\n        this._renderedItems = [];\r\n    };\r\n    Container.prototype.getResourceInformation = function () {\r\n        var result = _super.prototype.getResourceInformation.call(this);\r\n        if (this.backgroundImage.isValid()) {\r\n            result.push({\r\n                // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion -- validated by `isValid()`\r\n                url: this.backgroundImage.url,\r\n                mimeType: \"image\"\r\n            });\r\n        }\r\n        return result;\r\n    };\r\n    Container.prototype.getActionById = function (id) {\r\n        var result = _super.prototype.getActionById.call(this, id);\r\n        if (!result) {\r\n            if (this.selectAction) {\r\n                result = this.selectAction.getActionById(id);\r\n            }\r\n            if (!result) {\r\n                for (var _i = 0, _a = this._items; _i < _a.length; _i++) {\r\n                    var item = _a[_i];\r\n                    result = item.getActionById(id);\r\n                    if (result) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(Container.prototype, \"padding\", {\r\n        get: function () {\r\n            return this.getPadding();\r\n        },\r\n        set: function (value) {\r\n            this.setPadding(value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Container.prototype, \"selectAction\", {\r\n        get: function () {\r\n            return this._selectAction;\r\n        },\r\n        set: function (value) {\r\n            this._selectAction = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Container.prototype, \"bleed\", {\r\n        get: function () {\r\n            return this.getBleed();\r\n        },\r\n        set: function (value) {\r\n            this.setBleed(value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#region Schema\r\n    Container.backgroundImageProperty = new serialization_1.SerializableObjectProperty(serialization_1.Versions.v1_0, \"backgroundImage\", BackgroundImage);\r\n    Container.verticalContentAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_1, \"verticalContentAlignment\", Enums.VerticalAlignment);\r\n    Container.rtlProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_0, \"rtl\");\r\n    __decorate([\r\n        (0, serialization_1.property)(Container.backgroundImageProperty)\r\n    ], Container.prototype, \"backgroundImage\", null);\r\n    __decorate([\r\n        (0, serialization_1.property)(Container.verticalContentAlignmentProperty)\r\n    ], Container.prototype, \"verticalContentAlignment\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Container.rtlProperty)\r\n    ], Container.prototype, \"rtl\", void 0);\r\n    return Container;\r\n}(ContainerBase));\r\nexports.Container = Container;\r\nvar Column = /** @class */ (function (_super) {\r\n    __extends(Column, _super);\r\n    function Column(width) {\r\n        if (width === void 0) { width = \"stretch\"; }\r\n        var _this = _super.call(this) || this;\r\n        _this.width = \"stretch\";\r\n        //#endregion\r\n        _this._computedWeight = 0;\r\n        _this.width = width;\r\n        return _this;\r\n    }\r\n    Column.prototype.adjustRenderedElementSize = function (renderedElement) {\r\n        var minDesignTimeColumnHeight = 20;\r\n        if (this.isDesignMode()) {\r\n            renderedElement.style.minWidth = \"20px\";\r\n            renderedElement.style.minHeight =\r\n                (!this.minPixelHeight\r\n                    ? minDesignTimeColumnHeight\r\n                    : Math.max(this.minPixelHeight, minDesignTimeColumnHeight)) + \"px\";\r\n        }\r\n        else {\r\n            renderedElement.style.minWidth = \"0\";\r\n            if (this.minPixelHeight) {\r\n                renderedElement.style.minHeight = this.minPixelHeight + \"px\";\r\n            }\r\n        }\r\n        if (this.width === \"auto\") {\r\n            renderedElement.style.flex = \"0 1 auto\";\r\n        }\r\n        else if (this.width === \"stretch\") {\r\n            renderedElement.style.flex = \"1 1 50px\";\r\n        }\r\n        else if (this.width instanceof shared_1.SizeAndUnit) {\r\n            if (this.width.unit === Enums.SizeUnit.Pixel) {\r\n                renderedElement.style.flex = \"0 0 auto\";\r\n                renderedElement.style.width = this.width.physicalSize + \"px\";\r\n            }\r\n            else {\r\n                renderedElement.style.flex =\r\n                    \"1 1 \" +\r\n                        (this._computedWeight > 0 ? this._computedWeight : this.width.physicalSize) +\r\n                        \"%\";\r\n            }\r\n        }\r\n    };\r\n    Column.prototype.shouldSerialize = function (_context) {\r\n        return true;\r\n    };\r\n    Object.defineProperty(Column.prototype, \"separatorOrientation\", {\r\n        get: function () {\r\n            return Enums.Orientation.Vertical;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Column.prototype.getJsonTypeName = function () {\r\n        return \"Column\";\r\n    };\r\n    Object.defineProperty(Column.prototype, \"hasVisibleSeparator\", {\r\n        get: function () {\r\n            if (this.parent && this.parent instanceof ColumnSet) {\r\n                return this.separatorElement !== undefined && !this.parent.isLeftMostElement(this);\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Column.prototype, \"isStandalone\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#region Schema\r\n    Column.widthProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_0, \"width\", function (sender, prop, source, context) {\r\n        var result = prop.defaultValue;\r\n        var value = source[prop.name];\r\n        var invalidWidth = false;\r\n        if (typeof value === \"number\" && !isNaN(value)) {\r\n            result = new shared_1.SizeAndUnit(value, Enums.SizeUnit.Weight);\r\n        }\r\n        else if (value === \"auto\" || value === \"stretch\") {\r\n            result = value;\r\n        }\r\n        else if (typeof value === \"string\") {\r\n            try {\r\n                result = shared_1.SizeAndUnit.parse(value);\r\n                if (result.unit === Enums.SizeUnit.Pixel &&\r\n                    prop.targetVersion.compareTo(context.targetVersion) > 0) {\r\n                    invalidWidth = true;\r\n                }\r\n            }\r\n            catch (e) {\r\n                invalidWidth = true;\r\n            }\r\n        }\r\n        else {\r\n            invalidWidth = true;\r\n        }\r\n        if (invalidWidth) {\r\n            context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidColumnWidth(value));\r\n            result = \"auto\";\r\n        }\r\n        return result;\r\n    }, function (sender, property, target, value, context) {\r\n        if (value instanceof shared_1.SizeAndUnit) {\r\n            if (value.unit === Enums.SizeUnit.Pixel) {\r\n                context.serializeValue(target, \"width\", value.physicalSize + \"px\");\r\n            }\r\n            else {\r\n                context.serializeNumber(target, \"width\", value.physicalSize);\r\n            }\r\n        }\r\n        else {\r\n            context.serializeValue(target, \"width\", value);\r\n        }\r\n    }, \"stretch\");\r\n    __decorate([\r\n        (0, serialization_1.property)(Column.widthProperty)\r\n    ], Column.prototype, \"width\", void 0);\r\n    return Column;\r\n}(Container));\r\nexports.Column = Column;\r\nvar ColumnSet = /** @class */ (function (_super) {\r\n    __extends(ColumnSet, _super);\r\n    function ColumnSet() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._columns = [];\r\n        return _this;\r\n    }\r\n    ColumnSet.prototype.createColumnInstance = function (source, context) {\r\n        return context.parseCardObject(this, source, [], !this.isDesignMode(), function (typeName) {\r\n            return !typeName || typeName === \"Column\" ? new Column() : undefined;\r\n        }, function (typeName, _errorType) {\r\n            context.logParseEvent(undefined, Enums.ValidationEvent.ElementTypeNotAllowed, strings_1.Strings.errors.elementTypeNotAllowed(typeName));\r\n        });\r\n    };\r\n    ColumnSet.prototype.internalRender = function () {\r\n        this._renderedColumns = [];\r\n        if (this._columns.length > 0) {\r\n            // Cache hostConfig to avoid walking the parent hierarchy several times\r\n            var hostConfig = this.hostConfig;\r\n            var element = document.createElement(\"div\");\r\n            element.className = hostConfig.makeCssClassName(\"ac-columnSet\");\r\n            element.style.display = \"flex\";\r\n            if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation) {\r\n                // See comment in Container.internalRender()\r\n                element.style.minHeight = \"-webkit-min-content\";\r\n            }\r\n            switch (this.getEffectiveHorizontalAlignment()) {\r\n                case Enums.HorizontalAlignment.Center:\r\n                    element.style.justifyContent = \"center\";\r\n                    break;\r\n                case Enums.HorizontalAlignment.Right:\r\n                    element.style.justifyContent = \"flex-end\";\r\n                    break;\r\n                default:\r\n                    element.style.justifyContent = \"flex-start\";\r\n                    break;\r\n            }\r\n            var totalWeight = 0;\r\n            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n                var column = _a[_i];\r\n                if (column.width instanceof shared_1.SizeAndUnit &&\r\n                    column.width.unit === Enums.SizeUnit.Weight) {\r\n                    totalWeight += column.width.physicalSize;\r\n                }\r\n            }\r\n            for (var _b = 0, _c = this._columns; _b < _c.length; _b++) {\r\n                var column = _c[_b];\r\n                if (column.width instanceof shared_1.SizeAndUnit &&\r\n                    column.width.unit === Enums.SizeUnit.Weight &&\r\n                    totalWeight > 0) {\r\n                    var computedWeight = (100 / totalWeight) * column.width.physicalSize;\r\n                    // Best way to emulate \"internal\" access I know of\r\n                    column[\"_computedWeight\"] = computedWeight;\r\n                }\r\n                var renderedColumn = column.render();\r\n                if (renderedColumn) {\r\n                    if (this._renderedColumns.length > 0 && column.separatorElement) {\r\n                        column.separatorElement.style.flex = \"0 0 auto\";\r\n                        Utils.appendChild(element, column.separatorElement);\r\n                    }\r\n                    Utils.appendChild(element, renderedColumn);\r\n                    this._renderedColumns.push(column);\r\n                }\r\n            }\r\n            return this._renderedColumns.length > 0 ? element : undefined;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    };\r\n    ColumnSet.prototype.truncateOverflow = function (maxHeight) {\r\n        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n            var column = _a[_i];\r\n            column[\"handleOverflow\"](maxHeight);\r\n        }\r\n        return true;\r\n    };\r\n    ColumnSet.prototype.undoOverflowTruncation = function () {\r\n        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n            var column = _a[_i];\r\n            column[\"resetOverflow\"]();\r\n        }\r\n    };\r\n    Object.defineProperty(ColumnSet.prototype, \"isSelectable\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ColumnSet.prototype.internalParse = function (source, context) {\r\n        _super.prototype.internalParse.call(this, source, context);\r\n        this._columns = [];\r\n        this._renderedColumns = [];\r\n        var jsonColumns = source[\"columns\"];\r\n        if (Array.isArray(jsonColumns)) {\r\n            for (var _i = 0, jsonColumns_1 = jsonColumns; _i < jsonColumns_1.length; _i++) {\r\n                var item = jsonColumns_1[_i];\r\n                var column = this.createColumnInstance(item, context);\r\n                if (column) {\r\n                    this._columns.push(column);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ColumnSet.prototype.internalToJSON = function (target, context) {\r\n        _super.prototype.internalToJSON.call(this, target, context);\r\n        context.serializeArray(target, \"columns\", this._columns);\r\n    };\r\n    ColumnSet.prototype.isFirstElement = function (element) {\r\n        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n            var column = _a[_i];\r\n            if (column.isVisible) {\r\n                return column === element;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    ColumnSet.prototype.isBleedingAtTop = function () {\r\n        if (this.isBleeding()) {\r\n            return true;\r\n        }\r\n        if (this._renderedColumns && this._renderedColumns.length > 0) {\r\n            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n                var column = _a[_i];\r\n                if (column.isBleedingAtTop()) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    ColumnSet.prototype.isBleedingAtBottom = function () {\r\n        if (this.isBleeding()) {\r\n            return true;\r\n        }\r\n        if (this._renderedColumns && this._renderedColumns.length > 0) {\r\n            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n                var column = _a[_i];\r\n                if (column.isBleedingAtBottom()) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    ColumnSet.prototype.getItemCount = function () {\r\n        return this._columns.length;\r\n    };\r\n    ColumnSet.prototype.getFirstVisibleRenderedItem = function () {\r\n        if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {\r\n            return this._renderedColumns[0];\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    };\r\n    ColumnSet.prototype.getLastVisibleRenderedItem = function () {\r\n        if (this.renderedElement && this._renderedColumns && this._renderedColumns.length > 0) {\r\n            return this._renderedColumns[this._renderedColumns.length - 1];\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    };\r\n    ColumnSet.prototype.getColumnAt = function (index) {\r\n        return this._columns[index];\r\n    };\r\n    ColumnSet.prototype.getItemAt = function (index) {\r\n        return this.getColumnAt(index);\r\n    };\r\n    ColumnSet.prototype.getJsonTypeName = function () {\r\n        return \"ColumnSet\";\r\n    };\r\n    ColumnSet.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        var weightedColumns = 0;\r\n        var stretchedColumns = 0;\r\n        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n            var column = _a[_i];\r\n            if (typeof column.width === \"number\") {\r\n                weightedColumns++;\r\n            }\r\n            else if (column.width === \"stretch\") {\r\n                stretchedColumns++;\r\n            }\r\n        }\r\n        if (weightedColumns > 0 && stretchedColumns > 0) {\r\n            context.addFailure(this, Enums.ValidationEvent.Hint, strings_1.Strings.hints.dontUseWeightedAndStrecthedColumnsInSameSet());\r\n        }\r\n    };\r\n    ColumnSet.prototype.addColumn = function (column) {\r\n        if (!column.parent) {\r\n            this._columns.push(column);\r\n            column.setParent(this);\r\n        }\r\n        else {\r\n            throw new Error(strings_1.Strings.errors.columnAlreadyBelongsToAnotherSet());\r\n        }\r\n    };\r\n    ColumnSet.prototype.removeItem = function (item) {\r\n        if (item instanceof Column) {\r\n            var itemIndex = this._columns.indexOf(item);\r\n            if (itemIndex >= 0) {\r\n                this._columns.splice(itemIndex, 1);\r\n                item.setParent(undefined);\r\n                this.updateLayout();\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    ColumnSet.prototype.indexOf = function (cardElement) {\r\n        return cardElement instanceof Column ? this._columns.indexOf(cardElement) : -1;\r\n    };\r\n    ColumnSet.prototype.isLeftMostElement = function (element) {\r\n        return this._columns.indexOf(element) === 0;\r\n    };\r\n    ColumnSet.prototype.isRightMostElement = function (element) {\r\n        return this._columns.indexOf(element) === this._columns.length - 1;\r\n    };\r\n    ColumnSet.prototype.isTopElement = function (element) {\r\n        return this._columns.indexOf(element) >= 0;\r\n    };\r\n    ColumnSet.prototype.isBottomElement = function (element) {\r\n        return this._columns.indexOf(element) >= 0;\r\n    };\r\n    ColumnSet.prototype.getActionById = function (id) {\r\n        var result = undefined;\r\n        for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n            var column = _a[_i];\r\n            result = column.getActionById(id);\r\n            if (result) {\r\n                break;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(ColumnSet.prototype, \"bleed\", {\r\n        get: function () {\r\n            return this.getBleed();\r\n        },\r\n        set: function (value) {\r\n            this.setBleed(value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ColumnSet.prototype, \"padding\", {\r\n        get: function () {\r\n            return this.getPadding();\r\n        },\r\n        set: function (value) {\r\n            this.setPadding(value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ColumnSet.prototype, \"selectAction\", {\r\n        get: function () {\r\n            return this._selectAction;\r\n        },\r\n        set: function (value) {\r\n            this._selectAction = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return ColumnSet;\r\n}(ContainerBase));\r\nexports.ColumnSet = ColumnSet;\r\nfunction raiseImageLoadedEvent(image) {\r\n    var card = image.getRootElement();\r\n    var onImageLoadedHandler = card && card.onImageLoaded ? card.onImageLoaded : AdaptiveCard.onImageLoaded;\r\n    if (onImageLoadedHandler) {\r\n        onImageLoadedHandler(image);\r\n    }\r\n}\r\nfunction raiseAnchorClickedEvent(element, anchor, ev) {\r\n    var card = element.getRootElement();\r\n    var onAnchorClickedHandler = card && card.onAnchorClicked ? card.onAnchorClicked : AdaptiveCard.onAnchorClicked;\r\n    return onAnchorClickedHandler !== undefined\r\n        ? onAnchorClickedHandler(element, anchor, ev)\r\n        : false;\r\n}\r\nfunction raiseExecuteActionEvent(action) {\r\n    var card = action.parent ? action.parent.getRootElement() : undefined;\r\n    var onExecuteActionHandler = card && card.onExecuteAction ? card.onExecuteAction : AdaptiveCard.onExecuteAction;\r\n    if (action.prepareForExecution() && onExecuteActionHandler) {\r\n        onExecuteActionHandler(action);\r\n    }\r\n}\r\nfunction raiseInlineCardExpandedEvent(action, isExpanded) {\r\n    var card = action.parent ? action.parent.getRootElement() : undefined;\r\n    var onInlineCardExpandedHandler = card && card.onInlineCardExpanded\r\n        ? card.onInlineCardExpanded\r\n        : AdaptiveCard.onInlineCardExpanded;\r\n    if (onInlineCardExpandedHandler) {\r\n        onInlineCardExpandedHandler(action, isExpanded);\r\n    }\r\n}\r\nfunction raiseInputValueChangedEvent(input) {\r\n    var card = input.getRootElement();\r\n    var onInputValueChangedHandler = card && card.onInputValueChanged\r\n        ? card.onInputValueChanged\r\n        : AdaptiveCard.onInputValueChanged;\r\n    if (onInputValueChangedHandler) {\r\n        onInputValueChangedHandler(input);\r\n    }\r\n}\r\nfunction raiseElementVisibilityChangedEvent(element, shouldUpdateLayout) {\r\n    if (shouldUpdateLayout === void 0) { shouldUpdateLayout = true; }\r\n    var rootElement = element.getRootElement();\r\n    if (shouldUpdateLayout) {\r\n        rootElement.updateLayout();\r\n    }\r\n    var card = rootElement;\r\n    var onElementVisibilityChangedHandler = card && card.onElementVisibilityChanged\r\n        ? card.onElementVisibilityChanged\r\n        : AdaptiveCard.onElementVisibilityChanged;\r\n    if (onElementVisibilityChangedHandler !== undefined) {\r\n        onElementVisibilityChangedHandler(element);\r\n    }\r\n}\r\n/**\r\n * @returns return false to continue with default context menu; return true to skip SDK default context menu\r\n */\r\nfunction raiseDisplayOverflowActionMenuEvent(action, target) {\r\n    var card = action.parent ? action.parent.getRootElement() : undefined;\r\n    var onDisplayOverflowActionMenuHandler = card && card.onDisplayOverflowActionMenu\r\n        ? card.onDisplayOverflowActionMenu\r\n        : AdaptiveCard.onDisplayOverflowActionMenu;\r\n    return onDisplayOverflowActionMenuHandler !== undefined\r\n        ? onDisplayOverflowActionMenuHandler(action.getActions(), target)\r\n        : false;\r\n}\r\n/**\r\n * @returns return false to continue with default action button; return true to skip SDK default action button\r\n */\r\nfunction raiseRenderOverflowActionsEvent(action, isAtRootLevelActions) {\r\n    var card = action.parent ? action.parent.getRootElement() : undefined;\r\n    var onRenderOverflowActionsHandler = card && card.onRenderOverflowActions\r\n        ? card.onRenderOverflowActions\r\n        : AdaptiveCard.onRenderOverflowActions;\r\n    return onRenderOverflowActionsHandler !== undefined\r\n        ? onRenderOverflowActionsHandler(action.getActions(), isAtRootLevelActions)\r\n        : false;\r\n}\r\nvar ContainerWithActions = /** @class */ (function (_super) {\r\n    __extends(ContainerWithActions, _super);\r\n    function ContainerWithActions() {\r\n        var _this = _super.call(this) || this;\r\n        _this._actionCollection = new ActionCollection(_this);\r\n        return _this;\r\n    }\r\n    ContainerWithActions.prototype.internalParse = function (source, context) {\r\n        _super.prototype.internalParse.call(this, source, context);\r\n        this.parseActions(source, context);\r\n    };\r\n    ContainerWithActions.prototype.parseActions = function (source, context) {\r\n        this._actionCollection.parse(source[\"actions\"], context);\r\n    };\r\n    ContainerWithActions.prototype.internalToJSON = function (target, context) {\r\n        _super.prototype.internalToJSON.call(this, target, context);\r\n        this._actionCollection.toJSON(target, \"actions\", context);\r\n    };\r\n    ContainerWithActions.prototype.internalRender = function () {\r\n        var element = _super.prototype.internalRender.call(this);\r\n        if (element) {\r\n            var renderedActions = this._actionCollection.render(this.hostConfig.actions.actionsOrientation);\r\n            if (renderedActions) {\r\n                Utils.appendChild(element, renderSeparation(this.hostConfig, {\r\n                    spacing: this.hostConfig.getEffectiveSpacing(this.hostConfig.actions.spacing)\r\n                }, Enums.Orientation.Horizontal));\r\n                Utils.appendChild(element, renderedActions);\r\n            }\r\n            if (this.renderIfEmpty) {\r\n                return element;\r\n            }\r\n            else {\r\n                return element.children.length > 0 ? element : undefined;\r\n            }\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    };\r\n    ContainerWithActions.prototype.getHasExpandedAction = function () {\r\n        if (this.renderedActionCount === 0) {\r\n            return false;\r\n        }\r\n        else if (this.renderedActionCount === 1) {\r\n            return (this._actionCollection.expandedAction !== undefined &&\r\n                !this.hostConfig.actions.preExpandSingleShowCardAction);\r\n        }\r\n        else {\r\n            return this._actionCollection.expandedAction !== undefined;\r\n        }\r\n    };\r\n    Object.defineProperty(ContainerWithActions.prototype, \"renderedActionCount\", {\r\n        get: function () {\r\n            return this._actionCollection.renderedActionCount;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ContainerWithActions.prototype, \"renderIfEmpty\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ContainerWithActions.prototype.releaseDOMResources = function () {\r\n        _super.prototype.releaseDOMResources.call(this);\r\n        this._actionCollection.releaseDOMResources();\r\n    };\r\n    ContainerWithActions.prototype.getActionCount = function () {\r\n        return this._actionCollection.getActionCount();\r\n    };\r\n    ContainerWithActions.prototype.getActionAt = function (index) {\r\n        if (index >= 0 && index < this.getActionCount()) {\r\n            return this._actionCollection.getActionAt(index);\r\n        }\r\n        else {\r\n            return _super.prototype.getActionAt.call(this, index);\r\n        }\r\n    };\r\n    ContainerWithActions.prototype.getActionById = function (id) {\r\n        var result = this._actionCollection.getActionById(id);\r\n        return result ? result : _super.prototype.getActionById.call(this, id);\r\n    };\r\n    ContainerWithActions.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        if (this._actionCollection) {\r\n            this._actionCollection.validateProperties(context);\r\n        }\r\n    };\r\n    ContainerWithActions.prototype.isLastElement = function (element) {\r\n        return _super.prototype.isLastElement.call(this, element) && this._actionCollection.getActionCount() === 0;\r\n    };\r\n    ContainerWithActions.prototype.addAction = function (action) {\r\n        this._actionCollection.addAction(action);\r\n    };\r\n    ContainerWithActions.prototype.clear = function () {\r\n        _super.prototype.clear.call(this);\r\n        this._actionCollection.clear();\r\n    };\r\n    ContainerWithActions.prototype.getAllInputs = function (processActions) {\r\n        if (processActions === void 0) { processActions = true; }\r\n        var result = _super.prototype.getAllInputs.call(this, processActions);\r\n        if (processActions) {\r\n            result.push.apply(result, this._actionCollection.getAllInputs(processActions));\r\n        }\r\n        return result;\r\n    };\r\n    ContainerWithActions.prototype.getResourceInformation = function () {\r\n        var result = _super.prototype.getResourceInformation.call(this);\r\n        result.push.apply(result, this._actionCollection.getResourceInformation());\r\n        return result;\r\n    };\r\n    ContainerWithActions.prototype.isBleedingAtBottom = function () {\r\n        if (this._actionCollection.renderedActionCount === 0) {\r\n            return _super.prototype.isBleedingAtBottom.call(this);\r\n        }\r\n        else {\r\n            if (this._actionCollection.getActionCount() === 1) {\r\n                return (this._actionCollection.expandedAction !== undefined &&\r\n                    !this.hostConfig.actions.preExpandSingleShowCardAction);\r\n            }\r\n            else {\r\n                return this._actionCollection.expandedAction !== undefined;\r\n            }\r\n        }\r\n    };\r\n    ContainerWithActions.prototype.getForbiddenActionNames = function () {\r\n        return [];\r\n    };\r\n    Object.defineProperty(ContainerWithActions.prototype, \"isStandalone\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return ContainerWithActions;\r\n}(Container));\r\nexports.ContainerWithActions = ContainerWithActions;\r\nvar RefreshActionProperty = /** @class */ (function (_super) {\r\n    __extends(RefreshActionProperty, _super);\r\n    function RefreshActionProperty(targetVersion, name) {\r\n        var _this = _super.call(this, targetVersion, name, undefined) || this;\r\n        _this.targetVersion = targetVersion;\r\n        _this.name = name;\r\n        return _this;\r\n    }\r\n    RefreshActionProperty.prototype.parse = function (sender, source, context) {\r\n        var action = context.parseAction(sender.parent, source[this.name], [], false);\r\n        if (action !== undefined) {\r\n            if (action instanceof ExecuteAction) {\r\n                return action;\r\n            }\r\n            context.logParseEvent(sender, Enums.ValidationEvent.ActionTypeNotAllowed, strings_1.Strings.errors.actionTypeNotAllowed(action.getJsonTypeName()));\r\n        }\r\n        context.logParseEvent(sender, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.propertyMustBeSet(\"action\"));\r\n        return undefined;\r\n    };\r\n    RefreshActionProperty.prototype.toJSON = function (sender, target, value, context) {\r\n        context.serializeValue(target, this.name, value ? value.toJSON(context) : undefined, undefined, true);\r\n    };\r\n    return RefreshActionProperty;\r\n}(serialization_1.PropertyDefinition));\r\nexports.RefreshActionProperty = RefreshActionProperty;\r\nvar RefreshDefinition = /** @class */ (function (_super) {\r\n    __extends(RefreshDefinition, _super);\r\n    function RefreshDefinition() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(RefreshDefinition.prototype, \"action\", {\r\n        get: function () {\r\n            return this.getValue(RefreshDefinition.actionProperty);\r\n        },\r\n        set: function (value) {\r\n            this.setValue(RefreshDefinition.actionProperty, value);\r\n            if (value) {\r\n                value.setParent(this.parent);\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    RefreshDefinition.prototype.getSchemaKey = function () {\r\n        return \"RefreshDefinition\";\r\n    };\r\n    //#region Schema\r\n    RefreshDefinition.actionProperty = new RefreshActionProperty(serialization_1.Versions.v1_4, \"action\");\r\n    RefreshDefinition.userIdsProperty = new serialization_1.StringArrayProperty(serialization_1.Versions.v1_4, \"userIds\");\r\n    __decorate([\r\n        (0, serialization_1.property)(RefreshDefinition.actionProperty)\r\n    ], RefreshDefinition.prototype, \"action\", null);\r\n    __decorate([\r\n        (0, serialization_1.property)(RefreshDefinition.userIdsProperty)\r\n    ], RefreshDefinition.prototype, \"userIds\", void 0);\r\n    return RefreshDefinition;\r\n}(serialization_1.SerializableObject));\r\nexports.RefreshDefinition = RefreshDefinition;\r\nvar AuthCardButton = /** @class */ (function (_super) {\r\n    __extends(AuthCardButton, _super);\r\n    function AuthCardButton() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    AuthCardButton.prototype.getSchemaKey = function () {\r\n        return \"AuthCardButton\";\r\n    };\r\n    //#region Schema\r\n    AuthCardButton.typeProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_4, \"type\");\r\n    AuthCardButton.titleProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_4, \"title\");\r\n    AuthCardButton.imageProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_4, \"image\");\r\n    AuthCardButton.valueProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_4, \"value\");\r\n    __decorate([\r\n        (0, serialization_1.property)(AuthCardButton.typeProperty)\r\n    ], AuthCardButton.prototype, \"type\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(AuthCardButton.titleProperty)\r\n    ], AuthCardButton.prototype, \"title\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(AuthCardButton.imageProperty)\r\n    ], AuthCardButton.prototype, \"image\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(AuthCardButton.valueProperty)\r\n    ], AuthCardButton.prototype, \"value\", void 0);\r\n    return AuthCardButton;\r\n}(serialization_1.SerializableObject));\r\nexports.AuthCardButton = AuthCardButton;\r\nvar TokenExchangeResource = /** @class */ (function (_super) {\r\n    __extends(TokenExchangeResource, _super);\r\n    function TokenExchangeResource() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    TokenExchangeResource.prototype.getSchemaKey = function () {\r\n        return \"TokenExchangeResource\";\r\n    };\r\n    //#region Schema\r\n    TokenExchangeResource.idProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_4, \"id\");\r\n    TokenExchangeResource.uriProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_4, \"uri\");\r\n    TokenExchangeResource.providerIdProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_4, \"providerId\");\r\n    __decorate([\r\n        (0, serialization_1.property)(TokenExchangeResource.idProperty)\r\n    ], TokenExchangeResource.prototype, \"id\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(TokenExchangeResource.uriProperty)\r\n    ], TokenExchangeResource.prototype, \"uri\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(TokenExchangeResource.providerIdProperty)\r\n    ], TokenExchangeResource.prototype, \"providerId\", void 0);\r\n    return TokenExchangeResource;\r\n}(serialization_1.SerializableObject));\r\nexports.TokenExchangeResource = TokenExchangeResource;\r\nvar Authentication = /** @class */ (function (_super) {\r\n    __extends(Authentication, _super);\r\n    function Authentication() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Authentication.prototype.getSchemaKey = function () {\r\n        return \"Authentication\";\r\n    };\r\n    //#region Schema\r\n    Authentication.textProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_4, \"text\");\r\n    Authentication.connectionNameProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_4, \"connectionName\");\r\n    Authentication.buttonsProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_4, \"buttons\", AuthCardButton);\r\n    Authentication.tokenExchangeResourceProperty = new serialization_1.SerializableObjectProperty(serialization_1.Versions.v1_4, \"tokenExchangeResource\", TokenExchangeResource, true);\r\n    __decorate([\r\n        (0, serialization_1.property)(Authentication.textProperty)\r\n    ], Authentication.prototype, \"text\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Authentication.connectionNameProperty)\r\n    ], Authentication.prototype, \"connectionName\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Authentication.buttonsProperty)\r\n    ], Authentication.prototype, \"buttons\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Authentication.tokenExchangeResourceProperty)\r\n    ], Authentication.prototype, \"tokenExchangeResource\", void 0);\r\n    return Authentication;\r\n}(serialization_1.SerializableObject));\r\nexports.Authentication = Authentication;\r\n// @dynamic\r\nvar AdaptiveCard = /** @class */ (function (_super) {\r\n    __extends(AdaptiveCard, _super);\r\n    function AdaptiveCard() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.designMode = false;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(AdaptiveCard.prototype, \"refresh\", {\r\n        get: function () {\r\n            return this.getValue(AdaptiveCard.refreshProperty);\r\n        },\r\n        set: function (value) {\r\n            this.setValue(AdaptiveCard.refreshProperty, value);\r\n            if (value) {\r\n                value.parent = this;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AdaptiveCard, \"processMarkdown\", {\r\n        get: function () {\r\n            throw new Error(strings_1.Strings.errors.processMarkdownEventRemoved());\r\n        },\r\n        // eslint-disable-next-line @typescript-eslint/naming-convention\r\n        set: function (_value) {\r\n            throw new Error(strings_1.Strings.errors.processMarkdownEventRemoved());\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    AdaptiveCard.applyMarkdown = function (text) {\r\n        var result = {\r\n            didProcess: false\r\n        };\r\n        if (AdaptiveCard.onProcessMarkdown) {\r\n            AdaptiveCard.onProcessMarkdown(text, result);\r\n        }\r\n        else if (window.markdownit) {\r\n            // Check for markdownit\r\n            var markdownIt = window.markdownit;\r\n            result.outputHtml = markdownIt().render(text);\r\n            result.didProcess = true;\r\n        }\r\n        else if (!AdaptiveCard._haveWarnedAboutNoMarkdownProcessing) {\r\n            // eslint-disable-next-line no-console\r\n            console.warn(strings_1.Strings.errors.markdownProcessingNotEnabled);\r\n            AdaptiveCard._haveWarnedAboutNoMarkdownProcessing = true;\r\n        }\r\n        return result;\r\n    };\r\n    AdaptiveCard.prototype.isVersionSupported = function () {\r\n        if (this.bypassVersionCheck) {\r\n            return true;\r\n        }\r\n        else {\r\n            var unsupportedVersion = !this.version ||\r\n                !this.version.isValid ||\r\n                this.maxVersion.major < this.version.major ||\r\n                (this.maxVersion.major === this.version.major &&\r\n                    this.maxVersion.minor < this.version.minor);\r\n            return !unsupportedVersion;\r\n        }\r\n    };\r\n    AdaptiveCard.prototype.getDefaultSerializationContext = function () {\r\n        return new SerializationContext(this.version);\r\n    };\r\n    AdaptiveCard.prototype.getItemsCollectionPropertyName = function () {\r\n        return \"body\";\r\n    };\r\n    AdaptiveCard.prototype.canHostSingletons = function () {\r\n        return true;\r\n    };\r\n    AdaptiveCard.prototype.internalParse = function (source, context) {\r\n        this._fallbackCard = undefined;\r\n        var fallbackElement = context.parseElement(undefined, source[\"fallback\"], this.forbiddenChildElements(), !this.isDesignMode());\r\n        if (fallbackElement) {\r\n            this._fallbackCard = new AdaptiveCard();\r\n            this._fallbackCard.addItem(fallbackElement);\r\n        }\r\n        _super.prototype.internalParse.call(this, source, context);\r\n    };\r\n    AdaptiveCard.prototype.internalToJSON = function (target, context) {\r\n        this.setValue(AdaptiveCard.versionProperty, context.targetVersion);\r\n        _super.prototype.internalToJSON.call(this, target, context);\r\n    };\r\n    AdaptiveCard.prototype.internalRender = function () {\r\n        var renderedElement = _super.prototype.internalRender.call(this);\r\n        if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation && renderedElement) {\r\n            // Unlike containers, the root card element should be allowed to\r\n            // be shorter than its content (otherwise the overflow truncation\r\n            // logic would never get triggered)\r\n            renderedElement.style.removeProperty(\"minHeight\");\r\n        }\r\n        return renderedElement;\r\n    };\r\n    AdaptiveCard.prototype.getHasBackground = function (ignoreBackgroundImages) {\r\n        if (ignoreBackgroundImages === void 0) { ignoreBackgroundImages = false; }\r\n        return true;\r\n    };\r\n    AdaptiveCard.prototype.getDefaultPadding = function () {\r\n        return new shared_1.PaddingDefinition(Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding, Enums.Spacing.Padding);\r\n    };\r\n    AdaptiveCard.prototype.shouldSerialize = function (_context) {\r\n        return true;\r\n    };\r\n    Object.defineProperty(AdaptiveCard.prototype, \"renderIfEmpty\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AdaptiveCard.prototype, \"bypassVersionCheck\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AdaptiveCard.prototype, \"allowCustomStyle\", {\r\n        get: function () {\r\n            return this.hostConfig.adaptiveCard && this.hostConfig.adaptiveCard.allowCustomStyle;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AdaptiveCard.prototype, \"hasBackground\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    AdaptiveCard.prototype.getJsonTypeName = function () {\r\n        return \"AdaptiveCard\";\r\n    };\r\n    AdaptiveCard.prototype.internalValidateProperties = function (context) {\r\n        _super.prototype.internalValidateProperties.call(this, context);\r\n        if (this.getValue(CardElement.typeNameProperty) !== \"AdaptiveCard\") {\r\n            context.addFailure(this, Enums.ValidationEvent.MissingCardType, strings_1.Strings.errors.invalidCardType());\r\n        }\r\n        if (!this.bypassVersionCheck && !this.version) {\r\n            context.addFailure(this, Enums.ValidationEvent.PropertyCantBeNull, strings_1.Strings.errors.propertyMustBeSet(\"version\"));\r\n        }\r\n        else if (!this.isVersionSupported()) {\r\n            context.addFailure(this, Enums.ValidationEvent.UnsupportedCardVersion, strings_1.Strings.errors.unsupportedCardVersion(this.version.toString(), this.maxVersion.toString()));\r\n        }\r\n    };\r\n    AdaptiveCard.prototype.render = function (target) {\r\n        var renderedCard;\r\n        if (this.shouldFallback() && this._fallbackCard) {\r\n            this._fallbackCard.hostConfig = this.hostConfig;\r\n            renderedCard = this._fallbackCard.render();\r\n        }\r\n        else {\r\n            renderedCard = _super.prototype.render.call(this);\r\n            if (renderedCard) {\r\n                renderedCard.classList.add(this.hostConfig.makeCssClassName(\"ac-adaptiveCard\"));\r\n                // Having a tabIndex on the root container for a card can mess up accessibility in some scenarios.\r\n                // However, we've shipped this behavior before, and so can't just turn it off in a point release. For\r\n                // now, to unblock accessibility scenarios for our customers, we've got an option to turn it off. In a\r\n                // future release, we should strongly consider flipping the default such that we *don't* emit a tabIndex\r\n                // by default.\r\n                if (shared_1.GlobalSettings.setTabIndexAtCardRoot) {\r\n                    renderedCard.tabIndex = 0;\r\n                }\r\n                if (this.speak) {\r\n                    renderedCard.setAttribute(\"aria-label\", this.speak);\r\n                }\r\n            }\r\n        }\r\n        if (target) {\r\n            Utils.appendChild(target, renderedCard);\r\n            this.updateLayout();\r\n        }\r\n        return renderedCard;\r\n    };\r\n    AdaptiveCard.prototype.updateLayout = function (processChildren) {\r\n        if (processChildren === void 0) { processChildren = true; }\r\n        _super.prototype.updateLayout.call(this, processChildren);\r\n        if (shared_1.GlobalSettings.useAdvancedCardBottomTruncation && this.isDisplayed()) {\r\n            var padding = this.hostConfig.getEffectiveSpacing(Enums.Spacing.Default);\r\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\r\n            this[\"handleOverflow\"](this.renderedElement.offsetHeight - padding);\r\n        }\r\n    };\r\n    AdaptiveCard.prototype.shouldFallback = function () {\r\n        return _super.prototype.shouldFallback.call(this) || !this.isVersionSupported();\r\n    };\r\n    Object.defineProperty(AdaptiveCard.prototype, \"hasVisibleSeparator\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    AdaptiveCard.schemaUrl = \"http://adaptivecards.io/schemas/adaptive-card.json\";\r\n    //#region Schema\r\n    // eslint-disable-next-line @typescript-eslint/naming-convention\r\n    AdaptiveCard.$schemaProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_0, \"$schema\", function (sender, property, source, context) {\r\n        return AdaptiveCard.schemaUrl;\r\n    }, function (sender, prop, target, value, context) {\r\n        context.serializeValue(target, prop.name, AdaptiveCard.schemaUrl);\r\n    });\r\n    AdaptiveCard.versionProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_0, \"version\", function (sender, prop, source, context) {\r\n        var version = serialization_1.Version.parse(source[prop.name], context);\r\n        if (version === undefined) {\r\n            version = serialization_1.Versions.latest;\r\n            context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidCardVersion(version.toString()));\r\n        }\r\n        return version;\r\n    }, function (sender, prop, target, value, context) {\r\n        if (value !== undefined) {\r\n            context.serializeValue(target, prop.name, value.toString());\r\n        }\r\n    }, serialization_1.Versions.v1_0);\r\n    AdaptiveCard.fallbackTextProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"fallbackText\");\r\n    AdaptiveCard.speakProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"speak\");\r\n    AdaptiveCard.refreshProperty = new serialization_1.SerializableObjectProperty(serialization_1.Versions.v1_4, \"refresh\", RefreshDefinition, true);\r\n    AdaptiveCard.authenticationProperty = new serialization_1.SerializableObjectProperty(serialization_1.Versions.v1_4, \"authentication\", Authentication, true);\r\n    //#endregion\r\n    AdaptiveCard._haveWarnedAboutNoMarkdownProcessing = false;\r\n    __decorate([\r\n        (0, serialization_1.property)(AdaptiveCard.versionProperty)\r\n    ], AdaptiveCard.prototype, \"version\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(AdaptiveCard.fallbackTextProperty)\r\n    ], AdaptiveCard.prototype, \"fallbackText\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(AdaptiveCard.speakProperty)\r\n    ], AdaptiveCard.prototype, \"speak\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(AdaptiveCard.refreshProperty)\r\n    ], AdaptiveCard.prototype, \"refresh\", null);\r\n    __decorate([\r\n        (0, serialization_1.property)(AdaptiveCard.authenticationProperty)\r\n    ], AdaptiveCard.prototype, \"authentication\", void 0);\r\n    return AdaptiveCard;\r\n}(ContainerWithActions));\r\nexports.AdaptiveCard = AdaptiveCard;\r\nvar InlineAdaptiveCard = /** @class */ (function (_super) {\r\n    __extends(InlineAdaptiveCard, _super);\r\n    function InlineAdaptiveCard() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.suppressStyle = false;\r\n        return _this;\r\n    }\r\n    InlineAdaptiveCard.prototype.getSchemaKey = function () {\r\n        return \"InlineAdaptiveCard\";\r\n    };\r\n    InlineAdaptiveCard.prototype.populateSchema = function (schema) {\r\n        _super.prototype.populateSchema.call(this, schema);\r\n        schema.remove(AdaptiveCard.$schemaProperty, AdaptiveCard.versionProperty);\r\n    };\r\n    //#endregion\r\n    InlineAdaptiveCard.prototype.getDefaultPadding = function () {\r\n        return new shared_1.PaddingDefinition(this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding, Enums.Spacing.Padding, this.suppressStyle ? Enums.Spacing.None : Enums.Spacing.Padding, Enums.Spacing.Padding);\r\n    };\r\n    Object.defineProperty(InlineAdaptiveCard.prototype, \"bypassVersionCheck\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(InlineAdaptiveCard.prototype, \"defaultStyle\", {\r\n        get: function () {\r\n            if (this.suppressStyle) {\r\n                return Enums.ContainerStyle.Default;\r\n            }\r\n            else {\r\n                return this.hostConfig.actions.showCard.style\r\n                    ? this.hostConfig.actions.showCard.style\r\n                    : Enums.ContainerStyle.Emphasis;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    InlineAdaptiveCard.prototype.render = function (target) {\r\n        var renderedCard = _super.prototype.render.call(this, target);\r\n        if (renderedCard) {\r\n            renderedCard.setAttribute(\"aria-live\", \"polite\");\r\n            renderedCard.removeAttribute(\"tabindex\");\r\n        }\r\n        return renderedCard;\r\n    };\r\n    return InlineAdaptiveCard;\r\n}(AdaptiveCard));\r\nvar SerializationContext = /** @class */ (function (_super) {\r\n    __extends(SerializationContext, _super);\r\n    function SerializationContext() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._forbiddenTypes = new Set();\r\n        return _this;\r\n    }\r\n    SerializationContext.prototype.internalParseCardObject = function (parent, source, forbiddenTypes, allowFallback, createInstanceCallback, logParseEvent, parsingSingletonObject) {\r\n        var _this = this;\r\n        if (parsingSingletonObject === void 0) { parsingSingletonObject = false; }\r\n        var result = undefined;\r\n        if (source && typeof source === \"object\") {\r\n            var oldForbiddenTypes_1 = new Set();\r\n            this._forbiddenTypes.forEach(function (type) {\r\n                oldForbiddenTypes_1.add(type);\r\n            });\r\n            forbiddenTypes.forEach(function (type) {\r\n                _this._forbiddenTypes.add(type);\r\n            });\r\n            var typeName = Utils.parseString(source[\"type\"]);\r\n            var ignoreForbiddenType = parsingSingletonObject && typeName === \"Carousel\";\r\n            if (typeName && this._forbiddenTypes.has(typeName) && !ignoreForbiddenType) {\r\n                logParseEvent(typeName, Enums.TypeErrorType.ForbiddenType);\r\n            }\r\n            else {\r\n                var tryToFallback = false;\r\n                result = createInstanceCallback(typeName);\r\n                if (!result) {\r\n                    tryToFallback = shared_1.GlobalSettings.enableFallback && allowFallback;\r\n                    logParseEvent(typeName, Enums.TypeErrorType.UnknownType);\r\n                }\r\n                else {\r\n                    result.setParent(parent);\r\n                    result.parse(source, this);\r\n                    tryToFallback =\r\n                        shared_1.GlobalSettings.enableFallback && allowFallback && result.shouldFallback();\r\n                }\r\n                if (tryToFallback) {\r\n                    var fallback = source[\"fallback\"];\r\n                    if (!fallback && parent) {\r\n                        parent.setShouldFallback(true);\r\n                    }\r\n                    if (typeof fallback === \"string\" && fallback.toLowerCase() === \"drop\") {\r\n                        result = undefined;\r\n                    }\r\n                    else if (typeof fallback === \"object\") {\r\n                        result = this.internalParseCardObject(parent, fallback, forbiddenTypes, true, createInstanceCallback, logParseEvent);\r\n                    }\r\n                }\r\n            }\r\n            this._forbiddenTypes = oldForbiddenTypes_1;\r\n        }\r\n        return result;\r\n    };\r\n    SerializationContext.prototype.cardObjectParsed = function (o, source) {\r\n        if (o instanceof Action && this.onParseAction) {\r\n            this.onParseAction(o, source, this);\r\n        }\r\n        else if (o instanceof CardElement && this.onParseElement) {\r\n            this.onParseElement(o, source, this);\r\n        }\r\n    };\r\n    SerializationContext.prototype.shouldSerialize = function (o) {\r\n        if (o instanceof Action) {\r\n            return this.actionRegistry.findByName(o.getJsonTypeName()) !== undefined;\r\n        }\r\n        else if (o instanceof CardElement) {\r\n            return this.elementRegistry.findByName(o.getJsonTypeName()) !== undefined;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    };\r\n    SerializationContext.prototype.parseCardObject = function (parent, source, forbiddenTypeNames, allowFallback, createInstanceCallback, logParseEvent, parsingSingletonObject) {\r\n        if (parsingSingletonObject === void 0) { parsingSingletonObject = false; }\r\n        var forbiddenTypes = new Set(forbiddenTypeNames);\r\n        var result = this.internalParseCardObject(parent, source, forbiddenTypes, allowFallback, createInstanceCallback, logParseEvent, parsingSingletonObject);\r\n        if (result !== undefined) {\r\n            this.cardObjectParsed(result, source);\r\n        }\r\n        return result;\r\n    };\r\n    SerializationContext.prototype.parseElement = function (parent, source, forbiddenTypes, allowFallback, _parsingSingletonObject) {\r\n        var _this = this;\r\n        if (_parsingSingletonObject === void 0) { _parsingSingletonObject = false; }\r\n        return this.parseCardObject(parent, source, forbiddenTypes, allowFallback, function (typeName) {\r\n            return _this.elementRegistry.createInstance(typeName, _this.targetVersion);\r\n        }, function (typeName, errorType) {\r\n            if (errorType === Enums.TypeErrorType.UnknownType) {\r\n                _this.logParseEvent(undefined, Enums.ValidationEvent.UnknownElementType, strings_1.Strings.errors.unknownElementType(typeName));\r\n            }\r\n            else {\r\n                _this.logParseEvent(undefined, Enums.ValidationEvent.ElementTypeNotAllowed, strings_1.Strings.errors.elementTypeNotAllowed(typeName));\r\n            }\r\n        }, _parsingSingletonObject);\r\n    };\r\n    SerializationContext.prototype.parseAction = function (parent, source, forbiddenActionTypes, allowFallback) {\r\n        var _this = this;\r\n        return this.parseCardObject(parent, source, forbiddenActionTypes, allowFallback, function (typeName) {\r\n            return _this.actionRegistry.createInstance(typeName, _this.targetVersion);\r\n        }, function (typeName, errorType) {\r\n            if (errorType === Enums.TypeErrorType.UnknownType) {\r\n                _this.logParseEvent(undefined, Enums.ValidationEvent.UnknownActionType, strings_1.Strings.errors.unknownActionType(typeName));\r\n            }\r\n            else {\r\n                _this.logParseEvent(undefined, Enums.ValidationEvent.ActionTypeNotAllowed, strings_1.Strings.errors.actionTypeNotAllowed(typeName));\r\n            }\r\n        });\r\n    };\r\n    Object.defineProperty(SerializationContext.prototype, \"elementRegistry\", {\r\n        get: function () {\r\n            var _a;\r\n            return (_a = this._elementRegistry) !== null && _a !== void 0 ? _a : registry_1.GlobalRegistry.elements;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    // Not using a property setter here because the setter should accept \"undefined\"\r\n    // whereas the getter should never return undefined.\r\n    SerializationContext.prototype.setElementRegistry = function (value) {\r\n        this._elementRegistry = value;\r\n    };\r\n    Object.defineProperty(SerializationContext.prototype, \"actionRegistry\", {\r\n        get: function () {\r\n            var _a;\r\n            return (_a = this._actionRegistry) !== null && _a !== void 0 ? _a : registry_1.GlobalRegistry.actions;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    // Not using a property setter here because the setter should accept \"undefined\"\r\n    // whereas the getter should never return undefined.\r\n    SerializationContext.prototype.setActionRegistry = function (value) {\r\n        this._actionRegistry = value;\r\n    };\r\n    return SerializationContext;\r\n}(serialization_1.BaseSerializationContext));\r\nexports.SerializationContext = SerializationContext;\r\nregistry_1.GlobalRegistry.defaultElements.register(\"Container\", Container);\r\nregistry_1.GlobalRegistry.defaultElements.register(\"TextBlock\", TextBlock);\r\nregistry_1.GlobalRegistry.defaultElements.register(\"RichTextBlock\", RichTextBlock, serialization_1.Versions.v1_2);\r\nregistry_1.GlobalRegistry.defaultElements.register(\"TextRun\", TextRun, serialization_1.Versions.v1_2);\r\nregistry_1.GlobalRegistry.defaultElements.register(\"Image\", Image);\r\nregistry_1.GlobalRegistry.defaultElements.register(\"ImageSet\", ImageSet);\r\nregistry_1.GlobalRegistry.defaultElements.register(\"Media\", Media, serialization_1.Versions.v1_1);\r\nregistry_1.GlobalRegistry.defaultElements.register(\"FactSet\", FactSet);\r\nregistry_1.GlobalRegistry.defaultElements.register(\"ColumnSet\", ColumnSet);\r\nregistry_1.GlobalRegistry.defaultElements.register(\"ActionSet\", ActionSet, serialization_1.Versions.v1_2);\r\nregistry_1.GlobalRegistry.defaultElements.register(\"Input.Text\", TextInput);\r\nregistry_1.GlobalRegistry.defaultElements.register(\"Input.Date\", DateInput);\r\nregistry_1.GlobalRegistry.defaultElements.register(\"Input.Time\", TimeInput);\r\nregistry_1.GlobalRegistry.defaultElements.register(\"Input.Number\", NumberInput);\r\nregistry_1.GlobalRegistry.defaultElements.register(\"Input.ChoiceSet\", ChoiceSetInput);\r\nregistry_1.GlobalRegistry.defaultElements.register(\"Input.Toggle\", ToggleInput);\r\nregistry_1.GlobalRegistry.defaultActions.register(OpenUrlAction.JsonTypeName, OpenUrlAction);\r\nregistry_1.GlobalRegistry.defaultActions.register(SubmitAction.JsonTypeName, SubmitAction);\r\nregistry_1.GlobalRegistry.defaultActions.register(ShowCardAction.JsonTypeName, ShowCardAction);\r\nregistry_1.GlobalRegistry.defaultActions.register(ToggleVisibilityAction.JsonTypeName, ToggleVisibilityAction, serialization_1.Versions.v1_2);\r\nregistry_1.GlobalRegistry.defaultActions.register(ExecuteAction.JsonTypeName, ExecuteAction, serialization_1.Versions.v1_4);\r\n//# sourceMappingURL=card-elements.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CardObject = exports.ValidationResults = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar Enums = require(\"./enums\");\r\nvar strings_1 = require(\"./strings\");\r\nvar shared_1 = require(\"./shared\");\r\nvar host_capabilities_1 = require(\"./host-capabilities\");\r\nvar serialization_1 = require(\"./serialization\");\r\nvar ValidationResults = /** @class */ (function () {\r\n    function ValidationResults() {\r\n        this.allIds = {};\r\n        this.validationEvents = [];\r\n    }\r\n    ValidationResults.prototype.addFailure = function (cardObject, event, message) {\r\n        this.validationEvents.push({\r\n            phase: Enums.ValidationPhase.Validation,\r\n            source: cardObject,\r\n            event: event,\r\n            message: message\r\n        });\r\n    };\r\n    return ValidationResults;\r\n}());\r\nexports.ValidationResults = ValidationResults;\r\nvar CardObject = /** @class */ (function (_super) {\r\n    __extends(CardObject, _super);\r\n    function CardObject() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        //#endregion\r\n        _this._shouldFallback = false;\r\n        return _this;\r\n    }\r\n    CardObject.prototype.getSchemaKey = function () {\r\n        return this.getJsonTypeName();\r\n    };\r\n    Object.defineProperty(CardObject.prototype, \"requires\", {\r\n        get: function () {\r\n            return this.getValue(CardObject.requiresProperty);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Checks if this CardObject contains the given DOM Node.\r\n     * @param node The DOM Node to look for.\r\n     * @returns `true` if the DOM Node was found, `false` otherwise.\r\n     */\r\n    CardObject.prototype.contains = function (node) {\r\n        if (this._renderedElement) {\r\n            return this._renderedElement.contains(node);\r\n        }\r\n        return false;\r\n    };\r\n    CardObject.prototype.preProcessPropertyValue = function (prop, propertyValue) {\r\n        var value = propertyValue === undefined ? this.getValue(prop) : propertyValue;\r\n        if (shared_1.GlobalSettings.allowPreProcessingPropertyValues) {\r\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n            var currentObject = this;\r\n            while (currentObject && !currentObject.onPreProcessPropertyValue) {\r\n                currentObject = currentObject.parent;\r\n            }\r\n            if (currentObject && currentObject.onPreProcessPropertyValue) {\r\n                return currentObject.onPreProcessPropertyValue(this, prop, value);\r\n            }\r\n        }\r\n        return value;\r\n    };\r\n    CardObject.prototype.setParent = function (value) {\r\n        this._parent = value;\r\n    };\r\n    CardObject.prototype.setShouldFallback = function (value) {\r\n        this._shouldFallback = value;\r\n    };\r\n    CardObject.prototype.shouldFallback = function () {\r\n        return this._shouldFallback || !this.requires.areAllMet(this.hostConfig.hostCapabilities);\r\n    };\r\n    CardObject.prototype.getRootObject = function () {\r\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n        var currentObject = this;\r\n        while (currentObject.parent) {\r\n            currentObject = currentObject.parent;\r\n        }\r\n        return currentObject;\r\n    };\r\n    CardObject.prototype.internalValidateProperties = function (context) {\r\n        if (this.id) {\r\n            if (context.allIds.hasOwnProperty(this.id)) {\r\n                if (context.allIds[this.id] === 1) {\r\n                    context.addFailure(this, Enums.ValidationEvent.DuplicateId, strings_1.Strings.errors.duplicateId(this.id));\r\n                }\r\n                context.allIds[this.id] += 1;\r\n            }\r\n            else {\r\n                context.allIds[this.id] = 1;\r\n            }\r\n        }\r\n    };\r\n    CardObject.prototype.validateProperties = function () {\r\n        var result = new ValidationResults();\r\n        this.internalValidateProperties(result);\r\n        return result;\r\n    };\r\n    /**\r\n     * Recursively searches this CardObject and any children to find the\r\n     * innermost CardObject that owns the given DOM Node.\r\n     *\r\n     * @param node The DOM Node to look for.\r\n     *\r\n     * @returns The owner of the given DOM Node, or `undefined` if no owner was found.\r\n     */\r\n    CardObject.prototype.findDOMNodeOwner = function (node) {\r\n        // default implementation for CardObjects with no associated children\r\n        return this.contains(node) ? this : undefined;\r\n    };\r\n    CardObject.prototype.releaseDOMResources = function () {\r\n        // Do nothing in base implementation\r\n    };\r\n    Object.defineProperty(CardObject.prototype, \"parent\", {\r\n        get: function () {\r\n            return this._parent;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CardObject.prototype, \"renderedElement\", {\r\n        get: function () {\r\n            return this._renderedElement;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    CardObject.typeNameProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"type\", undefined, undefined, undefined, function (sender) {\r\n        return sender.getJsonTypeName();\r\n    });\r\n    CardObject.idProperty = new serialization_1.StringProperty(serialization_1.Versions.v1_0, \"id\");\r\n    CardObject.requiresProperty = new serialization_1.SerializableObjectProperty(serialization_1.Versions.v1_2, \"requires\", host_capabilities_1.HostCapabilities, false, new host_capabilities_1.HostCapabilities());\r\n    __decorate([\r\n        (0, serialization_1.property)(CardObject.idProperty)\r\n    ], CardObject.prototype, \"id\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(CardObject.requiresProperty)\r\n    ], CardObject.prototype, \"requires\", null);\r\n    return CardObject;\r\n}(serialization_1.SerializableObject));\r\nexports.CardObject = CardObject;\r\n//# sourceMappingURL=card-object.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ChannelAdapter = void 0;\r\nvar ChannelAdapter = /** @class */ (function () {\r\n    function ChannelAdapter() {\r\n    }\r\n    return ChannelAdapter;\r\n}());\r\nexports.ChannelAdapter = ChannelAdapter;\r\n//# sourceMappingURL=channel-adapter.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Collection = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar Collection = /** @class */ (function () {\r\n    function Collection() {\r\n        this._items = [];\r\n    }\r\n    Collection.prototype.get = function (index) {\r\n        return this._items[index];\r\n    };\r\n    Collection.prototype.add = function (item) {\r\n        this._items.push(item);\r\n        if (this.onItemAdded) {\r\n            this.onItemAdded(item);\r\n        }\r\n    };\r\n    Collection.prototype.remove = function (item) {\r\n        var i = this._items.indexOf(item);\r\n        if (i >= 0) {\r\n            this._items = this._items.splice(i, 1);\r\n            if (this.onItemRemoved) {\r\n                this.onItemRemoved(item);\r\n            }\r\n        }\r\n    };\r\n    Collection.prototype.indexOf = function (item) {\r\n        return this._items.indexOf(item);\r\n    };\r\n    Object.defineProperty(Collection.prototype, \"length\", {\r\n        get: function () {\r\n            return this._items.length;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return Collection;\r\n}());\r\nexports.Collection = Collection;\r\n//# sourceMappingURL=collection.js.map","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Constants = void 0;\r\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class\r\nvar Constants = /** @class */ (function () {\r\n    function Constants() {\r\n    }\r\n    Constants.keys = {\r\n        tab: \"Tab\",\r\n        enter: \"Enter\",\r\n        escape: \"Escape\",\r\n        space: \" \",\r\n        up: \"ArrowUp\",\r\n        down: \"ArrowDown\",\r\n        delete: \"Delete\"\r\n    };\r\n    return Constants;\r\n}());\r\nexports.Constants = Constants;\r\n//# sourceMappingURL=constants.js.map","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Copyright (C) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\n__exportStar(require(\"./menu-item\"), exports);\r\n__exportStar(require(\"./popup-menu\"), exports);\r\n//# sourceMappingURL=index.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MenuItem = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar host_config_1 = require(\"../host-config\");\r\nvar constants_1 = require(\"./constants\");\r\nvar MenuItem = /** @class */ (function () {\r\n    function MenuItem(key, value) {\r\n        this._isEnabled = true;\r\n        this.key = key;\r\n        this._value = value;\r\n    }\r\n    MenuItem.prototype.click = function () {\r\n        if (this.isEnabled && this.onClick) {\r\n            this.onClick(this);\r\n        }\r\n    };\r\n    MenuItem.prototype.updateCssClasses = function () {\r\n        if (this._element) {\r\n            var effectiveHostConfig = this._hostConfig ? this._hostConfig : host_config_1.defaultHostConfig;\r\n            this._element.className = effectiveHostConfig.makeCssClassName(\"ac-ctrl\");\r\n            this._element.classList.add(effectiveHostConfig.makeCssClassName(this.isEnabled ? \"ac-ctrl-dropdown-item\" : \"ac-ctrl-dropdown-item-disabled\"));\r\n            if (!this.isEnabled) {\r\n                this._element.classList.add(effectiveHostConfig.makeCssClassName(\"ac-disabled\"));\r\n            }\r\n        }\r\n    };\r\n    MenuItem.prototype.toString = function () {\r\n        return this.value;\r\n    };\r\n    MenuItem.prototype.render = function (hostConfig) {\r\n        var _this = this;\r\n        this._hostConfig = hostConfig;\r\n        if (!this._element) {\r\n            this._element = document.createElement(\"span\");\r\n            this._element.innerText = this.value;\r\n            this._element.setAttribute(\"role\", \"menuitem\");\r\n            if (!this.isEnabled) {\r\n                this._element.setAttribute(\"aria-disabled\", \"true\");\r\n            }\r\n            this._element.setAttribute(\"aria-current\", \"false\");\r\n            this._element.onmouseup = function (_e) {\r\n                _this.click();\r\n            };\r\n            this._element.onkeydown = function (e) {\r\n                if (e.key === constants_1.Constants.keys.enter) {\r\n                    e.cancelBubble = true;\r\n                    _this.click();\r\n                }\r\n            };\r\n            this.updateCssClasses();\r\n        }\r\n        return this._element;\r\n    };\r\n    Object.defineProperty(MenuItem.prototype, \"value\", {\r\n        get: function () {\r\n            return this._value;\r\n        },\r\n        set: function (newValue) {\r\n            this._value = newValue;\r\n            if (this._element) {\r\n                this._element.innerText = newValue;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MenuItem.prototype, \"isEnabled\", {\r\n        get: function () {\r\n            return this._isEnabled;\r\n        },\r\n        set: function (value) {\r\n            if (this._isEnabled !== value) {\r\n                this._isEnabled = value;\r\n                this.updateCssClasses();\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return MenuItem;\r\n}());\r\nexports.MenuItem = MenuItem;\r\n//# sourceMappingURL=menu-item.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PopupControl = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar constants_1 = require(\"./constants\");\r\nvar Utils = require(\"../utils\");\r\nvar host_config_1 = require(\"../host-config\");\r\nvar PopupControl = /** @class */ (function () {\r\n    function PopupControl() {\r\n        this._isOpen = false;\r\n    }\r\n    PopupControl.prototype.keyDown = function (e) {\r\n        switch (e.key) {\r\n            case constants_1.Constants.keys.escape:\r\n                this.closePopup(true);\r\n                break;\r\n        }\r\n    };\r\n    PopupControl.prototype.render = function (_rootElementBounds) {\r\n        var _this = this;\r\n        var element = document.createElement(\"div\");\r\n        element.tabIndex = 0;\r\n        element.className = this.hostConfig.makeCssClassName(\"ac-ctrl\", \"ac-ctrl-popup-container\");\r\n        element.setAttribute(\"role\", \"dialog\");\r\n        element.setAttribute(\"aria-modal\", \"true\");\r\n        element.onkeydown = function (e) {\r\n            _this.keyDown(e);\r\n            return !e.cancelBubble;\r\n        };\r\n        element.appendChild(this.renderContent());\r\n        return element;\r\n    };\r\n    PopupControl.prototype.focus = function () {\r\n        if (this._popupElement) {\r\n            this._popupElement.firstElementChild.focus();\r\n        }\r\n    };\r\n    PopupControl.prototype.popup = function (rootElement) {\r\n        var _a, _b, _c, _d, _f;\r\n        var _this = this;\r\n        if (!this._isOpen) {\r\n            this._overlayElement = document.createElement(\"div\");\r\n            this._overlayElement.className = this.hostConfig.makeCssClassName(\"ac-ctrl-overlay\");\r\n            this._overlayElement.tabIndex = 0;\r\n            this._overlayElement.style.width = document.documentElement.scrollWidth + \"px\";\r\n            this._overlayElement.style.height = document.documentElement.scrollHeight + \"px\";\r\n            this._overlayElement.onfocus = function (_e) {\r\n                _this.closePopup(true);\r\n            };\r\n            document.body.appendChild(this._overlayElement);\r\n            var rootElementBounds = rootElement.getBoundingClientRect();\r\n            this._popupElement = this.render(rootElementBounds);\r\n            (_a = this._popupElement.classList).remove.apply(_a, this.hostConfig.makeCssClassNames(\"ac-ctrl-slide\", \"ac-ctrl-slideLeftToRight\", \"ac-ctrl-slideRightToLeft\", \"ac-ctrl-slideTopToBottom\", \"ac-ctrl-slideRightToLeft\"));\r\n            window.addEventListener(\"resize\", function (_e) {\r\n                _this.closePopup(true);\r\n            });\r\n            var rootElementLabel = rootElement.getAttribute(\"aria-label\");\r\n            if (rootElementLabel) {\r\n                this._popupElement.setAttribute(\"aria-label\", rootElementLabel);\r\n            }\r\n            this._overlayElement.appendChild(this._popupElement);\r\n            var popupElementBounds = this._popupElement.getBoundingClientRect();\r\n            var availableSpaceBelow = window.innerHeight - rootElementBounds.bottom;\r\n            var availableSpaceAbove = rootElementBounds.top;\r\n            var availableSpaceRight = window.innerWidth - rootElementBounds.right;\r\n            var availableSpaceLeft = rootElementBounds.left;\r\n            var left = rootElementBounds.left + Utils.getScrollX();\r\n            var top_1;\r\n            if (availableSpaceAbove < popupElementBounds.height &&\r\n                availableSpaceBelow < popupElementBounds.height) {\r\n                // Not enough space above or below root element\r\n                var actualPopupHeight = Math.min(popupElementBounds.height, window.innerHeight);\r\n                this._popupElement.style.maxHeight = actualPopupHeight + \"px\";\r\n                if (actualPopupHeight < popupElementBounds.height) {\r\n                    top_1 = Utils.getScrollY();\r\n                }\r\n                else {\r\n                    top_1 =\r\n                        Utils.getScrollY() +\r\n                            rootElementBounds.top +\r\n                            (rootElementBounds.height - actualPopupHeight) / 2;\r\n                }\r\n                if (availableSpaceLeft < popupElementBounds.width &&\r\n                    availableSpaceRight < popupElementBounds.width) {\r\n                    // Not enough space left or right of root element\r\n                    var actualPopupWidth = Math.min(popupElementBounds.width, window.innerWidth);\r\n                    this._popupElement.style.maxWidth = actualPopupWidth + \"px\";\r\n                    if (actualPopupWidth < popupElementBounds.width) {\r\n                        left = Utils.getScrollX();\r\n                    }\r\n                    else {\r\n                        left =\r\n                            Utils.getScrollX() +\r\n                                rootElementBounds.left +\r\n                                (rootElementBounds.width - actualPopupWidth) / 2;\r\n                    }\r\n                }\r\n                else {\r\n                    // Enough space on the left or right of the root element\r\n                    if (availableSpaceRight >= popupElementBounds.width) {\r\n                        left = Utils.getScrollX() + rootElementBounds.right;\r\n                        (_b = this._popupElement.classList).add.apply(_b, this.hostConfig.makeCssClassNames(\"ac-ctrl-slide\", \"ac-ctrl-slideLeftToRight\"));\r\n                    }\r\n                    else {\r\n                        left =\r\n                            Utils.getScrollX() + rootElementBounds.left - popupElementBounds.width;\r\n                        (_c = this._popupElement.classList).add.apply(_c, this.hostConfig.makeCssClassNames(\"ac-ctrl-slide\", \"ac-ctrl-slideRightToLeft\"));\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                // Enough space above or below root element\r\n                if (availableSpaceBelow >= popupElementBounds.height) {\r\n                    top_1 = Utils.getScrollY() + rootElementBounds.bottom;\r\n                    (_d = this._popupElement.classList).add.apply(_d, this.hostConfig.makeCssClassNames(\"ac-ctrl-slide\", \"ac-ctrl-slideTopToBottom\"));\r\n                }\r\n                else {\r\n                    top_1 = Utils.getScrollY() + rootElementBounds.top - popupElementBounds.height;\r\n                    (_f = this._popupElement.classList).add.apply(_f, this.hostConfig.makeCssClassNames(\"ac-ctrl-slide\", \"ac-ctrl-slideBottomToTop\"));\r\n                }\r\n                if (availableSpaceRight < popupElementBounds.width) {\r\n                    left = Utils.getScrollX() + rootElementBounds.right - popupElementBounds.width;\r\n                }\r\n            }\r\n            this._popupElement.style.left = left + \"px\";\r\n            this._popupElement.style.top = top_1 + \"px\";\r\n            this._popupElement.focus();\r\n            this._isOpen = true;\r\n        }\r\n    };\r\n    PopupControl.prototype.closePopup = function (wasCancelled) {\r\n        if (this._isOpen) {\r\n            document.body.removeChild(this._overlayElement);\r\n            this._isOpen = false;\r\n            if (this.onClose) {\r\n                this.onClose(this, wasCancelled);\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(PopupControl.prototype, \"hostConfig\", {\r\n        get: function () {\r\n            return this._hostConfig ? this._hostConfig : host_config_1.defaultHostConfig;\r\n        },\r\n        set: function (value) {\r\n            this._hostConfig = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PopupControl.prototype, \"isOpen\", {\r\n        get: function () {\r\n            return this._isOpen;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return PopupControl;\r\n}());\r\nexports.PopupControl = PopupControl;\r\n//# sourceMappingURL=popup-control.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PopupMenu = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar constants_1 = require(\"./constants\");\r\nvar collection_1 = require(\"./collection\");\r\nvar popup_control_1 = require(\"./popup-control\");\r\nvar PopupMenu = /** @class */ (function (_super) {\r\n    __extends(PopupMenu, _super);\r\n    function PopupMenu() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._items = new collection_1.Collection();\r\n        _this._renderedItems = [];\r\n        _this._selectedIndex = -1;\r\n        return _this;\r\n    }\r\n    PopupMenu.prototype.renderContent = function () {\r\n        var element = document.createElement(\"div\");\r\n        element.className = this.hostConfig.makeCssClassName(\"ac-ctrl ac-popup\");\r\n        element.setAttribute(\"role\", \"listbox\");\r\n        for (var i = 0; i < this._items.length; i++) {\r\n            var renderedItem = this._items.get(i).render(this.hostConfig);\r\n            renderedItem.tabIndex = 0;\r\n            element.appendChild(renderedItem);\r\n            if (i === this.selectedIndex) {\r\n                renderedItem.focus();\r\n            }\r\n            this._renderedItems.push(renderedItem);\r\n        }\r\n        return element;\r\n    };\r\n    PopupMenu.prototype.keyDown = function (e) {\r\n        _super.prototype.keyDown.call(this, e);\r\n        var selectedItemIndex = this._selectedIndex;\r\n        switch (e.key) {\r\n            case constants_1.Constants.keys.tab:\r\n                this.closePopup(true);\r\n                break;\r\n            /*\r\n            case Constants.keys.enter:\r\n                if (this.selectedIndex >= 0) {\r\n                    this.selectedIndex = this.selectedIndex;\r\n\r\n                    this.close();\r\n                }\r\n\r\n                break;\r\n            */\r\n            case constants_1.Constants.keys.up:\r\n                if (selectedItemIndex <= 0) {\r\n                    selectedItemIndex = this._renderedItems.length - 1;\r\n                }\r\n                else {\r\n                    selectedItemIndex--;\r\n                    if (selectedItemIndex < 0) {\r\n                        selectedItemIndex = this._renderedItems.length - 1;\r\n                    }\r\n                }\r\n                this.selectedIndex = selectedItemIndex;\r\n                e.cancelBubble = true;\r\n                break;\r\n            case constants_1.Constants.keys.down:\r\n                if (selectedItemIndex < 0) {\r\n                    selectedItemIndex = 0;\r\n                }\r\n                else {\r\n                    selectedItemIndex++;\r\n                    if (selectedItemIndex >= this._renderedItems.length) {\r\n                        selectedItemIndex = 0;\r\n                    }\r\n                }\r\n                this.selectedIndex = selectedItemIndex;\r\n                e.cancelBubble = true;\r\n                break;\r\n        }\r\n    };\r\n    Object.defineProperty(PopupMenu.prototype, \"items\", {\r\n        get: function () {\r\n            return this._items;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(PopupMenu.prototype, \"selectedIndex\", {\r\n        get: function () {\r\n            return this._selectedIndex;\r\n        },\r\n        set: function (index) {\r\n            if (index >= 0 && index < this._renderedItems.length) {\r\n                this._renderedItems[index].focus();\r\n                this._selectedIndex = index;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return PopupMenu;\r\n}(popup_control_1.PopupControl));\r\nexports.PopupMenu = PopupMenu;\r\n//# sourceMappingURL=popup-menu.js.map","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LogLevel = exports.RefreshMode = exports.TypeErrorType = exports.ContainerFitStatus = exports.ValidationEvent = exports.ValidationPhase = exports.InputTextStyle = exports.ActionIconPlacement = exports.FillMode = exports.Orientation = exports.ShowCardActionMode = exports.ImageStyle = exports.ActionAlignment = exports.VerticalAlignment = exports.HorizontalAlignment = exports.TextColor = exports.Spacing = exports.FontType = exports.TextWeight = exports.TextSize = exports.SizeUnit = exports.ImageSize = exports.Size = exports.ActionMode = exports.ActionStyle = exports.ContainerStyle = void 0;\r\n/*\r\n    This should really be a string enum, e.g.\r\n\r\n        export enum ContainerStyle {\r\n            Default = \"default\",\r\n            Emphasis = \"emphasis\"\r\n        }\r\n\r\n    However, some hosts do not use a version of TypeScript\r\n    recent enough to understand string enums. This is\r\n    a compatible construct that does not require using\r\n    a more recent version of TypeScript.\r\n\r\n    Also note the \"weird\" way these readonly fields are declared is to work around\r\n    a breaking change introduced in TS 3.1 wrt d.ts generation. DO NOT CHANGE\r\n    and adopt this syntax for all other static readonly fields.\r\n*/\r\n/* eslint-disable @typescript-eslint/no-extraneous-class, @typescript-eslint/naming-convention */\r\nvar ContainerStyle = /** @class */ (function () {\r\n    function ContainerStyle() {\r\n    }\r\n    ContainerStyle.Default = \"default\";\r\n    ContainerStyle.Emphasis = \"emphasis\";\r\n    ContainerStyle.Accent = \"accent\";\r\n    ContainerStyle.Good = \"good\";\r\n    ContainerStyle.Attention = \"attention\";\r\n    ContainerStyle.Warning = \"warning\";\r\n    return ContainerStyle;\r\n}());\r\nexports.ContainerStyle = ContainerStyle;\r\nvar ActionStyle = /** @class */ (function () {\r\n    function ActionStyle() {\r\n    }\r\n    ActionStyle.Default = \"default\";\r\n    ActionStyle.Positive = \"positive\";\r\n    ActionStyle.Destructive = \"destructive\";\r\n    return ActionStyle;\r\n}());\r\nexports.ActionStyle = ActionStyle;\r\nvar ActionMode = /** @class */ (function () {\r\n    function ActionMode() {\r\n    }\r\n    ActionMode.Primary = \"primary\";\r\n    ActionMode.Secondary = \"secondary\";\r\n    return ActionMode;\r\n}());\r\nexports.ActionMode = ActionMode;\r\n/* eslint-enable @typescript-eslint/no-extraneous-class, @typescript-eslint/naming-convention */\r\nvar Size;\r\n(function (Size) {\r\n    Size[Size[\"Auto\"] = 0] = \"Auto\";\r\n    Size[Size[\"Stretch\"] = 1] = \"Stretch\";\r\n    Size[Size[\"Small\"] = 2] = \"Small\";\r\n    Size[Size[\"Medium\"] = 3] = \"Medium\";\r\n    Size[Size[\"Large\"] = 4] = \"Large\";\r\n})(Size = exports.Size || (exports.Size = {}));\r\nvar ImageSize;\r\n(function (ImageSize) {\r\n    ImageSize[ImageSize[\"Small\"] = 0] = \"Small\";\r\n    ImageSize[ImageSize[\"Medium\"] = 1] = \"Medium\";\r\n    ImageSize[ImageSize[\"Large\"] = 2] = \"Large\";\r\n})(ImageSize = exports.ImageSize || (exports.ImageSize = {}));\r\nvar SizeUnit;\r\n(function (SizeUnit) {\r\n    SizeUnit[SizeUnit[\"Weight\"] = 0] = \"Weight\";\r\n    SizeUnit[SizeUnit[\"Pixel\"] = 1] = \"Pixel\";\r\n})(SizeUnit = exports.SizeUnit || (exports.SizeUnit = {}));\r\nvar TextSize;\r\n(function (TextSize) {\r\n    TextSize[TextSize[\"Small\"] = 0] = \"Small\";\r\n    TextSize[TextSize[\"Default\"] = 1] = \"Default\";\r\n    TextSize[TextSize[\"Medium\"] = 2] = \"Medium\";\r\n    TextSize[TextSize[\"Large\"] = 3] = \"Large\";\r\n    TextSize[TextSize[\"ExtraLarge\"] = 4] = \"ExtraLarge\";\r\n})(TextSize = exports.TextSize || (exports.TextSize = {}));\r\nvar TextWeight;\r\n(function (TextWeight) {\r\n    TextWeight[TextWeight[\"Lighter\"] = 0] = \"Lighter\";\r\n    TextWeight[TextWeight[\"Default\"] = 1] = \"Default\";\r\n    TextWeight[TextWeight[\"Bolder\"] = 2] = \"Bolder\";\r\n})(TextWeight = exports.TextWeight || (exports.TextWeight = {}));\r\nvar FontType;\r\n(function (FontType) {\r\n    FontType[FontType[\"Default\"] = 0] = \"Default\";\r\n    FontType[FontType[\"Monospace\"] = 1] = \"Monospace\";\r\n})(FontType = exports.FontType || (exports.FontType = {}));\r\nvar Spacing;\r\n(function (Spacing) {\r\n    Spacing[Spacing[\"None\"] = 0] = \"None\";\r\n    Spacing[Spacing[\"Small\"] = 1] = \"Small\";\r\n    Spacing[Spacing[\"Default\"] = 2] = \"Default\";\r\n    Spacing[Spacing[\"Medium\"] = 3] = \"Medium\";\r\n    Spacing[Spacing[\"Large\"] = 4] = \"Large\";\r\n    Spacing[Spacing[\"ExtraLarge\"] = 5] = \"ExtraLarge\";\r\n    Spacing[Spacing[\"Padding\"] = 6] = \"Padding\";\r\n})(Spacing = exports.Spacing || (exports.Spacing = {}));\r\nvar TextColor;\r\n(function (TextColor) {\r\n    TextColor[TextColor[\"Default\"] = 0] = \"Default\";\r\n    TextColor[TextColor[\"Dark\"] = 1] = \"Dark\";\r\n    TextColor[TextColor[\"Light\"] = 2] = \"Light\";\r\n    TextColor[TextColor[\"Accent\"] = 3] = \"Accent\";\r\n    TextColor[TextColor[\"Good\"] = 4] = \"Good\";\r\n    TextColor[TextColor[\"Warning\"] = 5] = \"Warning\";\r\n    TextColor[TextColor[\"Attention\"] = 6] = \"Attention\";\r\n})(TextColor = exports.TextColor || (exports.TextColor = {}));\r\nvar HorizontalAlignment;\r\n(function (HorizontalAlignment) {\r\n    HorizontalAlignment[HorizontalAlignment[\"Left\"] = 0] = \"Left\";\r\n    HorizontalAlignment[HorizontalAlignment[\"Center\"] = 1] = \"Center\";\r\n    HorizontalAlignment[HorizontalAlignment[\"Right\"] = 2] = \"Right\";\r\n})(HorizontalAlignment = exports.HorizontalAlignment || (exports.HorizontalAlignment = {}));\r\nvar VerticalAlignment;\r\n(function (VerticalAlignment) {\r\n    VerticalAlignment[VerticalAlignment[\"Top\"] = 0] = \"Top\";\r\n    VerticalAlignment[VerticalAlignment[\"Center\"] = 1] = \"Center\";\r\n    VerticalAlignment[VerticalAlignment[\"Bottom\"] = 2] = \"Bottom\";\r\n})(VerticalAlignment = exports.VerticalAlignment || (exports.VerticalAlignment = {}));\r\nvar ActionAlignment;\r\n(function (ActionAlignment) {\r\n    ActionAlignment[ActionAlignment[\"Left\"] = 0] = \"Left\";\r\n    ActionAlignment[ActionAlignment[\"Center\"] = 1] = \"Center\";\r\n    ActionAlignment[ActionAlignment[\"Right\"] = 2] = \"Right\";\r\n    ActionAlignment[ActionAlignment[\"Stretch\"] = 3] = \"Stretch\";\r\n})(ActionAlignment = exports.ActionAlignment || (exports.ActionAlignment = {}));\r\nvar ImageStyle;\r\n(function (ImageStyle) {\r\n    ImageStyle[ImageStyle[\"Default\"] = 0] = \"Default\";\r\n    ImageStyle[ImageStyle[\"Person\"] = 1] = \"Person\";\r\n})(ImageStyle = exports.ImageStyle || (exports.ImageStyle = {}));\r\nvar ShowCardActionMode;\r\n(function (ShowCardActionMode) {\r\n    ShowCardActionMode[ShowCardActionMode[\"Inline\"] = 0] = \"Inline\";\r\n    ShowCardActionMode[ShowCardActionMode[\"Popup\"] = 1] = \"Popup\";\r\n})(ShowCardActionMode = exports.ShowCardActionMode || (exports.ShowCardActionMode = {}));\r\nvar Orientation;\r\n(function (Orientation) {\r\n    Orientation[Orientation[\"Horizontal\"] = 0] = \"Horizontal\";\r\n    Orientation[Orientation[\"Vertical\"] = 1] = \"Vertical\";\r\n})(Orientation = exports.Orientation || (exports.Orientation = {}));\r\nvar FillMode;\r\n(function (FillMode) {\r\n    FillMode[FillMode[\"Cover\"] = 0] = \"Cover\";\r\n    FillMode[FillMode[\"RepeatHorizontally\"] = 1] = \"RepeatHorizontally\";\r\n    FillMode[FillMode[\"RepeatVertically\"] = 2] = \"RepeatVertically\";\r\n    FillMode[FillMode[\"Repeat\"] = 3] = \"Repeat\";\r\n})(FillMode = exports.FillMode || (exports.FillMode = {}));\r\nvar ActionIconPlacement;\r\n(function (ActionIconPlacement) {\r\n    ActionIconPlacement[ActionIconPlacement[\"LeftOfTitle\"] = 0] = \"LeftOfTitle\";\r\n    ActionIconPlacement[ActionIconPlacement[\"AboveTitle\"] = 1] = \"AboveTitle\";\r\n})(ActionIconPlacement = exports.ActionIconPlacement || (exports.ActionIconPlacement = {}));\r\nvar InputTextStyle;\r\n(function (InputTextStyle) {\r\n    InputTextStyle[InputTextStyle[\"Text\"] = 0] = \"Text\";\r\n    InputTextStyle[InputTextStyle[\"Tel\"] = 1] = \"Tel\";\r\n    InputTextStyle[InputTextStyle[\"Url\"] = 2] = \"Url\";\r\n    InputTextStyle[InputTextStyle[\"Email\"] = 3] = \"Email\";\r\n    InputTextStyle[InputTextStyle[\"Password\"] = 4] = \"Password\";\r\n})(InputTextStyle = exports.InputTextStyle || (exports.InputTextStyle = {}));\r\nvar ValidationPhase;\r\n(function (ValidationPhase) {\r\n    ValidationPhase[ValidationPhase[\"Parse\"] = 0] = \"Parse\";\r\n    ValidationPhase[ValidationPhase[\"ToJSON\"] = 1] = \"ToJSON\";\r\n    ValidationPhase[ValidationPhase[\"Validation\"] = 2] = \"Validation\";\r\n})(ValidationPhase = exports.ValidationPhase || (exports.ValidationPhase = {}));\r\nvar ValidationEvent;\r\n(function (ValidationEvent) {\r\n    ValidationEvent[ValidationEvent[\"Hint\"] = 0] = \"Hint\";\r\n    ValidationEvent[ValidationEvent[\"ActionTypeNotAllowed\"] = 1] = \"ActionTypeNotAllowed\";\r\n    ValidationEvent[ValidationEvent[\"CollectionCantBeEmpty\"] = 2] = \"CollectionCantBeEmpty\";\r\n    ValidationEvent[ValidationEvent[\"Deprecated\"] = 3] = \"Deprecated\";\r\n    ValidationEvent[ValidationEvent[\"ElementTypeNotAllowed\"] = 4] = \"ElementTypeNotAllowed\";\r\n    ValidationEvent[ValidationEvent[\"InteractivityNotAllowed\"] = 5] = \"InteractivityNotAllowed\";\r\n    ValidationEvent[ValidationEvent[\"InvalidPropertyValue\"] = 6] = \"InvalidPropertyValue\";\r\n    ValidationEvent[ValidationEvent[\"MissingCardType\"] = 7] = \"MissingCardType\";\r\n    ValidationEvent[ValidationEvent[\"PropertyCantBeNull\"] = 8] = \"PropertyCantBeNull\";\r\n    ValidationEvent[ValidationEvent[\"TooManyActions\"] = 9] = \"TooManyActions\";\r\n    ValidationEvent[ValidationEvent[\"UnknownActionType\"] = 10] = \"UnknownActionType\";\r\n    ValidationEvent[ValidationEvent[\"UnknownElementType\"] = 11] = \"UnknownElementType\";\r\n    ValidationEvent[ValidationEvent[\"UnsupportedCardVersion\"] = 12] = \"UnsupportedCardVersion\";\r\n    ValidationEvent[ValidationEvent[\"DuplicateId\"] = 13] = \"DuplicateId\";\r\n    ValidationEvent[ValidationEvent[\"UnsupportedProperty\"] = 14] = \"UnsupportedProperty\";\r\n    ValidationEvent[ValidationEvent[\"RequiredInputsShouldHaveLabel\"] = 15] = \"RequiredInputsShouldHaveLabel\";\r\n    ValidationEvent[ValidationEvent[\"RequiredInputsShouldHaveErrorMessage\"] = 16] = \"RequiredInputsShouldHaveErrorMessage\";\r\n    ValidationEvent[ValidationEvent[\"Other\"] = 17] = \"Other\";\r\n})(ValidationEvent = exports.ValidationEvent || (exports.ValidationEvent = {}));\r\nvar ContainerFitStatus;\r\n(function (ContainerFitStatus) {\r\n    ContainerFitStatus[ContainerFitStatus[\"FullyInContainer\"] = 0] = \"FullyInContainer\";\r\n    ContainerFitStatus[ContainerFitStatus[\"Overflowing\"] = 1] = \"Overflowing\";\r\n    ContainerFitStatus[ContainerFitStatus[\"FullyOutOfContainer\"] = 2] = \"FullyOutOfContainer\";\r\n})(ContainerFitStatus = exports.ContainerFitStatus || (exports.ContainerFitStatus = {}));\r\nvar TypeErrorType;\r\n(function (TypeErrorType) {\r\n    TypeErrorType[TypeErrorType[\"UnknownType\"] = 0] = \"UnknownType\";\r\n    TypeErrorType[TypeErrorType[\"ForbiddenType\"] = 1] = \"ForbiddenType\";\r\n})(TypeErrorType = exports.TypeErrorType || (exports.TypeErrorType = {}));\r\nvar RefreshMode;\r\n(function (RefreshMode) {\r\n    RefreshMode[RefreshMode[\"Disabled\"] = 0] = \"Disabled\";\r\n    RefreshMode[RefreshMode[\"Manual\"] = 1] = \"Manual\";\r\n    RefreshMode[RefreshMode[\"Automatic\"] = 2] = \"Automatic\";\r\n})(RefreshMode = exports.RefreshMode || (exports.RefreshMode = {}));\r\nvar LogLevel;\r\n(function (LogLevel) {\r\n    LogLevel[LogLevel[\"Info\"] = 0] = \"Info\";\r\n    LogLevel[LogLevel[\"Warning\"] = 1] = \"Warning\";\r\n    LogLevel[LogLevel[\"Error\"] = 2] = \"Error\";\r\n})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));\r\n//# sourceMappingURL=enums.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.HostCapabilities = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar serialization_1 = require(\"./serialization\");\r\nvar HostCapabilities = /** @class */ (function (_super) {\r\n    __extends(HostCapabilities, _super);\r\n    function HostCapabilities() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._capabilities = {};\r\n        return _this;\r\n    }\r\n    HostCapabilities.prototype.getSchemaKey = function () {\r\n        return \"HostCapabilities\";\r\n    };\r\n    HostCapabilities.prototype.internalParse = function (source, context) {\r\n        _super.prototype.internalParse.call(this, source, context);\r\n        if (source) {\r\n            // eslint-disable-next-line guard-for-in\r\n            for (var name_1 in source) {\r\n                var jsonVersion = source[name_1];\r\n                if (typeof jsonVersion === \"string\") {\r\n                    if (jsonVersion === \"*\") {\r\n                        this.addCapability(name_1, \"*\");\r\n                    }\r\n                    else {\r\n                        var version = serialization_1.Version.parse(jsonVersion, context);\r\n                        if (version === null || version === void 0 ? void 0 : version.isValid) {\r\n                            this.addCapability(name_1, version);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    HostCapabilities.prototype.internalToJSON = function (target, context) {\r\n        _super.prototype.internalToJSON.call(this, target, context);\r\n        // eslint-disable-next-line guard-for-in\r\n        for (var key in this._capabilities) {\r\n            target[key] = this._capabilities[key];\r\n        }\r\n    };\r\n    HostCapabilities.prototype.addCapability = function (name, version) {\r\n        this._capabilities[name] = version;\r\n    };\r\n    HostCapabilities.prototype.removeCapability = function (name) {\r\n        delete this._capabilities[name];\r\n    };\r\n    HostCapabilities.prototype.clear = function () {\r\n        this._capabilities = {};\r\n    };\r\n    HostCapabilities.prototype.hasCapability = function (name, version) {\r\n        if (this._capabilities.hasOwnProperty(name)) {\r\n            if (version === \"*\" || this._capabilities[name] === \"*\") {\r\n                return true;\r\n            }\r\n            return version.compareTo(this._capabilities[name]) <= 0;\r\n        }\r\n        return false;\r\n    };\r\n    HostCapabilities.prototype.areAllMet = function (hostCapabilities) {\r\n        for (var capabilityName in this._capabilities) {\r\n            if (!hostCapabilities.hasCapability(capabilityName, this._capabilities[capabilityName])) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    return HostCapabilities;\r\n}(serialization_1.SerializableObject));\r\nexports.HostCapabilities = HostCapabilities;\r\n//# sourceMappingURL=host-capabilities.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.defaultHostConfig = exports.HostConfig = exports.FontTypeSet = exports.FontTypeDefinition = exports.ContainerStyleSet = exports.ContainerStyleDefinition = exports.ColorSetDefinition = exports.ActionsConfig = exports.ShowCardActionConfig = exports.FactSetConfig = exports.FactTitleDefinition = exports.FactTextDefinition = exports.InputConfig = exports.InputLabelConfig = exports.RequiredInputLabelTextDefinition = exports.TextBlockConfig = exports.TextStyleSet = exports.TextStyleDefinition = exports.BaseTextDefinition = exports.TableConfig = exports.MediaConfig = exports.ImageSetConfig = exports.AdaptiveCardConfig = exports.TextColorDefinition = exports.ColorDefinition = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar Enums = require(\"./enums\");\r\nvar Utils = require(\"./utils\");\r\nvar Shared = require(\"./shared\");\r\nvar host_capabilities_1 = require(\"./host-capabilities\");\r\nfunction parseHostConfigEnum(targetEnum, value, defaultValue) {\r\n    if (typeof value === \"string\") {\r\n        var parsedValue = Utils.parseEnum(targetEnum, value, defaultValue);\r\n        return parsedValue !== undefined ? parsedValue : defaultValue;\r\n    }\r\n    else if (typeof value === \"number\") {\r\n        return value;\r\n    }\r\n    else {\r\n        return defaultValue;\r\n    }\r\n}\r\nvar ColorDefinition = /** @class */ (function () {\r\n    function ColorDefinition(defaultColor, subtleColor) {\r\n        this.default = \"#000000\";\r\n        this.subtle = \"#666666\";\r\n        if (defaultColor) {\r\n            this.default = defaultColor;\r\n        }\r\n        if (subtleColor) {\r\n            this.subtle = subtleColor;\r\n        }\r\n    }\r\n    ColorDefinition.prototype.parse = function (obj) {\r\n        if (obj) {\r\n            this.default = obj[\"default\"] || this.default;\r\n            this.subtle = obj[\"subtle\"] || this.subtle;\r\n        }\r\n    };\r\n    return ColorDefinition;\r\n}());\r\nexports.ColorDefinition = ColorDefinition;\r\nvar TextColorDefinition = /** @class */ (function (_super) {\r\n    __extends(TextColorDefinition, _super);\r\n    function TextColorDefinition() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.highlightColors = new ColorDefinition(\"#22000000\", \"#11000000\");\r\n        return _this;\r\n    }\r\n    TextColorDefinition.prototype.parse = function (obj) {\r\n        _super.prototype.parse.call(this, obj);\r\n        if (obj) {\r\n            this.highlightColors.parse(obj[\"highlightColors\"]);\r\n        }\r\n    };\r\n    return TextColorDefinition;\r\n}(ColorDefinition));\r\nexports.TextColorDefinition = TextColorDefinition;\r\nvar AdaptiveCardConfig = /** @class */ (function () {\r\n    function AdaptiveCardConfig(obj) {\r\n        this.allowCustomStyle = false;\r\n        if (obj) {\r\n            this.allowCustomStyle = obj[\"allowCustomStyle\"] || this.allowCustomStyle;\r\n        }\r\n    }\r\n    return AdaptiveCardConfig;\r\n}());\r\nexports.AdaptiveCardConfig = AdaptiveCardConfig;\r\nvar ImageSetConfig = /** @class */ (function () {\r\n    function ImageSetConfig(obj) {\r\n        this.imageSize = Enums.Size.Medium;\r\n        this.maxImageHeight = 100;\r\n        if (obj) {\r\n            this.imageSize = obj[\"imageSize\"] != null ? obj[\"imageSize\"] : this.imageSize;\r\n            this.maxImageHeight = Utils.parseNumber(obj[\"maxImageHeight\"], 100);\r\n        }\r\n    }\r\n    ImageSetConfig.prototype.toJSON = function () {\r\n        return {\r\n            imageSize: Enums.Size[this.imageSize],\r\n            maxImageHeight: this.maxImageHeight\r\n        };\r\n    };\r\n    return ImageSetConfig;\r\n}());\r\nexports.ImageSetConfig = ImageSetConfig;\r\nvar MediaConfig = /** @class */ (function () {\r\n    function MediaConfig(obj) {\r\n        this.allowInlinePlayback = true;\r\n        if (obj) {\r\n            this.defaultPoster = obj[\"defaultPoster\"];\r\n            this.allowInlinePlayback = obj[\"allowInlinePlayback\"] || this.allowInlinePlayback;\r\n        }\r\n    }\r\n    MediaConfig.prototype.toJSON = function () {\r\n        return {\r\n            defaultPoster: this.defaultPoster,\r\n            allowInlinePlayback: this.allowInlinePlayback\r\n        };\r\n    };\r\n    return MediaConfig;\r\n}());\r\nexports.MediaConfig = MediaConfig;\r\nvar TableConfig = /** @class */ (function () {\r\n    function TableConfig(obj) {\r\n        this.cellSpacing = 8;\r\n        if (obj) {\r\n            this.cellSpacing =\r\n                obj.cellSpacing && typeof obj.cellSpacing === \"number\"\r\n                    ? obj.cellSpacing\r\n                    : this.cellSpacing;\r\n        }\r\n    }\r\n    TableConfig.prototype.toJSON = function () {\r\n        return {\r\n            cellSpacing: this.cellSpacing\r\n        };\r\n    };\r\n    return TableConfig;\r\n}());\r\nexports.TableConfig = TableConfig;\r\nvar BaseTextDefinition = /** @class */ (function () {\r\n    function BaseTextDefinition(obj) {\r\n        this.size = Enums.TextSize.Default;\r\n        this.color = Enums.TextColor.Default;\r\n        this.isSubtle = false;\r\n        this.weight = Enums.TextWeight.Default;\r\n        this.parse(obj);\r\n    }\r\n    BaseTextDefinition.prototype.parse = function (obj) {\r\n        if (obj) {\r\n            this.size = parseHostConfigEnum(Enums.TextSize, obj[\"size\"], this.size);\r\n            this.color = parseHostConfigEnum(Enums.TextColor, obj[\"color\"], this.color);\r\n            this.isSubtle =\r\n                obj.isSubtle !== undefined && typeof obj.isSubtle === \"boolean\"\r\n                    ? obj.isSubtle\r\n                    : this.isSubtle;\r\n            this.weight = parseHostConfigEnum(Enums.TextWeight, obj[\"weight\"], this.getDefaultWeight());\r\n        }\r\n    };\r\n    BaseTextDefinition.prototype.getDefaultWeight = function () {\r\n        return Enums.TextWeight.Default;\r\n    };\r\n    BaseTextDefinition.prototype.toJSON = function () {\r\n        return {\r\n            size: Enums.TextSize[this.size],\r\n            color: Enums.TextColor[this.color],\r\n            isSubtle: this.isSubtle,\r\n            weight: Enums.TextWeight[this.weight]\r\n        };\r\n    };\r\n    return BaseTextDefinition;\r\n}());\r\nexports.BaseTextDefinition = BaseTextDefinition;\r\nvar TextStyleDefinition = /** @class */ (function (_super) {\r\n    __extends(TextStyleDefinition, _super);\r\n    function TextStyleDefinition() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.fontType = Enums.FontType.Default;\r\n        return _this;\r\n    }\r\n    TextStyleDefinition.prototype.parse = function (obj) {\r\n        _super.prototype.parse.call(this, obj);\r\n        if (obj) {\r\n            this.fontType = parseHostConfigEnum(Enums.FontType, obj.fontType, this.fontType);\r\n        }\r\n    };\r\n    return TextStyleDefinition;\r\n}(BaseTextDefinition));\r\nexports.TextStyleDefinition = TextStyleDefinition;\r\nvar TextStyleSet = /** @class */ (function () {\r\n    function TextStyleSet(obj) {\r\n        this.default = new TextStyleDefinition();\r\n        this.heading = new TextStyleDefinition({\r\n            size: \"Large\",\r\n            weight: \"Bolder\"\r\n        });\r\n        this.columnHeader = new TextStyleDefinition({\r\n            weight: \"Bolder\"\r\n        });\r\n        if (obj) {\r\n            this.heading.parse(obj.heading);\r\n            this.columnHeader.parse(obj.columnHeader);\r\n        }\r\n    }\r\n    TextStyleSet.prototype.getStyleByName = function (name) {\r\n        switch (name.toLowerCase()) {\r\n            case \"heading\":\r\n                return this.heading;\r\n            case \"columnHeader\":\r\n                return this.columnHeader;\r\n            default:\r\n                return this.default;\r\n        }\r\n    };\r\n    return TextStyleSet;\r\n}());\r\nexports.TextStyleSet = TextStyleSet;\r\nvar TextBlockConfig = /** @class */ (function () {\r\n    function TextBlockConfig(obj) {\r\n        if (obj) {\r\n            this.headingLevel = Utils.parseNumber(obj.headingLevel);\r\n        }\r\n    }\r\n    return TextBlockConfig;\r\n}());\r\nexports.TextBlockConfig = TextBlockConfig;\r\nvar RequiredInputLabelTextDefinition = /** @class */ (function (_super) {\r\n    __extends(RequiredInputLabelTextDefinition, _super);\r\n    function RequiredInputLabelTextDefinition() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.suffix = \" *\";\r\n        _this.suffixColor = Enums.TextColor.Attention;\r\n        return _this;\r\n    }\r\n    RequiredInputLabelTextDefinition.prototype.parse = function (obj) {\r\n        _super.prototype.parse.call(this, obj);\r\n        if (obj) {\r\n            this.suffix = obj[\"suffix\"] || this.suffix;\r\n            this.suffixColor = parseHostConfigEnum(Enums.TextColor, obj[\"suffixColor\"], this.suffixColor);\r\n        }\r\n    };\r\n    RequiredInputLabelTextDefinition.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        result[\"suffix\"] = this.suffix;\r\n        result[\"suffixColor\"] = Enums.TextColor[this.suffixColor];\r\n        return result;\r\n    };\r\n    return RequiredInputLabelTextDefinition;\r\n}(BaseTextDefinition));\r\nexports.RequiredInputLabelTextDefinition = RequiredInputLabelTextDefinition;\r\nvar InputLabelConfig = /** @class */ (function () {\r\n    function InputLabelConfig(obj) {\r\n        this.inputSpacing = Enums.Spacing.Small;\r\n        this.requiredInputs = new RequiredInputLabelTextDefinition();\r\n        this.optionalInputs = new BaseTextDefinition();\r\n        if (obj) {\r\n            this.inputSpacing = parseHostConfigEnum(Enums.Spacing, obj[\"inputSpacing\"], this.inputSpacing);\r\n            this.requiredInputs = new RequiredInputLabelTextDefinition(obj[\"requiredInputs\"]);\r\n            this.optionalInputs = new BaseTextDefinition(obj[\"optionalInputs\"]);\r\n        }\r\n    }\r\n    return InputLabelConfig;\r\n}());\r\nexports.InputLabelConfig = InputLabelConfig;\r\nvar InputConfig = /** @class */ (function () {\r\n    function InputConfig(obj) {\r\n        this.label = new InputLabelConfig();\r\n        this.errorMessage = new BaseTextDefinition({\r\n            color: Enums.TextColor.Attention\r\n        });\r\n        if (obj) {\r\n            this.label = new InputLabelConfig(obj[\"label\"]);\r\n            this.errorMessage = new BaseTextDefinition(obj[\"errorMessage\"]);\r\n        }\r\n    }\r\n    return InputConfig;\r\n}());\r\nexports.InputConfig = InputConfig;\r\nvar FactTextDefinition = /** @class */ (function (_super) {\r\n    __extends(FactTextDefinition, _super);\r\n    function FactTextDefinition() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.wrap = true;\r\n        return _this;\r\n    }\r\n    FactTextDefinition.prototype.parse = function (obj) {\r\n        _super.prototype.parse.call(this, obj);\r\n        if (obj) {\r\n            this.wrap = obj[\"wrap\"] != null ? obj[\"wrap\"] : this.wrap;\r\n        }\r\n    };\r\n    FactTextDefinition.prototype.toJSON = function () {\r\n        var result = _super.prototype.toJSON.call(this);\r\n        result[\"wrap\"] = this.wrap;\r\n        return result;\r\n    };\r\n    return FactTextDefinition;\r\n}(BaseTextDefinition));\r\nexports.FactTextDefinition = FactTextDefinition;\r\nvar FactTitleDefinition = /** @class */ (function (_super) {\r\n    __extends(FactTitleDefinition, _super);\r\n    function FactTitleDefinition(obj) {\r\n        var _this = _super.call(this, obj) || this;\r\n        _this.maxWidth = 150;\r\n        _this.weight = Enums.TextWeight.Bolder;\r\n        if (obj) {\r\n            _this.maxWidth = obj[\"maxWidth\"] != null ? obj[\"maxWidth\"] : _this.maxWidth;\r\n            _this.weight = parseHostConfigEnum(Enums.TextWeight, obj[\"weight\"], Enums.TextWeight.Bolder);\r\n        }\r\n        return _this;\r\n    }\r\n    FactTitleDefinition.prototype.getDefaultWeight = function () {\r\n        return Enums.TextWeight.Bolder;\r\n    };\r\n    return FactTitleDefinition;\r\n}(FactTextDefinition));\r\nexports.FactTitleDefinition = FactTitleDefinition;\r\nvar FactSetConfig = /** @class */ (function () {\r\n    function FactSetConfig(obj) {\r\n        this.title = new FactTitleDefinition();\r\n        this.value = new FactTextDefinition();\r\n        this.spacing = 10;\r\n        if (obj) {\r\n            this.title = new FactTitleDefinition(obj[\"title\"]);\r\n            this.value = new FactTextDefinition(obj[\"value\"]);\r\n            this.spacing =\r\n                obj.spacing && obj.spacing != null ? obj.spacing && obj.spacing : this.spacing;\r\n        }\r\n    }\r\n    return FactSetConfig;\r\n}());\r\nexports.FactSetConfig = FactSetConfig;\r\nvar ShowCardActionConfig = /** @class */ (function () {\r\n    function ShowCardActionConfig(obj) {\r\n        this.actionMode = Enums.ShowCardActionMode.Inline;\r\n        this.inlineTopMargin = 16;\r\n        this.style = Enums.ContainerStyle.Emphasis;\r\n        if (obj) {\r\n            this.actionMode = parseHostConfigEnum(Enums.ShowCardActionMode, obj[\"actionMode\"], Enums.ShowCardActionMode.Inline);\r\n            this.inlineTopMargin =\r\n                obj[\"inlineTopMargin\"] != null ? obj[\"inlineTopMargin\"] : this.inlineTopMargin;\r\n            this.style =\r\n                obj[\"style\"] && typeof obj[\"style\"] === \"string\"\r\n                    ? obj[\"style\"]\r\n                    : Enums.ContainerStyle.Emphasis;\r\n        }\r\n    }\r\n    ShowCardActionConfig.prototype.toJSON = function () {\r\n        return {\r\n            actionMode: Enums.ShowCardActionMode[this.actionMode],\r\n            inlineTopMargin: this.inlineTopMargin,\r\n            style: this.style\r\n        };\r\n    };\r\n    return ShowCardActionConfig;\r\n}());\r\nexports.ShowCardActionConfig = ShowCardActionConfig;\r\nvar ActionsConfig = /** @class */ (function () {\r\n    function ActionsConfig(obj) {\r\n        this.maxActions = 5;\r\n        this.spacing = Enums.Spacing.Default;\r\n        this.buttonSpacing = 20;\r\n        this.showCard = new ShowCardActionConfig();\r\n        this.preExpandSingleShowCardAction = false;\r\n        this.actionsOrientation = Enums.Orientation.Horizontal;\r\n        this.actionAlignment = Enums.ActionAlignment.Left;\r\n        this.iconPlacement = Enums.ActionIconPlacement.LeftOfTitle;\r\n        this.allowTitleToWrap = false;\r\n        this.iconSize = 16;\r\n        if (obj) {\r\n            this.maxActions = obj[\"maxActions\"] != null ? obj[\"maxActions\"] : this.maxActions;\r\n            this.spacing = parseHostConfigEnum(Enums.Spacing, obj.spacing && obj.spacing, Enums.Spacing.Default);\r\n            this.buttonSpacing =\r\n                obj[\"buttonSpacing\"] != null ? obj[\"buttonSpacing\"] : this.buttonSpacing;\r\n            this.showCard = new ShowCardActionConfig(obj[\"showCard\"]);\r\n            this.preExpandSingleShowCardAction = Utils.parseBool(obj[\"preExpandSingleShowCardAction\"], false);\r\n            this.actionsOrientation = parseHostConfigEnum(Enums.Orientation, obj[\"actionsOrientation\"], Enums.Orientation.Horizontal);\r\n            this.actionAlignment = parseHostConfigEnum(Enums.ActionAlignment, obj[\"actionAlignment\"], Enums.ActionAlignment.Left);\r\n            this.iconPlacement = parseHostConfigEnum(Enums.ActionIconPlacement, obj[\"iconPlacement\"], Enums.ActionIconPlacement.LeftOfTitle);\r\n            this.allowTitleToWrap =\r\n                obj[\"allowTitleToWrap\"] != null ? obj[\"allowTitleToWrap\"] : this.allowTitleToWrap;\r\n            try {\r\n                var sizeAndUnit = Shared.SizeAndUnit.parse(obj[\"iconSize\"]);\r\n                if (sizeAndUnit.unit === Enums.SizeUnit.Pixel) {\r\n                    this.iconSize = sizeAndUnit.physicalSize;\r\n                }\r\n            }\r\n            catch (e) {\r\n                // Swallow this, keep default icon size\r\n            }\r\n        }\r\n    }\r\n    ActionsConfig.prototype.toJSON = function () {\r\n        return {\r\n            maxActions: this.maxActions,\r\n            spacing: Enums.Spacing[this.spacing],\r\n            buttonSpacing: this.buttonSpacing,\r\n            showCard: this.showCard,\r\n            preExpandSingleShowCardAction: this.preExpandSingleShowCardAction,\r\n            actionsOrientation: Enums.Orientation[this.actionsOrientation],\r\n            actionAlignment: Enums.ActionAlignment[this.actionAlignment]\r\n        };\r\n    };\r\n    return ActionsConfig;\r\n}());\r\nexports.ActionsConfig = ActionsConfig;\r\nvar ColorSetDefinition = /** @class */ (function () {\r\n    function ColorSetDefinition(obj) {\r\n        this.default = new TextColorDefinition();\r\n        this.dark = new TextColorDefinition();\r\n        this.light = new TextColorDefinition();\r\n        this.accent = new TextColorDefinition();\r\n        this.good = new TextColorDefinition();\r\n        this.warning = new TextColorDefinition();\r\n        this.attention = new TextColorDefinition();\r\n        this.parse(obj);\r\n    }\r\n    ColorSetDefinition.prototype.parseSingleColor = function (obj, propertyName) {\r\n        if (obj) {\r\n            this[propertyName].parse(obj[propertyName]);\r\n        }\r\n    };\r\n    ColorSetDefinition.prototype.parse = function (obj) {\r\n        if (obj) {\r\n            this.parseSingleColor(obj, \"default\");\r\n            this.parseSingleColor(obj, \"dark\");\r\n            this.parseSingleColor(obj, \"light\");\r\n            this.parseSingleColor(obj, \"accent\");\r\n            this.parseSingleColor(obj, \"good\");\r\n            this.parseSingleColor(obj, \"warning\");\r\n            this.parseSingleColor(obj, \"attention\");\r\n        }\r\n    };\r\n    return ColorSetDefinition;\r\n}());\r\nexports.ColorSetDefinition = ColorSetDefinition;\r\nvar ContainerStyleDefinition = /** @class */ (function () {\r\n    function ContainerStyleDefinition(obj) {\r\n        this.foregroundColors = new ColorSetDefinition({\r\n            \"default\": { default: \"#333333\", subtle: \"#EE333333\" },\r\n            \"dark\": { default: \"#000000\", subtle: \"#66000000\" },\r\n            \"light\": { default: \"#FFFFFF\", subtle: \"#33000000\" },\r\n            \"accent\": { default: \"#2E89FC\", subtle: \"#882E89FC\" },\r\n            \"good\": { default: \"#028A02\", subtle: \"#DD027502\" },\r\n            \"warning\": { default: \"#E69500\", subtle: \"#DDE69500\" },\r\n            \"attention\": { default: \"#CC3300\", subtle: \"#DDCC3300\" }\r\n        });\r\n        this.parse(obj);\r\n    }\r\n    ContainerStyleDefinition.prototype.parse = function (obj) {\r\n        if (obj) {\r\n            this.backgroundColor = obj[\"backgroundColor\"];\r\n            this.foregroundColors.parse(obj[\"foregroundColors\"]);\r\n            this.highlightBackgroundColor = obj[\"highlightBackgroundColor\"];\r\n            this.highlightForegroundColor = obj[\"highlightForegroundColor\"];\r\n            this.borderColor = obj[\"borderColor\"];\r\n        }\r\n    };\r\n    Object.defineProperty(ContainerStyleDefinition.prototype, \"isBuiltIn\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return ContainerStyleDefinition;\r\n}());\r\nexports.ContainerStyleDefinition = ContainerStyleDefinition;\r\nvar BuiltInContainerStyleDefinition = /** @class */ (function (_super) {\r\n    __extends(BuiltInContainerStyleDefinition, _super);\r\n    function BuiltInContainerStyleDefinition() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(BuiltInContainerStyleDefinition.prototype, \"isBuiltIn\", {\r\n        get: function () {\r\n            return true;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return BuiltInContainerStyleDefinition;\r\n}(ContainerStyleDefinition));\r\nvar ContainerStyleSet = /** @class */ (function () {\r\n    function ContainerStyleSet(obj) {\r\n        this._allStyles = {};\r\n        this._allStyles[Enums.ContainerStyle.Default] = new BuiltInContainerStyleDefinition();\r\n        this._allStyles[Enums.ContainerStyle.Emphasis] = new BuiltInContainerStyleDefinition();\r\n        this._allStyles[Enums.ContainerStyle.Accent] = new BuiltInContainerStyleDefinition();\r\n        this._allStyles[Enums.ContainerStyle.Good] = new BuiltInContainerStyleDefinition();\r\n        this._allStyles[Enums.ContainerStyle.Attention] = new BuiltInContainerStyleDefinition();\r\n        this._allStyles[Enums.ContainerStyle.Warning] = new BuiltInContainerStyleDefinition();\r\n        if (obj) {\r\n            this._allStyles[Enums.ContainerStyle.Default].parse(obj[Enums.ContainerStyle.Default]);\r\n            this._allStyles[Enums.ContainerStyle.Emphasis].parse(obj[Enums.ContainerStyle.Emphasis]);\r\n            this._allStyles[Enums.ContainerStyle.Accent].parse(obj[Enums.ContainerStyle.Accent]);\r\n            this._allStyles[Enums.ContainerStyle.Good].parse(obj[Enums.ContainerStyle.Good]);\r\n            this._allStyles[Enums.ContainerStyle.Attention].parse(obj[Enums.ContainerStyle.Attention]);\r\n            this._allStyles[Enums.ContainerStyle.Warning].parse(obj[Enums.ContainerStyle.Warning]);\r\n            var customStyleArray = obj[\"customStyles\"];\r\n            if (customStyleArray && Array.isArray(customStyleArray)) {\r\n                for (var _i = 0, customStyleArray_1 = customStyleArray; _i < customStyleArray_1.length; _i++) {\r\n                    var customStyle = customStyleArray_1[_i];\r\n                    if (customStyle) {\r\n                        var styleName = customStyle[\"name\"];\r\n                        if (styleName && typeof styleName === \"string\") {\r\n                            if (this._allStyles.hasOwnProperty(styleName)) {\r\n                                this._allStyles[styleName].parse(customStyle[\"style\"]);\r\n                            }\r\n                            else {\r\n                                this._allStyles[styleName] = new ContainerStyleDefinition(customStyle[\"style\"]);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    ContainerStyleSet.prototype.toJSON = function () {\r\n        var _this = this;\r\n        var customStyleArray = [];\r\n        Object.keys(this._allStyles).forEach(function (key) {\r\n            if (!_this._allStyles[key].isBuiltIn) {\r\n                customStyleArray.push({\r\n                    name: key,\r\n                    style: _this._allStyles[key]\r\n                });\r\n            }\r\n        });\r\n        var result = {\r\n            default: this.default,\r\n            emphasis: this.emphasis\r\n        };\r\n        if (customStyleArray.length > 0) {\r\n            result.customStyles = customStyleArray;\r\n        }\r\n        return result;\r\n    };\r\n    ContainerStyleSet.prototype.getStyleByName = function (name, defaultValue) {\r\n        if (name && this._allStyles.hasOwnProperty(name)) {\r\n            return this._allStyles[name];\r\n        }\r\n        else {\r\n            return defaultValue ? defaultValue : this._allStyles[Enums.ContainerStyle.Default];\r\n        }\r\n    };\r\n    Object.defineProperty(ContainerStyleSet.prototype, \"default\", {\r\n        get: function () {\r\n            return this._allStyles[Enums.ContainerStyle.Default];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ContainerStyleSet.prototype, \"emphasis\", {\r\n        get: function () {\r\n            return this._allStyles[Enums.ContainerStyle.Emphasis];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return ContainerStyleSet;\r\n}());\r\nexports.ContainerStyleSet = ContainerStyleSet;\r\nvar FontTypeDefinition = /** @class */ (function () {\r\n    function FontTypeDefinition(fontFamily) {\r\n        this.fontFamily = \"Segoe UI,Segoe,Segoe WP,Helvetica Neue,Helvetica,sans-serif\";\r\n        this.fontSizes = {\r\n            small: 12,\r\n            default: 14,\r\n            medium: 17,\r\n            large: 21,\r\n            extraLarge: 26\r\n        };\r\n        this.fontWeights = {\r\n            lighter: 200,\r\n            default: 400,\r\n            bolder: 600\r\n        };\r\n        if (fontFamily) {\r\n            this.fontFamily = fontFamily;\r\n        }\r\n    }\r\n    FontTypeDefinition.prototype.parse = function (obj) {\r\n        this.fontFamily = obj[\"fontFamily\"] || this.fontFamily;\r\n        this.fontSizes = {\r\n            small: (obj.fontSizes && obj.fontSizes[\"small\"]) || this.fontSizes.small,\r\n            default: (obj.fontSizes && obj.fontSizes[\"default\"]) || this.fontSizes.default,\r\n            medium: (obj.fontSizes && obj.fontSizes[\"medium\"]) || this.fontSizes.medium,\r\n            large: (obj.fontSizes && obj.fontSizes[\"large\"]) || this.fontSizes.large,\r\n            extraLarge: (obj.fontSizes && obj.fontSizes[\"extraLarge\"]) || this.fontSizes.extraLarge\r\n        };\r\n        this.fontWeights = {\r\n            lighter: (obj.fontWeights && obj.fontWeights[\"lighter\"]) || this.fontWeights.lighter,\r\n            default: (obj.fontWeights && obj.fontWeights[\"default\"]) || this.fontWeights.default,\r\n            bolder: (obj.fontWeights && obj.fontWeights[\"bolder\"]) || this.fontWeights.bolder\r\n        };\r\n    };\r\n    FontTypeDefinition.monospace = new FontTypeDefinition(\"'Courier New', Courier, monospace\");\r\n    return FontTypeDefinition;\r\n}());\r\nexports.FontTypeDefinition = FontTypeDefinition;\r\nvar FontTypeSet = /** @class */ (function () {\r\n    function FontTypeSet(obj) {\r\n        this.default = new FontTypeDefinition();\r\n        this.monospace = new FontTypeDefinition(\"'Courier New', Courier, monospace\");\r\n        if (obj) {\r\n            this.default.parse(obj[\"default\"]);\r\n            this.monospace.parse(obj[\"monospace\"]);\r\n        }\r\n    }\r\n    FontTypeSet.prototype.getStyleDefinition = function (style) {\r\n        switch (style) {\r\n            case Enums.FontType.Monospace:\r\n                return this.monospace;\r\n            case Enums.FontType.Default:\r\n            default:\r\n                return this.default;\r\n        }\r\n    };\r\n    return FontTypeSet;\r\n}());\r\nexports.FontTypeSet = FontTypeSet;\r\nvar HostConfig = /** @class */ (function () {\r\n    function HostConfig(obj) {\r\n        this.hostCapabilities = new host_capabilities_1.HostCapabilities();\r\n        this.choiceSetInputValueSeparator = \",\";\r\n        this.supportsInteractivity = true;\r\n        this.spacing = {\r\n            small: 3,\r\n            default: 8,\r\n            medium: 20,\r\n            large: 30,\r\n            extraLarge: 40,\r\n            padding: 15\r\n        };\r\n        this.separator = {\r\n            lineThickness: 1,\r\n            lineColor: \"#EEEEEE\"\r\n        };\r\n        this.imageSizes = {\r\n            small: 40,\r\n            medium: 80,\r\n            large: 160\r\n        };\r\n        this.containerStyles = new ContainerStyleSet();\r\n        this.inputs = new InputConfig();\r\n        this.actions = new ActionsConfig();\r\n        this.adaptiveCard = new AdaptiveCardConfig();\r\n        this.imageSet = new ImageSetConfig();\r\n        this.media = new MediaConfig();\r\n        this.factSet = new FactSetConfig();\r\n        this.table = new TableConfig();\r\n        this.textStyles = new TextStyleSet();\r\n        this.textBlock = new TextBlockConfig();\r\n        this.alwaysAllowBleed = false;\r\n        if (obj) {\r\n            if (typeof obj === \"string\" || obj instanceof String) {\r\n                obj = JSON.parse(obj);\r\n            }\r\n            this.choiceSetInputValueSeparator =\r\n                obj && typeof obj[\"choiceSetInputValueSeparator\"] === \"string\"\r\n                    ? obj[\"choiceSetInputValueSeparator\"]\r\n                    : this.choiceSetInputValueSeparator;\r\n            this.supportsInteractivity =\r\n                obj && typeof obj[\"supportsInteractivity\"] === \"boolean\"\r\n                    ? obj[\"supportsInteractivity\"]\r\n                    : this.supportsInteractivity;\r\n            this._legacyFontType = new FontTypeDefinition();\r\n            this._legacyFontType.parse(obj);\r\n            if (obj.fontTypes) {\r\n                this.fontTypes = new FontTypeSet(obj.fontTypes);\r\n            }\r\n            if (obj.lineHeights) {\r\n                this.lineHeights = {\r\n                    small: obj.lineHeights[\"small\"],\r\n                    default: obj.lineHeights[\"default\"],\r\n                    medium: obj.lineHeights[\"medium\"],\r\n                    large: obj.lineHeights[\"large\"],\r\n                    extraLarge: obj.lineHeights[\"extraLarge\"]\r\n                };\r\n            }\r\n            this.imageSizes = {\r\n                small: (obj.imageSizes && obj.imageSizes[\"small\"]) || this.imageSizes.small,\r\n                medium: (obj.imageSizes && obj.imageSizes[\"medium\"]) || this.imageSizes.medium,\r\n                large: (obj.imageSizes && obj.imageSizes[\"large\"]) || this.imageSizes.large\r\n            };\r\n            this.containerStyles = new ContainerStyleSet(obj[\"containerStyles\"]);\r\n            this.spacing = {\r\n                small: (obj.spacing && obj.spacing[\"small\"]) || this.spacing.small,\r\n                default: (obj.spacing && obj.spacing[\"default\"]) || this.spacing.default,\r\n                medium: (obj.spacing && obj.spacing[\"medium\"]) || this.spacing.medium,\r\n                large: (obj.spacing && obj.spacing[\"large\"]) || this.spacing.large,\r\n                extraLarge: (obj.spacing && obj.spacing[\"extraLarge\"]) || this.spacing.extraLarge,\r\n                padding: (obj.spacing && obj.spacing[\"padding\"]) || this.spacing.padding\r\n            };\r\n            this.separator = {\r\n                lineThickness: (obj.separator && obj.separator[\"lineThickness\"]) ||\r\n                    this.separator.lineThickness,\r\n                lineColor: (obj.separator && obj.separator[\"lineColor\"]) || this.separator.lineColor\r\n            };\r\n            this.inputs = new InputConfig(obj.inputs || this.inputs);\r\n            this.actions = new ActionsConfig(obj.actions || this.actions);\r\n            this.adaptiveCard = new AdaptiveCardConfig(obj.adaptiveCard || this.adaptiveCard);\r\n            this.imageSet = new ImageSetConfig(obj[\"imageSet\"]);\r\n            this.factSet = new FactSetConfig(obj[\"factSet\"]);\r\n            this.textStyles = new TextStyleSet(obj[\"textStyles\"]);\r\n            this.textBlock = new TextBlockConfig(obj[\"textBlock\"]);\r\n        }\r\n    }\r\n    HostConfig.prototype.getFontTypeDefinition = function (style) {\r\n        if (this.fontTypes) {\r\n            return this.fontTypes.getStyleDefinition(style);\r\n        }\r\n        else {\r\n            return style === Enums.FontType.Monospace\r\n                ? FontTypeDefinition.monospace\r\n                : this._legacyFontType;\r\n        }\r\n    };\r\n    HostConfig.prototype.getEffectiveSpacing = function (spacing) {\r\n        switch (spacing) {\r\n            case Enums.Spacing.Small:\r\n                return this.spacing.small;\r\n            case Enums.Spacing.Default:\r\n                return this.spacing.default;\r\n            case Enums.Spacing.Medium:\r\n                return this.spacing.medium;\r\n            case Enums.Spacing.Large:\r\n                return this.spacing.large;\r\n            case Enums.Spacing.ExtraLarge:\r\n                return this.spacing.extraLarge;\r\n            case Enums.Spacing.Padding:\r\n                return this.spacing.padding;\r\n            default:\r\n                return 0;\r\n        }\r\n    };\r\n    HostConfig.prototype.paddingDefinitionToSpacingDefinition = function (paddingDefinition) {\r\n        return new Shared.SpacingDefinition(this.getEffectiveSpacing(paddingDefinition.top), this.getEffectiveSpacing(paddingDefinition.right), this.getEffectiveSpacing(paddingDefinition.bottom), this.getEffectiveSpacing(paddingDefinition.left));\r\n    };\r\n    HostConfig.prototype.makeCssClassNames = function () {\r\n        var classNames = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            classNames[_i] = arguments[_i];\r\n        }\r\n        var result = [];\r\n        for (var _a = 0, classNames_1 = classNames; _a < classNames_1.length; _a++) {\r\n            var className = classNames_1[_a];\r\n            result.push((this.cssClassNamePrefix ? this.cssClassNamePrefix + \"-\" : \"\") + className);\r\n        }\r\n        return result;\r\n    };\r\n    HostConfig.prototype.makeCssClassName = function () {\r\n        var classNames = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            classNames[_i] = arguments[_i];\r\n        }\r\n        var result = this.makeCssClassNames.apply(this, classNames).join(\" \");\r\n        return result ? result : \"\";\r\n    };\r\n    Object.defineProperty(HostConfig.prototype, \"fontFamily\", {\r\n        get: function () {\r\n            return this._legacyFontType.fontFamily;\r\n        },\r\n        set: function (value) {\r\n            this._legacyFontType.fontFamily = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HostConfig.prototype, \"fontSizes\", {\r\n        get: function () {\r\n            return this._legacyFontType.fontSizes;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(HostConfig.prototype, \"fontWeights\", {\r\n        get: function () {\r\n            return this._legacyFontType.fontWeights;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return HostConfig;\r\n}());\r\nexports.HostConfig = HostConfig;\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nexports.defaultHostConfig = new HostConfig({\r\n    supportsInteractivity: true,\r\n    spacing: {\r\n        small: 10,\r\n        default: 20,\r\n        medium: 30,\r\n        large: 40,\r\n        extraLarge: 50,\r\n        padding: 20\r\n    },\r\n    separator: {\r\n        lineThickness: 1,\r\n        lineColor: \"#EEEEEE\"\r\n    },\r\n    fontTypes: {\r\n        default: {\r\n            fontFamily: \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\r\n            fontSizes: {\r\n                small: 12,\r\n                default: 14,\r\n                medium: 17,\r\n                large: 21,\r\n                extraLarge: 26\r\n            },\r\n            fontWeights: {\r\n                lighter: 200,\r\n                default: 400,\r\n                bolder: 600\r\n            }\r\n        },\r\n        monospace: {\r\n            fontFamily: \"'Courier New', Courier, monospace\",\r\n            fontSizes: {\r\n                small: 12,\r\n                default: 14,\r\n                medium: 17,\r\n                large: 21,\r\n                extraLarge: 26\r\n            },\r\n            fontWeights: {\r\n                lighter: 200,\r\n                default: 400,\r\n                bolder: 600\r\n            }\r\n        }\r\n    },\r\n    imageSizes: {\r\n        small: 40,\r\n        medium: 80,\r\n        large: 160\r\n    },\r\n    containerStyles: {\r\n        default: {\r\n            backgroundColor: \"#FFFFFF\",\r\n            foregroundColors: {\r\n                default: {\r\n                    default: \"#333333\",\r\n                    subtle: \"#EE333333\"\r\n                },\r\n                dark: {\r\n                    default: \"#000000\",\r\n                    subtle: \"#66000000\"\r\n                },\r\n                light: {\r\n                    default: \"#FFFFFF\",\r\n                    subtle: \"#33000000\"\r\n                },\r\n                accent: {\r\n                    default: \"#2E89FC\",\r\n                    subtle: \"#882E89FC\"\r\n                },\r\n                attention: {\r\n                    default: \"#cc3300\",\r\n                    subtle: \"#DDcc3300\"\r\n                },\r\n                good: {\r\n                    default: \"#028A02\",\r\n                    subtle: \"#DD027502\"\r\n                },\r\n                warning: {\r\n                    default: \"#e69500\",\r\n                    subtle: \"#DDe69500\"\r\n                }\r\n            }\r\n        },\r\n        emphasis: {\r\n            backgroundColor: \"#08000000\",\r\n            foregroundColors: {\r\n                default: {\r\n                    default: \"#333333\",\r\n                    subtle: \"#EE333333\"\r\n                },\r\n                dark: {\r\n                    default: \"#000000\",\r\n                    subtle: \"#66000000\"\r\n                },\r\n                light: {\r\n                    default: \"#FFFFFF\",\r\n                    subtle: \"#33000000\"\r\n                },\r\n                accent: {\r\n                    default: \"#2E89FC\",\r\n                    subtle: \"#882E89FC\"\r\n                },\r\n                attention: {\r\n                    default: \"#cc3300\",\r\n                    subtle: \"#DDcc3300\"\r\n                },\r\n                good: {\r\n                    default: \"#028A02\",\r\n                    subtle: \"#DD027502\"\r\n                },\r\n                warning: {\r\n                    default: \"#e69500\",\r\n                    subtle: \"#DDe69500\"\r\n                }\r\n            }\r\n        },\r\n        accent: {\r\n            backgroundColor: \"#C7DEF9\",\r\n            foregroundColors: {\r\n                default: {\r\n                    default: \"#333333\",\r\n                    subtle: \"#EE333333\"\r\n                },\r\n                dark: {\r\n                    default: \"#000000\",\r\n                    subtle: \"#66000000\"\r\n                },\r\n                light: {\r\n                    default: \"#FFFFFF\",\r\n                    subtle: \"#33000000\"\r\n                },\r\n                accent: {\r\n                    default: \"#2E89FC\",\r\n                    subtle: \"#882E89FC\"\r\n                },\r\n                attention: {\r\n                    default: \"#cc3300\",\r\n                    subtle: \"#DDcc3300\"\r\n                },\r\n                good: {\r\n                    default: \"#028A02\",\r\n                    subtle: \"#DD027502\"\r\n                },\r\n                warning: {\r\n                    default: \"#e69500\",\r\n                    subtle: \"#DDe69500\"\r\n                }\r\n            }\r\n        },\r\n        good: {\r\n            backgroundColor: \"#CCFFCC\",\r\n            foregroundColors: {\r\n                default: {\r\n                    default: \"#333333\",\r\n                    subtle: \"#EE333333\"\r\n                },\r\n                dark: {\r\n                    default: \"#000000\",\r\n                    subtle: \"#66000000\"\r\n                },\r\n                light: {\r\n                    default: \"#FFFFFF\",\r\n                    subtle: \"#33000000\"\r\n                },\r\n                accent: {\r\n                    default: \"#2E89FC\",\r\n                    subtle: \"#882E89FC\"\r\n                },\r\n                attention: {\r\n                    default: \"#cc3300\",\r\n                    subtle: \"#DDcc3300\"\r\n                },\r\n                good: {\r\n                    default: \"#028A02\",\r\n                    subtle: \"#DD027502\"\r\n                },\r\n                warning: {\r\n                    default: \"#e69500\",\r\n                    subtle: \"#DDe69500\"\r\n                }\r\n            }\r\n        },\r\n        attention: {\r\n            backgroundColor: \"#FFC5B2\",\r\n            foregroundColors: {\r\n                default: {\r\n                    default: \"#333333\",\r\n                    subtle: \"#EE333333\"\r\n                },\r\n                dark: {\r\n                    default: \"#000000\",\r\n                    subtle: \"#66000000\"\r\n                },\r\n                light: {\r\n                    default: \"#FFFFFF\",\r\n                    subtle: \"#33000000\"\r\n                },\r\n                accent: {\r\n                    default: \"#2E89FC\",\r\n                    subtle: \"#882E89FC\"\r\n                },\r\n                attention: {\r\n                    default: \"#cc3300\",\r\n                    subtle: \"#DDcc3300\"\r\n                },\r\n                good: {\r\n                    default: \"#028A02\",\r\n                    subtle: \"#DD027502\"\r\n                },\r\n                warning: {\r\n                    default: \"#e69500\",\r\n                    subtle: \"#DDe69500\"\r\n                }\r\n            }\r\n        },\r\n        warning: {\r\n            backgroundColor: \"#FFE2B2\",\r\n            foregroundColors: {\r\n                default: {\r\n                    default: \"#333333\",\r\n                    subtle: \"#EE333333\"\r\n                },\r\n                dark: {\r\n                    default: \"#000000\",\r\n                    subtle: \"#66000000\"\r\n                },\r\n                light: {\r\n                    default: \"#FFFFFF\",\r\n                    subtle: \"#33000000\"\r\n                },\r\n                accent: {\r\n                    default: \"#2E89FC\",\r\n                    subtle: \"#882E89FC\"\r\n                },\r\n                attention: {\r\n                    default: \"#cc3300\",\r\n                    subtle: \"#DDcc3300\"\r\n                },\r\n                good: {\r\n                    default: \"#028A02\",\r\n                    subtle: \"#DD027502\"\r\n                },\r\n                warning: {\r\n                    default: \"#e69500\",\r\n                    subtle: \"#DDe69500\"\r\n                }\r\n            }\r\n        }\r\n    },\r\n    inputs: {\r\n        label: {\r\n            requiredInputs: {\r\n                weight: Enums.TextWeight.Bolder,\r\n                suffix: \" *\",\r\n                suffixColor: Enums.TextColor.Attention\r\n            },\r\n            optionalInputs: {\r\n                weight: Enums.TextWeight.Bolder\r\n            }\r\n        },\r\n        errorMessage: {\r\n            color: Enums.TextColor.Attention,\r\n            weight: Enums.TextWeight.Bolder\r\n        }\r\n    },\r\n    actions: {\r\n        maxActions: 5,\r\n        spacing: Enums.Spacing.Default,\r\n        buttonSpacing: 10,\r\n        showCard: {\r\n            actionMode: Enums.ShowCardActionMode.Inline,\r\n            inlineTopMargin: 16\r\n        },\r\n        actionsOrientation: Enums.Orientation.Horizontal,\r\n        actionAlignment: Enums.ActionAlignment.Left\r\n    },\r\n    adaptiveCard: {\r\n        allowCustomStyle: false\r\n    },\r\n    imageSet: {\r\n        imageSize: Enums.Size.Medium,\r\n        maxImageHeight: 100\r\n    },\r\n    factSet: {\r\n        title: {\r\n            color: Enums.TextColor.Default,\r\n            size: Enums.TextSize.Default,\r\n            isSubtle: false,\r\n            weight: Enums.TextWeight.Bolder,\r\n            wrap: true,\r\n            maxWidth: 150\r\n        },\r\n        value: {\r\n            color: Enums.TextColor.Default,\r\n            size: Enums.TextSize.Default,\r\n            isSubtle: false,\r\n            weight: Enums.TextWeight.Default,\r\n            wrap: true\r\n        },\r\n        spacing: 10\r\n    }\r\n});\r\n//# sourceMappingURL=host-config.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GlobalRegistry = exports.CardObjectRegistry = exports.ElementSingletonBehavior = void 0;\r\nvar serialization_1 = require(\"./serialization\");\r\n/**\r\n * Describes whether a certain element can be parsed in a \"singleton\" context.\r\n * Specifically, is the element allowed to exist as an object in a context where the\r\n * parent expects an Array of elements (e.g. `AdaptiveCard.body`)\r\n *\r\n * @example - Singleton element in a container (note `items` contains an `object` rather than an `Array<object>`)\r\n * ```json\r\n * {\r\n *     \"type\": \"Container\",\r\n *     \"items\": {\r\n *         \"type\": \"AllowedSingletonElement\"\r\n *     }\r\n * }\r\n * ```\r\n */\r\nvar ElementSingletonBehavior;\r\n(function (ElementSingletonBehavior) {\r\n    /** Element only valid in a singleton context. */\r\n    ElementSingletonBehavior[ElementSingletonBehavior[\"Only\"] = 0] = \"Only\";\r\n    /** Element is allowed in a singleton context, but not required to be a singleton. */\r\n    ElementSingletonBehavior[ElementSingletonBehavior[\"Allowed\"] = 1] = \"Allowed\";\r\n    /** Element is not allowed to exist in a singleton context. */\r\n    ElementSingletonBehavior[ElementSingletonBehavior[\"NotAllowed\"] = 2] = \"NotAllowed\";\r\n})(ElementSingletonBehavior = exports.ElementSingletonBehavior || (exports.ElementSingletonBehavior = {}));\r\nvar CardObjectRegistry = /** @class */ (function () {\r\n    function CardObjectRegistry() {\r\n        this._items = {};\r\n    }\r\n    CardObjectRegistry.prototype.findByName = function (typeName) {\r\n        return this._items.hasOwnProperty(typeName) ? this._items[typeName] : undefined;\r\n    };\r\n    CardObjectRegistry.prototype.clear = function () {\r\n        this._items = {};\r\n    };\r\n    CardObjectRegistry.prototype.copyTo = function (target) {\r\n        var keys = Object.keys(this._items);\r\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\r\n            var key = keys_1[_i];\r\n            var typeRegistration = this._items[key];\r\n            target.register(typeRegistration.typeName, typeRegistration.objectType, typeRegistration.schemaVersion, typeRegistration.singletonBehavior);\r\n        }\r\n    };\r\n    CardObjectRegistry.prototype.register = function (typeName, objectType, schemaVersion, singletonBehavior) {\r\n        if (schemaVersion === void 0) { schemaVersion = serialization_1.Versions.v1_0; }\r\n        if (singletonBehavior === void 0) { singletonBehavior = ElementSingletonBehavior.NotAllowed; }\r\n        var registrationInfo = this.findByName(typeName);\r\n        if (registrationInfo !== undefined) {\r\n            registrationInfo.objectType = objectType;\r\n        }\r\n        else {\r\n            registrationInfo = {\r\n                typeName: typeName,\r\n                objectType: objectType,\r\n                schemaVersion: schemaVersion,\r\n                singletonBehavior: singletonBehavior\r\n            };\r\n        }\r\n        this._items[typeName] = registrationInfo;\r\n    };\r\n    CardObjectRegistry.prototype.unregister = function (typeName) {\r\n        delete this._items[typeName];\r\n    };\r\n    CardObjectRegistry.prototype.createInstance = function (typeName, targetVersion) {\r\n        var registrationInfo = this.findByName(typeName);\r\n        return registrationInfo && registrationInfo.schemaVersion.compareTo(targetVersion) <= 0\r\n            ? new registrationInfo.objectType()\r\n            : undefined;\r\n    };\r\n    CardObjectRegistry.prototype.getItemCount = function () {\r\n        return Object.keys(this._items).length;\r\n    };\r\n    CardObjectRegistry.prototype.getItemAt = function (index) {\r\n        var _this = this;\r\n        return Object.keys(this._items).map(function (e) { return _this._items[e]; })[index];\r\n    };\r\n    return CardObjectRegistry;\r\n}());\r\nexports.CardObjectRegistry = CardObjectRegistry;\r\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class\r\nvar GlobalRegistry = /** @class */ (function () {\r\n    function GlobalRegistry() {\r\n    }\r\n    GlobalRegistry.populateWithDefaultElements = function (registry) {\r\n        registry.clear();\r\n        GlobalRegistry.defaultElements.copyTo(registry);\r\n    };\r\n    GlobalRegistry.populateWithDefaultActions = function (registry) {\r\n        registry.clear();\r\n        GlobalRegistry.defaultActions.copyTo(registry);\r\n    };\r\n    Object.defineProperty(GlobalRegistry, \"elements\", {\r\n        get: function () {\r\n            if (!GlobalRegistry._elements) {\r\n                GlobalRegistry._elements = new CardObjectRegistry();\r\n                GlobalRegistry.populateWithDefaultElements(GlobalRegistry._elements);\r\n            }\r\n            return GlobalRegistry._elements;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(GlobalRegistry, \"actions\", {\r\n        get: function () {\r\n            if (!GlobalRegistry._actions) {\r\n                GlobalRegistry._actions = new CardObjectRegistry();\r\n                GlobalRegistry.populateWithDefaultActions(GlobalRegistry._actions);\r\n            }\r\n            return GlobalRegistry._actions;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    GlobalRegistry.reset = function () {\r\n        GlobalRegistry._elements = undefined;\r\n        GlobalRegistry._actions = undefined;\r\n    };\r\n    GlobalRegistry.defaultElements = new CardObjectRegistry();\r\n    GlobalRegistry.defaultActions = new CardObjectRegistry();\r\n    return GlobalRegistry;\r\n}());\r\nexports.GlobalRegistry = GlobalRegistry;\r\n//# sourceMappingURL=registry.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SerializableObject = exports.property = exports.SerializableObjectSchema = exports.CustomProperty = exports.SerializableObjectCollectionProperty = exports.SerializableObjectProperty = exports.EnumProperty = exports.ValueSetProperty = exports.StringArrayProperty = exports.PixelSizeProperty = exports.NumProperty = exports.BoolProperty = exports.StringProperty = exports.PropertyDefinition = exports.BaseSerializationContext = exports.isVersionLessOrEqual = exports.Versions = exports.Version = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar shared_1 = require(\"./shared\");\r\nvar Utils = require(\"./utils\");\r\nvar Enums = require(\"./enums\");\r\nvar strings_1 = require(\"./strings\");\r\nvar Version = /** @class */ (function () {\r\n    function Version(major, minor, label) {\r\n        if (major === void 0) { major = 1; }\r\n        if (minor === void 0) { minor = 1; }\r\n        this._isValid = true;\r\n        this._major = major;\r\n        this._minor = minor;\r\n        this._label = label;\r\n    }\r\n    Version.parse = function (versionString, context) {\r\n        if (!versionString) {\r\n            return undefined;\r\n        }\r\n        var result = new Version();\r\n        result._versionString = versionString;\r\n        var regEx = /(\\d+).(\\d+)/gi;\r\n        var matches = regEx.exec(versionString);\r\n        if (matches != null && matches.length === 3) {\r\n            result._major = parseInt(matches[1]);\r\n            result._minor = parseInt(matches[2]);\r\n        }\r\n        else {\r\n            result._isValid = false;\r\n        }\r\n        if (!result._isValid) {\r\n            context.logParseEvent(undefined, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidVersionString(result._versionString));\r\n        }\r\n        return result;\r\n    };\r\n    Version.prototype.toString = function () {\r\n        return !this._isValid ? this._versionString : this._major + \".\" + this._minor;\r\n    };\r\n    Version.prototype.toJSON = function () {\r\n        return this.toString();\r\n    };\r\n    Version.prototype.compareTo = function (otherVersion) {\r\n        if (!this.isValid || !otherVersion.isValid) {\r\n            throw new Error(\"Cannot compare invalid version.\");\r\n        }\r\n        if (this.major > otherVersion.major) {\r\n            return 1;\r\n        }\r\n        else if (this.major < otherVersion.major) {\r\n            return -1;\r\n        }\r\n        else if (this.minor > otherVersion.minor) {\r\n            return 1;\r\n        }\r\n        else if (this.minor < otherVersion.minor) {\r\n            return -1;\r\n        }\r\n        return 0;\r\n    };\r\n    Object.defineProperty(Version.prototype, \"label\", {\r\n        get: function () {\r\n            return this._label ? this._label : this.toString();\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Version.prototype, \"major\", {\r\n        get: function () {\r\n            return this._major;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Version.prototype, \"minor\", {\r\n        get: function () {\r\n            return this._minor;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Version.prototype, \"isValid\", {\r\n        get: function () {\r\n            return this._isValid;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return Version;\r\n}());\r\nexports.Version = Version;\r\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class\r\nvar Versions = /** @class */ (function () {\r\n    function Versions() {\r\n    }\r\n    /* eslint-enable @typescript-eslint/naming-convention */\r\n    Versions.getAllDeclaredVersions = function () {\r\n        var ctor = Versions;\r\n        var properties = [];\r\n        for (var propertyName in ctor) {\r\n            if (propertyName.match(/^v[0-9_]*$/)) {\r\n                // filter latest\r\n                try {\r\n                    var propertyValue = ctor[propertyName];\r\n                    if (propertyValue instanceof Version) {\r\n                        properties.push(propertyValue);\r\n                    }\r\n                }\r\n                catch (_a) {\r\n                    // If a property happens to have a getter function and\r\n                    // it throws an exception, we need to catch it here\r\n                }\r\n            }\r\n        }\r\n        return properties.sort(function (v1, v2) { return v1.compareTo(v2); });\r\n    };\r\n    /* eslint-disable @typescript-eslint/naming-convention */\r\n    Versions.v1_0 = new Version(1, 0);\r\n    Versions.v1_1 = new Version(1, 1);\r\n    Versions.v1_2 = new Version(1, 2);\r\n    Versions.v1_3 = new Version(1, 3);\r\n    Versions.v1_4 = new Version(1, 4);\r\n    Versions.v1_5 = new Version(1, 5);\r\n    // If preview tag is added/removed from any version,\r\n    // don't forget to update .ac-schema-version-1-?::after too in adaptivecards-site\\themes\\adaptivecards\\source\\css\\style.css\r\n    Versions.v1_6 = new Version(1, 6, \"1.6 Preview\");\r\n    Versions.latest = Versions.v1_5;\r\n    return Versions;\r\n}());\r\nexports.Versions = Versions;\r\nfunction isVersionLessOrEqual(version, targetVersion) {\r\n    if (version instanceof Version) {\r\n        if (targetVersion instanceof Version) {\r\n            return targetVersion.compareTo(version) >= 0;\r\n        }\r\n        else {\r\n            // Target version is *\r\n            return true;\r\n        }\r\n    }\r\n    else {\r\n        // Version is *\r\n        return true;\r\n    }\r\n}\r\nexports.isVersionLessOrEqual = isVersionLessOrEqual;\r\nvar BaseSerializationContext = /** @class */ (function () {\r\n    function BaseSerializationContext(targetVersion) {\r\n        if (targetVersion === void 0) { targetVersion = Versions.latest; }\r\n        this._validationEvents = [];\r\n        this.targetVersion = targetVersion;\r\n    }\r\n    BaseSerializationContext.prototype.serializeValue = function (target, propertyName, propertyValue, defaultValue, forceDeleteIfNullOrDefault) {\r\n        if (defaultValue === void 0) { defaultValue = undefined; }\r\n        if (forceDeleteIfNullOrDefault === void 0) { forceDeleteIfNullOrDefault = false; }\r\n        if (propertyValue === null ||\r\n            propertyValue === undefined ||\r\n            propertyValue === defaultValue) {\r\n            if (!shared_1.GlobalSettings.enableFullJsonRoundTrip || forceDeleteIfNullOrDefault) {\r\n                delete target[propertyName];\r\n            }\r\n        }\r\n        else if (propertyValue === defaultValue) {\r\n            delete target[propertyName];\r\n        }\r\n        else {\r\n            target[propertyName] = propertyValue;\r\n        }\r\n    };\r\n    BaseSerializationContext.prototype.serializeString = function (target, propertyName, propertyValue, defaultValue) {\r\n        if (propertyValue === null ||\r\n            propertyValue === undefined ||\r\n            propertyValue === defaultValue) {\r\n            if (!shared_1.GlobalSettings.enableFullJsonRoundTrip) {\r\n                delete target[propertyName];\r\n            }\r\n        }\r\n        else {\r\n            target[propertyName] = propertyValue;\r\n        }\r\n    };\r\n    BaseSerializationContext.prototype.serializeBool = function (target, propertyName, propertyValue, defaultValue) {\r\n        if (propertyValue === null ||\r\n            propertyValue === undefined ||\r\n            propertyValue === defaultValue) {\r\n            if (!shared_1.GlobalSettings.enableFullJsonRoundTrip) {\r\n                delete target[propertyName];\r\n            }\r\n        }\r\n        else {\r\n            target[propertyName] = propertyValue;\r\n        }\r\n    };\r\n    BaseSerializationContext.prototype.serializeNumber = function (target, propertyName, propertyValue, defaultValue) {\r\n        if (propertyValue === null ||\r\n            propertyValue === undefined ||\r\n            propertyValue === defaultValue ||\r\n            isNaN(propertyValue)) {\r\n            if (!shared_1.GlobalSettings.enableFullJsonRoundTrip) {\r\n                delete target[propertyName];\r\n            }\r\n        }\r\n        else {\r\n            target[propertyName] = propertyValue;\r\n        }\r\n    };\r\n    BaseSerializationContext.prototype.serializeEnum = function (enumType, target, propertyName, propertyValue, defaultValue) {\r\n        if (defaultValue === void 0) { defaultValue = undefined; }\r\n        if (propertyValue === null ||\r\n            propertyValue === undefined ||\r\n            propertyValue === defaultValue) {\r\n            if (!shared_1.GlobalSettings.enableFullJsonRoundTrip) {\r\n                delete target[propertyName];\r\n            }\r\n        }\r\n        else {\r\n            target[propertyName] = enumType[propertyValue];\r\n        }\r\n    };\r\n    BaseSerializationContext.prototype.serializeArray = function (target, propertyName, propertyValue) {\r\n        var items = [];\r\n        if (propertyValue) {\r\n            for (var _i = 0, propertyValue_1 = propertyValue; _i < propertyValue_1.length; _i++) {\r\n                var item = propertyValue_1[_i];\r\n                var serializedItem = undefined;\r\n                if (item instanceof SerializableObject) {\r\n                    serializedItem = item.toJSON(this);\r\n                }\r\n                else if (item.toJSON) {\r\n                    serializedItem = item.toJSON();\r\n                }\r\n                else {\r\n                    serializedItem = item;\r\n                }\r\n                if (serializedItem !== undefined) {\r\n                    items.push(serializedItem);\r\n                }\r\n            }\r\n        }\r\n        if (items.length === 0) {\r\n            if (target.hasOwnProperty(propertyName) && Array.isArray(target[propertyName])) {\r\n                delete target[propertyName];\r\n            }\r\n        }\r\n        else {\r\n            this.serializeValue(target, propertyName, items);\r\n        }\r\n    };\r\n    BaseSerializationContext.prototype.clearEvents = function () {\r\n        this._validationEvents = [];\r\n    };\r\n    BaseSerializationContext.prototype.logEvent = function (source, phase, event, message) {\r\n        this._validationEvents.push({\r\n            source: source,\r\n            phase: phase,\r\n            event: event,\r\n            message: message\r\n        });\r\n    };\r\n    BaseSerializationContext.prototype.logParseEvent = function (source, event, message) {\r\n        this.logEvent(source, Enums.ValidationPhase.Parse, event, message);\r\n    };\r\n    BaseSerializationContext.prototype.getEventAt = function (index) {\r\n        return this._validationEvents[index];\r\n    };\r\n    Object.defineProperty(BaseSerializationContext.prototype, \"eventCount\", {\r\n        get: function () {\r\n            return this._validationEvents.length;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return BaseSerializationContext;\r\n}());\r\nexports.BaseSerializationContext = BaseSerializationContext;\r\nvar SimpleSerializationContext = /** @class */ (function (_super) {\r\n    __extends(SimpleSerializationContext, _super);\r\n    function SimpleSerializationContext() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    return SimpleSerializationContext;\r\n}(BaseSerializationContext));\r\nvar PropertyDefinition = /** @class */ (function () {\r\n    function PropertyDefinition(targetVersion, name, defaultValue, onGetInitialValue) {\r\n        this.targetVersion = targetVersion;\r\n        this.name = name;\r\n        this.defaultValue = defaultValue;\r\n        this.onGetInitialValue = onGetInitialValue;\r\n        this.isSerializationEnabled = true;\r\n        this.sequentialNumber = PropertyDefinition._sequentialNumber;\r\n        PropertyDefinition._sequentialNumber++;\r\n    }\r\n    PropertyDefinition.prototype.getInternalName = function () {\r\n        return this.name;\r\n    };\r\n    PropertyDefinition.prototype.parse = function (sender, source, context) {\r\n        return source[this.name];\r\n    };\r\n    PropertyDefinition.prototype.toJSON = function (sender, target, value, context) {\r\n        context.serializeValue(target, this.name, value, this.defaultValue);\r\n    };\r\n    PropertyDefinition._sequentialNumber = 0;\r\n    return PropertyDefinition;\r\n}());\r\nexports.PropertyDefinition = PropertyDefinition;\r\nvar StringProperty = /** @class */ (function (_super) {\r\n    __extends(StringProperty, _super);\r\n    function StringProperty(targetVersion, name, treatEmptyAsUndefined, regEx, defaultValue, onGetInitialValue) {\r\n        if (treatEmptyAsUndefined === void 0) { treatEmptyAsUndefined = true; }\r\n        var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;\r\n        _this.targetVersion = targetVersion;\r\n        _this.name = name;\r\n        _this.treatEmptyAsUndefined = treatEmptyAsUndefined;\r\n        _this.regEx = regEx;\r\n        _this.defaultValue = defaultValue;\r\n        _this.onGetInitialValue = onGetInitialValue;\r\n        return _this;\r\n    }\r\n    StringProperty.prototype.parse = function (sender, source, context) {\r\n        var parsedValue = Utils.parseString(source[this.name], this.defaultValue);\r\n        var isUndefined = parsedValue === undefined || (parsedValue === \"\" && this.treatEmptyAsUndefined);\r\n        if (!isUndefined && this.regEx !== undefined) {\r\n            var matches = this.regEx.exec(parsedValue);\r\n            if (!matches) {\r\n                context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(parsedValue, this.name));\r\n                return undefined;\r\n            }\r\n        }\r\n        return parsedValue;\r\n    };\r\n    StringProperty.prototype.toJSON = function (sender, target, value, context) {\r\n        context.serializeString(target, this.name, value === \"\" && this.treatEmptyAsUndefined ? undefined : value, this.defaultValue);\r\n    };\r\n    return StringProperty;\r\n}(PropertyDefinition));\r\nexports.StringProperty = StringProperty;\r\nvar BoolProperty = /** @class */ (function (_super) {\r\n    __extends(BoolProperty, _super);\r\n    function BoolProperty(targetVersion, name, defaultValue, onGetInitialValue) {\r\n        var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;\r\n        _this.targetVersion = targetVersion;\r\n        _this.name = name;\r\n        _this.defaultValue = defaultValue;\r\n        _this.onGetInitialValue = onGetInitialValue;\r\n        return _this;\r\n    }\r\n    BoolProperty.prototype.parse = function (sender, source, context) {\r\n        return Utils.parseBool(source[this.name], this.defaultValue);\r\n    };\r\n    BoolProperty.prototype.toJSON = function (sender, target, value, context) {\r\n        context.serializeBool(target, this.name, value, this.defaultValue);\r\n    };\r\n    return BoolProperty;\r\n}(PropertyDefinition));\r\nexports.BoolProperty = BoolProperty;\r\nvar NumProperty = /** @class */ (function (_super) {\r\n    __extends(NumProperty, _super);\r\n    function NumProperty(targetVersion, name, defaultValue, onGetInitialValue) {\r\n        var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;\r\n        _this.targetVersion = targetVersion;\r\n        _this.name = name;\r\n        _this.defaultValue = defaultValue;\r\n        _this.onGetInitialValue = onGetInitialValue;\r\n        return _this;\r\n    }\r\n    NumProperty.prototype.parse = function (sender, source, context) {\r\n        return Utils.parseNumber(source[this.name], this.defaultValue);\r\n    };\r\n    NumProperty.prototype.toJSON = function (sender, target, value, context) {\r\n        context.serializeNumber(target, this.name, value, this.defaultValue);\r\n    };\r\n    return NumProperty;\r\n}(PropertyDefinition));\r\nexports.NumProperty = NumProperty;\r\nvar PixelSizeProperty = /** @class */ (function (_super) {\r\n    __extends(PixelSizeProperty, _super);\r\n    function PixelSizeProperty() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    PixelSizeProperty.prototype.parse = function (sender, source, context) {\r\n        var result = undefined;\r\n        var value = source[this.name];\r\n        if (typeof value === \"string\") {\r\n            var isValid = false;\r\n            try {\r\n                var size = shared_1.SizeAndUnit.parse(value, true);\r\n                if (size.unit === Enums.SizeUnit.Pixel) {\r\n                    result = size.physicalSize;\r\n                    isValid = true;\r\n                }\r\n            }\r\n            catch (_a) {\r\n                // Do nothing. A parse error is emitted below\r\n            }\r\n            if (!isValid) {\r\n                context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(source[this.name], \"minHeight\"));\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    PixelSizeProperty.prototype.toJSON = function (sender, target, value, context) {\r\n        context.serializeValue(target, this.name, typeof value === \"number\" && !isNaN(value) ? value + \"px\" : undefined);\r\n    };\r\n    return PixelSizeProperty;\r\n}(PropertyDefinition));\r\nexports.PixelSizeProperty = PixelSizeProperty;\r\nvar StringArrayProperty = /** @class */ (function (_super) {\r\n    __extends(StringArrayProperty, _super);\r\n    function StringArrayProperty(targetVersion, name, defaultValue, onGetInitialValue) {\r\n        var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;\r\n        _this.targetVersion = targetVersion;\r\n        _this.name = name;\r\n        _this.defaultValue = defaultValue;\r\n        _this.onGetInitialValue = onGetInitialValue;\r\n        return _this;\r\n    }\r\n    StringArrayProperty.prototype.parse = function (sender, source, context) {\r\n        var sourceValue = source[this.name];\r\n        if (sourceValue === undefined || !Array.isArray(sourceValue)) {\r\n            return this.defaultValue;\r\n        }\r\n        var result = [];\r\n        for (var _i = 0, sourceValue_1 = sourceValue; _i < sourceValue_1.length; _i++) {\r\n            var value = sourceValue_1[_i];\r\n            if (typeof value === \"string\") {\r\n                result.push(value);\r\n            }\r\n            else {\r\n                context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, \"Invalid array value \\\"\".concat(JSON.stringify(value), \"\\\" of type \\\"\").concat(typeof value, \"\\\" ignored for \\\"\").concat(this.name, \"\\\".\"));\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    StringArrayProperty.prototype.toJSON = function (sender, target, value, context) {\r\n        context.serializeArray(target, this.name, value);\r\n    };\r\n    return StringArrayProperty;\r\n}(PropertyDefinition));\r\nexports.StringArrayProperty = StringArrayProperty;\r\nvar ValueSetProperty = /** @class */ (function (_super) {\r\n    __extends(ValueSetProperty, _super);\r\n    function ValueSetProperty(targetVersion, name, values, defaultValue, onGetInitialValue) {\r\n        var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;\r\n        _this.targetVersion = targetVersion;\r\n        _this.name = name;\r\n        _this.values = values;\r\n        _this.defaultValue = defaultValue;\r\n        _this.onGetInitialValue = onGetInitialValue;\r\n        return _this;\r\n    }\r\n    ValueSetProperty.prototype.isValidValue = function (value, context) {\r\n        for (var _i = 0, _a = this.values; _i < _a.length; _i++) {\r\n            var versionedValue = _a[_i];\r\n            if (value.toLowerCase() === versionedValue.value.toLowerCase()) {\r\n                var targetVersion = versionedValue.targetVersion\r\n                    ? versionedValue.targetVersion\r\n                    : this.targetVersion;\r\n                return targetVersion.compareTo(context.targetVersion) <= 0;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    ValueSetProperty.prototype.parse = function (sender, source, context) {\r\n        var sourceValue = source[this.name];\r\n        if (sourceValue === undefined) {\r\n            return this.defaultValue;\r\n        }\r\n        if (typeof sourceValue === \"string\") {\r\n            for (var _i = 0, _a = this.values; _i < _a.length; _i++) {\r\n                var versionedValue = _a[_i];\r\n                if (sourceValue.toLowerCase() === versionedValue.value.toLowerCase()) {\r\n                    var targetVersion = versionedValue.targetVersion\r\n                        ? versionedValue.targetVersion\r\n                        : this.targetVersion;\r\n                    if (targetVersion.compareTo(context.targetVersion) <= 0) {\r\n                        return versionedValue.value;\r\n                    }\r\n                    else {\r\n                        context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.propertyValueNotSupported(sourceValue, this.name, targetVersion.toString(), context.targetVersion.toString()));\r\n                        return this.defaultValue;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(sourceValue, this.name));\r\n        return this.defaultValue;\r\n    };\r\n    ValueSetProperty.prototype.toJSON = function (sender, target, value, context) {\r\n        var invalidValue = false;\r\n        if (value !== undefined) {\r\n            invalidValue = true;\r\n            for (var _i = 0, _a = this.values; _i < _a.length; _i++) {\r\n                var versionedValue = _a[_i];\r\n                if (versionedValue.value === value) {\r\n                    var targetVersion = versionedValue.targetVersion\r\n                        ? versionedValue.targetVersion\r\n                        : this.targetVersion;\r\n                    if (targetVersion.compareTo(context.targetVersion) <= 0) {\r\n                        invalidValue = false;\r\n                        break;\r\n                    }\r\n                    else {\r\n                        context.logEvent(sender, Enums.ValidationPhase.ToJSON, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.propertyValueNotSupported(value, this.name, targetVersion.toString(), context.targetVersion.toString()));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (!invalidValue) {\r\n            context.serializeValue(target, this.name, value, this.defaultValue, true);\r\n        }\r\n    };\r\n    return ValueSetProperty;\r\n}(PropertyDefinition));\r\nexports.ValueSetProperty = ValueSetProperty;\r\nvar EnumProperty = /** @class */ (function (_super) {\r\n    __extends(EnumProperty, _super);\r\n    function EnumProperty(targetVersion, name, enumType, defaultValue, values, onGetInitialValue) {\r\n        var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;\r\n        _this.targetVersion = targetVersion;\r\n        _this.name = name;\r\n        _this.enumType = enumType;\r\n        _this.defaultValue = defaultValue;\r\n        _this.onGetInitialValue = onGetInitialValue;\r\n        _this._values = [];\r\n        if (!values) {\r\n            // eslint-disable-next-line guard-for-in\r\n            for (var key in enumType) {\r\n                var keyAsNumber = parseInt(key, 10);\r\n                if (keyAsNumber >= 0) {\r\n                    _this._values.push({ value: keyAsNumber });\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            _this._values = values;\r\n        }\r\n        return _this;\r\n    }\r\n    EnumProperty.prototype.parse = function (sender, source, context) {\r\n        var sourceValue = source[this.name];\r\n        if (typeof sourceValue !== \"string\") {\r\n            return this.defaultValue;\r\n        }\r\n        var enumValue = Utils.getEnumValueByName(this.enumType, sourceValue);\r\n        if (enumValue !== undefined) {\r\n            for (var _i = 0, _a = this.values; _i < _a.length; _i++) {\r\n                var versionedValue = _a[_i];\r\n                if (versionedValue.value === enumValue) {\r\n                    var targetVersion = versionedValue.targetVersion\r\n                        ? versionedValue.targetVersion\r\n                        : this.targetVersion;\r\n                    if (targetVersion.compareTo(context.targetVersion) <= 0) {\r\n                        return enumValue;\r\n                    }\r\n                    else {\r\n                        context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.propertyValueNotSupported(sourceValue, this.name, targetVersion.toString(), context.targetVersion.toString()));\r\n                        return this.defaultValue;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        context.logParseEvent(sender, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(sourceValue, this.name));\r\n        return this.defaultValue;\r\n    };\r\n    EnumProperty.prototype.toJSON = function (sender, target, value, context) {\r\n        var invalidValue = false;\r\n        if (value !== undefined) {\r\n            invalidValue = true;\r\n            for (var _i = 0, _a = this.values; _i < _a.length; _i++) {\r\n                var versionedValue = _a[_i];\r\n                if (versionedValue.value === value) {\r\n                    var targetVersion = versionedValue.targetVersion\r\n                        ? versionedValue.targetVersion\r\n                        : this.targetVersion;\r\n                    if (targetVersion.compareTo(context.targetVersion) <= 0) {\r\n                        invalidValue = false;\r\n                        break;\r\n                    }\r\n                    else {\r\n                        context.logEvent(sender, Enums.ValidationPhase.ToJSON, Enums.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidPropertyValue(value, this.name));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (!invalidValue) {\r\n            context.serializeEnum(this.enumType, target, this.name, value, this.defaultValue);\r\n        }\r\n    };\r\n    Object.defineProperty(EnumProperty.prototype, \"values\", {\r\n        get: function () {\r\n            return this._values;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return EnumProperty;\r\n}(PropertyDefinition));\r\nexports.EnumProperty = EnumProperty;\r\nvar SerializableObjectProperty = /** @class */ (function (_super) {\r\n    __extends(SerializableObjectProperty, _super);\r\n    function SerializableObjectProperty(targetVersion, name, objectType, nullable, defaultValue) {\r\n        if (nullable === void 0) { nullable = false; }\r\n        var _this = _super.call(this, targetVersion, name, defaultValue, function (sender) {\r\n            return _this.nullable ? undefined : new _this.objectType();\r\n        }) || this;\r\n        _this.targetVersion = targetVersion;\r\n        _this.name = name;\r\n        _this.objectType = objectType;\r\n        _this.nullable = nullable;\r\n        return _this;\r\n    }\r\n    SerializableObjectProperty.prototype.parse = function (sender, source, context) {\r\n        var sourceValue = source[this.name];\r\n        if (sourceValue === undefined) {\r\n            return this.onGetInitialValue ? this.onGetInitialValue(sender) : this.defaultValue;\r\n        }\r\n        var result = new this.objectType();\r\n        result.parse(sourceValue, context);\r\n        return result;\r\n    };\r\n    SerializableObjectProperty.prototype.toJSON = function (sender, target, value, context) {\r\n        var serializedValue = undefined;\r\n        if (value !== undefined && !value.hasAllDefaultValues()) {\r\n            serializedValue = value.toJSON(context);\r\n        }\r\n        if (typeof serializedValue === \"object\" && Object.keys(serializedValue).length === 0) {\r\n            serializedValue = undefined;\r\n        }\r\n        context.serializeValue(target, this.name, serializedValue, this.defaultValue, true);\r\n    };\r\n    return SerializableObjectProperty;\r\n}(PropertyDefinition));\r\nexports.SerializableObjectProperty = SerializableObjectProperty;\r\nvar SerializableObjectCollectionProperty = /** @class */ (function (_super) {\r\n    __extends(SerializableObjectCollectionProperty, _super);\r\n    function SerializableObjectCollectionProperty(targetVersion, name, objectType, onItemAdded) {\r\n        var _this = _super.call(this, targetVersion, name, undefined, function (sender) {\r\n            return [];\r\n        }) || this;\r\n        _this.targetVersion = targetVersion;\r\n        _this.name = name;\r\n        _this.objectType = objectType;\r\n        _this.onItemAdded = onItemAdded;\r\n        return _this;\r\n    }\r\n    SerializableObjectCollectionProperty.prototype.parse = function (sender, source, context) {\r\n        var result = [];\r\n        var sourceCollection = source[this.name];\r\n        if (Array.isArray(sourceCollection)) {\r\n            for (var _i = 0, sourceCollection_1 = sourceCollection; _i < sourceCollection_1.length; _i++) {\r\n                var sourceItem = sourceCollection_1[_i];\r\n                var item = new this.objectType();\r\n                item.parse(sourceItem, context);\r\n                result.push(item);\r\n                if (this.onItemAdded) {\r\n                    this.onItemAdded(sender, item);\r\n                }\r\n            }\r\n        }\r\n        return result.length > 0\r\n            ? result\r\n            : this.onGetInitialValue\r\n                ? this.onGetInitialValue(sender)\r\n                : undefined;\r\n    };\r\n    SerializableObjectCollectionProperty.prototype.toJSON = function (sender, target, value, context) {\r\n        context.serializeArray(target, this.name, value);\r\n    };\r\n    return SerializableObjectCollectionProperty;\r\n}(PropertyDefinition));\r\nexports.SerializableObjectCollectionProperty = SerializableObjectCollectionProperty;\r\nvar CustomProperty = /** @class */ (function (_super) {\r\n    __extends(CustomProperty, _super);\r\n    function CustomProperty(targetVersion, name, onParse, onToJSON, defaultValue, onGetInitialValue) {\r\n        var _this = _super.call(this, targetVersion, name, defaultValue, onGetInitialValue) || this;\r\n        _this.targetVersion = targetVersion;\r\n        _this.name = name;\r\n        _this.onParse = onParse;\r\n        _this.onToJSON = onToJSON;\r\n        _this.defaultValue = defaultValue;\r\n        _this.onGetInitialValue = onGetInitialValue;\r\n        if (!_this.onParse) {\r\n            throw new Error(\"CustomPropertyDefinition instances must have an onParse handler.\");\r\n        }\r\n        if (!_this.onToJSON) {\r\n            throw new Error(\"CustomPropertyDefinition instances must have an onToJSON handler.\");\r\n        }\r\n        return _this;\r\n    }\r\n    CustomProperty.prototype.parse = function (sender, source, context) {\r\n        return this.onParse(sender, this, source, context);\r\n    };\r\n    CustomProperty.prototype.toJSON = function (sender, target, value, context) {\r\n        this.onToJSON(sender, this, target, value, context);\r\n    };\r\n    return CustomProperty;\r\n}(PropertyDefinition));\r\nexports.CustomProperty = CustomProperty;\r\nvar SerializableObjectSchema = /** @class */ (function () {\r\n    function SerializableObjectSchema() {\r\n        this._properties = [];\r\n    }\r\n    SerializableObjectSchema.prototype.indexOf = function (prop) {\r\n        for (var i = 0; i < this._properties.length; i++) {\r\n            if (this._properties[i] === prop) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n    SerializableObjectSchema.prototype.add = function () {\r\n        var properties = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            properties[_i] = arguments[_i];\r\n        }\r\n        for (var _a = 0, properties_1 = properties; _a < properties_1.length; _a++) {\r\n            var prop = properties_1[_a];\r\n            if (this.indexOf(prop) === -1) {\r\n                this._properties.push(prop);\r\n            }\r\n        }\r\n    };\r\n    SerializableObjectSchema.prototype.remove = function () {\r\n        var properties = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            properties[_i] = arguments[_i];\r\n        }\r\n        for (var _a = 0, properties_2 = properties; _a < properties_2.length; _a++) {\r\n            var prop = properties_2[_a];\r\n            while (true) {\r\n                var index = this.indexOf(prop);\r\n                if (index >= 0) {\r\n                    this._properties.splice(index, 1);\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    SerializableObjectSchema.prototype.getItemAt = function (index) {\r\n        return this._properties[index];\r\n    };\r\n    SerializableObjectSchema.prototype.getCount = function () {\r\n        return this._properties.length;\r\n    };\r\n    return SerializableObjectSchema;\r\n}());\r\nexports.SerializableObjectSchema = SerializableObjectSchema;\r\n// This is a decorator function, used to map SerializableObject descendant class members to\r\n// schema properties\r\nfunction property(prop) {\r\n    return function (target, propertyKey) {\r\n        var descriptor = Object.getOwnPropertyDescriptor(target, propertyKey) || {};\r\n        if (!descriptor.get && !descriptor.set) {\r\n            descriptor.get = function () {\r\n                return this.getValue(prop);\r\n            };\r\n            descriptor.set = function (value) {\r\n                this.setValue(prop, value);\r\n            };\r\n            Object.defineProperty(target, propertyKey, descriptor);\r\n        }\r\n    };\r\n}\r\nexports.property = property;\r\nvar SerializableObject = /** @class */ (function () {\r\n    function SerializableObject() {\r\n        this._propertyBag = {};\r\n        this._rawProperties = {};\r\n        this.maxVersion = SerializableObject.defaultMaxVersion;\r\n        var s = this.getSchema();\r\n        for (var i = 0; i < s.getCount(); i++) {\r\n            var prop = s.getItemAt(i);\r\n            if (prop.onGetInitialValue) {\r\n                this.setValue(prop, prop.onGetInitialValue(this));\r\n            }\r\n        }\r\n    }\r\n    SerializableObject.prototype.getDefaultSerializationContext = function () {\r\n        return new SimpleSerializationContext();\r\n    };\r\n    SerializableObject.prototype.populateSchema = function (schema) {\r\n        var ctor = this.constructor;\r\n        var properties = [];\r\n        // eslint-disable-next-line guard-for-in\r\n        for (var propertyName in ctor) {\r\n            try {\r\n                var propertyValue = ctor[propertyName];\r\n                if (propertyValue instanceof PropertyDefinition) {\r\n                    properties.push(propertyValue);\r\n                }\r\n            }\r\n            catch (_a) {\r\n                // If a property happens to have a getter function and\r\n                // it throws an exception, we need to catch it here\r\n            }\r\n        }\r\n        if (properties.length > 0) {\r\n            var sortedProperties = properties.sort(function (p1, p2) {\r\n                if (p1.sequentialNumber > p2.sequentialNumber) {\r\n                    return 1;\r\n                }\r\n                else if (p1.sequentialNumber < p2.sequentialNumber) {\r\n                    return -1;\r\n                }\r\n                return 0;\r\n            });\r\n            schema.add.apply(schema, sortedProperties);\r\n        }\r\n        if (SerializableObject.onRegisterCustomProperties) {\r\n            SerializableObject.onRegisterCustomProperties(this, schema);\r\n        }\r\n    };\r\n    SerializableObject.prototype.getValue = function (prop) {\r\n        return this._propertyBag.hasOwnProperty(prop.getInternalName())\r\n            ? this._propertyBag[prop.getInternalName()]\r\n            : prop.defaultValue;\r\n    };\r\n    SerializableObject.prototype.setValue = function (prop, value) {\r\n        if (value === undefined || value === null) {\r\n            delete this._propertyBag[prop.getInternalName()];\r\n        }\r\n        else {\r\n            this._propertyBag[prop.getInternalName()] = value;\r\n        }\r\n    };\r\n    SerializableObject.prototype.internalParse = function (source, context) {\r\n        this._propertyBag = {};\r\n        this._rawProperties = shared_1.GlobalSettings.enableFullJsonRoundTrip ? (source ? source : {}) : {};\r\n        if (source) {\r\n            var s = this.getSchema();\r\n            for (var i = 0; i < s.getCount(); i++) {\r\n                var prop = s.getItemAt(i);\r\n                if (prop.isSerializationEnabled) {\r\n                    var propertyValue = prop.onGetInitialValue\r\n                        ? prop.onGetInitialValue(this)\r\n                        : undefined;\r\n                    if (source.hasOwnProperty(prop.name)) {\r\n                        if (prop.targetVersion.compareTo(context.targetVersion) <= 0) {\r\n                            propertyValue = prop.parse(this, source, context);\r\n                        }\r\n                        else {\r\n                            context.logParseEvent(this, Enums.ValidationEvent.UnsupportedProperty, strings_1.Strings.errors.propertyNotSupported(prop.name, prop.targetVersion.toString(), context.targetVersion.toString()));\r\n                        }\r\n                    }\r\n                    this.setValue(prop, propertyValue);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.resetDefaultValues();\r\n        }\r\n    };\r\n    SerializableObject.prototype.internalToJSON = function (target, context) {\r\n        var s = this.getSchema();\r\n        var serializedProperties = [];\r\n        for (var i = 0; i < s.getCount(); i++) {\r\n            var prop = s.getItemAt(i);\r\n            // Avoid serializing the same property multiple times. This is necessary\r\n            // because some property definitions map to the same underlying schema\r\n            // property\r\n            if (prop.isSerializationEnabled &&\r\n                prop.targetVersion.compareTo(context.targetVersion) <= 0 &&\r\n                serializedProperties.indexOf(prop.name) === -1) {\r\n                prop.toJSON(this, target, this.getValue(prop), context);\r\n                serializedProperties.push(prop.name);\r\n            }\r\n        }\r\n    };\r\n    SerializableObject.prototype.shouldSerialize = function (_context) {\r\n        return true;\r\n    };\r\n    SerializableObject.prototype.parse = function (source, context) {\r\n        this.internalParse(source, context ? context : new SimpleSerializationContext());\r\n    };\r\n    SerializableObject.prototype.toJSON = function (context) {\r\n        var effectiveContext;\r\n        if (context && context instanceof BaseSerializationContext) {\r\n            effectiveContext = context;\r\n        }\r\n        else {\r\n            effectiveContext = this.getDefaultSerializationContext();\r\n            effectiveContext.toJSONOriginalParam = context;\r\n        }\r\n        if (this.shouldSerialize(effectiveContext)) {\r\n            var result = void 0;\r\n            if (shared_1.GlobalSettings.enableFullJsonRoundTrip &&\r\n                this._rawProperties &&\r\n                typeof this._rawProperties === \"object\") {\r\n                result = this._rawProperties;\r\n            }\r\n            else {\r\n                result = {};\r\n            }\r\n            this.internalToJSON(result, effectiveContext);\r\n            return result;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    };\r\n    SerializableObject.prototype.hasDefaultValue = function (prop) {\r\n        return this.getValue(prop) === prop.defaultValue;\r\n    };\r\n    SerializableObject.prototype.hasAllDefaultValues = function () {\r\n        var s = this.getSchema();\r\n        for (var i = 0; i < s.getCount(); i++) {\r\n            var prop = s.getItemAt(i);\r\n            if (!this.hasDefaultValue(prop)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    SerializableObject.prototype.resetDefaultValues = function () {\r\n        var s = this.getSchema();\r\n        for (var i = 0; i < s.getCount(); i++) {\r\n            var prop = s.getItemAt(i);\r\n            this.setValue(prop, prop.defaultValue);\r\n        }\r\n    };\r\n    SerializableObject.prototype.setCustomProperty = function (name, value) {\r\n        var shouldDeleteProperty = (typeof value === \"string\" && !value) || value === undefined || value === null;\r\n        if (shouldDeleteProperty) {\r\n            delete this._rawProperties[name];\r\n        }\r\n        else {\r\n            this._rawProperties[name] = value;\r\n        }\r\n    };\r\n    SerializableObject.prototype.getCustomProperty = function (name) {\r\n        return this._rawProperties[name];\r\n    };\r\n    SerializableObject.prototype.getSchema = function () {\r\n        var schema = SerializableObject._schemaCache[this.getSchemaKey()];\r\n        if (!schema) {\r\n            schema = new SerializableObjectSchema();\r\n            this.populateSchema(schema);\r\n            SerializableObject._schemaCache[this.getSchemaKey()] = schema;\r\n        }\r\n        return schema;\r\n    };\r\n    SerializableObject.defaultMaxVersion = Versions.latest;\r\n    SerializableObject._schemaCache = {};\r\n    return SerializableObject;\r\n}());\r\nexports.SerializableObject = SerializableObject;\r\n//# sourceMappingURL=serialization.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UUID = exports.SizeAndUnit = exports.PaddingDefinition = exports.SpacingDefinition = exports.StringWithSubstitutions = exports.ContentTypes = exports.GlobalSettings = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar Enums = require(\"./enums\");\r\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class\r\nvar GlobalSettings = /** @class */ (function () {\r\n    function GlobalSettings() {\r\n    }\r\n    GlobalSettings.useAdvancedTextBlockTruncation = true;\r\n    GlobalSettings.useAdvancedCardBottomTruncation = false;\r\n    GlobalSettings.useMarkdownInRadioButtonAndCheckbox = true;\r\n    GlobalSettings.allowMarkForTextHighlighting = false;\r\n    GlobalSettings.alwaysBleedSeparators = false;\r\n    GlobalSettings.enableFullJsonRoundTrip = false;\r\n    GlobalSettings.displayInputValidationErrors = true;\r\n    GlobalSettings.allowPreProcessingPropertyValues = false;\r\n    GlobalSettings.setTabIndexAtCardRoot = true;\r\n    GlobalSettings.enableFallback = true;\r\n    GlobalSettings.useWebkitLineClamp = true;\r\n    GlobalSettings.allowMoreThanMaxActionsInOverflowMenu = false;\r\n    GlobalSettings.removePaddingFromContainersWithBackgroundImage = false;\r\n    GlobalSettings.resetInputsDirtyStateAfterActionExecution = true;\r\n    GlobalSettings.applets = {\r\n        logEnabled: true,\r\n        logLevel: Enums.LogLevel.Error,\r\n        maximumRetryAttempts: 3,\r\n        defaultTimeBetweenRetryAttempts: 3000,\r\n        authPromptWidth: 400,\r\n        authPromptHeight: 600,\r\n        refresh: {\r\n            mode: Enums.RefreshMode.Manual,\r\n            timeBetweenAutomaticRefreshes: 3000,\r\n            maximumConsecutiveAutomaticRefreshes: 3,\r\n            allowManualRefreshesAfterAutomaticRefreshes: true\r\n        }\r\n    };\r\n    return GlobalSettings;\r\n}());\r\nexports.GlobalSettings = GlobalSettings;\r\nexports.ContentTypes = {\r\n    applicationJson: \"application/json\",\r\n    applicationXWwwFormUrlencoded: \"application/x-www-form-urlencoded\"\r\n};\r\nvar StringWithSubstitutions = /** @class */ (function () {\r\n    function StringWithSubstitutions() {\r\n        this._isProcessed = false;\r\n    }\r\n    StringWithSubstitutions.prototype.getReferencedInputs = function (inputs, referencedInputs) {\r\n        if (!referencedInputs) {\r\n            throw new Error(\"The referencedInputs parameter cannot be null.\");\r\n        }\r\n        if (this._original) {\r\n            for (var _i = 0, inputs_1 = inputs; _i < inputs_1.length; _i++) {\r\n                var input = inputs_1[_i];\r\n                var matches = new RegExp(\"\\\\{{2}(\" + input.id + \").value\\\\}{2}\", \"gi\").exec(this._original);\r\n                if (matches != null && input.id) {\r\n                    referencedInputs[input.id] = input;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    StringWithSubstitutions.prototype.substituteInputValues = function (inputs, contentType) {\r\n        this._processed = this._original;\r\n        if (this._original) {\r\n            var regEx = /\\{{2}([a-z0-9_$@]+).value\\}{2}/gi;\r\n            var matches = void 0;\r\n            while ((matches = regEx.exec(this._original)) !== null && this._processed) {\r\n                for (var _i = 0, _a = Object.keys(inputs); _i < _a.length; _i++) {\r\n                    var key = _a[_i];\r\n                    if (key.toLowerCase() === matches[1].toLowerCase()) {\r\n                        var matchedInput = inputs[key];\r\n                        var valueForReplace = \"\";\r\n                        if (matchedInput.value) {\r\n                            valueForReplace = matchedInput.value;\r\n                        }\r\n                        if (contentType === exports.ContentTypes.applicationJson) {\r\n                            valueForReplace = JSON.stringify(valueForReplace);\r\n                            valueForReplace = valueForReplace.slice(1, -1);\r\n                        }\r\n                        else if (contentType === exports.ContentTypes.applicationXWwwFormUrlencoded) {\r\n                            valueForReplace = encodeURIComponent(valueForReplace);\r\n                        }\r\n                        this._processed = this._processed.replace(matches[0], valueForReplace);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this._isProcessed = true;\r\n    };\r\n    StringWithSubstitutions.prototype.getOriginal = function () {\r\n        return this._original;\r\n    };\r\n    StringWithSubstitutions.prototype.get = function () {\r\n        if (!this._isProcessed) {\r\n            return this._original;\r\n        }\r\n        else {\r\n            return this._processed;\r\n        }\r\n    };\r\n    StringWithSubstitutions.prototype.set = function (value) {\r\n        this._original = value;\r\n        this._isProcessed = false;\r\n    };\r\n    return StringWithSubstitutions;\r\n}());\r\nexports.StringWithSubstitutions = StringWithSubstitutions;\r\nvar SpacingDefinition = /** @class */ (function () {\r\n    function SpacingDefinition(top, right, bottom, left) {\r\n        if (top === void 0) { top = 0; }\r\n        if (right === void 0) { right = 0; }\r\n        if (bottom === void 0) { bottom = 0; }\r\n        if (left === void 0) { left = 0; }\r\n        this.left = 0;\r\n        this.top = 0;\r\n        this.right = 0;\r\n        this.bottom = 0;\r\n        this.top = top;\r\n        this.right = right;\r\n        this.bottom = bottom;\r\n        this.left = left;\r\n    }\r\n    return SpacingDefinition;\r\n}());\r\nexports.SpacingDefinition = SpacingDefinition;\r\nvar PaddingDefinition = /** @class */ (function () {\r\n    function PaddingDefinition(top, right, bottom, left) {\r\n        if (top === void 0) { top = Enums.Spacing.None; }\r\n        if (right === void 0) { right = Enums.Spacing.None; }\r\n        if (bottom === void 0) { bottom = Enums.Spacing.None; }\r\n        if (left === void 0) { left = Enums.Spacing.None; }\r\n        this.top = Enums.Spacing.None;\r\n        this.right = Enums.Spacing.None;\r\n        this.bottom = Enums.Spacing.None;\r\n        this.left = Enums.Spacing.None;\r\n        this.top = top;\r\n        this.right = right;\r\n        this.bottom = bottom;\r\n        this.left = left;\r\n    }\r\n    return PaddingDefinition;\r\n}());\r\nexports.PaddingDefinition = PaddingDefinition;\r\nvar SizeAndUnit = /** @class */ (function () {\r\n    function SizeAndUnit(physicalSize, unit) {\r\n        this.physicalSize = physicalSize;\r\n        this.unit = unit;\r\n    }\r\n    SizeAndUnit.parse = function (input, requireUnitSpecifier) {\r\n        if (requireUnitSpecifier === void 0) { requireUnitSpecifier = false; }\r\n        var result = new SizeAndUnit(0, Enums.SizeUnit.Weight);\r\n        if (typeof input === \"number\") {\r\n            result.physicalSize = input;\r\n            return result;\r\n        }\r\n        else if (typeof input === \"string\") {\r\n            var regExp = /^([0-9]+)(px|\\*)?$/g;\r\n            var matches = regExp.exec(input);\r\n            var expectedMatchCount = requireUnitSpecifier ? 3 : 2;\r\n            if (matches && matches.length >= expectedMatchCount) {\r\n                result.physicalSize = parseInt(matches[1]);\r\n                if (matches.length === 3) {\r\n                    if (matches[2] === \"px\") {\r\n                        result.unit = Enums.SizeUnit.Pixel;\r\n                    }\r\n                }\r\n                return result;\r\n            }\r\n        }\r\n        throw new Error(\"Invalid size: \" + input);\r\n    };\r\n    return SizeAndUnit;\r\n}());\r\nexports.SizeAndUnit = SizeAndUnit;\r\n/**\r\n * Fast UUID generator, RFC4122 version 4 compliant.\r\n * @author Jeff Ward (jcward.com).\r\n * @license MIT license\r\n * @link http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\r\n **/\r\n/* eslint-disable @typescript-eslint/no-extraneous-class, @typescript-eslint/naming-convention, no-bitwise */\r\nvar UUID = /** @class */ (function () {\r\n    function UUID() {\r\n    }\r\n    UUID.generate = function () {\r\n        var d0 = (Math.random() * 0xffffffff) | 0;\r\n        var d1 = (Math.random() * 0xffffffff) | 0;\r\n        var d2 = (Math.random() * 0xffffffff) | 0;\r\n        var d3 = (Math.random() * 0xffffffff) | 0;\r\n        return (UUID.lut[d0 & 0xff] +\r\n            UUID.lut[(d0 >> 8) & 0xff] +\r\n            UUID.lut[(d0 >> 16) & 0xff] +\r\n            UUID.lut[(d0 >> 24) & 0xff] +\r\n            \"-\" +\r\n            UUID.lut[d1 & 0xff] +\r\n            UUID.lut[(d1 >> 8) & 0xff] +\r\n            \"-\" +\r\n            UUID.lut[((d1 >> 16) & 0x0f) | 0x40] +\r\n            UUID.lut[(d1 >> 24) & 0xff] +\r\n            \"-\" +\r\n            UUID.lut[(d2 & 0x3f) | 0x80] +\r\n            UUID.lut[(d2 >> 8) & 0xff] +\r\n            \"-\" +\r\n            UUID.lut[(d2 >> 16) & 0xff] +\r\n            UUID.lut[(d2 >> 24) & 0xff] +\r\n            UUID.lut[d3 & 0xff] +\r\n            UUID.lut[(d3 >> 8) & 0xff] +\r\n            UUID.lut[(d3 >> 16) & 0xff] +\r\n            UUID.lut[(d3 >> 24) & 0xff]);\r\n    };\r\n    UUID.initialize = function () {\r\n        for (var i = 0; i < 256; i++) {\r\n            UUID.lut[i] = (i < 16 ? \"0\" : \"\") + i.toString(16);\r\n        }\r\n    };\r\n    UUID.lut = [];\r\n    return UUID;\r\n}());\r\nexports.UUID = UUID;\r\nUUID.initialize();\r\n/* eslint-enable @typescript-eslint/no-extraneous-class, @typescript-eslint/naming-convention, no-bitwise */\r\n//# sourceMappingURL=shared.js.map","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Strings = void 0;\r\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class\r\nvar Strings = /** @class */ (function () {\r\n    function Strings() {\r\n    }\r\n    Strings.errors = {\r\n        unknownElementType: function (typeName) {\r\n            return \"Unknown element type \\\"\".concat(typeName, \"\\\". Fallback will be used if present.\");\r\n        },\r\n        unknownActionType: function (typeName) {\r\n            return \"Unknown action type \\\"\".concat(typeName, \"\\\". Fallback will be used if present.\");\r\n        },\r\n        elementTypeNotAllowed: function (typeName) {\r\n            return \"Element type \\\"\".concat(typeName, \"\\\" is not allowed in this context.\");\r\n        },\r\n        actionTypeNotAllowed: function (typeName) {\r\n            return \"Action type \\\"\".concat(typeName, \"\\\" is not allowed in this context.\");\r\n        },\r\n        invalidPropertyValue: function (value, propertyName) {\r\n            return \"Invalid value \\\"\".concat(value, \"\\\" for property \\\"\").concat(propertyName, \"\\\".\");\r\n        },\r\n        showCardMustHaveCard: function () {\r\n            return \"\\\"An Action.ShowCard must have its \\\"card\\\" property set to a valid AdaptiveCard object.\";\r\n        },\r\n        invalidColumnWidth: function (invalidWidth) {\r\n            return \"Invalid column width \\\"\".concat(invalidWidth, \"\\\" - defaulting to \\\"auto\\\".\");\r\n        },\r\n        invalidCardVersion: function (defaultingToVersion) {\r\n            return \"Invalid card version. Defaulting to \\\"\".concat(defaultingToVersion, \"\\\".\");\r\n        },\r\n        invalidVersionString: function (versionString) {\r\n            return \"Invalid version string \\\"\".concat(versionString, \"\\\".\");\r\n        },\r\n        propertyValueNotSupported: function (value, propertyName, supportedInVersion, versionUsed) {\r\n            return \"Value \\\"\".concat(value, \"\\\" for property \\\"\").concat(propertyName, \"\\\" is supported in version \").concat(supportedInVersion, \", but you are using version \").concat(versionUsed, \".\");\r\n        },\r\n        propertyNotSupported: function (propertyName, supportedInVersion, versionUsed) {\r\n            return \"Property \\\"\".concat(propertyName, \"\\\" is supported in version \").concat(supportedInVersion, \", but you are using version \").concat(versionUsed, \".\");\r\n        },\r\n        indexOutOfRange: function (index) { return \"Index out of range (\".concat(index, \").\"); },\r\n        elementCannotBeUsedAsInline: function () {\r\n            return \"RichTextBlock.addInline: the specified card element cannot be used as a RichTextBlock inline.\";\r\n        },\r\n        inlineAlreadyParented: function () {\r\n            return \"RichTextBlock.addInline: the specified inline already belongs to another RichTextBlock.\";\r\n        },\r\n        interactivityNotAllowed: function () { return \"Interactivity is not allowed.\"; },\r\n        inputsMustHaveUniqueId: function () { return \"All inputs must have a unique Id.\"; },\r\n        choiceSetMustHaveAtLeastOneChoice: function () {\r\n            return \"An Input.ChoiceSet must have at least one choice defined.\";\r\n        },\r\n        choiceSetChoicesMustHaveTitleAndValue: function () {\r\n            return \"All choices in an Input.ChoiceSet must have their title and value properties set.\";\r\n        },\r\n        propertyMustBeSet: function (propertyName) { return \"Property \\\"\".concat(propertyName, \"\\\" must be set.\"); },\r\n        actionHttpHeadersMustHaveNameAndValue: function () {\r\n            return \"All headers of an Action.Http must have their name and value properties set.\";\r\n        },\r\n        tooManyActions: function (maximumActions) {\r\n            return \"Maximum number of actions exceeded (\".concat(maximumActions, \").\");\r\n        },\r\n        tooLittleTimeDelay: function (minAutoplayDelay) {\r\n            return \"Autoplay Delay is too short (\".concat(minAutoplayDelay, \").\");\r\n        },\r\n        columnAlreadyBelongsToAnotherSet: function () { return \"This column already belongs to another ColumnSet.\"; },\r\n        invalidCardType: function () {\r\n            return \"Invalid or missing card type. Make sure the card's type property is set to \\\"AdaptiveCard\\\".\";\r\n        },\r\n        unsupportedCardVersion: function (version, maxSupportedVersion) {\r\n            return \"The specified card version (\".concat(version, \") is not supported or still in preview. The latest released card version is \").concat(maxSupportedVersion, \".\");\r\n        },\r\n        duplicateId: function (id) { return \"Duplicate Id \\\"\".concat(id, \"\\\".\"); },\r\n        markdownProcessingNotEnabled: function () {\r\n            return \"Markdown processing isn't enabled. Please see https://www.npmjs.com/package/adaptivecards#supporting-markdown\";\r\n        },\r\n        processMarkdownEventRemoved: function () {\r\n            return \"The processMarkdown event has been removed. Please update your code and set onProcessMarkdown instead.\";\r\n        },\r\n        elementAlreadyParented: function () { return \"The element already belongs to another container.\"; },\r\n        actionAlreadyParented: function () { return \"The action already belongs to another element.\"; },\r\n        elementTypeNotStandalone: function (typeName) {\r\n            return \"Elements of type \".concat(typeName, \" cannot be used as standalone elements.\");\r\n        }\r\n    };\r\n    Strings.magicCodeInputCard = {\r\n        tryAgain: function () { return \"That didn't work... let's try again.\"; },\r\n        pleaseLogin: function () {\r\n            return 'Please login in the popup. You will obtain a magic code. Paste that code below and select \"Submit\"';\r\n        },\r\n        enterMagicCode: function () { return \"Enter magic code\"; },\r\n        pleaseEnterMagicCodeYouReceived: function () { return \"Please enter the magic code you received.\"; },\r\n        submit: function () { return \"Submit\"; },\r\n        cancel: function () { return \"Cancel\"; },\r\n        somethingWentWrong: function () { return \"Something went wrong. This action can't be handled.\"; },\r\n        authenticationFailed: function () { return \"Authentication failed.\"; }\r\n    };\r\n    Strings.runtime = {\r\n        automaticRefreshPaused: function () { return \"Automatic refresh paused.\"; },\r\n        clckToRestartAutomaticRefresh: function () { return \"Click to restart.\"; },\r\n        refreshThisCard: function () { return \"Refresh this card\"; }\r\n    };\r\n    Strings.hints = {\r\n        dontUseWeightedAndStrecthedColumnsInSameSet: function () {\r\n            return \"It is not recommended to use weighted and stretched columns in the same ColumnSet, because in such a situation stretched columns will always get the minimum amount of space.\";\r\n        }\r\n    };\r\n    Strings.defaults = {\r\n        inlineActionTitle: function () { return \"Inline Action\"; },\r\n        overflowButtonText: function () { return \"...\"; },\r\n        mediaPlayerAriaLabel: function () { return \"Media content\"; },\r\n        mediaPlayerPlayMedia: function () { return \"Play media\"; },\r\n        youTubeVideoPlayer: function () { return \"YouTube video player\"; },\r\n        vimeoVideoPlayer: function () { return \"Vimeo video player\"; },\r\n        dailymotionVideoPlayer: function () { return \"Dailymotion video player\"; }\r\n    };\r\n    return Strings;\r\n}());\r\nexports.Strings = Strings;\r\n//# sourceMappingURL=strings.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Table = exports.TableRow = exports.TableCell = exports.StylableContainer = exports.TableColumnDefinition = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar card_elements_1 = require(\"./card-elements\");\r\nvar enums_1 = require(\"./enums\");\r\nvar registry_1 = require(\"./registry\");\r\nvar serialization_1 = require(\"./serialization\");\r\nvar shared_1 = require(\"./shared\");\r\nvar strings_1 = require(\"./strings\");\r\nvar utils_1 = require(\"./utils\");\r\nvar TableColumnDefinition = /** @class */ (function (_super) {\r\n    __extends(TableColumnDefinition, _super);\r\n    function TableColumnDefinition() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.width = new shared_1.SizeAndUnit(1, enums_1.SizeUnit.Weight);\r\n        return _this;\r\n    }\r\n    TableColumnDefinition.prototype.getSchemaKey = function () {\r\n        return \"ColumnDefinition\";\r\n    };\r\n    TableColumnDefinition.horizontalCellContentAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_5, \"horizontalCellContentAlignment\", enums_1.HorizontalAlignment);\r\n    TableColumnDefinition.verticalCellContentAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_5, \"verticalCellContentAlignment\", enums_1.VerticalAlignment);\r\n    TableColumnDefinition.widthProperty = new serialization_1.CustomProperty(serialization_1.Versions.v1_5, \"width\", function (sender, prop, source, context) {\r\n        var result = prop.defaultValue;\r\n        var value = source[prop.name];\r\n        var invalidWidth = false;\r\n        if (typeof value === \"number\" && !isNaN(value)) {\r\n            result = new shared_1.SizeAndUnit(value, enums_1.SizeUnit.Weight);\r\n        }\r\n        else if (typeof value === \"string\") {\r\n            try {\r\n                result = shared_1.SizeAndUnit.parse(value);\r\n            }\r\n            catch (e) {\r\n                invalidWidth = true;\r\n            }\r\n        }\r\n        else {\r\n            invalidWidth = true;\r\n        }\r\n        if (invalidWidth) {\r\n            context.logParseEvent(sender, enums_1.ValidationEvent.InvalidPropertyValue, strings_1.Strings.errors.invalidColumnWidth(value));\r\n        }\r\n        return result;\r\n    }, function (sender, property, target, value, context) {\r\n        if (value.unit === enums_1.SizeUnit.Pixel) {\r\n            context.serializeValue(target, \"width\", value.physicalSize + \"px\");\r\n        }\r\n        else {\r\n            context.serializeNumber(target, \"width\", value.physicalSize);\r\n        }\r\n    }, new shared_1.SizeAndUnit(1, enums_1.SizeUnit.Weight));\r\n    __decorate([\r\n        (0, serialization_1.property)(TableColumnDefinition.horizontalCellContentAlignmentProperty)\r\n    ], TableColumnDefinition.prototype, \"horizontalCellContentAlignment\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(TableColumnDefinition.verticalCellContentAlignmentProperty)\r\n    ], TableColumnDefinition.prototype, \"verticalCellContentAlignment\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(TableColumnDefinition.widthProperty)\r\n    ], TableColumnDefinition.prototype, \"width\", void 0);\r\n    return TableColumnDefinition;\r\n}(serialization_1.SerializableObject));\r\nexports.TableColumnDefinition = TableColumnDefinition;\r\nvar StylableContainer = /** @class */ (function (_super) {\r\n    __extends(StylableContainer, _super);\r\n    function StylableContainer() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._items = [];\r\n        return _this;\r\n    }\r\n    StylableContainer.prototype.parseItem = function (source, context) {\r\n        var _this = this;\r\n        return context.parseCardObject(this, source, [], // Forbidden types not supported for elements for now\r\n        !this.isDesignMode(), function (typeName) {\r\n            return _this.createItemInstance(typeName);\r\n        }, function (typeName, _errorType) {\r\n            context.logParseEvent(undefined, enums_1.ValidationEvent.ElementTypeNotAllowed, strings_1.Strings.errors.elementTypeNotAllowed(typeName));\r\n        });\r\n    };\r\n    StylableContainer.prototype.internalAddItem = function (item) {\r\n        if (!item.parent) {\r\n            this._items.push(item);\r\n            item.setParent(this);\r\n        }\r\n        else {\r\n            throw new Error(strings_1.Strings.errors.elementAlreadyParented());\r\n        }\r\n    };\r\n    StylableContainer.prototype.internalRemoveItem = function (item) {\r\n        var itemIndex = this._items.indexOf(item);\r\n        if (itemIndex >= 0) {\r\n            this._items.splice(itemIndex, 1);\r\n            item.setParent(undefined);\r\n            this.updateLayout();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    StylableContainer.prototype.internalIndexOf = function (item) {\r\n        return this._items.indexOf(item);\r\n    };\r\n    StylableContainer.prototype.internalParse = function (source, context) {\r\n        _super.prototype.internalParse.call(this, source, context);\r\n        this._items = [];\r\n        var items = source[this.getCollectionPropertyName()];\r\n        if (Array.isArray(items)) {\r\n            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\r\n                var item = items_1[_i];\r\n                var instance = this.parseItem(item, context);\r\n                if (instance) {\r\n                    this._items.push(instance);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    StylableContainer.prototype.internalToJSON = function (target, context) {\r\n        _super.prototype.internalToJSON.call(this, target, context);\r\n        context.serializeArray(target, this.getCollectionPropertyName(), this._items);\r\n    };\r\n    StylableContainer.prototype.removeItem = function (item) {\r\n        return this.internalRemoveItem(item);\r\n    };\r\n    StylableContainer.prototype.getItemCount = function () {\r\n        return this._items.length;\r\n    };\r\n    StylableContainer.prototype.getItemAt = function (index) {\r\n        return this._items[index];\r\n    };\r\n    StylableContainer.prototype.getFirstVisibleRenderedItem = function () {\r\n        return this.getItemCount() > 0 ? this.getItemAt(0) : undefined;\r\n    };\r\n    StylableContainer.prototype.getLastVisibleRenderedItem = function () {\r\n        return this.getItemCount() > 0 ? this.getItemAt(this.getItemCount() - 1) : undefined;\r\n    };\r\n    return StylableContainer;\r\n}(card_elements_1.StylableCardElementContainer));\r\nexports.StylableContainer = StylableContainer;\r\nvar TableCell = /** @class */ (function (_super) {\r\n    __extends(TableCell, _super);\r\n    function TableCell() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._columnIndex = -1;\r\n        _this._cellType = \"data\";\r\n        return _this;\r\n    }\r\n    TableCell.prototype.getHasBorder = function () {\r\n        return this.parentRow.parentTable.showGridLines;\r\n    };\r\n    TableCell.prototype.applyBorder = function () {\r\n        if (this.renderedElement && this.getHasBorder()) {\r\n            var styleDefinition = this.hostConfig.containerStyles.getStyleByName(this.parentRow.parentTable.gridStyle);\r\n            if (styleDefinition.borderColor) {\r\n                var borderColor = (0, utils_1.stringToCssColor)(styleDefinition.borderColor);\r\n                if (borderColor) {\r\n                    this.renderedElement.style.borderRight = \"1px solid \" + borderColor;\r\n                    this.renderedElement.style.borderBottom = \"1px solid \" + borderColor;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    TableCell.prototype.getDefaultPadding = function () {\r\n        return this.getHasBackground() || this.getHasBorder()\r\n            ? new shared_1.PaddingDefinition(enums_1.Spacing.Small, enums_1.Spacing.Small, enums_1.Spacing.Small, enums_1.Spacing.Small)\r\n            : _super.prototype.getDefaultPadding.call(this);\r\n    };\r\n    TableCell.prototype.internalRender = function () {\r\n        var cellElement = _super.prototype.internalRender.call(this);\r\n        if (cellElement) {\r\n            cellElement.setAttribute(\"role\", this.cellType === \"data\" ? \"cell\" : \"columnheader\");\r\n            cellElement.style.minWidth = \"0\";\r\n            if (this.cellType === \"header\") {\r\n                cellElement.setAttribute(\"scope\", \"col\");\r\n            }\r\n        }\r\n        return cellElement;\r\n    };\r\n    TableCell.prototype.shouldSerialize = function (_context) {\r\n        return true;\r\n    };\r\n    TableCell.prototype.getJsonTypeName = function () {\r\n        return \"TableCell\";\r\n    };\r\n    TableCell.prototype.getEffectiveTextStyleDefinition = function () {\r\n        if (this.cellType === \"header\") {\r\n            return this.hostConfig.textStyles.columnHeader;\r\n        }\r\n        return _super.prototype.getEffectiveTextStyleDefinition.call(this);\r\n    };\r\n    TableCell.prototype.getEffectiveHorizontalAlignment = function () {\r\n        if (this.horizontalAlignment !== undefined) {\r\n            return this.horizontalAlignment;\r\n        }\r\n        if (this.parentRow.horizontalCellContentAlignment !== undefined) {\r\n            return this.parentRow.horizontalCellContentAlignment;\r\n        }\r\n        if (this.columnIndex >= 0) {\r\n            var horizontalAlignment = this.parentRow.parentTable.getColumnAt(this.columnIndex).horizontalCellContentAlignment;\r\n            if (horizontalAlignment !== undefined) {\r\n                return horizontalAlignment;\r\n            }\r\n        }\r\n        if (this.parentRow.parentTable.horizontalCellContentAlignment !== undefined) {\r\n            return this.parentRow.parentTable.horizontalCellContentAlignment;\r\n        }\r\n        return _super.prototype.getEffectiveHorizontalAlignment.call(this);\r\n    };\r\n    TableCell.prototype.getEffectiveVerticalContentAlignment = function () {\r\n        if (this.verticalContentAlignment !== undefined) {\r\n            return this.verticalContentAlignment;\r\n        }\r\n        if (this.parentRow.verticalCellContentAlignment !== undefined) {\r\n            return this.parentRow.verticalCellContentAlignment;\r\n        }\r\n        if (this.columnIndex >= 0) {\r\n            var verticalAlignment = this.parentRow.parentTable.getColumnAt(this.columnIndex).verticalCellContentAlignment;\r\n            if (verticalAlignment !== undefined) {\r\n                return verticalAlignment;\r\n            }\r\n        }\r\n        if (this.parentRow.parentTable.verticalCellContentAlignment !== undefined) {\r\n            return this.parentRow.parentTable.verticalCellContentAlignment;\r\n        }\r\n        return _super.prototype.getEffectiveVerticalContentAlignment.call(this);\r\n    };\r\n    Object.defineProperty(TableCell.prototype, \"columnIndex\", {\r\n        get: function () {\r\n            return this._columnIndex;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TableCell.prototype, \"cellType\", {\r\n        get: function () {\r\n            return this._cellType;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TableCell.prototype, \"parentRow\", {\r\n        get: function () {\r\n            return this.parent;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TableCell.prototype, \"isStandalone\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return TableCell;\r\n}(card_elements_1.Container));\r\nexports.TableCell = TableCell;\r\nvar TableRow = /** @class */ (function (_super) {\r\n    __extends(TableRow, _super);\r\n    function TableRow() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    //#endregion\r\n    TableRow.prototype.getDefaultPadding = function () {\r\n        return new shared_1.PaddingDefinition(enums_1.Spacing.None, enums_1.Spacing.None, enums_1.Spacing.None, enums_1.Spacing.None);\r\n    };\r\n    TableRow.prototype.applyBackground = function () {\r\n        if (this.renderedElement) {\r\n            var styleDefinition = this.hostConfig.containerStyles.getStyleByName(this.style, this.hostConfig.containerStyles.getStyleByName(this.defaultStyle));\r\n            if (styleDefinition.backgroundColor) {\r\n                var bgColor = (0, utils_1.stringToCssColor)(styleDefinition.backgroundColor);\r\n                if (bgColor) {\r\n                    this.renderedElement.style.backgroundColor = bgColor;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    TableRow.prototype.getCollectionPropertyName = function () {\r\n        return \"cells\";\r\n    };\r\n    TableRow.prototype.createItemInstance = function (typeName) {\r\n        return !typeName || typeName === \"TableCell\" ? new TableCell() : undefined;\r\n    };\r\n    TableRow.prototype.internalRender = function () {\r\n        var isFirstRow = this.getIsFirstRow();\r\n        var cellSpacing = this.hostConfig.table.cellSpacing;\r\n        var rowElement = document.createElement(\"div\");\r\n        rowElement.setAttribute(\"role\", \"row\");\r\n        rowElement.style.display = \"flex\";\r\n        rowElement.style.flexDirection = \"row\";\r\n        for (var i = 0; i < Math.min(this.getItemCount(), this.parentTable.getColumnCount()); i++) {\r\n            var cell = this.getItemAt(i);\r\n            // Cheating a bit in order to keep cellType read-only\r\n            cell[\"_columnIndex\"] = i;\r\n            cell[\"_cellType\"] =\r\n                this.parentTable.firstRowAsHeaders && isFirstRow ? \"header\" : \"data\";\r\n            var renderedCell = cell.render();\r\n            if (renderedCell) {\r\n                var column = this.parentTable.getColumnAt(i);\r\n                if (column.computedWidth.unit === enums_1.SizeUnit.Pixel) {\r\n                    renderedCell.style.flex = \"0 0 \" + column.computedWidth.physicalSize + \"px\";\r\n                }\r\n                else {\r\n                    renderedCell.style.flex = \"1 1 \" + column.computedWidth.physicalSize + \"%\";\r\n                }\r\n                if (i > 0 && !this.parentTable.showGridLines && cellSpacing > 0) {\r\n                    renderedCell.style.marginLeft = cellSpacing + \"px\";\r\n                }\r\n                rowElement.appendChild(renderedCell);\r\n            }\r\n        }\r\n        return rowElement.children.length > 0 ? rowElement : undefined;\r\n    };\r\n    TableRow.prototype.shouldSerialize = function (_context) {\r\n        return true;\r\n    };\r\n    TableRow.prototype.addCell = function (cell) {\r\n        this.internalAddItem(cell);\r\n    };\r\n    TableRow.prototype.removeCellAt = function (columnIndex) {\r\n        if (columnIndex >= 0 && columnIndex < this.getItemCount()) {\r\n            return this.removeItem(this.getItemAt(columnIndex));\r\n        }\r\n        return false;\r\n    };\r\n    TableRow.prototype.indexOf = function (cardElement) {\r\n        return cardElement instanceof TableCell ? this.internalIndexOf(cardElement) : -1;\r\n    };\r\n    TableRow.prototype.ensureHasEnoughCells = function (cellCount) {\r\n        while (this.getItemCount() < cellCount) {\r\n            this.addCell(new TableCell());\r\n        }\r\n    };\r\n    TableRow.prototype.getJsonTypeName = function () {\r\n        return \"TableRow\";\r\n    };\r\n    TableRow.prototype.getIsFirstRow = function () {\r\n        return this.parentTable.getItemAt(0) === this;\r\n    };\r\n    Object.defineProperty(TableRow.prototype, \"parentTable\", {\r\n        get: function () {\r\n            return this.parent;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TableRow.prototype, \"isStandalone\", {\r\n        get: function () {\r\n            return false;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#region Schema\r\n    TableRow.styleProperty = new card_elements_1.ContainerStyleProperty(serialization_1.Versions.v1_5, \"style\");\r\n    TableRow.horizontalCellContentAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_5, \"horizontalCellContentAlignment\", enums_1.HorizontalAlignment);\r\n    TableRow.verticalCellContentAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_5, \"verticalCellContentAlignment\", enums_1.VerticalAlignment);\r\n    __decorate([\r\n        (0, serialization_1.property)(TableRow.horizontalCellContentAlignmentProperty)\r\n    ], TableRow.prototype, \"horizontalCellContentAlignment\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(TableRow.verticalCellContentAlignmentProperty)\r\n    ], TableRow.prototype, \"verticalCellContentAlignment\", void 0);\r\n    return TableRow;\r\n}(StylableContainer));\r\nexports.TableRow = TableRow;\r\nvar Table = /** @class */ (function (_super) {\r\n    __extends(Table, _super);\r\n    function Table() {\r\n        //#region Schema\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._columns = [];\r\n        _this.firstRowAsHeaders = true;\r\n        _this.showGridLines = true;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Table.prototype, \"gridStyle\", {\r\n        get: function () {\r\n            var style = this.getValue(Table.gridStyleProperty);\r\n            if (style && this.hostConfig.containerStyles.getStyleByName(style)) {\r\n                return style;\r\n            }\r\n            return undefined;\r\n        },\r\n        set: function (value) {\r\n            this.setValue(Table.gridStyleProperty, value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    //#endregion\r\n    Table.prototype.ensureRowsHaveEnoughCells = function () {\r\n        for (var i = 0; i < this.getItemCount(); i++) {\r\n            this.getItemAt(i).ensureHasEnoughCells(this.getColumnCount());\r\n        }\r\n    };\r\n    Table.prototype.removeCellsFromColumn = function (columnIndex) {\r\n        for (var i = 0; i < this.getItemCount(); i++) {\r\n            this.getItemAt(i).removeCellAt(columnIndex);\r\n        }\r\n    };\r\n    Table.prototype.getCollectionPropertyName = function () {\r\n        return \"rows\";\r\n    };\r\n    Table.prototype.createItemInstance = function (typeName) {\r\n        return !typeName || typeName === \"TableRow\" ? new TableRow() : undefined;\r\n    };\r\n    Table.prototype.internalParse = function (source, context) {\r\n        _super.prototype.internalParse.call(this, source, context);\r\n        this.ensureRowsHaveEnoughCells();\r\n    };\r\n    Table.prototype.internalRender = function () {\r\n        if (this.getItemCount() > 0) {\r\n            var totalWeights = 0;\r\n            for (var _i = 0, _a = this._columns; _i < _a.length; _i++) {\r\n                var column = _a[_i];\r\n                if (column.width.unit === enums_1.SizeUnit.Weight) {\r\n                    totalWeights += column.width.physicalSize;\r\n                }\r\n            }\r\n            for (var _b = 0, _c = this._columns; _b < _c.length; _b++) {\r\n                var column = _c[_b];\r\n                if (column.width.unit === enums_1.SizeUnit.Pixel) {\r\n                    column.computedWidth = new shared_1.SizeAndUnit(column.width.physicalSize, enums_1.SizeUnit.Pixel);\r\n                }\r\n                else {\r\n                    column.computedWidth = new shared_1.SizeAndUnit((100 / totalWeights) * column.width.physicalSize, enums_1.SizeUnit.Weight);\r\n                }\r\n            }\r\n            var tableElement = document.createElement(\"div\");\r\n            tableElement.setAttribute(\"role\", \"table\");\r\n            tableElement.style.display = \"flex\";\r\n            tableElement.style.flexDirection = \"column\";\r\n            if (this.showGridLines) {\r\n                var styleDefinition = this.hostConfig.containerStyles.getStyleByName(this.gridStyle);\r\n                if (styleDefinition.borderColor) {\r\n                    var borderColor = (0, utils_1.stringToCssColor)(styleDefinition.borderColor);\r\n                    if (borderColor) {\r\n                        tableElement.style.borderTop = \"1px solid \" + borderColor;\r\n                        tableElement.style.borderLeft = \"1px solid \" + borderColor;\r\n                    }\r\n                }\r\n            }\r\n            var cellSpacing = this.hostConfig.table.cellSpacing;\r\n            for (var i = 0; i < this.getItemCount(); i++) {\r\n                var renderedRow = this.getItemAt(i).render();\r\n                if (renderedRow) {\r\n                    if (i > 0 && !this.showGridLines && cellSpacing > 0) {\r\n                        var separatorRow = document.createElement(\"div\");\r\n                        separatorRow.setAttribute(\"aria-hidden\", \"true\");\r\n                        separatorRow.style.height = cellSpacing + \"px\";\r\n                        tableElement.appendChild(separatorRow);\r\n                    }\r\n                    tableElement.appendChild(renderedRow);\r\n                }\r\n            }\r\n            return tableElement;\r\n        }\r\n        return undefined;\r\n    };\r\n    Table.prototype.addColumn = function (column) {\r\n        this._columns.push(column);\r\n        this.ensureRowsHaveEnoughCells();\r\n    };\r\n    Table.prototype.removeColumn = function (column) {\r\n        var index = this._columns.indexOf(column);\r\n        if (index >= 0) {\r\n            this.removeCellsFromColumn(index);\r\n            this._columns.splice(index, 1);\r\n        }\r\n    };\r\n    Table.prototype.getColumnCount = function () {\r\n        return this._columns.length;\r\n    };\r\n    Table.prototype.getColumnAt = function (index) {\r\n        return this._columns[index];\r\n    };\r\n    Table.prototype.addRow = function (row) {\r\n        this.internalAddItem(row);\r\n        row.ensureHasEnoughCells(this.getColumnCount());\r\n    };\r\n    Table.prototype.indexOf = function (cardElement) {\r\n        return cardElement instanceof TableRow ? this.internalIndexOf(cardElement) : -1;\r\n    };\r\n    Table.prototype.getJsonTypeName = function () {\r\n        return \"Table\";\r\n    };\r\n    Table._columnsProperty = new serialization_1.SerializableObjectCollectionProperty(serialization_1.Versions.v1_5, \"columns\", TableColumnDefinition);\r\n    Table.firstRowAsHeadersProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_5, \"firstRowAsHeaders\", true);\r\n    Table.showGridLinesProperty = new serialization_1.BoolProperty(serialization_1.Versions.v1_5, \"showGridLines\", true);\r\n    Table.gridStyleProperty = new card_elements_1.ContainerStyleProperty(serialization_1.Versions.v1_5, \"gridStyle\");\r\n    Table.horizontalCellContentAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_5, \"horizontalCellContentAlignment\", enums_1.HorizontalAlignment);\r\n    Table.verticalCellContentAlignmentProperty = new serialization_1.EnumProperty(serialization_1.Versions.v1_5, \"verticalCellContentAlignment\", enums_1.VerticalAlignment);\r\n    __decorate([\r\n        (0, serialization_1.property)(Table._columnsProperty)\r\n    ], Table.prototype, \"_columns\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Table.firstRowAsHeadersProperty)\r\n    ], Table.prototype, \"firstRowAsHeaders\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Table.showGridLinesProperty)\r\n    ], Table.prototype, \"showGridLines\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Table.gridStyleProperty)\r\n    ], Table.prototype, \"gridStyle\", null);\r\n    __decorate([\r\n        (0, serialization_1.property)(Table.horizontalCellContentAlignmentProperty)\r\n    ], Table.prototype, \"horizontalCellContentAlignment\", void 0);\r\n    __decorate([\r\n        (0, serialization_1.property)(Table.verticalCellContentAlignmentProperty)\r\n    ], Table.prototype, \"verticalCellContentAlignment\", void 0);\r\n    return Table;\r\n}(StylableContainer));\r\nexports.Table = Table;\r\nregistry_1.GlobalRegistry.defaultElements.register(\"Table\", Table, serialization_1.Versions.v1_5);\r\n//# sourceMappingURL=table.js.map","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.formatText = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar AbstractTextFormatter = /** @class */ (function () {\r\n    function AbstractTextFormatter(regularExpression) {\r\n        this._regularExpression = regularExpression;\r\n    }\r\n    AbstractTextFormatter.prototype.format = function (lang, input) {\r\n        var matches;\r\n        if (input) {\r\n            var result = input;\r\n            while ((matches = this._regularExpression.exec(input)) != null) {\r\n                result = result.replace(matches[0], this.internalFormat(lang, matches));\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            return input;\r\n        }\r\n    };\r\n    return AbstractTextFormatter;\r\n}());\r\nvar DateFormatter = /** @class */ (function (_super) {\r\n    __extends(DateFormatter, _super);\r\n    function DateFormatter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    DateFormatter.prototype.internalFormat = function (lang, matches) {\r\n        var date = new Date(Date.parse(matches[1]));\r\n        var format = matches[2] !== undefined ? matches[2].toLowerCase() : \"compact\";\r\n        if (format !== \"compact\") {\r\n            return date.toLocaleDateString(lang, {\r\n                day: \"numeric\",\r\n                weekday: format,\r\n                month: format,\r\n                year: \"numeric\"\r\n            });\r\n        }\r\n        else {\r\n            return date.toLocaleDateString();\r\n        }\r\n    };\r\n    return DateFormatter;\r\n}(AbstractTextFormatter));\r\nvar TimeFormatter = /** @class */ (function (_super) {\r\n    __extends(TimeFormatter, _super);\r\n    function TimeFormatter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    TimeFormatter.prototype.internalFormat = function (lang, matches) {\r\n        var date = new Date(Date.parse(matches[1]));\r\n        return date.toLocaleTimeString(lang, { hour: \"numeric\", minute: \"2-digit\" });\r\n    };\r\n    return TimeFormatter;\r\n}(AbstractTextFormatter));\r\nfunction formatText(lang, text) {\r\n    var formatters = [\r\n        new DateFormatter(/\\{{2}DATE\\((\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(?:Z|(?:(?:-|\\+)\\d{2}:\\d{2})))(?:, ?(COMPACT|LONG|SHORT))?\\)\\}{2}/g),\r\n        new TimeFormatter(/\\{{2}TIME\\((\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(?:Z|(?:(?:-|\\+)\\d{2}:\\d{2})))\\)\\}{2}/g)\r\n    ];\r\n    var result = text;\r\n    for (var _i = 0, formatters_1 = formatters; _i < formatters_1.length; _i++) {\r\n        var formatter = formatters_1[_i];\r\n        result = formatter.format(lang, result);\r\n    }\r\n    return result;\r\n}\r\nexports.formatText = formatText;\r\n//# sourceMappingURL=text-formatters.js.map","\"use strict\";\r\nvar _a;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.clearElementChildren = exports.getScrollY = exports.getScrollX = exports.getFitStatus = exports.truncate = exports.truncateText = exports.stringToCssColor = exports.parseEnum = exports.getEnumValueByName = exports.parseBool = exports.parseNumber = exports.parseString = exports.appendChild = exports.generateUniqueId = exports.isMobileOS = exports.isInternetExplorer = void 0;\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nvar Enums = require(\"./enums\");\r\nvar Shared = require(\"./shared\");\r\nfunction isInternetExplorer() {\r\n    // The documentMode property only exists in IE\r\n    return window.document.documentMode !== undefined;\r\n}\r\nexports.isInternetExplorer = isInternetExplorer;\r\nfunction isMobileOS() {\r\n    var userAgent = window.navigator.userAgent;\r\n    return (!!userAgent.match(/Android/i) || !!userAgent.match(/iPad/i) || !!userAgent.match(/iPhone/i));\r\n}\r\nexports.isMobileOS = isMobileOS;\r\n/**\r\n * Generate a UUID prepended with \"__ac-\"\r\n */\r\nfunction generateUniqueId() {\r\n    return \"__ac-\" + Shared.UUID.generate();\r\n}\r\nexports.generateUniqueId = generateUniqueId;\r\nfunction appendChild(node, child) {\r\n    if (child) {\r\n        node.appendChild(child);\r\n    }\r\n}\r\nexports.appendChild = appendChild;\r\nfunction parseString(obj, defaultValue) {\r\n    return typeof obj === \"string\" ? obj : defaultValue;\r\n}\r\nexports.parseString = parseString;\r\nfunction parseNumber(obj, defaultValue) {\r\n    return typeof obj === \"number\" ? obj : defaultValue;\r\n}\r\nexports.parseNumber = parseNumber;\r\nfunction parseBool(value, defaultValue) {\r\n    if (typeof value === \"boolean\") {\r\n        return value;\r\n    }\r\n    else if (typeof value === \"string\") {\r\n        switch (value.toLowerCase()) {\r\n            case \"true\":\r\n                return true;\r\n            case \"false\":\r\n                return false;\r\n            default:\r\n                return defaultValue;\r\n        }\r\n    }\r\n    return defaultValue;\r\n}\r\nexports.parseBool = parseBool;\r\nfunction getEnumValueByName(enumType, name) {\r\n    // eslint-disable-next-line guard-for-in\r\n    for (var key in enumType) {\r\n        var keyAsNumber = parseInt(key, 10);\r\n        if (keyAsNumber >= 0) {\r\n            var value = enumType[key];\r\n            if (value && typeof value === \"string\" && value.toLowerCase() === name.toLowerCase()) {\r\n                return keyAsNumber;\r\n            }\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nexports.getEnumValueByName = getEnumValueByName;\r\nfunction parseEnum(enumType, name, defaultValue) {\r\n    if (!name) {\r\n        return defaultValue;\r\n    }\r\n    var enumValue = getEnumValueByName(enumType, name);\r\n    return enumValue !== undefined ? enumValue : defaultValue;\r\n}\r\nexports.parseEnum = parseEnum;\r\nfunction stringToCssColor(color) {\r\n    if (color) {\r\n        var regEx = /#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})?/gi;\r\n        var matches = regEx.exec(color);\r\n        if (matches && matches[4]) {\r\n            var a = parseInt(matches[1], 16) / 255;\r\n            var r = parseInt(matches[2], 16);\r\n            var g = parseInt(matches[3], 16);\r\n            var b = parseInt(matches[4], 16);\r\n            return \"rgba(\" + r + \",\" + g + \",\" + b + \",\" + a + \")\";\r\n        }\r\n    }\r\n    return color;\r\n}\r\nexports.stringToCssColor = stringToCssColor;\r\nfunction truncateWorker(element, maxHeight, fullText, truncateAt, lineHeight) {\r\n    var fits = function () {\r\n        // Allow a one pixel overflow to account for rounding differences\r\n        // between browsers\r\n        return maxHeight - element.scrollHeight >= -1.0;\r\n    };\r\n    if (fits()) {\r\n        return;\r\n    }\r\n    var breakableIndices = findBreakableIndices(fullText);\r\n    var lo = 0;\r\n    var hi = breakableIndices.length;\r\n    var bestBreakIdx = 0;\r\n    // Do a binary search for the longest string that fits\r\n    while (lo < hi) {\r\n        var mid = Math.floor((lo + hi) / 2);\r\n        truncateAt(fullText, breakableIndices[mid]);\r\n        if (fits()) {\r\n            bestBreakIdx = breakableIndices[mid];\r\n            lo = mid + 1;\r\n        }\r\n        else {\r\n            hi = mid;\r\n        }\r\n    }\r\n    truncateAt(fullText, bestBreakIdx);\r\n    // If we have extra room, try to expand the string letter by letter\r\n    // (covers the case where we have to break in the middle of a long word)\r\n    if (lineHeight && maxHeight - element.scrollHeight >= lineHeight - 1.0) {\r\n        var idx = findNextCharacter(fullText, bestBreakIdx);\r\n        while (idx < fullText.length) {\r\n            truncateAt(fullText, idx);\r\n            if (fits()) {\r\n                bestBreakIdx = idx;\r\n                idx = findNextCharacter(fullText, idx);\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        truncateAt(fullText, bestBreakIdx);\r\n    }\r\n}\r\nfunction truncateText(element, maxHeight, lineHeight) {\r\n    truncateWorker(element, maxHeight, element.innerText, function (text, idx) {\r\n        element.innerText = text.substring(0, idx) + \"...\";\r\n    }, lineHeight);\r\n}\r\nexports.truncateText = truncateText;\r\n/**\r\n * {@link truncate} has been deprecated and is no longer in use internally. This policy passes\r\n * content through as it always has, which is _supposed_ to be dealing with text only (see {@link\r\n * TextBlock.truncateIfSupported}), but had a bug where it might actually pass through an element\r\n * for which innerHTML yielded actual HTML (since fixed).\r\n */\r\nvar ttDeprecatedPolicy = (typeof window === 'undefined') ? undefined : (_a = window.trustedTypes) === null || _a === void 0 ? void 0 : _a.createPolicy(\"adaptivecards#deprecatedExportedFunctionPolicy\", {\r\n    createHTML: function (value) { return value; }\r\n});\r\n/** @deprecated Use {@link truncateText} instead. */\r\nfunction truncate(element, maxHeight, lineHeight) {\r\n    truncateWorker(element, maxHeight, element.innerHTML, function (text, idx) {\r\n        var _a;\r\n        var truncatedString = text.substring(0, idx) + \"...\";\r\n        var truncatedHTML = (_a = ttDeprecatedPolicy === null || ttDeprecatedPolicy === void 0 ? void 0 : ttDeprecatedPolicy.createHTML(truncatedString)) !== null && _a !== void 0 ? _a : truncatedString;\r\n        element.innerHTML = truncatedHTML;\r\n    }, lineHeight);\r\n}\r\nexports.truncate = truncate;\r\nfunction findBreakableIndices(html) {\r\n    var results = [];\r\n    var idx = findNextCharacter(html, -1);\r\n    while (idx < html.length) {\r\n        if (html[idx] === \" \") {\r\n            results.push(idx);\r\n        }\r\n        idx = findNextCharacter(html, idx);\r\n    }\r\n    return results;\r\n}\r\nfunction findNextCharacter(html, currIdx) {\r\n    currIdx += 1;\r\n    // If we found the start of an HTML tag, keep advancing until we get\r\n    // past it, so we don't end up truncating in the middle of the tag\r\n    while (currIdx < html.length && html[currIdx] === \"<\") {\r\n        while (currIdx < html.length && html[currIdx++] !== \">\") {\r\n            continue;\r\n        }\r\n    }\r\n    return currIdx;\r\n}\r\nfunction getFitStatus(element, containerEnd) {\r\n    var start = element.offsetTop;\r\n    var end = start + element.clientHeight;\r\n    if (end <= containerEnd) {\r\n        return Enums.ContainerFitStatus.FullyInContainer;\r\n    }\r\n    else if (start < containerEnd) {\r\n        return Enums.ContainerFitStatus.Overflowing;\r\n    }\r\n    else {\r\n        return Enums.ContainerFitStatus.FullyOutOfContainer;\r\n    }\r\n}\r\nexports.getFitStatus = getFitStatus;\r\nfunction getScrollX() {\r\n    return window.pageXOffset;\r\n}\r\nexports.getScrollX = getScrollX;\r\nfunction getScrollY() {\r\n    return window.pageYOffset;\r\n}\r\nexports.getScrollY = getScrollY;\r\nfunction clearElementChildren(element) {\r\n    while (element.firstChild) {\r\n        element.removeChild(element.firstChild);\r\n    }\r\n}\r\nexports.clearElementChildren = clearElementChildren;\r\n//# sourceMappingURL=utils.js.map","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","'use strict';\n\n/** Highest positive signed 32-bit float value */\nconst maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\n\n/** Bootstring parameters */\nconst base = 36;\nconst tMin = 1;\nconst tMax = 26;\nconst skew = 38;\nconst damp = 700;\nconst initialBias = 72;\nconst initialN = 128; // 0x80\nconst delimiter = '-'; // '\\x2D'\n\n/** Regular expressions */\nconst regexPunycode = /^xn--/;\nconst regexNonASCII = /[^\\0-\\x7E]/; // non-ASCII chars\nconst regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\n\n/** Error messages */\nconst errors = {\n\t'overflow': 'Overflow: input needs wider integers to process',\n\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t'invalid-input': 'Invalid input'\n};\n\n/** Convenience shortcuts */\nconst baseMinusTMin = base - tMin;\nconst floor = Math.floor;\nconst stringFromCharCode = String.fromCharCode;\n\n/*--------------------------------------------------------------------------*/\n\n/**\n * A generic error utility function.\n * @private\n * @param {String} type The error type.\n * @returns {Error} Throws a `RangeError` with the applicable error message.\n */\nfunction error(type) {\n\tthrow new RangeError(errors[type]);\n}\n\n/**\n * A generic `Array#map` utility function.\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} callback The function that gets called for every array\n * item.\n * @returns {Array} A new array of values returned by the callback function.\n */\nfunction map(array, fn) {\n\tconst result = [];\n\tlet length = array.length;\n\twhile (length--) {\n\t\tresult[length] = fn(array[length]);\n\t}\n\treturn result;\n}\n\n/**\n * A simple `Array#map`-like wrapper to work with domain name strings or email\n * addresses.\n * @private\n * @param {String} domain The domain name or email address.\n * @param {Function} callback The function that gets called for every\n * character.\n * @returns {Array} A new string of characters returned by the callback\n * function.\n */\nfunction mapDomain(string, fn) {\n\tconst parts = string.split('@');\n\tlet result = '';\n\tif (parts.length > 1) {\n\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t// the local part (i.e. everything up to `@`) intact.\n\t\tresult = parts[0] + '@';\n\t\tstring = parts[1];\n\t}\n\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\tstring = string.replace(regexSeparators, '\\x2E');\n\tconst labels = string.split('.');\n\tconst encoded = map(labels, fn).join('.');\n\treturn result + encoded;\n}\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n * @see `punycode.ucs2.encode`\n * @see <https://mathiasbynens.be/notes/javascript-encoding>\n * @memberOf punycode.ucs2\n * @name decode\n * @param {String} string The Unicode input string (UCS-2).\n * @returns {Array} The new array of code points.\n */\nfunction ucs2decode(string) {\n\tconst output = [];\n\tlet counter = 0;\n\tconst length = string.length;\n\twhile (counter < length) {\n\t\tconst value = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// It's a high surrogate, and there is a next character.\n\t\t\tconst extra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // Low surrogate.\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// It's an unmatched surrogate; only append this code unit, in case the\n\t\t\t\t// next code unit is the high surrogate of a surrogate pair.\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n/**\n * Creates a string based on an array of numeric code points.\n * @see `punycode.ucs2.decode`\n * @memberOf punycode.ucs2\n * @name encode\n * @param {Array} codePoints The array of numeric code points.\n * @returns {String} The new Unicode string (UCS-2).\n */\nconst ucs2encode = array => String.fromCodePoint(...array);\n\n/**\n * Converts a basic code point into a digit/integer.\n * @see `digitToBasic()`\n * @private\n * @param {Number} codePoint The basic numeric code point value.\n * @returns {Number} The numeric value of a basic code point (for use in\n * representing integers) in the range `0` to `base - 1`, or `base` if\n * the code point does not represent a value.\n */\nconst basicToDigit = function(codePoint) {\n\tif (codePoint - 0x30 < 0x0A) {\n\t\treturn codePoint - 0x16;\n\t}\n\tif (codePoint - 0x41 < 0x1A) {\n\t\treturn codePoint - 0x41;\n\t}\n\tif (codePoint - 0x61 < 0x1A) {\n\t\treturn codePoint - 0x61;\n\t}\n\treturn base;\n};\n\n/**\n * Converts a digit/integer into a basic code point.\n * @see `basicToDigit()`\n * @private\n * @param {Number} digit The numeric value of a basic code point.\n * @returns {Number} The basic code point whose value (when used for\n * representing integers) is `digit`, which needs to be in the range\n * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n * used; else, the lowercase form is used. The behavior is undefined\n * if `flag` is non-zero and `digit` has no uppercase form.\n */\nconst digitToBasic = function(digit, flag) {\n\t//  0..25 map to ASCII a..z or A..Z\n\t// 26..35 map to ASCII 0..9\n\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n};\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n * @private\n */\nconst adapt = function(delta, numPoints, firstTime) {\n\tlet k = 0;\n\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\tdelta += floor(delta / numPoints);\n\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\tdelta = floor(delta / baseMinusTMin);\n\t}\n\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n};\n\n/**\n * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n * symbols.\n * @memberOf punycode\n * @param {String} input The Punycode string of ASCII-only symbols.\n * @returns {String} The resulting string of Unicode symbols.\n */\nconst decode = function(input) {\n\t// Don't use UCS-2.\n\tconst output = [];\n\tconst inputLength = input.length;\n\tlet i = 0;\n\tlet n = initialN;\n\tlet bias = initialBias;\n\n\t// Handle the basic code points: let `basic` be the number of input code\n\t// points before the last delimiter, or `0` if there is none, then copy\n\t// the first basic code points to the output.\n\n\tlet basic = input.lastIndexOf(delimiter);\n\tif (basic < 0) {\n\t\tbasic = 0;\n\t}\n\n\tfor (let j = 0; j < basic; ++j) {\n\t\t// if it's not a basic code point\n\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\terror('not-basic');\n\t\t}\n\t\toutput.push(input.charCodeAt(j));\n\t}\n\n\t// Main decoding loop: start just after the last delimiter if any basic code\n\t// points were copied; start at the beginning otherwise.\n\n\tfor (let index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t// `index` is the index of the next character to be consumed.\n\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t// which gets added to `i`. The overflow checking is easier\n\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t// value at the end to obtain `delta`.\n\t\tlet oldi = i;\n\t\tfor (let w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\tif (index >= inputLength) {\n\t\t\t\terror('invalid-input');\n\t\t\t}\n\n\t\t\tconst digit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\ti += digit * w;\n\t\t\tconst t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\tif (digit < t) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst baseMinusT = base - t;\n\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tw *= baseMinusT;\n\n\t\t}\n\n\t\tconst out = output.length + 1;\n\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t// incrementing `n` each time, so we'll fix that now:\n\t\tif (floor(i / out) > maxInt - n) {\n\t\t\terror('overflow');\n\t\t}\n\n\t\tn += floor(i / out);\n\t\ti %= out;\n\n\t\t// Insert `n` at position `i` of the output.\n\t\toutput.splice(i++, 0, n);\n\n\t}\n\n\treturn String.fromCodePoint(...output);\n};\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n * @memberOf punycode\n * @param {String} input The string of Unicode symbols.\n * @returns {String} The resulting Punycode string of ASCII-only symbols.\n */\nconst encode = function(input) {\n\tconst output = [];\n\n\t// Convert the input in UCS-2 to an array of Unicode code points.\n\tinput = ucs2decode(input);\n\n\t// Cache the length.\n\tlet inputLength = input.length;\n\n\t// Initialize the state.\n\tlet n = initialN;\n\tlet delta = 0;\n\tlet bias = initialBias;\n\n\t// Handle the basic code points.\n\tfor (const currentValue of input) {\n\t\tif (currentValue < 0x80) {\n\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t}\n\t}\n\n\tlet basicLength = output.length;\n\tlet handledCPCount = basicLength;\n\n\t// `handledCPCount` is the number of code points that have been handled;\n\t// `basicLength` is the number of basic code points.\n\n\t// Finish the basic string with a delimiter unless it's empty.\n\tif (basicLength) {\n\t\toutput.push(delimiter);\n\t}\n\n\t// Main encoding loop:\n\twhile (handledCPCount < inputLength) {\n\n\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t// larger one:\n\t\tlet m = maxInt;\n\t\tfor (const currentValue of input) {\n\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\tm = currentValue;\n\t\t\t}\n\t\t}\n\n\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t// but guard against overflow.\n\t\tconst handledCPCountPlusOne = handledCPCount + 1;\n\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\terror('overflow');\n\t\t}\n\n\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\tn = m;\n\n\t\tfor (const currentValue of input) {\n\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\t\t\tif (currentValue == n) {\n\t\t\t\t// Represent delta as a generalized variable-length integer.\n\t\t\t\tlet q = delta;\n\t\t\t\tfor (let k = base; /* no condition */; k += base) {\n\t\t\t\t\tconst t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tconst qMinusT = q - t;\n\t\t\t\t\tconst baseMinusT = base - t;\n\t\t\t\t\toutput.push(\n\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t);\n\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t}\n\n\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\tdelta = 0;\n\t\t\t\t++handledCPCount;\n\t\t\t}\n\t\t}\n\n\t\t++delta;\n\t\t++n;\n\n\t}\n\treturn output.join('');\n};\n\n/**\n * Converts a Punycode string representing a domain name or an email address\n * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n * it doesn't matter if you call it on a string that has already been\n * converted to Unicode.\n * @memberOf punycode\n * @param {String} input The Punycoded domain name or email address to\n * convert to Unicode.\n * @returns {String} The Unicode representation of the given Punycode\n * string.\n */\nconst toUnicode = function(input) {\n\treturn mapDomain(input, function(string) {\n\t\treturn regexPunycode.test(string)\n\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t: string;\n\t});\n};\n\n/**\n * Converts a Unicode string representing a domain name or an email address to\n * Punycode. Only the non-ASCII parts of the domain name will be converted,\n * i.e. it doesn't matter if you call it with a domain that's already in\n * ASCII.\n * @memberOf punycode\n * @param {String} input The domain name or email address to convert, as a\n * Unicode string.\n * @returns {String} The Punycode representation of the given domain name or\n * email address.\n */\nconst toASCII = function(input) {\n\treturn mapDomain(input, function(string) {\n\t\treturn regexNonASCII.test(string)\n\t\t\t? 'xn--' + encode(string)\n\t\t\t: string;\n\t});\n};\n\n/*--------------------------------------------------------------------------*/\n\n/** Define the public API */\nconst punycode = {\n\t/**\n\t * A string representing the current Punycode.js version number.\n\t * @memberOf punycode\n\t * @type String\n\t */\n\t'version': '2.1.0',\n\t/**\n\t * An object of methods to convert from JavaScript's internal character\n\t * representation (UCS-2) to Unicode code points, and back.\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode\n\t * @type Object\n\t */\n\t'ucs2': {\n\t\t'decode': ucs2decode,\n\t\t'encode': ucs2encode\n\t},\n\t'decode': decode,\n\t'encode': encode,\n\t'toASCII': toASCII,\n\t'toUnicode': toUnicode\n};\n\nexport { ucs2decode, ucs2encode, decode, encode, toASCII, toUnicode };\nexport default punycode;\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport * as AdaptiveCards from 'adaptivecards';\r\nimport React, {\r\n    useContext,\r\n    useCallback,\r\n    useEffect,\r\n    useRef,\r\n    useState,\r\n} from 'react';\r\nimport * as PropTypes from 'prop-types';\r\nimport * as markdown from 'markdown-it';\r\n\r\nexport interface Props {\r\n    payload: object;\r\n    onExecuteAction?: Function;\r\n    onActionSubmit?: Function;\r\n    onActionOpenUrl?: Function;\r\n    onActionShowCard?: Function;\r\n    onError?: Function;\r\n    style?: object;\r\n    hostConfig?: object;\r\n}\r\n\r\nconst propTypes = {\r\n    /** The card schema.  It must comply with the card schema. [More Info](https://docs.microsoft.com/en-us/adaptive-cards/create/cardschema) */\r\n    payload: PropTypes.object.isRequired,\r\n    /** Method that will be invoked anytime a card action is executed. [More Info](https://docs.microsoft.com/en-us/adaptive-cards/display/implementingrenderer#actions) */\r\n    onExecuteAction: PropTypes.func,\r\n    /** Method that will be invoked when a Submit action is executed. [More Info](https://docs.microsoft.com/en-us/adaptive-cards/display/implementingrenderer#actionsubmit) */\r\n    onActionSubmit: PropTypes.func,\r\n    /** Method that will be invoked when an Open Url action is executed. [More Info](https://docs.microsoft.com/en-us/adaptive-cards/display/implementingrenderer#actionopenurl) */\r\n    onActionOpenUrl: PropTypes.func,\r\n    /** Method that will be invoked when a Show Card action is executed. [More Info](https://docs.microsoft.com/en-us/adaptive-cards/display/implementingrenderer#actionshowcard) */\r\n    onActionShowCard: PropTypes.func,\r\n    /** Method that will be invoked if an error is thrown while trying to render a card. */\r\n    onError: PropTypes.func,\r\n    /** JSX styles that will be applied to the card conatiner */\r\n    style: PropTypes.object,\r\n    /** HostConfig. [More Info](https://docs.microsoft.com/en-us/adaptive-cards/rendering-cards/host-config) */\r\n    hostConfig: PropTypes.object,\r\n};\r\n\r\nconst defaultOpenUrlHandler = (action: AdaptiveCards.OpenUrlAction) => {\r\n    window.open(action.url, '_blank');\r\n};\r\n\r\nconst setUpMarkdownIt = () => {\r\n    if (!AdaptiveCards.AdaptiveCard.onProcessMarkdown) {\r\n        AdaptiveCards.AdaptiveCard.onProcessMarkdown = (text, result) => {\r\n            result.outputHtml = new markdown.default().render(text);\r\n            result.didProcess = true;\r\n        };\r\n    }\r\n};\r\n\r\nsetUpMarkdownIt();\r\n\r\nexport const AdaptiveCard = ({\r\n    payload,\r\n    onExecuteAction,\r\n    onActionSubmit,\r\n    onActionOpenUrl,\r\n    onActionShowCard,\r\n    onError,\r\n    style,\r\n    hostConfig,\r\n}: Props) => {\r\n    const [error, setError] = useState<Error>();\r\n    const targetRef = useRef<HTMLDivElement>(null);\r\n    const cardRef = useRef<AdaptiveCards.AdaptiveCard>(\r\n        new AdaptiveCards.AdaptiveCard()\r\n    );\r\n    const executeAction = useCallback(\r\n        (a: AdaptiveCards.Action) => {\r\n            const type = a.getJsonTypeName();\r\n            switch (type) {\r\n                case AdaptiveCards.OpenUrlAction.JsonTypeName: {\r\n                    if (onActionOpenUrl) {\r\n                        onActionOpenUrl(a);\r\n                    } else {\r\n                        defaultOpenUrlHandler(a as AdaptiveCards.OpenUrlAction);\r\n                    }\r\n\r\n                    break;\r\n                }\r\n                case AdaptiveCards.ShowCardAction.JsonTypeName: {\r\n                    if (onActionShowCard) {\r\n                        onActionShowCard(a);\r\n                    }\r\n                    break;\r\n                }\r\n                case AdaptiveCards.SubmitAction.JsonTypeName: {\r\n                    if (onActionSubmit) {\r\n                        onActionSubmit(a);\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n            // TODO: Why is there a global action handler when we have specific\r\n            // handlers for the above cases? Can we simplify to one approach?\r\n            if (onExecuteAction) {\r\n                onExecuteAction(a);\r\n            }\r\n        },\r\n        [onActionOpenUrl, onActionShowCard, onActionSubmit, onExecuteAction]\r\n    );\r\n\r\n    useEffect(() => {\r\n        cardRef.current.onExecuteAction = executeAction;\r\n    }, [executeAction]);\r\n\r\n    useEffect(() => {\r\n        cardRef.current.hostConfig = new AdaptiveCards.HostConfig(hostConfig);\r\n    }, [hostConfig]);\r\n\r\n    useEffect(() => {\r\n        if (!targetRef.current) {\r\n            return;\r\n        }\r\n        const card = cardRef.current;\r\n\r\n        try {\r\n            card.parse(payload);\r\n            const result = card.render() as HTMLElement;\r\n            const trustedHtml = (typeof window === 'undefined') ? \"\" : (window.trustedTypes?.emptyHTML ?? \"\");\r\n            targetRef.current.innerHTML = trustedHtml as string;\r\n            targetRef.current.appendChild(result);\r\n        } catch (cardRenderError) {\r\n            if (onError) {\r\n                onError(cardRenderError);\r\n                setError(cardRenderError);\r\n            }\r\n        }\r\n    }, [hostConfig, payload, onError]);\r\n\r\n    if (error) {\r\n        return <div style={{ color: 'red' }}>{error.message}</div>;\r\n    }\r\n    return <div style={style} ref={targetRef} />;\r\n};\r\n\r\nAdaptiveCard.propTypes = propTypes;\r\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\nexport * from \"./adaptive-card\";\r\nexport * from \"./host-config-context\";\r\n","// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT License.\r\n\r\nimport React, { createContext, FC, useContext } from 'react';\r\nimport { Props, AdaptiveCard } from './adaptive-card'\r\n\r\ninterface HostConfig {\r\n    hostConfig: object;\r\n}\r\n\r\nexport const HostConfigContext = createContext<HostConfig>({ hostConfig: null });\r\n\r\nexport type PropsWithoutHostConfig = Omit<Props, 'hostConfig'>;\r\n\r\nexport const AdaptiveCardUsingHostConfigContext = (props: PropsWithoutHostConfig) => {\r\n    const context = useContext(HostConfigContext);\r\n    return <AdaptiveCard {...props} hostConfig={context.hostConfig} />\r\n}\r\n\r\nexport const ProvidesHostConfigContext: FC<{ hostConfig: object }> = ({ hostConfig, children }) => {\r\n    return <HostConfigContext.Provider value={{ hostConfig }} >{children}</HostConfigContext.Provider>\r\n};\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1024__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(6355);\n"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__1024__","assign","obj","sources","Array","prototype","slice","call","arguments","forEach","source","Object","keys","key","_class","toString","isFunction","escapeRE","str","replace","defaultOptions","fuzzyLink","fuzzyEmail","fuzzyIP","defaultSchemas","validate","text","pos","self","tail","re","http","RegExp","src_auth","src_host_port_strict","src_path","test","match","length","no_http","src_domain","src_domain_root","src_port","src_host_terminator","mailto","src_email_name","src_host_strict","tlds_default","split","compile","__opts__","tlds","__tlds__","untpl","tpl","src_tlds","onCompile","__tlds_replaced__","push","src_xn","join","email_fuzzy","tpl_email_fuzzy","link_fuzzy","tpl_link_fuzzy","link_no_ip_fuzzy","tpl_link_no_ip_fuzzy","host_fuzzy_test","tpl_host_fuzzy_test","aliases","schemaError","name","val","Error","__compiled__","__schemas__","compiled","link","createValidator","normalize","isString","alias","slist","filter","map","schema_test","src_ZPCc","schema_search","pretest","__index__","__text_cache__","resetScanCache","Match","shift","start","end","__last_index__","schema","__schema__","toLowerCase","index","lastIndex","raw","url","createMatch","LinkifyIt","schemas","options","reduce","acc","k","hasOwnProperty","add","definition","set","m","ml","me","len","next","tld_pos","exec","testSchemaAt","search","indexOf","result","list","keepOld","isArray","concat","sort","el","idx","arr","reverse","opts","src_Any","src_Cc","src_Z","src_P","src_ZCc","src_pseudo_letter","src_ip4","src_host","tpl_host_fuzzy","tpl_host_no_ip_fuzzy","tpl_host_fuzzy_strict","tpl_host_port_fuzzy_strict","tpl_host_port_no_ip_fuzzy_strict","open_tag","close_tag","HTML_TAG_RE","HTML_OPEN_CLOSE_TAG_RE","_hasOwnProperty","has","object","isValidEntityCode","c","fromCodePoint","surrogate1","surrogate2","String","fromCharCode","UNESCAPE_MD_RE","UNESCAPE_ALL_RE","DIGITAL_ENTITY_TEST_RE","entities","HTML_ESCAPE_TEST_RE","HTML_ESCAPE_REPLACE_RE","HTML_REPLACEMENTS","replaceUnsafeChar","ch","REGEXP_ESCAPE_RE","UNICODE_PUNCT_RE","lib","mdurl","ucmicro","TypeError","unescapeMd","unescapeAll","escaped","entity","code","charCodeAt","parseInt","replaceEntityPattern","escapeHtml","arrayReplaceAt","src","newElements","isSpace","isWhiteSpace","isMdAsciiPunct","isPunctChar","normalizeReference","trim","toUpperCase","parseLinkLabel","parseLinkDestination","parseLinkTitle","max","level","ok","lines","state","disableNested","found","marker","prevPos","labelEnd","posMax","oldPos","md","inline","skipToken","utils","helpers","Renderer","ParserCore","ParserBlock","ParserInline","punycode","config","default","zero","commonmark","BAD_PROTO_RE","GOOD_DATA_RE","validateLink","RECODE_HOSTNAME_FOR","normalizeLink","parsed","parse","hostname","protocol","toASCII","er","encode","format","normalizeLinkText","toUnicode","decode","defaultChars","MarkdownIt","presetName","block","core","renderer","linkify","configure","presets","components","rules","ruler","enableOnly","rules2","ruler2","enable","ignoreInvalid","chain","missed","disable","use","plugin","args","apply","env","State","process","tokens","render","parseInline","inlineMode","renderInline","Ruler","_rules","i","alt","tokenize","startLine","endLine","getRules","line","hasEmptyLines","maxNesting","skipEmptyLines","sCount","blkIndent","tight","isEmpty","outTokens","lineMax","Core","l","_rules2","cache","pending","pushPending","html","xhtmlOut","breaks","langPrefix","typographer","quotes","highlight","default_rules","code_inline","slf","token","renderAttrs","content","code_block","fence","highlighted","tmpAttrs","tmpToken","info","langName","langAttrs","attrIndex","attrs","image","renderInlineAsText","children","renderToken","hardbreak","softbreak","html_block","html_inline","nextToken","needLf","hidden","nesting","tag","type","__rules__","__cache__","__find__","__compile__","chains","rule","enabled","altName","fn","at","opt","before","beforeName","ruleName","splice","after","afterName","chainName","silent","adjustTab","initial","lastLineEmpty","nextLine","offset","oldBMarks","oldBSCount","oldIndent","oldParentType","oldSCount","oldTShift","spaceAfterMarker","terminate","terminatorRules","isOutdented","oldLineMax","bMarks","tShift","eMarks","bsCount","parentType","markup","last","getLines","params","mem","haveEndMarker","skipChars","skipSpaces","tmp","skipSpacesBack","skipCharsBack","cnt","block_names","HTML_SEQUENCES","lineText","skipBulletListMarker","skipOrderedListMarker","contentStart","indent","indentAfterMarker","isOrdered","itemLines","listLines","listTokIdx","markerCharCode","markerValue","oldListIndent","oldTight","posAfterMarker","prevEmptyEnd","isTerminatingParagraph","listIndent","Number","Math","min","markTightParagraphs","_endLine","destEndPos","destEndLineNo","href","label","res","title","references","Token","StateBlock","s","indent_found","ddIndent","from","begin","keepLastLF","lineIndent","first","queue","lineStart","getLine","substr","escapedSplit","isEscaped","lastPos","current","substring","columns","columnCount","aligns","t","tableLines","tbodyLines","firstCh","secondCh","pop","tok","isLinkClose","j","currentToken","nodes","ln","htmlLinkLevel","fullUrl","urlText","links","blockTokens","NEWLINES_RE","NULL_RE","RARE_RE","SCOPED_ABBR_TEST_RE","SCOPED_ABBR_RE","SCOPED_ABBR","r","p","tm","replaceFn","replace_scoped","inlineTokens","inside_autolink","replace_rare","blkIdx","QUOTE_TEST_RE","QUOTE_RE","replaceAt","process_inlines","thisLevel","item","lastChar","nextChar","isLastPunctChar","isNextPunctChar","isLastWhiteSpace","isNextWhiteSpace","canOpen","canClose","isSingle","stack","openQuote","closeQuote","OUTER","single","StateCore","EMAIL_RE","AUTOLINK_RE","matchStart","matchEnd","openerLength","closerLength","backticksScanned","backticks","processDelimiters","delimiters","closerIdx","openerIdx","closer","opener","minOpenerIdx","newMinOpenerIdx","isOddMatch","lastJump","openersBottom","headerIdx","lastTokenIdx","jumps","close","open","curr","tokens_meta","postProcess","startDelim","endDelim","isStrong","scanned","scanDelims","can_open","can_close","DIGITAL_RE","NAMED_RE","ESCAPED","lc","isLetter","labelStart","ref","parseReference","pmax","ws","StateInline","pendingLevel","_prev_delimiters","token_meta","canSplitWord","count","left_flanking","right_flanking","loneMarkers","isTerminatorChar","meta","attrPush","attrData","attrSet","value","attrGet","attrJoin","decodeCache","string","exclude","getDecodeCache","seq","b1","b2","b3","b4","chr","componentChars","encodeCache","keepEscaped","nextCode","getEncodeCache","encodeURIComponent","slashes","auth","port","pathname","hash","Url","protocolPattern","portPattern","simplePathPattern","unwise","autoEscape","nonHostChars","hostEndingChars","hostnamePartPattern","hostnamePartStart","hostlessProtocol","slashedProtocol","slashesDenoteHost","lowerProto","hec","rest","simplePath","proto","atSign","hostEnd","lastIndexOf","host","parseHost","ipv6Hostname","hostparts","part","newpart","validParts","notHost","bit","unshift","qm","u","Any","Cc","Cf","P","Z","extendStatics","ActivityRequestTrigger","__extends","d","b","setPrototypeOf","__proto__","__","constructor","create","defineProperty","LoginRequestResponse","ErrorResponse","SuccessResponse","ActivityResponse","ActivityRequestError","message","request","_super","rawContent","_this","error","_auth","_i","_a","buttons","button","undefined","URL","signinButton","e","get","tokenExchangeResource","enumerable","configurable","__awaiter","thisArg","_arguments","generator","Promise","resolve","reject","fulfilled","step","rejected","done","then","__generator","body","f","y","g","_","sent","trys","ops","verb","Symbol","iterator","n","v","op","AdaptiveApplet","Enums","Utils","shared_1","activity_request_1","strings_1","card_elements_1","serialization_1","logEvent","optionalParams","GlobalSettings","applets","logEnabled","onLogEvent","LogLevel","Warning","console","warn","log","ActivityRequest","action","trigger","consecutiveRefreshes","attemptNumber","retryAsync","onSend","_allowAutomaticCardUpdate","renderedElement","document","createElement","className","style","position","display","flexDirection","_cardHostElement","_refreshButtonHostElement","appendChild","displayCard","card","clearElementChildren","showManualRefreshButton","refreshAction","onShowManualRefreshButton","renderedRefreshButton","onRenderManualRefreshButton","Strings","runtime","refreshThisCard","refresh","mode","RefreshMode","Automatic","autoRefreshPausedMessage","automaticRefreshPaused","clckToRestartAutomaticRefresh","cardPayload","version","horizontalAlignment","inlines","selectAction","id","AdaptiveCard","SerializationContext","Versions","v1_2","onExecuteAction","internalExecuteAction","removeProperty","createActivityRequest","request_1","sender","internalSendActivityRequestAsync","onPrepareActivityRequest","createMagicCodeInputCard","payload","color","wrap","placeholder","actions","_submitMagicCodeActionId","_cancelMagicCodeAuthActionId","cancelAutomaticRefresh","createSerializationContext","onCreateSerializationContext","internalSetCard","_cardPayload","hostConfig","serializationContext","onCardChanging","_card","authentication","onPrefetchSSOToken","Manual","onInputValueChanged","_input","onCardChanged","maximumConsecutiveAutomaticRefreshes","timeBetweenAutomaticRefreshes","Info","action_1","window","setTimeout","Disabled","allowManualRefreshesAfterAutomaticRefreshes","ExecuteAction","channelAdapter","onAction","createProgressOverlay","_progressOverlay","onCreateProgressOverlay","spinner","width","height","removeProgressOverlay","onRemoveProgressOverlay","removeChild","activityRequestSucceeded","response","parsedContent","onActivityRequestSucceeded","activityRequestFailed","onActivityRequestFailed","defaultTimeBetweenRetryAttempts","showAuthCodeInputDialog","onShowAuthCodeInputDialog","authCodeInputCard","submitMagicCodeAction","SubmitAction","authCode","data","alert","magicCodeInputCard","somethingWentWrong","overlay","_loop_1","this_1","error_1","retryIn_1","attemptOAuth","left","top_1","_b","sendRequestAsync","JSON","_c","maximumRetryAttempts","_reject","onSSOTokenNeeded","onShowSigninPrompt","screenX","outerWidth","authPromptWidth","screenY","outerHeight","authPromptHeight","authenticationFailed","stringify","refreshCard","setCard","__createBinding","o","k2","desc","getOwnPropertyDescriptor","__esModule","writable","__exportStar","__decorate","decorators","target","Reflect","decorate","ContainerWithActions","ColumnSet","Column","Container","BackgroundImage","ContainerBase","StylableCardElementContainer","ContainerStyleProperty","ActionSet","ShowCardAction","HttpAction","HttpHeader","ToggleVisibilityAction","OpenUrlAction","SubmitActionBase","Action","TimeInput","TimeProperty","DateInput","NumberInput","ChoiceSetInput","Choice","ToggleInput","TextInput","Input","Media","YouTubePlayer","DailymotionPlayer","VimeoPlayer","IFrameMediaMediaPlayer","CustomMediaPlayer","HTML5MediaPlayer","MediaPlayer","MediaSource","CaptionSource","ContentSource","ImageSet","CardElementContainer","Image","FactSet","Fact","RichTextBlock","TextRun","TextBlock","BaseTextBlock","ActionProperty","CardElement","renderSeparation","Authentication","TokenExchangeResource","AuthCardButton","RefreshDefinition","RefreshActionProperty","host_config_1","TextFormatters","card_object_1","registry_1","controls_1","clearElement","element","trustedHtml","trustedTypes","emptyHTML","innerHTML","separationDefinition","orientation","spacing","lineThickness","separator","makeCssClassName","Orientation","Horizontal","setAttribute","lineColor","stringToCssColor","paddingTop","marginBottom","borderBottom","paddingLeft","marginRight","borderRight","overflow","flex","_truncatedDueToOverflow","getValue","langProperty","parent","lang","setValue","isVisibleProperty","useAdvancedCardBottomTruncation","undoOverflowTruncation","isVisible","updateRenderedElementVisibility","_renderedElement","raiseElementVisibilityChangedEvent","internalRenderSeparator","renderedSeparator","getEffectiveSpacing","separatorOrientation","alwaysBleedSeparators","parentContainer","getParentContainer","getEffectivePadding","parentPhysicalPadding","paddingDefinitionToSpacingDefinition","marginLeft","right","displayMode","isDesignMode","_defaultRenderedElementDisplayMode","_separatorElement","isFirstElement","hideElementDueToOverflow","visibility","showElementHiddenDueToOverflow","handleOverflow","maxHeight","isHiddenDueToOverflow","handled","truncateOverflow","resetOverflow","sizeChanged","getDefaultSerializationContext","createPlaceholderElement","styleDefinition","getEffectiveStyleDefinition","foregroundCssColor","foregroundColors","subtle","border","padding","minHeight","fontSize","innerText","getJsonTypeName","adjustRenderedElementSize","isDisplayed","offsetHeight","overrideInternalRender","internalRender","applyPadding","separatorElement","isBleeding","PaddingDefinition","getImmediateSurroundingPadding","physicalPadding","_maxHeight","getDefaultPadding","getHasBackground","ignoreBackgroundImages","getHasBorder","getPadding","_padding","setPadding","shouldSerialize","context","elementRegistry","findByName","ContainerStyle","Default","asString","getEffectiveStyle","defaultStyle","containerStyles","getStyleByName","getEffectiveTextStyleDefinition","textStyles","getForbiddenActionTypes","processTop","processRight","processBottom","processLeft","doProcessTop","isTopElement","doProcessRight","isRightMostElement","doProcessBottom","isBottomElement","doProcessLeft","isLeftMostElement","effectivePadding","top","Spacing","None","bottom","getActionCount","getActionAt","errors","indexOutOfRange","indexOfAction","remove","removeItem","customCssSelector","classList","boxSizing","updateLayout","getRootElement","updateActionsEnabledState","_processChildren","allActions_1","getAllActions","updateEnabledState","_cardElement","rootElement","designMode","_element","isLastElement","isAtTheVeryLeft","isAtTheVeryRight","isAtTheVeryTop","isAtTheVeryBottom","isBleedingAtTop","isBleedingAtBottom","getRootObject","currentElement","getAllInputs","processActions","getResourceInformation","getElementById","getActionById","_id","getEffectiveHorizontalAlignment","HorizontalAlignment","Left","_hostConfig","defaultHostConfig","_parent","getElementSingletonBehavior","ElementSingletonBehavior","NotAllowed","StringProperty","v1_1","BoolProperty","separatorProperty","v1_0","heightProperty","ValueSetProperty","horizontalAlignmentProperty","EnumProperty","spacingProperty","property","CardObject","targetVersion","forbiddenActionTypes","parseAction","toJSON","serializeValue","PropertyDefinition","ariaHidden","populateSchema","selectActionProperty","textProperty","setText","getFontSize","fontType","effectiveSize","TextSize","Small","fontSizes","small","Medium","medium","Large","large","ExtraLarge","extraLarge","getColorDefinition","colorSet","TextColor","Accent","accent","Dark","dark","Light","light","Good","good","warning","Attention","attention","init","textDefinition","size","weight","isSubtle","applyStylesTo","targetElement","getFontTypeDefinition","effectiveFontType","fontFamily","fontWeight","colorDefinition","effectiveColor","targetColor","effectiveIsSubtle","effectiveWeight","TextWeight","Lighter","fontWeights","lighter","Bolder","bolder","sizeProperty","weightProperty","colorProperty","isSubtleProperty","fontTypeProperty","FontType","_treatAsPlainText","useMarkdown","restoreOriginalContent","maxLines","_computedLineHeight","originalHtml","_ttRoundtripPolicy","createHTML","_originalInnerHtml","truncateIfSupported","isTextOnly","tagName","truncateText","_processedText","preProcessedText","preProcessPropertyValue","forElementId","labelElement","htmlFor","headingLevel","textBlock","supportsInteractivity","onclick","isEffectivelyEnabled","preventDefault","cancelBubble","execute","setupElementForAccessibility","formattedText","formatText","allowMarkForTextHighlighting","markdownProcessingResult","applyMarkdown","didProcess","outputHtml","markStyle","effectiveStyle","highlightBackgroundColor","highlightForegroundColor","processedHtml","_ttMarkdownPolicy","firstElementChild","HTMLElement","marginTop","textOverflow","lastElementChild","anchors","getElementsByTagName","anchor","raiseAnchorClickedEvent","oncontextmenu","wordWrap","isInternetExplorer","useWebkitLineClamp","webkitBoxOrient","webkitLineClamp","whiteSpace","useAdvancedTextBlockTruncation","Center","textAlign","Right","lineHeights","lineHeight","processChildren","wrapProperty","maxLinesProperty","NumProperty","styleProperty","v1_5","createPolicy","italic","strikethrough","underline","getHref","fontStyle","textDecoration","backgroundColor","highlightColors","italicProperty","strikethroughProperty","highlightProperty","underlineProperty","v1_3","_inlines","internalAddInline","forceAdd","isInline","elementCannotBeUsedAsInline","inlineAlreadyParented","setParent","internalParse","jsonInline","textRun","parseElement","internalToJSON","jsonInlines","renderedInlines","renderedInline","getInlineCount","getInlineAt","addInline","removeInline","getSchemaKey","titleProperty","valueProperty","SerializableObject","facts","borderWidth","borderSpacing","borderStyle","borderCollapse","trElement","factSet","tdElement","maxWidth","verticalAlign","factsProperty","SerializableObjectCollectionProperty","ImageDimensionProperty","internalName","fallbackProperty","getInternalName","sourceValue","defaultValue","isValid","SizeAndUnit","unit","SizeUnit","Pixel","physicalSize","isValidValue","logParseEvent","ValidationEvent","InvalidPropertyValue","invalidPropertyValue","isNaN","Size","Auto","ImageStyle","applySize","pixelWidth","pixelHeight","imageSizes","Stretch","alignItems","justifyContent","imageElement","onload","_e","raiseImageLoadedEvent","onerror","errorElement","minWidth","onkeypress","Person","borderRadius","backgroundPosition","backgroundRepeat","urlProperty","altTextProperty","mimeType","backgroundColorProperty","pixelWidthProperty","pixelHeightProperty","allowVerticalOverflow","isSelectable","isElementAllowed","isInteractive","SpacingDefinition","paddingRight","paddingBottom","forbiddenChildElements","releaseDOMResources","getItemCount","getItemAt","internalValidateProperties","addFailure","InteractivityNotAllowed","interactivityNotAllowed","elementTypeNotAllowed","_selectAction","overflowX","overflowY","findDOMNodeOwner","node","_images","imageSize","ImageSize","flexWrap","imageSet","maxImageHeight","renderedImage","margin","getFirstVisibleRenderedItem","getLastVisibleRenderedItem","itemIndex","addImage","cardElement","imagesProperty","imageSizeProperty","mimeTypeProperty","kind","labelProperty","v1_6","play","_posterUrl","owner","_selectedSources","_captionSources","processSources","_selectedMediaType","mimeComponents","supportedMediaTypes","captionSources","canPlay","fetchVideoDetails","_mediaElement","altText","defaults","mediaPlayerAriaLabel","autoplay","controls","isMobileOS","muted","preload","renderedSource","captionSource","renderedCaptionSource","matches","iFrameTitle","_videoId","container","iFrame","getEmbedVideoUrl","frameBorder","allow","allowFullscreen","oEmbedUrl","json","fetch","posterUrl","videoId","apiUrl","_startTimeIndex","createMediaPlayer","customMediaPlayers","provider","_d","_f","urlPatterns","handlePlayButtonInvoke","event","media","allowInlinePlayback","mediaPlayerElement","_mediaPlayer","focus","onPlay","displayPoster","posterRootElement_1","posterImageElement_1","playButtonOuterElement","playButtonInnerElement","playButtonContainer","poster","defaultPoster","parentNode","tabIndex","mediaPlayerPlayMedia","playButtonArrowWidth","playButtonArrowHeight","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopColor","borderRightColor","borderBottomColor","transform","mediaSource","selectedMediaType","youTubeVideoPlayer","vimeoVideoPlayer","dailymotionVideoPlayer","sourcesProperty","captionSourcesProperty","posterProperty","getAllLabelIds","labelIds","labelledBy","_renderedLabelElement","_renderedErrorMessageElement","updateInputControlAriaLabelledBy","_renderedInputControlElement","removeAttribute","_inputControlContainerElement","_outerContainerElement","renderedInputControlId","generateUniqueId","labelRichTextBlock","labelInline","isRequired","inputs","requiredInputs","isRequiredCueInline","suffix","suffixColor","optionalInputs","inputSpacing","isNullable","resetDirtyState","valueChanged","input","onInputValueChangedHandler","resetValidationFailureCue","onValueChanged","renderedInputControlElement","showValidationErrorMessage","errorMessage","displayInputValidationErrors","errorMessageTextBlock","isDirty","_oldValue","PropertyCantBeNull","inputsMustHaveUniqueId","RequiredInputsShouldHaveLabel","RequiredInputsShouldHaveErrorMessage","validateValue","isSet","isRequiredProperty","errorMessageProperty","isMultiline","InputTextStyle","Text","setupInput","maxLength","oninput","ctrlKey","inlineAction","Password","renderedInputControl","button_1","iconUrl","icon_1","textContent","inlineActionTitle","inputControlContainerElement","regex","maxLengthProperty","isMultilineProperty","placeholderProperty","Tel","Email","inlineActionProperty","regexProperty","valueOn","valueOff","_checkboxInputElement","joinedLabelIds","_checkboxInputLabelElement","checked","_oldCheckboxValue","onchange","useMarkdownInRadioButtonAndCheckbox","spacerElement","valueOnProperty","valueOffProperty","isMultiSelect","choices","getUniqueCategoryName","uniqueCategoryName","_uniqueCategoryCounter","internalApplyAriaCurrent","_selectElement","option","selected","renderCompoundInput","cssClassName","defaultValues","_toggleInputs","_labels","choice","_uniqueCategoryName","compoundInput","choiceSetInputValueSeparator","inputContainer","_textInput","dataList","append","placeholderOption","disabled","CollectionCantBeEmpty","choiceSetMustHaveAtLeastOneChoice","choiceSetChoicesMustHaveTitleAndValue","toggleInput","selectedIndex","choicesProperty","isMultiSelectProperty","_numberInputElement","valueAsNumber","minProperty","maxProperty","_dateInputElement","valueAsDate","Date","minDate","maxDate","prop","CustomProperty","convertTimeStringToDate","timeString","_timeInputElement","ActionStyle","ActionMode","Primary","_state","_isFocusable","renderButtonContent","titleElement","iconPlacement","ActionIconPlacement","AboveTitle","allowTitleToWrap","iconElement","iconSize","updateCssClasses","parentContainerStyle","isFocusable","Positive","makeCssClassNames","internalGetReferencedInputs","internalPrepareForExecution","_inputs","internalValidateInputs","referencedInputs","actionRegistry","raiseExecuteActionEvent","onExecuteActionHandler","onExecute","prepareForExecution","internalAfterExecute","rootObject","getAriaRole","promoteTooltipToLabel","HTMLButtonElement","tooltip","targetAriaAttribute","buttonElement","_actionCollection","actionExecuted","getReferencedInputs","invalidInputs","removeAction","validateInputs","isEnabled","iconUrlProperty","Destructive","modeProperty","Secondary","tooltipProperty","isEnabledProperty","disabledUnlessAssociatedInputsChange","_isPrepared","_areReferencedInputsDirty","associatedInputs","inputs_1","_originalData","_processedData","resetInputsDirtyStateAfterActionExecution","resetReferencedInputsDirtyState","dataProperty","associatedInputsProperty","disabledUnlessAssociatedInputsChangeProperty","JsonTypeName","verbProperty","v1_4","propertyMustBeSet","targetElements","updateAriaControlsAttribute","elementIds","elementId","addTargetElement","removeTargetElement","targetElementsProperty","parseBool","serializeArray","StringWithSubstitutionProperty","StringWithSubstitutions","parseString","getOriginal","_value","substituteInputValues","ContentTypes","applicationXWwwFormUrlencoded","newValue","nameProperty","_ignoreInputValidation","allInputs","_url","headers","_body","contentType","applicationJson","header","actionHttpHeadersMustHaveNameAndValue","bodyProperty","methodProperty","headersProperty","ignoreInputValidationProperty","InlineAdaptiveCard","effectiveHostConfig","jsonCard","showCardMustHaveCard","showCard","actionMode","ShowCardActionMode","Popup","OverflowAction","_actions","overflowButtonText","getActions","onDisplayOverflowActionMenuHandler","onDisplayOverflowActionMenu","contextMenu_1","PopupMenu","_loop_2","menuItem","MenuItem","onClick","actionToExecute","closePopup","items","popup","ActionCollection","_items","_renderedActions","_owner","isActionAllowed","forbiddenTypes","forbiddenTypes_1","forbiddenType","refreshContainer","_actionCardContainer","_actionCard","renderedActionCount","inlineTopMargin","layoutChanged","showActionCard","suppressStyle","raiseEvent","renderedCard","_expandedAction","raiseInlineCardExpandedEvent","collapseExpandedAction","previouslyExpandedAction","expandShowCardAction","afterSelectedAction","renderedAction","actionsOrientation","onblur","Inline","clear","source_1","jsonAction","forbiddenActions","getForbiddenActionNames","addAction","propertyName","validateProperties","maxActions","TooManyActions","tooManyActions","ActionTypeNotAllowed","actionTypeNotAllowed","preExpandSingleShowCardAction","buttonStrip","actionAlignment","ActionAlignment","allowedActions","bind","primaryActions_1","secondaryActions_1","overflowPrimaryActions","allowMoreThanMaxActionsInOverflowMenu","shouldRenderOverflowActionButton","_overflowAction","isRootAction","isAtRootLevelActions","onRenderOverflowActionsHandler","onRenderOverflowActions","raiseRenderOverflowActionsEvent","buttonSpacing","spacer","buttonStripContainer","actionAlreadyParented","expandedAction","actionIndex","orientationProperty","onGetInitialValue","Emphasis","allowCustomStyle","applyBorder","applyBackground","bgColor","surroundingPadding","currentElementHasBackgroundImage","backgroundImage","hasExplicitStyle","Padding","explicitStyle","_bleed","minPixelHeight","getHasExpandedAction","getBleed","setBleed","alwaysAllowBleed","bleedProperty","minHeightProperty","PixelSizeProperty","resetDefaultValues","fillMode","FillMode","Repeat","RepeatHorizontally","RepeatVertically","Cover","backgroundSize","backgroundPositionX","verticalAlignment","VerticalAlignment","Top","backgroundPositionY","Bottom","fillModeProperty","verticalAlignmentProperty","_renderedItems","backgroundImageProperty","insertItemAt","forceInsert","elementAlreadyParented","isStandalone","elementTypeNotStandalone","getItemsCollectionPropertyName","applyRTL","rtl","dir","getEffectiveVerticalContentAlignment","renderedItem","placeholderElement","boundary_1","offsetTop","handleElement_1","elt","getFitStatus","ContainerFitStatus","FullyInContainer","Overflowing","containerMaxHeight","FullyOutOfContainer","canHostSingletons","setShouldFallback","jsonItems","typeName","registration","singletonBehavior","jsonItems_1","collectionPropertyName","Only","removePaddingFromContainersWithBackgroundImage","verticalContentAlignment","isRtl","firstRenderedItem","lastRenderedItem","addItem","insertItemBefore","insertBefore","insertItemAfter","insertAfter","SerializableObjectProperty","verticalContentAlignmentProperty","rtlProperty","_computedWeight","_context","Vertical","widthProperty","invalidWidth","compareTo","Weight","invalidColumnWidth","serializeNumber","_columns","createColumnInstance","parseCardObject","_errorType","ElementTypeNotAllowed","_renderedColumns","totalWeight","column","computedWeight","renderedColumn","jsonColumns","jsonColumns_1","getColumnAt","weightedColumns","stretchedColumns","Hint","hints","dontUseWeightedAndStrecthedColumnsInSameSet","addColumn","columnAlreadyBelongsToAnotherSet","onImageLoadedHandler","onImageLoaded","ev","onAnchorClickedHandler","onAnchorClicked","isExpanded","onInlineCardExpandedHandler","onInlineCardExpanded","shouldUpdateLayout","onElementVisibilityChangedHandler","onElementVisibilityChanged","parseActions","renderedActions","renderIfEmpty","actionProperty","userIdsProperty","StringArrayProperty","typeProperty","imageProperty","idProperty","uriProperty","providerIdProperty","connectionNameProperty","buttonsProperty","tokenExchangeResourceProperty","refreshProperty","processMarkdownEventRemoved","onProcessMarkdown","markdownit","markdownIt","_haveWarnedAboutNoMarkdownProcessing","markdownProcessingNotEnabled","isVersionSupported","bypassVersionCheck","maxVersion","major","minor","_fallbackCard","fallbackElement","versionProperty","adaptiveCard","typeNameProperty","MissingCardType","invalidCardType","UnsupportedCardVersion","unsupportedCardVersion","shouldFallback","setTabIndexAtCardRoot","speak","schemaUrl","$schemaProperty","Version","latest","invalidCardVersion","fallbackTextProperty","speakProperty","authenticationProperty","_forbiddenTypes","Set","internalParseCardObject","allowFallback","createInstanceCallback","parsingSingletonObject","oldForbiddenTypes_1","ignoreForbiddenType","TypeErrorType","ForbiddenType","tryToFallback","enableFallback","UnknownType","fallback","cardObjectParsed","onParseAction","onParseElement","forbiddenTypeNames","_parsingSingletonObject","createInstance","errorType","UnknownElementType","unknownElementType","UnknownActionType","unknownActionType","_elementRegistry","GlobalRegistry","elements","setElementRegistry","_actionRegistry","setActionRegistry","BaseSerializationContext","defaultElements","register","defaultActions","ValidationResults","host_capabilities_1","allIds","validationEvents","cardObject","phase","ValidationPhase","Validation","_shouldFallback","requiresProperty","contains","propertyValue","allowPreProcessingPropertyValues","currentObject","onPreProcessPropertyValue","requires","areAllMet","hostCapabilities","DuplicateId","duplicateId","HostCapabilities","ChannelAdapter","Collection","onItemAdded","onItemRemoved","Constants","tab","enter","escape","space","up","down","delete","constants_1","_isEnabled","click","onmouseup","onkeydown","PopupControl","_isOpen","keyDown","_rootElementBounds","renderContent","_popupElement","_overlayElement","documentElement","scrollWidth","scrollHeight","onfocus","rootElementBounds","getBoundingClientRect","addEventListener","rootElementLabel","getAttribute","popupElementBounds","availableSpaceBelow","innerHeight","availableSpaceAbove","availableSpaceRight","innerWidth","availableSpaceLeft","getScrollX","actualPopupHeight","getScrollY","actualPopupWidth","wasCancelled","onClose","collection_1","_selectedIndex","selectedItemIndex","_capabilities","name_1","jsonVersion","addCapability","removeCapability","hasCapability","capabilityName","HostConfig","FontTypeSet","FontTypeDefinition","ContainerStyleSet","ContainerStyleDefinition","ColorSetDefinition","ActionsConfig","ShowCardActionConfig","FactSetConfig","FactTitleDefinition","FactTextDefinition","InputConfig","InputLabelConfig","RequiredInputLabelTextDefinition","TextBlockConfig","TextStyleSet","TextStyleDefinition","BaseTextDefinition","TableConfig","MediaConfig","ImageSetConfig","AdaptiveCardConfig","TextColorDefinition","ColorDefinition","Shared","parseHostConfigEnum","targetEnum","parsedValue","parseEnum","defaultColor","subtleColor","parseNumber","cellSpacing","getDefaultWeight","heading","columnHeader","LeftOfTitle","sizeAndUnit","parseSingleColor","borderColor","BuiltInContainerStyleDefinition","_allStyles","customStyleArray","customStyleArray_1","customStyle","styleName","isBuiltIn","emphasis","customStyles","monospace","getStyleDefinition","Monospace","table","_legacyFontType","fontTypes","paddingDefinition","classNames","classNames_1","cssClassNamePrefix","CardObjectRegistry","copyTo","keys_1","typeRegistration","objectType","schemaVersion","registrationInfo","unregister","populateWithDefaultElements","registry","populateWithDefaultActions","_elements","reset","SerializableObjectSchema","isVersionLessOrEqual","_isValid","_major","_minor","_label","versionString","_versionString","invalidVersionString","otherVersion","getAllDeclaredVersions","ctor","properties","v1","v2","_validationEvents","forceDeleteIfNullOrDefault","enableFullJsonRoundTrip","serializeString","serializeBool","serializeEnum","enumType","propertyValue_1","serializedItem","clearEvents","Parse","getEventAt","SimpleSerializationContext","isSerializationEnabled","sequentialNumber","_sequentialNumber","treatEmptyAsUndefined","regEx","sourceValue_1","values","versionedValue","propertyValueNotSupported","invalidValue","ToJSON","_values","keyAsNumber","enumValue","getEnumValueByName","nullable","serializedValue","hasAllDefaultValues","sourceCollection","sourceCollection_1","sourceItem","onParse","onToJSON","_properties","properties_1","properties_2","getCount","propertyKey","descriptor","_propertyBag","_rawProperties","defaultMaxVersion","getSchema","sortedProperties","p1","p2","onRegisterCustomProperties","UnsupportedProperty","propertyNotSupported","serializedProperties","effectiveContext","toJSONOriginalParam","hasDefaultValue","setCustomProperty","getCustomProperty","_schemaCache","UUID","logLevel","_isProcessed","_original","_processed","matchedInput","valueForReplace","requireUnitSpecifier","expectedMatchCount","generate","d0","random","d1","d2","d3","lut","initialize","defaultingToVersion","supportedInVersion","versionUsed","maximumActions","tooLittleTimeDelay","minAutoplayDelay","maxSupportedVersion","tryAgain","pleaseLogin","enterMagicCode","pleaseEnterMagicCodeYouReceived","submit","cancel","Table","TableRow","TableCell","StylableContainer","TableColumnDefinition","enums_1","utils_1","horizontalCellContentAlignmentProperty","verticalCellContentAlignmentProperty","parseItem","createItemInstance","internalAddItem","internalRemoveItem","internalIndexOf","getCollectionPropertyName","items_1","instance","_columnIndex","_cellType","parentRow","parentTable","showGridLines","gridStyle","cellElement","cellType","horizontalCellContentAlignment","columnIndex","verticalCellContentAlignment","isFirstRow","getIsFirstRow","rowElement","getColumnCount","cell","firstRowAsHeaders","renderedCell","computedWidth","addCell","removeCellAt","ensureHasEnoughCells","cellCount","gridStyleProperty","ensureRowsHaveEnoughCells","removeCellsFromColumn","totalWeights","tableElement","borderTop","borderLeft","renderedRow","separatorRow","removeColumn","addRow","row","_columnsProperty","firstRowAsHeadersProperty","showGridLinesProperty","AbstractTextFormatter","regularExpression","_regularExpression","internalFormat","DateFormatter","date","toLocaleDateString","day","weekday","month","year","TimeFormatter","toLocaleTimeString","hour","minute","formatters_1","truncate","truncateWorker","fullText","truncateAt","fits","breakableIndices","results","findNextCharacter","findBreakableIndices","lo","hi","bestBreakIdx","mid","floor","documentMode","userAgent","navigator","child","a","ttDeprecatedPolicy","currIdx","truncatedString","truncatedHTML","containerEnd","clientHeight","pageXOffset","pageYOffset","firstChild","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","props","propName","componentName","location","propFullName","secret","err","getShim","ReactPropTypes","array","bool","func","number","symbol","any","arrayOf","elementType","instanceOf","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","maxInt","base","regexPunycode","regexNonASCII","regexSeparators","stringFromCharCode","RangeError","mapDomain","parts","encoded","ucs2decode","output","counter","extra","ucs2encode","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","baseMinusTMin","inputLength","bias","basic","oldi","w","codePoint","baseMinusT","out","currentValue","basicLength","handledCPCount","handledCPCountPlusOne","q","qMinusT","propTypes","onActionSubmit","onActionOpenUrl","onActionShowCard","onError","AdaptiveCards","markdown","useState","setError","targetRef","useRef","cardRef","executeAction","useCallback","useEffect","cardRenderError","HostConfigContext","createContext","AdaptiveCardUsingHostConfigContext","useContext","ProvidesHostConfigContext","Provider","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","toStringTag"],"sourceRoot":""}